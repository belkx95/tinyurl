"use strict";(self.webpackChunktinyurl=self.webpackChunktinyurl||[]).push([[179],{2011:(ot,De,F)=>{F.d(De,{Dh:()=>he,GT:()=>me,cc:()=>Ae,hO:()=>qe,on:()=>W,pX:()=>ee,xv:()=>le});var m=F(5e3),Q=F(127),O=F(5813);ot=F.hmd(ot);const ae=["ngOnDestroy"],ee=(Ce,nt,Ke,Te={})=>new Proxy(Ce,{get:(we,Ee)=>Ke.runOutsideAngular(()=>{var $e;if(Ce[Ee])return(null===($e=null==Te?void 0:Te.spy)||void 0===$e?void 0:$e.get)&&Te.spy.get(Ee,Ce[Ee]),Ce[Ee];if(ae.indexOf(Ee)>-1)return()=>{};const je=nt.toPromise().then(ne=>{const K=ne&&ne[Ee];return"function"==typeof K?K.bind(ne):K&&K.then?K.then(re=>Ke.run(()=>re)):Ke.run(()=>K)});return new Proxy(()=>{},{get:(ne,K)=>je[K],apply:(ne,K,re)=>je.then(_e=>{var ie;const Pe=_e&&_e(...re);return(null===(ie=null==Te?void 0:Te.spy)||void 0===ie?void 0:ie.apply)&&Te.spy.apply(Ee,re,Pe),Pe})})})}),me=(Ce,nt)=>{nt.forEach(Ke=>{Object.getOwnPropertyNames(Ke.prototype||Ke).forEach(Te=>{Object.defineProperty(Ce.prototype,Te,Object.getOwnPropertyDescriptor(Ke.prototype||Ke,Te))})})};class se{constructor(nt){return nt}}const he=new m.OlP("angularfire2.app.options"),le=new m.OlP("angularfire2.app.name");function W(Ce,nt,Ke){const we="object"==typeof Ke&&Ke||{};we.name=we.name||"string"==typeof Ke&&Ke||"[DEFAULT]";const $e=Q.Z.apps.filter(je=>je&&je.name===we.name)[0]||nt.runOutsideAngular(()=>Q.Z.initializeApp(Ce,we));try{JSON.stringify(Ce)!==JSON.stringify($e.options)&&G("error",`${$e.name} Firebase App already initialized with different options${ot.hot?", you may need to reload as Firebase is not HMR aware.":"."}`)}catch(je){}return new se($e)}const G=(Ce,...nt)=>{(0,m.X6Q)()&&"undefined"!=typeof console&&console[Ce](...nt)},X={provide:se,useFactory:W,deps:[he,m.R0b,[new m.FiY,le]]};let qe=(()=>{class Ce{constructor(Ke){Q.Z.registerVersion("angularfire",O.q4.full,"core"),Q.Z.registerVersion("angularfire",O.q4.full,"app-compat"),Q.Z.registerVersion("angular",m.q4F.full,Ke.toString())}static initializeApp(Ke,Te){return{ngModule:Ce,providers:[{provide:he,useValue:Ke},{provide:le,useValue:Te}]}}}return Ce.\u0275fac=function(Ke){return new(Ke||Ce)(m.LFG(m.Lbi))},Ce.\u0275mod=m.oAB({type:Ce}),Ce.\u0275inj=m.cJS({providers:[X]}),Ce})();function Ae(Ce,nt,Ke,Te,we){const[,Ee,$e]=globalThis.\u0275AngularfireInstanceCache.find(je=>je[0]===Ce)||[];if(Ee)return function Oe(Ce,nt){try{return Ce.toString()===nt.toString()}catch(Ke){return Ce===nt}}(we,$e)||(pe("error",`${nt} was already initialized on the ${Ke} Firebase App with different settings.${Ve?" You may need to reload as Firebase is not HMR aware.":""}`),pe("warn",{is:we,was:$e})),Ee;{const je=Te();return globalThis.\u0275AngularfireInstanceCache.push([Ce,je,we]),je}}const Ve=!!ot.hot,pe=(Ce,...nt)=>{(0,m.X6Q)()&&"undefined"!=typeof console&&console[Ce](...nt)};globalThis.\u0275AngularfireInstanceCache||(globalThis.\u0275AngularfireInstanceCache=[])},5813:(ot,De,F)=>{F.d(De,{q4:()=>tc,iC:()=>oc,fc:()=>$n,HU:()=>Ku,vb:()=>bd,JM:()=>fo});var m=F(5e3),Q=F(5867),O=F(5861),ae=F(9681),ee=F(2090),me=F(4859),se=F(1877);const he="@firebase/installations",G="w:0.5.7",X="FIS_v2",Ce=new ee.LL("installations","Installations",{"missing-app-config-values":'Missing App configuration value: "{$valueName}"',"not-registered":"Firebase Installation is not registered.","installation-not-found":"Firebase Installation not found.","request-failed":'{$requestName} request failed with error "{$serverCode} {$serverStatus}: {$serverMessage}"',"app-offline":"Could not process request. Application offline.","delete-pending-registration":"Can't delete installation while there is a pending registration request."});function nt(b){return b instanceof ee.ZR&&b.code.includes("request-failed")}function Ke({projectId:b}){return`https://firebaseinstallations.googleapis.com/v1/projects/${b}/installations`}function Te(b){return{token:b.token,requestStatus:2,expiresIn:re(b.expiresIn),creationTime:Date.now()}}function we(b,T){return Ee.apply(this,arguments)}function Ee(){return(Ee=(0,O.Z)(function*(b,T){const U=(yield T.json()).error;return Ce.create("request-failed",{requestName:b,serverCode:U.code,serverMessage:U.message,serverStatus:U.status})})).apply(this,arguments)}function $e({apiKey:b}){return new Headers({"Content-Type":"application/json",Accept:"application/json","x-goog-api-key":b})}function je(b,{refreshToken:T}){const M=$e(b);return M.append("Authorization",function _e(b){return`${X} ${b}`}(T)),M}function ne(b){return K.apply(this,arguments)}function K(){return(K=(0,O.Z)(function*(b){const T=yield b();return T.status>=500&&T.status<600?b():T})).apply(this,arguments)}function re(b){return Number(b.replace("s","000"))}function ie(b,T){return Pe.apply(this,arguments)}function Pe(){return(Pe=(0,O.Z)(function*({appConfig:b,heartbeatServiceProvider:T},{fid:M}){const U=Ke(b),Z=$e(b),te=T.getImmediate({optional:!0});if(te){const Ct=yield te.getHeartbeatsHeader();Ct&&Z.append("x-firebase-client",Ct)}const Re={method:"POST",headers:Z,body:JSON.stringify({fid:M,authVersion:X,appId:b.appId,sdkVersion:G})},Ye=yield ne(()=>fetch(U,Re));if(Ye.ok){const Ct=yield Ye.json();return{fid:Ct.fid||M,registrationStatus:2,refreshToken:Ct.refreshToken,authToken:Te(Ct.authToken)}}throw yield we("Create Installation",Ye)})).apply(this,arguments)}function ue(b){return new Promise(T=>{setTimeout(T,b)})}const Qt=/^[cdef][\w-]{21}$/;function at(){try{const b=new Uint8Array(17);(self.crypto||self.msCrypto).getRandomValues(b),b[0]=112+b[0]%16;const M=function gt(b){return function It(b){return btoa(String.fromCharCode(...b)).replace(/\+/g,"-").replace(/\//g,"_")}(b).substr(0,22)}(b);return Qt.test(M)?M:""}catch(b){return""}}function cn(b){return`${b.appName}!${b.appId}`}const dn=new Map;function Di(b,T){const M=cn(b);Jt(M,T),function Ht(b,T){const M=function Hr(){return!ur&&"BroadcastChannel"in self&&(ur=new BroadcastChannel("[Firebase] FID Change"),ur.onmessage=b=>{Jt(b.data.key,b.data.fid)}),ur}();M&&M.postMessage({key:b,fid:T}),function Ws(){0===dn.size&&ur&&(ur.close(),ur=null)}()}(M,T)}function Jt(b,T){const M=dn.get(b);if(M)for(const U of M)U(T)}let ur=null;const Pr="firebase-installations-store";let ms=null;function Ki(){return ms||(ms=(0,ee.X3)("firebase-installations-database",1,(b,T)=>{0===T&&b.createObjectStore(Pr)})),ms}function lt(b,T){return $r.apply(this,arguments)}function $r(){return($r=(0,O.Z)(function*(b,T){const M=cn(b),Z=(yield Ki()).transaction(Pr,"readwrite"),te=Z.objectStore(Pr),xe=yield te.get(M);return yield te.put(T,M),yield Z.complete,(!xe||xe.fid!==T.fid)&&Di(b,T.fid),T})).apply(this,arguments)}function nr(b){return Yn.apply(this,arguments)}function Yn(){return(Yn=(0,O.Z)(function*(b){const T=cn(b),U=(yield Ki()).transaction(Pr,"readwrite");yield U.objectStore(Pr).delete(T),yield U.complete})).apply(this,arguments)}function ri(b,T){return qs.apply(this,arguments)}function qs(){return(qs=(0,O.Z)(function*(b,T){const M=cn(b),Z=(yield Ki()).transaction(Pr,"readwrite"),te=Z.objectStore(Pr),xe=yield te.get(M),Re=T(xe);return void 0===Re?yield te.delete(M):yield te.put(Re,M),yield Z.complete,Re&&(!xe||xe.fid!==Re.fid)&&Di(b,Re.fid),Re})).apply(this,arguments)}function vn(b){return rr.apply(this,arguments)}function rr(){return(rr=(0,O.Z)(function*(b){let T;const M=yield ri(b.appConfig,U=>{const Z=_s(U),te=ha(b,Z);return T=te.registrationPromise,te.installationEntry});return""===M.fid?{installationEntry:yield T}:{installationEntry:M,registrationPromise:T}})).apply(this,arguments)}function _s(b){return Gt(b||{fid:at(),registrationStatus:0})}function ha(b,T){if(0===T.registrationStatus){if(!navigator.onLine)return{installationEntry:T,registrationPromise:Promise.reject(Ce.create("app-offline"))};const M={fid:T.fid,registrationStatus:1,registrationTime:Date.now()},U=function $t(b,T){return it.apply(this,arguments)}(b,M);return{installationEntry:M,registrationPromise:U}}return 1===T.registrationStatus?{installationEntry:T,registrationPromise:Et(b)}:{installationEntry:T}}function it(){return(it=(0,O.Z)(function*(b,T){try{const M=yield ie(b,T);return lt(b.appConfig,M)}catch(M){throw nt(M)&&409===M.customData.serverCode?yield nr(b.appConfig):yield lt(b.appConfig,{fid:T.fid,registrationStatus:0}),M}})).apply(this,arguments)}function Et(b){return lr.apply(this,arguments)}function lr(){return(lr=(0,O.Z)(function*(b){let T=yield Zi(b.appConfig);for(;1===T.registrationStatus;)yield ue(100),T=yield Zi(b.appConfig);if(0===T.registrationStatus){const{installationEntry:M,registrationPromise:U}=yield vn(b);return U||M}return T})).apply(this,arguments)}function Zi(b){return ri(b,T=>{if(!T)throw Ce.create("installation-not-found");return Gt(T)})}function Gt(b){return function Mo(b){return 1===b.registrationStatus&&b.registrationTime+1e4<Date.now()}(b)?{fid:b.fid,registrationStatus:0}:b}function wr(b,T){return cr.apply(this,arguments)}function cr(){return(cr=(0,O.Z)(function*({appConfig:b,heartbeatServiceProvider:T},M){const U=dt(b,M),Z=je(b,M),te=T.getImmediate({optional:!0});if(te){const Ct=yield te.getHeartbeatsHeader();Ct&&Z.append("x-firebase-client",Ct)}const Re={method:"POST",headers:Z,body:JSON.stringify({installation:{sdkVersion:G,appId:b.appId}})},Ye=yield ne(()=>fetch(U,Re));if(Ye.ok)return Te(yield Ye.json());throw yield we("Generate Auth Token",Ye)})).apply(this,arguments)}function dt(b,{fid:T}){return`${Ke(b)}/${T}/authTokens:generate`}function Er(b){return Ut.apply(this,arguments)}function Ut(){return(Ut=(0,O.Z)(function*(b,T=!1){let M;const U=yield ri(b.appConfig,te=>{if(!Lt(te))throw Ce.create("not-registered");const xe=te.authToken;if(!T&&$(xe))return te;if(1===xe.requestStatus)return M=Ze(b,T),te;{if(!navigator.onLine)throw Ce.create("app-offline");const Re=q(te);return M=ht(b,Re),Re}});return M?yield M:U.authToken})).apply(this,arguments)}function Ze(b,T){return Se.apply(this,arguments)}function Se(){return(Se=(0,O.Z)(function*(b,T){let M=yield Je(b.appConfig);for(;1===M.authToken.requestStatus;)yield ue(100),M=yield Je(b.appConfig);const U=M.authToken;return 0===U.requestStatus?Er(b,T):U})).apply(this,arguments)}function Je(b){return ri(b,T=>{if(!Lt(T))throw Ce.create("not-registered");return function ce(b){return 1===b.requestStatus&&b.requestTime+1e4<Date.now()}(T.authToken)?Object.assign(Object.assign({},T),{authToken:{requestStatus:0}}):T})}function ht(b,T){return Bt.apply(this,arguments)}function Bt(){return(Bt=(0,O.Z)(function*(b,T){try{const M=yield wr(b,T),U=Object.assign(Object.assign({},T),{authToken:M});return yield lt(b.appConfig,U),M}catch(M){if(!nt(M)||401!==M.customData.serverCode&&404!==M.customData.serverCode){const U=Object.assign(Object.assign({},T),{authToken:{requestStatus:0}});yield lt(b.appConfig,U)}else yield nr(b.appConfig);throw M}})).apply(this,arguments)}function Lt(b){return void 0!==b&&2===b.registrationStatus}function $(b){return 2===b.requestStatus&&!function B(b){const T=Date.now();return T<b.creationTime||b.creationTime+b.expiresIn<T+36e5}(b)}function q(b){const T={requestStatus:1,requestTime:Date.now()};return Object.assign(Object.assign({},b),{authToken:T})}function Ue(){return(Ue=(0,O.Z)(function*(b){const T=b,{installationEntry:M,registrationPromise:U}=yield vn(T);return U?U.catch(console.error):Er(T).catch(console.error),M.fid})).apply(this,arguments)}function Zt(){return(Zt=(0,O.Z)(function*(b,T=!1){const M=b;return yield Cr(M),(yield Er(M,T)).token})).apply(this,arguments)}function Cr(b){return qt.apply(this,arguments)}function qt(){return(qt=(0,O.Z)(function*(b){const{registrationPromise:T}=yield vn(b);T&&(yield T)})).apply(this,arguments)}function Qn(b){return Ce.create("missing-app-config-values",{valueName:b})}const za="installations",Fe=b=>{const T=b.getProvider("app").getImmediate(),M=function ys(b){if(!b||!b.options)throw Qn("App Configuration");if(!b.name)throw Qn("App Name");const T=["projectId","apiKey","appId"];for(const M of T)if(!b.options[M])throw Qn(M);return{appName:b.name,projectId:b.options.projectId,apiKey:b.options.apiKey,appId:b.options.appId}}(T);return{app:T,appConfig:M,heartbeatServiceProvider:(0,ae._getProvider)(T,"heartbeat"),_delete:()=>Promise.resolve()}},kt=b=>{const T=b.getProvider("app").getImmediate(),M=(0,ae._getProvider)(T,za).getImmediate();return{getId:()=>function J(b){return Ue.apply(this,arguments)}(M),getToken:Z=>function _t(b){return Zt.apply(this,arguments)}(M,Z)}};(function pn(){(0,ae._registerComponent)(new me.wA(za,Fe,"PUBLIC")),(0,ae._registerComponent)(new me.wA("installations-internal",kt,"PRIVATE"))})(),(0,ae.registerVersion)(he,"0.5.7"),(0,ae.registerVersion)(he,"0.5.7","esm2017");const dr="@firebase/remote-config",Ln=new ee.LL("remoteconfig","Remote Config",{"registration-window":"Undefined window object. This SDK only supports usage in a browser environment.","registration-project-id":"Undefined project identifier. Check Firebase app initialization.","registration-api-key":"Undefined API key. Check Firebase app initialization.","registration-app-id":"Undefined app identifier. Check Firebase app initialization.","storage-open":"Error thrown when opening storage. Original error: {$originalErrorMessage}.","storage-get":"Error thrown when reading from storage. Original error: {$originalErrorMessage}.","storage-set":"Error thrown when writing to storage. Original error: {$originalErrorMessage}.","storage-delete":"Error thrown when deleting from storage. Original error: {$originalErrorMessage}.","fetch-client-network":"Fetch client failed to connect to a network. Check Internet connection. Original error: {$originalErrorMessage}.","fetch-timeout":'The config fetch request timed out.  Configure timeout using "fetchTimeoutMillis" SDK setting.',"fetch-throttle":'The config fetch request timed out while in an exponential backoff state. Configure timeout using "fetchTimeoutMillis" SDK setting. Unix timestamp in milliseconds when fetch request throttling ends: {$throttleEndTimeMillis}.',"fetch-client-parse":"Fetch client could not parse response. Original error: {$originalErrorMessage}.","fetch-status":"Fetch server returned an HTTP error status. HTTP status: {$httpStatus}.","indexed-db-unavailable":"Indexed DB is not supported by current browser"});class Xh{constructor(T,M,U,Z){this.client=T,this.storage=M,this.storageCache=U,this.logger=Z}isCachedDataFresh(T,M){if(!M)return this.logger.debug("Config fetch cache check. Cache unpopulated."),!1;const U=Date.now()-M,Z=U<=T;return this.logger.debug(`Config fetch cache check. Cache age millis: ${U}. Cache max age millis (minimumFetchIntervalMillis setting): ${T}. Is cache hit: ${Z}.`),Z}fetch(T){var M=this;return(0,O.Z)(function*(){const[U,Z]=yield Promise.all([M.storage.getLastSuccessfulFetchTimestampMillis(),M.storage.getLastSuccessfulFetchResponse()]);if(Z&&M.isCachedDataFresh(T.cacheMaxAgeMillis,U))return Z;T.eTag=Z&&Z.eTag;const te=yield M.client.fetch(T),xe=[M.storageCache.setLastSuccessfulFetchTimestampMillis(Date.now())];return 200===te.status&&xe.push(M.storage.setLastSuccessfulFetchResponse(te)),yield Promise.all(xe),te})()}}function td(b=navigator){return b.languages&&b.languages[0]||b.language}class Au{constructor(T,M,U,Z,te,xe){this.firebaseInstallations=T,this.sdkVersion=M,this.namespace=U,this.projectId=Z,this.apiKey=te,this.appId=xe}fetch(T){var M=this;return(0,O.Z)(function*(){const[U,Z]=yield Promise.all([M.firebaseInstallations.getId(),M.firebaseInstallations.getToken()]),xe=`${window.FIREBASE_REMOTE_CONFIG_URL_BASE||"https://firebaseremoteconfig.googleapis.com"}/v1/projects/${M.projectId}/namespaces/${M.namespace}:fetch?key=${M.apiKey}`,Re={"Content-Type":"application/json","Content-Encoding":"gzip","If-None-Match":T.eTag||"*"},Ye={sdk_version:M.sdkVersion,app_instance_id:U,app_instance_id_token:Z,app_id:M.appId,language_code:td()},Ct={method:"POST",headers:Re,body:JSON.stringify(Ye)},Mt=fetch(xe,Ct),bt=new Promise((hi,ki)=>{T.signal.addEventListener(()=>{const Ko=new Error("The operation was aborted.");Ko.name="AbortError",ki(Ko)})});let Gn;try{yield Promise.race([Mt,bt]),Gn=yield Mt}catch(hi){let ki="fetch-client-network";throw"AbortError"===hi.name&&(ki="fetch-timeout"),Ln.create(ki,{originalErrorMessage:hi.message})}let kn=Gn.status;const Sa=Gn.headers.get("ETag")||void 0;let zo,kr;if(200===Gn.status){let hi;try{hi=yield Gn.json()}catch(ki){throw Ln.create("fetch-client-parse",{originalErrorMessage:ki.message})}zo=hi.entries,kr=hi.state}if("INSTANCE_STATE_UNSPECIFIED"===kr?kn=500:"NO_CHANGE"===kr?kn=304:("NO_TEMPLATE"===kr||"EMPTY_CONFIG"===kr)&&(zo={}),304!==kn&&200!==kn)throw Ln.create("fetch-status",{httpStatus:kn});return{status:kn,eTag:Sa,config:zo}})()}}class hg{constructor(T,M){this.client=T,this.storage=M}fetch(T){var M=this;return(0,O.Z)(function*(){const U=(yield M.storage.getThrottleMetadata())||{backoffCount:0,throttleEndTimeMillis:Date.now()};return M.attemptFetch(T,U)})()}attemptFetch(T,{throttleEndTimeMillis:M,backoffCount:U}){var Z=this;return(0,O.Z)(function*(){yield function jn(b,T){return new Promise((M,U)=>{const Z=Math.max(T-Date.now(),0),te=setTimeout(M,Z);b.addEventListener(()=>{clearTimeout(te),U(Ln.create("fetch-throttle",{throttleEndTimeMillis:T}))})})}(T.signal,M);try{const te=yield Z.client.fetch(T);return yield Z.storage.deleteThrottleMetadata(),te}catch(te){if(!function nd(b){if(!(b instanceof ee.ZR&&b.customData))return!1;const T=Number(b.customData.httpStatus);return 429===T||500===T||503===T||504===T}(te))throw te;const xe={throttleEndTimeMillis:Date.now()+(0,ee.$s)(U),backoffCount:U+1};return yield Z.storage.setThrottleMetadata(xe),Z.attemptFetch(T,xe)}})()}}class rd{constructor(T,M,U,Z,te){this.app=T,this._client=M,this._storageCache=U,this._storage=Z,this._logger=te,this._isInitializationComplete=!1,this.settings={fetchTimeoutMillis:6e4,minimumFetchIntervalMillis:432e5},this.defaultConfig={}}get fetchTimeMillis(){return this._storageCache.getLastSuccessfulFetchTimestampMillis()||-1}get lastFetchStatus(){return this._storageCache.getLastFetchStatus()||"no-fetch-yet"}}function Nl(b,T){const M=b.target.error||void 0;return Ln.create(T,{originalErrorMessage:M&&M.message})}const Qs="app_namespace_store";class mg{constructor(T,M,U,Z=function gg(){return new Promise((b,T)=>{try{const M=indexedDB.open("firebase_remote_config",1);M.onerror=U=>{T(Nl(U,"storage-open"))},M.onsuccess=U=>{b(U.target.result)},M.onupgradeneeded=U=>{0===U.oldVersion&&U.target.result.createObjectStore(Qs,{keyPath:"compositeKey"})}}catch(M){T(Ln.create("storage-open",{originalErrorMessage:M}))}})}()){this.appId=T,this.appName=M,this.namespace=U,this.openDbPromise=Z}getLastFetchStatus(){return this.get("last_fetch_status")}setLastFetchStatus(T){return this.set("last_fetch_status",T)}getLastSuccessfulFetchTimestampMillis(){return this.get("last_successful_fetch_timestamp_millis")}setLastSuccessfulFetchTimestampMillis(T){return this.set("last_successful_fetch_timestamp_millis",T)}getLastSuccessfulFetchResponse(){return this.get("last_successful_fetch_response")}setLastSuccessfulFetchResponse(T){return this.set("last_successful_fetch_response",T)}getActiveConfig(){return this.get("active_config")}setActiveConfig(T){return this.set("active_config",T)}getActiveConfigEtag(){return this.get("active_config_etag")}setActiveConfigEtag(T){return this.set("active_config_etag",T)}getThrottleMetadata(){return this.get("throttle_metadata")}setThrottleMetadata(T){return this.set("throttle_metadata",T)}deleteThrottleMetadata(){return this.delete("throttle_metadata")}get(T){var M=this;return(0,O.Z)(function*(){const U=yield M.openDbPromise;return new Promise((Z,te)=>{const Re=U.transaction([Qs],"readonly").objectStore(Qs),Ye=M.createCompositeKey(T);try{const Ct=Re.get(Ye);Ct.onerror=Mt=>{te(Nl(Mt,"storage-get"))},Ct.onsuccess=Mt=>{const bt=Mt.target.result;Z(bt?bt.value:void 0)}}catch(Ct){te(Ln.create("storage-get",{originalErrorMessage:Ct&&Ct.message}))}})})()}set(T,M){var U=this;return(0,O.Z)(function*(){const Z=yield U.openDbPromise;return new Promise((te,xe)=>{const Ye=Z.transaction([Qs],"readwrite").objectStore(Qs),Ct=U.createCompositeKey(T);try{const Mt=Ye.put({compositeKey:Ct,value:M});Mt.onerror=bt=>{xe(Nl(bt,"storage-set"))},Mt.onsuccess=()=>{te()}}catch(Mt){xe(Ln.create("storage-set",{originalErrorMessage:Mt&&Mt.message}))}})})()}delete(T){var M=this;return(0,O.Z)(function*(){const U=yield M.openDbPromise;return new Promise((Z,te)=>{const Re=U.transaction([Qs],"readwrite").objectStore(Qs),Ye=M.createCompositeKey(T);try{const Ct=Re.delete(Ye);Ct.onerror=Mt=>{te(Nl(Mt,"storage-delete"))},Ct.onsuccess=()=>{Z()}}catch(Ct){te(Ln.create("storage-delete",{originalErrorMessage:Ct&&Ct.message}))}})})()}createCompositeKey(T){return[this.appId,this.appName,this.namespace,T].join()}}class sd{constructor(T){this.storage=T}getLastFetchStatus(){return this.lastFetchStatus}getLastSuccessfulFetchTimestampMillis(){return this.lastSuccessfulFetchTimestampMillis}getActiveConfig(){return this.activeConfig}loadFromStorage(){var T=this;return(0,O.Z)(function*(){const M=T.storage.getLastFetchStatus(),U=T.storage.getLastSuccessfulFetchTimestampMillis(),Z=T.storage.getActiveConfig(),te=yield M;te&&(T.lastFetchStatus=te);const xe=yield U;xe&&(T.lastSuccessfulFetchTimestampMillis=xe);const Re=yield Z;Re&&(T.activeConfig=Re)})()}setLastFetchStatus(T){return this.lastFetchStatus=T,this.storage.setLastFetchStatus(T)}setLastSuccessfulFetchTimestampMillis(T){return this.lastSuccessfulFetchTimestampMillis=T,this.storage.setLastSuccessfulFetchTimestampMillis(T)}setActiveConfig(T){return this.activeConfig=T,this.storage.setActiveConfig(T)}}function Oo(){return ef.apply(this,arguments)}function ef(){return(ef=(0,O.Z)(function*(){if(!(0,ee.hl)())return!1;try{return yield(0,ee.eu)()}catch(b){return!1}})).apply(this,arguments)}!function fa(){(0,ae._registerComponent)(new me.wA("remote-config",function b(T,{instanceIdentifier:M}){const U=T.getProvider("app").getImmediate(),Z=T.getProvider("installations-internal").getImmediate();if("undefined"==typeof window)throw Ln.create("registration-window");if(!(0,ee.hl)())throw Ln.create("indexed-db-unavailable");const{projectId:te,apiKey:xe,appId:Re}=U.options;if(!te)throw Ln.create("registration-project-id");if(!xe)throw Ln.create("registration-api-key");if(!Re)throw Ln.create("registration-app-id");const Ye=new mg(Re,U.name,M=M||"firebase"),Ct=new sd(Ye),Mt=new se.Yd(dr);Mt.logLevel=se.in.ERROR;const bt=new Au(Z,ae.SDK_VERSION,M,te,xe,Re),Gn=new hg(bt,Ye),kn=new Xh(Gn,Ye,Ct,Mt),Sa=new rd(U,kn,Ct,Ye,Mt);return function si(b){const T=(0,ee.m9)(b);T._initializePromise||(T._initializePromise=T._storageCache.loadFromStorage().then(()=>{T._isInitializationComplete=!0}))}(Sa),Sa},"PUBLIC").setMultipleInstances(!0)),(0,ae.registerVersion)(dr,"0.3.6"),(0,ae.registerVersion)(dr,"0.3.6","esm2017")}();const Pl="/firebase-messaging-sw.js",Js="/firebase-cloud-messaging-push-scope",Wr="BDOU99-h67HcA6JeFXHbSNMu7e2yNNu3RzoMj8TM4W88jITfq7ZmPvIM1Iv-4_l2LxQcYwhqby2xGpWwzjfAnG4",Fo="google.c.a.c_id",Za="google.c.a.c_l",od="google.c.a.ts",_g="google.c.a.e";var Xs=(()=>{return(b=Xs||(Xs={})).PUSH_RECEIVED="push-received",b.NOTIFICATION_CLICKED="notification-clicked",Xs;var b})();function ai(b){const T=new Uint8Array(b);return btoa(String.fromCharCode(...T)).replace(/=/g,"").replace(/\+/g,"-").replace(/\//g,"_")}function Ru(b){const M=(b+"=".repeat((4-b.length%4)%4)).replace(/\-/g,"+").replace(/_/g,"/"),U=atob(M),Z=new Uint8Array(U.length);for(let te=0;te<U.length;++te)Z[te]=U.charCodeAt(te);return Z}const Mu="fcm_token_details_db",hr="fcm_token_object_Store";function tf(b){return Nu.apply(this,arguments)}function Nu(){return Nu=(0,O.Z)(function*(b){if("databases"in indexedDB&&!(yield indexedDB.databases()).map(te=>te.name).includes(Mu))return null;let T=null;return(yield(0,ee.X3)(Mu,5,function(){var U=(0,O.Z)(function*(Z,te,xe,Re){var Ye;if(te<2||!Z.objectStoreNames.contains(hr))return;const Ct=Re.objectStore(hr),Mt=yield Ct.index("fcmSenderId").get(b);if(yield Ct.clear(),Mt)if(2===te){const bt=Mt;if(!bt.auth||!bt.p256dh||!bt.endpoint)return;T={token:bt.fcmToken,createTime:null!==(Ye=bt.createTime)&&void 0!==Ye?Ye:Date.now(),subscriptionOptions:{auth:bt.auth,p256dh:bt.p256dh,endpoint:bt.endpoint,swScope:bt.swScope,vapidKey:"string"==typeof bt.vapidKey?bt.vapidKey:ai(bt.vapidKey)}}}else if(3===te){const bt=Mt;T={token:bt.fcmToken,createTime:bt.createTime,subscriptionOptions:{auth:ai(bt.auth),p256dh:ai(bt.p256dh),endpoint:bt.endpoint,swScope:bt.swScope,vapidKey:ai(bt.vapidKey)}}}else if(4===te){const bt=Mt;T={token:bt.fcmToken,createTime:bt.createTime,subscriptionOptions:{auth:ai(bt.auth),p256dh:ai(bt.p256dh),endpoint:bt.endpoint,swScope:bt.swScope,vapidKey:ai(bt.vapidKey)}}}});return function(Z,te,xe,Re){return U.apply(this,arguments)}}())).close(),yield(0,ee.Lj)(Mu),yield(0,ee.Lj)("fcm_vapid_details_db"),yield(0,ee.Lj)("undefined"),ad(T)?T:null}),Nu.apply(this,arguments)}function ad(b){if(!b||!b.subscriptionOptions)return!1;const{subscriptionOptions:T}=b;return"number"==typeof b.createTime&&b.createTime>0&&"string"==typeof b.token&&b.token.length>0&&"string"==typeof T.auth&&T.auth.length>0&&"string"==typeof T.p256dh&&T.p256dh.length>0&&"string"==typeof T.endpoint&&T.endpoint.length>0&&"string"==typeof T.swScope&&T.swScope.length>0&&"string"==typeof T.vapidKey&&T.vapidKey.length>0}const Cs="firebase-messaging-store";let Ya=null;function kl(){return Ya||(Ya=(0,ee.X3)("firebase-messaging-database",1,(b,T)=>{0===T&&b.createObjectStore(Cs)})),Ya}function gn(b){return ma.apply(this,arguments)}function ma(){return(ma=(0,O.Z)(function*(b){const T=Vo(b),U=yield(yield kl()).transaction(Cs).objectStore(Cs).get(T);if(U)return U;{const Z=yield tf(b.appConfig.senderId);if(Z)return yield eo(b,Z),Z}})).apply(this,arguments)}function eo(b,T){return on.apply(this,arguments)}function on(){return(on=(0,O.Z)(function*(b,T){const M=Vo(b),Z=(yield kl()).transaction(Cs,"readwrite");return yield Z.objectStore(Cs).put(T,M),yield Z.complete,T})).apply(this,arguments)}function ud(b){return Lo.apply(this,arguments)}function Lo(){return(Lo=(0,O.Z)(function*(b){const T=Vo(b),U=(yield kl()).transaction(Cs,"readwrite");yield U.objectStore(Cs).delete(T),yield U.complete})).apply(this,arguments)}function Vo({appConfig:b}){return b.appId}const Vn=new ee.LL("messaging","Messaging",{"missing-app-config-values":'Missing App configuration value: "{$valueName}"',"only-available-in-window":"This method is available in a Window context.","only-available-in-sw":"This method is available in a service worker context.","permission-default":"The notification permission was not granted and dismissed instead.","permission-blocked":"The notification permission was not granted and blocked instead.","unsupported-browser":"This browser doesn't support the API's required to use the Firebase SDK.","indexed-db-unsupported":"This browser doesn't support indexedDb.open() (ex. Safari iFrame, Firefox Private Browsing, etc)","failed-service-worker-registration":"We are unable to register the default service worker. {$browserErrorMessage}","token-subscribe-failed":"A problem occurred while subscribing the user to FCM: {$errorInfo}","token-subscribe-no-token":"FCM returned no token when subscribing the user to push.","token-unsubscribe-failed":"A problem occurred while unsubscribing the user from FCM: {$errorInfo}","token-update-failed":"A problem occurred while updating the user from FCM: {$errorInfo}","token-update-no-token":"FCM returned no token when updating the user to push.","use-sw-after-get-token":"The useServiceWorker() method may only be called once and must be called before calling getToken() to ensure your service worker is used.","invalid-sw-registration":"The input to useServiceWorker() must be a ServiceWorkerRegistration.","invalid-bg-handler":"The input to setBackgroundMessageHandler() must be a function.","invalid-vapid-key":"The public VAPID key must be a string.","use-vapid-key-after-get-token":"The usePublicVapidKey() method may only be called once and must be called before calling getToken() to ensure your VAPID key is used."});function Qa(b,T){return Si.apply(this,arguments)}function Si(){return(Si=(0,O.Z)(function*(b,T){const M=yield no(b),U=ft(T),Z={method:"POST",headers:M,body:JSON.stringify(U)};let te;try{te=yield(yield fetch(zr(b.appConfig),Z)).json()}catch(xe){throw Vn.create("token-subscribe-failed",{errorInfo:xe})}if(te.error)throw Vn.create("token-subscribe-failed",{errorInfo:te.error.message});if(!te.token)throw Vn.create("token-subscribe-no-token");return te.token})).apply(this,arguments)}function Dr(b,T){return to.apply(this,arguments)}function to(){return(to=(0,O.Z)(function*(b,T){const M=yield no(b),U=ft(T.subscriptionOptions),Z={method:"PATCH",headers:M,body:JSON.stringify(U)};let te;try{te=yield(yield fetch(`${zr(b.appConfig)}/${T.token}`,Z)).json()}catch(xe){throw Vn.create("token-update-failed",{errorInfo:xe})}if(te.error)throw Vn.create("token-update-failed",{errorInfo:te.error.message});if(!te.token)throw Vn.create("token-update-no-token");return te.token})).apply(this,arguments)}function Is(b,T){return Ou.apply(this,arguments)}function Ou(){return(Ou=(0,O.Z)(function*(b,T){const U={method:"DELETE",headers:yield no(b)};try{const te=yield(yield fetch(`${zr(b.appConfig)}/${T}`,U)).json();if(te.error)throw Vn.create("token-unsubscribe-failed",{errorInfo:te.error.message})}catch(Z){throw Vn.create("token-unsubscribe-failed",{errorInfo:Z})}})).apply(this,arguments)}function zr({projectId:b}){return`https://fcmregistrations.googleapis.com/v1/projects/${b}/registrations`}function no(b){return ro.apply(this,arguments)}function ro(){return(ro=(0,O.Z)(function*({appConfig:b,installations:T}){const M=yield T.getToken();return new Headers({"Content-Type":"application/json",Accept:"application/json","x-goog-api-key":b.apiKey,"x-goog-firebase-installations-auth":`FIS ${M}`})})).apply(this,arguments)}function ft({p256dh:b,auth:T,endpoint:M,vapidKey:U}){const Z={web:{endpoint:M,auth:T,p256dh:b}};return U!==Wr&&(Z.web.applicationPubKey=U),Z}const Fu=6048e5;function Ja(b){return Lu.apply(this,arguments)}function Lu(){return(Lu=(0,O.Z)(function*(b){const T=yield Ll(b.swRegistration,b.vapidKey),M={vapidKey:b.vapidKey,swScope:b.swRegistration.scope,endpoint:T.endpoint,auth:ai(T.getKey("auth")),p256dh:ai(T.getKey("p256dh"))},U=yield gn(b.firebaseDependencies);if(U){if(_a(U.subscriptionOptions,M))return Date.now()>=U.createTime+Fu?Ol(b,{token:U.token,createTime:Date.now(),subscriptionOptions:M}):U.token;try{yield Is(b.firebaseDependencies,U.token)}catch(Z){console.warn(Z)}return Ie(b.firebaseDependencies,M)}return Ie(b.firebaseDependencies,M)})).apply(this,arguments)}function Vu(b){return Uu.apply(this,arguments)}function Uu(){return(Uu=(0,O.Z)(function*(b){const T=yield gn(b.firebaseDependencies);T&&(yield Is(b.firebaseDependencies,T.token),yield ud(b.firebaseDependencies));const M=yield b.swRegistration.pushManager.getSubscription();return!M||M.unsubscribe()})).apply(this,arguments)}function Ol(b,T){return Fl.apply(this,arguments)}function Fl(){return(Fl=(0,O.Z)(function*(b,T){try{const M=yield Dr(b.firebaseDependencies,T),U=Object.assign(Object.assign({},T),{token:M,createTime:Date.now()});return yield eo(b.firebaseDependencies,U),M}catch(M){throw yield Vu(b),M}})).apply(this,arguments)}function Ie(b,T){return Vt.apply(this,arguments)}function Vt(){return(Vt=(0,O.Z)(function*(b,T){const U={token:yield Qa(b,T),createTime:Date.now(),subscriptionOptions:T};return yield eo(b,U),U.token})).apply(this,arguments)}function Ll(b,T){return Cn.apply(this,arguments)}function Cn(){return(Cn=(0,O.Z)(function*(b,T){return(yield b.pushManager.getSubscription())||b.pushManager.subscribe({userVisibleOnly:!0,applicationServerKey:Ru(T)})})).apply(this,arguments)}function _a(b,T){return T.vapidKey===b.vapidKey&&T.endpoint===b.endpoint&&T.auth===b.auth&&T.p256dh===b.p256dh}function ya(b){const T={from:b.from,collapseKey:b.collapse_key,messageId:b.fcmMessageId};return function Kr(b,T){if(!T.notification)return;b.notification={};const M=T.notification.title;M&&(b.notification.title=M);const U=T.notification.body;U&&(b.notification.body=U);const Z=T.notification.image;Z&&(b.notification.image=Z)}(T,b),function Vl(b,T){!T.data||(b.data=T.data)}(T,b),function Ul(b,T){if(!T.fcmOptions)return;b.fcmOptions={};const M=T.fcmOptions.link;M&&(b.fcmOptions.link=M);const U=T.fcmOptions.analytics_label;U&&(b.fcmOptions.analyticsLabel=U)}(T,b),T}function ld(b){return"object"==typeof b&&!!b&&Fo in b}function Bl(b,T){const M=[];for(let U=0;U<b.length;U++)M.push(b.charAt(U)),U<T.length&&M.push(T.charAt(U));return M.join("")}function io(b){return Vn.create("missing-app-config-values",{valueName:b})}Bl("hts/frbslgigp.ogepscmv/ieo/eaylg","tp:/ieaeogn-agolai.o/1frlglgc/o"),Bl("AzSCbw63g1R0nCw85jG8","Iaya3yLKwmgvh7cF0q4");class fr{constructor(T,M,U){this.deliveryMetricsExportedToBigQueryEnabled=!1,this.onBackgroundMessageHandler=null,this.onMessageHandler=null,this.logEvents=[],this.isLogServiceStarted=!1;const Z=function Bu(b){if(!b||!b.options)throw io("App Configuration Object");if(!b.name)throw io("App Name");const T=["projectId","apiKey","appId","messagingSenderId"],{options:M}=b;for(const U of T)if(!M[U])throw io(U);return{appName:b.name,projectId:M.projectId,apiKey:M.apiKey,appId:M.appId,senderId:M.messagingSenderId}}(T);this.firebaseDependencies={app:T,appConfig:Z,installations:M,analyticsProvider:U}}_delete(){return Promise.resolve()}}function ui(b){return ju.apply(this,arguments)}function ju(){return(ju=(0,O.Z)(function*(b){try{b.swRegistration=yield navigator.serviceWorker.register(Pl,{scope:Js}),b.swRegistration.update().catch(()=>{})}catch(T){throw Vn.create("failed-service-worker-registration",{browserErrorMessage:T.message})}})).apply(this,arguments)}function so(b,T){return Ai.apply(this,arguments)}function Ai(){return(Ai=(0,O.Z)(function*(b,T){if(!T&&!b.swRegistration&&(yield ui(b)),T||!b.swRegistration){if(!(T instanceof ServiceWorkerRegistration))throw Vn.create("invalid-sw-registration");b.swRegistration=T}})).apply(this,arguments)}function jl(b,T){return Hu.apply(this,arguments)}function Hu(){return(Hu=(0,O.Z)(function*(b,T){T?b.vapidKey=T:b.vapidKey||(b.vapidKey=Wr)})).apply(this,arguments)}function Hl(){return(Hl=(0,O.Z)(function*(b,T){if(!navigator)throw Vn.create("only-available-in-window");if("default"===Notification.permission&&(yield Notification.requestPermission()),"granted"!==Notification.permission)throw Vn.create("permission-blocked");return yield jl(b,null==T?void 0:T.vapidKey),yield so(b,null==T?void 0:T.serviceWorkerRegistration),Ja(b)})).apply(this,arguments)}function Xa(b,T,M){return eu.apply(this,arguments)}function eu(){return(eu=(0,O.Z)(function*(b,T,M){const U=$l(T);(yield b.firebaseDependencies.analyticsProvider.get()).logEvent(U,{message_id:M[Fo],message_name:M[Za],message_time:M[od],message_device_time:Math.floor(Date.now()/1e3)})})).apply(this,arguments)}function $l(b){switch(b){case Xs.NOTIFICATION_CLICKED:return"notification_open";case Xs.PUSH_RECEIVED:return"notification_foreground";default:throw new Error}}function cd(){return(cd=(0,O.Z)(function*(b,T){const M=T.data;if(!M.isFirebaseMessaging)return;b.onMessageHandler&&M.messageType===Xs.PUSH_RECEIVED&&("function"==typeof b.onMessageHandler?b.onMessageHandler(ya(M)):b.onMessageHandler.next(ya(M)));const U=M.data;ld(U)&&"1"===U[_g]&&(yield Xa(b,M.messageType,U))})).apply(this,arguments)}const Wl="@firebase/messaging",dd=b=>{const T=new fr(b.getProvider("app").getImmediate(),b.getProvider("installations-internal").getImmediate(),b.getProvider("analytics-internal"));return navigator.serviceWorker.addEventListener("message",M=>function Gl(b,T){return cd.apply(this,arguments)}(T,M)),T},Bo=b=>{const T=b.getProvider("messaging").getImmediate();return{getToken:U=>function $u(b,T){return Hl.apply(this,arguments)}(T,U)}};function fd(){return jo.apply(this,arguments)}function jo(){return(jo=(0,O.Z)(function*(){try{yield(0,ee.eu)()}catch(b){return!1}return"undefined"!=typeof window&&(0,ee.hl)()&&(0,ee.zI)()&&"serviceWorker"in navigator&&"PushManager"in window&&"Notification"in window&&"fetch"in window&&ServiceWorkerRegistration.prototype.hasOwnProperty("showNotification")&&PushSubscription.prototype.hasOwnProperty("getKey")})).apply(this,arguments)}!function hd(){(0,ae._registerComponent)(new me.wA("messaging",dd,"PUBLIC")),(0,ae._registerComponent)(new me.wA("messaging-internal",Bo,"PRIVATE")),(0,ae.registerVersion)(Wl,"0.9.11"),(0,ae.registerVersion)(Wl,"0.9.11","esm2017")}();const zl="analytics",ny="firebase_id",tu="https://firebase.googleapis.com/v1alpha/projects/-/apps/{app-id}/webConfig",Gu="https://www.googletagmanager.com/gtag/js",Hn=new se.Yd("@firebase/analytics");function gd(b){return Promise.all(b.map(T=>T.catch(M=>M)))}function yg(b,T){const M=document.createElement("script");M.src=`${Gu}?l=${b}&id=${T}`,M.async=!0,document.head.appendChild(M)}function va(b,T,M,U,Z,te){return md.apply(this,arguments)}function md(){return(md=(0,O.Z)(function*(b,T,M,U,Z,te){const xe=U[Z];try{if(xe)yield T[xe];else{const Ye=(yield gd(M)).find(Ct=>Ct.measurementId===Z);Ye&&(yield T[Ye.appId])}}catch(Re){Hn.error(Re)}b("config",Z,te)})).apply(this,arguments)}function Zl(b,T,M,U,Z){return Ho.apply(this,arguments)}function Ho(){return(Ho=(0,O.Z)(function*(b,T,M,U,Z){try{let te=[];if(Z&&Z.send_to){let xe=Z.send_to;Array.isArray(xe)||(xe=[xe]);const Re=yield gd(M);for(const Ye of xe){const Ct=Re.find(bt=>bt.measurementId===Ye),Mt=Ct&&T[Ct.appId];if(!Mt){te=[];break}te.push(Mt)}}0===te.length&&(te=Object.values(T)),yield Promise.all(te),b("event",U,Z||{})}catch(te){Hn.error(te)}})).apply(this,arguments)}function vg(){const b=window.document.getElementsByTagName("script");for(const T of Object.values(b))if(T.src&&T.src.includes(Gu))return T;return null}const Mn=new ee.LL("analytics","Analytics",{"already-exists":"A Firebase Analytics instance with the appId {$id}  already exists. Only one Firebase Analytics instance can be created for each appId.","already-initialized":"initializeAnalytics() cannot be called again with different options than those it was initially called with. It can be called again with the same options to return the existing instance, or getAnalytics() can be used to get a reference to the already-intialized instance.","already-initialized-settings":"Firebase Analytics has already been initialized.settings() must be called before initializing any Analytics instanceor it will have no effect.","interop-component-reg-failed":"Firebase Analytics Interop Component failed to instantiate: {$reason}","invalid-analytics-context":"Firebase Analytics is not supported in this environment. Wrap initialization of analytics in analytics.isSupported() to prevent initialization in unsupported environments. Details: {$errorInfo}","indexeddb-unavailable":"IndexedDB unavailable or restricted in this environment. Wrap initialization of analytics in analytics.isSupported() to prevent initialization in unsupported environments. Details: {$errorInfo}","fetch-throttle":"The config fetch request timed out while in an exponential backoff state. Unix timestamp in milliseconds when fetch request throttling ends: {$throttleEndTimeMillis}.","config-fetch-failed":"Dynamic config fetch failed: [{$httpStatus}] {$responseMessage}","no-api-key":'The "apiKey" field is empty in the local Firebase config. Firebase Analytics requires this field tocontain a valid API key.',"no-app-id":'The "appId" field is empty in the local Firebase config. Firebase Analytics requires this field tocontain a valid app ID.'}),gr=new class Zr{constructor(T={},M=1e3){this.throttleMetadata=T,this.intervalMillis=M}getThrottleMetadata(T){return this.throttleMetadata[T]}setThrottleMetadata(T,M){this.throttleMetadata[T]=M}deleteThrottleMetadata(T){delete this.throttleMetadata[T]}};function wa(b){return new Headers({Accept:"application/json","x-goog-api-key":b})}function yd(b){return mn.apply(this,arguments)}function mn(){return(mn=(0,O.Z)(function*(b){var T;const{appId:M,apiKey:U}=b,Z={method:"GET",headers:wa(U)},te=tu.replace("{app-id}",M),xe=yield fetch(te,Z);if(200!==xe.status&&304!==xe.status){let Re="";try{const Ye=yield xe.json();(null===(T=Ye.error)||void 0===T?void 0:T.message)&&(Re=Ye.error.message)}catch(Ye){}throw Mn.create("config-fetch-failed",{httpStatus:xe.status,responseMessage:Re})}return xe.json()})).apply(this,arguments)}function rf(b){return xi.apply(this,arguments)}function xi(){return(xi=(0,O.Z)(function*(b,T=gr,M){const{appId:U,apiKey:Z,measurementId:te}=b.options;if(!U)throw Mn.create("no-app-id");if(!Z){if(te)return{measurementId:te,appId:U};throw Mn.create("no-api-key")}const xe=T.getThrottleMetadata(U)||{backoffCount:0,throttleEndTimeMillis:Date.now()},Re=new Yl;return setTimeout((0,O.Z)(function*(){Re.abort()}),void 0!==M?M:6e4),Wu({appId:U,apiKey:Z,measurementId:te},xe,Re,T)})).apply(this,arguments)}function Wu(b,T,M){return Yr.apply(this,arguments)}function Yr(){return(Yr=(0,O.Z)(function*(b,{throttleEndTimeMillis:T,backoffCount:M},U,Z=gr){const{appId:te,measurementId:xe}=b;try{yield yt(U,T)}catch(Re){if(xe)return Hn.warn(`Timed out fetching this Firebase app's measurement ID from the server. Falling back to the measurement ID ${xe} provided in the "measurementId" field in the local Firebase config. [${Re.message}]`),{appId:te,measurementId:xe};throw Re}try{const Re=yield yd(b);return Z.deleteThrottleMetadata(te),Re}catch(Re){if(!vd(Re)){if(Z.deleteThrottleMetadata(te),xe)return Hn.warn(`Failed to fetch this Firebase app's measurement ID from the server. Falling back to the measurement ID ${xe} provided in the "measurementId" field in the local Firebase config. [${Re.message}]`),{appId:te,measurementId:xe};throw Re}const Ye=503===Number(Re.customData.httpStatus)?(0,ee.$s)(M,Z.intervalMillis,30):(0,ee.$s)(M,Z.intervalMillis),Ct={throttleEndTimeMillis:Date.now()+Ye,backoffCount:M+1};return Z.setThrottleMetadata(te,Ct),Hn.debug(`Calling attemptFetch again in ${Ye} millis`),Wu(b,Ct,U,Z)}})).apply(this,arguments)}function yt(b,T){return new Promise((M,U)=>{const Z=Math.max(T-Date.now(),0),te=setTimeout(M,Z);b.addEventListener(()=>{clearTimeout(te),U(Mn.create("fetch-throttle",{throttleEndTimeMillis:T}))})})}function vd(b){if(!(b instanceof ee.ZR&&b.customData))return!1;const T=Number(b.customData.httpStatus);return 429===T||500===T||503===T||504===T}class Yl{constructor(){this.listeners=[]}addEventListener(T){this.listeners.push(T)}abort(){this.listeners.forEach(T=>T())}}function wd(){return $o.apply(this,arguments)}function $o(){return($o=(0,O.Z)(function*(){if(!(0,ee.hl)())return Hn.warn(Mn.create("indexeddb-unavailable",{errorInfo:"IndexedDB is not available in this environment."}).message),!1;try{yield(0,ee.eu)()}catch(b){return Hn.warn(Mn.create("indexeddb-unavailable",{errorInfo:b}).message),!1}return!0})).apply(this,arguments)}function Ts(){return(Ts=(0,O.Z)(function*(b,T,M,U,Z,te,xe){var Re;const Ye=rf(b);Ye.then(kn=>{M[kn.measurementId]=kn.appId,b.options.measurementId&&kn.measurementId!==b.options.measurementId&&Hn.warn(`The measurement ID in the local Firebase config (${b.options.measurementId}) does not match the measurement ID fetched from the server (${kn.measurementId}). To ensure analytics events are always sent to the correct Analytics property, update the measurement ID field in the local config or remove it from the local config.`)}).catch(kn=>Hn.error(kn)),T.push(Ye);const Ct=wd().then(kn=>{if(kn)return U.getId()}),[Mt,bt]=yield Promise.all([Ye,Ct]);vg()||yg(te,Mt.measurementId),Z("js",new Date);const Gn=null!==(Re=null==xe?void 0:xe.config)&&void 0!==Re?Re:{};return Gn.origin="firebase",Gn.update=!0,null!=bt&&(Gn[ny]=bt),Z("config",Mt.measurementId,Gn),Mt.measurementId})).apply(this,arguments)}class Ea{constructor(T){this.app=T}_delete(){return delete li[this.app.options.appId],Promise.resolve()}}let li={},uo=[];const nu={};let lo,Ji,Qi="dataLayer",Jl=!1;function Ri(b,T,M){!function Go(){const b=[];if((0,ee.ru)()&&b.push("This is a browser extension environment."),(0,ee.zI)()||b.push("Cookies are not available."),b.length>0){const T=b.map((U,Z)=>`(${Z+1}) ${U}`).join(" "),M=Mn.create("invalid-analytics-context",{errorInfo:T});Hn.warn(M.message)}}();const U=b.options.appId;if(!U)throw Mn.create("no-app-id");if(!b.options.apiKey){if(!b.options.measurementId)throw Mn.create("no-api-key");Hn.warn(`The "apiKey" field is empty in the local Firebase config. This is needed to fetch the latest measurement ID for this Firebase app. Falling back to the measurement ID ${b.options.measurementId} provided in the "measurementId" field in the local Firebase config.`)}if(null!=li[U])throw Mn.create("already-exists",{id:U});if(!Jl){!function Ds(b){let T=[];Array.isArray(window[b])?T=window[b]:window[b]=T}(Qi);const{wrappedGtag:te,gtagCore:xe}=function nf(b,T,M,U,Z){let te=function(...xe){window[U].push(arguments)};return window[Z]&&"function"==typeof window[Z]&&(te=window[Z]),window[Z]=function _d(b,T,M,U){function te(){return(te=(0,O.Z)(function*(xe,Re,Ye){try{"event"===xe?yield Zl(b,T,M,Re,Ye):"config"===xe?yield va(b,T,M,U,Re,Ye):b("set",Re)}catch(Ct){Hn.error(Ct)}})).apply(this,arguments)}return function Z(xe,Re,Ye){return te.apply(this,arguments)}}(te,b,T,M),{gtagCore:te,wrappedGtag:window[Z]}}(li,uo,nu,Qi,"gtag");Ji=te,lo=xe,Jl=!0}return li[U]=function In(b,T,M,U,Z,te,xe){return Ts.apply(this,arguments)}(b,uo,nu,T,lo,Qi,M),new Ea(b)}function ru(){return(ru=(0,O.Z)(function*(b,T,M,U,Z){if(Z&&Z.global)b("event",M,U);else{const te=yield T;b("event",M,Object.assign(Object.assign({},U),{send_to:te}))}})).apply(this,arguments)}function Nn(){return Ss.apply(this,arguments)}function Ss(){return(Ss=(0,O.Z)(function*(){if((0,ee.ru)()||!(0,ee.zI)()||!(0,ee.hl)())return!1;try{return yield(0,ee.eu)()}catch(b){return!1}})).apply(this,arguments)}const co="@firebase/analytics";!function Ig(){(0,ae._registerComponent)(new me.wA(zl,(T,{options:M})=>Ri(T.getProvider("app").getImmediate(),T.getProvider("installations-internal").getImmediate(),M),"PUBLIC")),(0,ae._registerComponent)(new me.wA("analytics-internal",function b(T){try{const M=T.getProvider(zl).getImmediate();return{logEvent:(U,Z,te)=>function Cg(b,T,M,U){b=(0,ee.m9)(b),function Ca(b,T,M,U,Z){return ru.apply(this,arguments)}(Ji,li[b.app.options.appId],T,M,U).catch(Z=>Hn.error(Z))}(M,U,Z,te)}}catch(M){throw Mn.create("interop-component-reg-failed",{reason:M})}},"PRIVATE")),(0,ae.registerVersion)(co,"0.7.7"),(0,ae.registerVersion)(co,"0.7.7","esm2017")}();var ho=F(4408),qu=F(7565);const Xl=new class Sn extends qu.v{}(class As extends ho.o{constructor(T,M){super(T,M),this.scheduler=T,this.work=M}schedule(T,M=0){return M>0?super.schedule(T,M):(this.delay=M,this.state=T,this.scheduler.flush(this),this)}execute(T,M){return M>0||this.closed?super.execute(T,M):this._execute(T,M)}requestAsyncId(T,M,U=0){return null!=U&&U>0||null==U&&this.delay>0?super.requestAsyncId(T,M,U):T.flush(this)}});var bg=F(4986),ec=F(8505),mr=F(5363),ci=F(9468);const tc=new m.GfV("7.3.0"),xs="__angularfire_symbol__analyticsIsSupportedValue",Pi="__angularfire_symbol__analyticsIsSupported",ts="__angularfire_symbol__remoteConfigIsSupportedValue",iu="__angularfire_symbol__remoteConfigIsSupported",nc="__angularfire_symbol__messagingIsSupportedValue",rc="__angularfire_symbol__messagingIsSupported";function fo(b,T,M){if(T){if(1===T.length)return T[0];const te=T.filter(xe=>xe.app===M);if(1===te.length)return te[0]}return M.container.getProvider(b).getImmediate({optional:!0})}globalThis[Pi]||(globalThis[Pi]=Nn().then(b=>globalThis[xs]=b).catch(()=>globalThis[xs]=!1)),globalThis[rc]||(globalThis[rc]=fd().then(b=>globalThis[nc]=b).catch(()=>globalThis[nc]=!1)),globalThis[iu]||(globalThis[iu]=Oo().then(b=>globalThis[ts]=b).catch(()=>globalThis[ts]=!1));const bd=(b,T)=>{const M=T?[T]:(0,Q.C6)(),U=[];return M.forEach(Z=>{Z.container.getProvider(b).instances.forEach(xe=>{U.includes(xe)||U.push(xe)})}),U};function Wo(){}class zu{constructor(T,M=Xl){this.zone=T,this.delegate=M}now(){return this.delegate.now()}schedule(T,M,U){const Z=this.zone;return this.delegate.schedule(function(xe){Z.runGuarded(()=>{T.apply(this,[xe])})},M,U)}}class ns{constructor(T){this.zone=T,this.task=null}call(T,M){const U=this.unscheduleTask.bind(this);return this.task=this.zone.run(()=>Zone.current.scheduleMacroTask("firebaseZoneBlock",Wo,{},Wo,Wo)),M.pipe((0,ec.b)({next:U,complete:U,error:U})).subscribe(T).add(U)}unscheduleTask(){setTimeout(()=>{null!=this.task&&"scheduled"===this.task.state&&(this.task.invoke(),this.task=null)},10)}}let Ku=(()=>{class b{constructor(M){this.ngZone=M,this.outsideAngular=M.runOutsideAngular(()=>new zu(Zone.current)),this.insideAngular=M.run(()=>new zu(Zone.current,bg.z)),globalThis.\u0275AngularFireScheduler||(globalThis.\u0275AngularFireScheduler=this)}}return b.\u0275fac=function(M){return new(M||b)(m.LFG(m.R0b))},b.\u0275prov=m.Yz7({token:b,factory:b.\u0275fac,providedIn:"root"}),b})();function rs(){const b=globalThis.\u0275AngularFireScheduler;if(!b)throw new Error("Either AngularFireModule has not been provided in your AppModule (this can be done manually or implictly using\nprovideFirebaseApp) or you're calling an AngularFire method outside of an NgModule (which is not supported).");return b}function $n(b){return b.pipe((0,mr.Q)(rs().outsideAngular))}function oc(b){return rs(),function qo(b){return function(M){return(M=M.lift(new ns(b.ngZone))).pipe((0,ci.R)(b.outsideAngular),(0,mr.Q)(b.insideAngular))}}(rs())(b)}},2090:(ot,De,F)=>{F.d(De,{$s:()=>Mo,BH:()=>Ae,DV:()=>Ht,Dv:()=>qs,G6:()=>ne,GJ:()=>qi,L:()=>le,LL:()=>It,Lj:()=>Bt,Mn:()=>$e,Pz:()=>gt,Sg:()=>Oe,UG:()=>Ce,UI:()=>Hr,US:()=>se,Wj:()=>_s,X3:()=>ht,Yr:()=>je,ZB:()=>X,ZR:()=>ue,b$:()=>Te,cI:()=>at,d:()=>we,dS:()=>$t,eu:()=>re,g5:()=>ae,gK:()=>vn,gQ:()=>Ki,h$:()=>he,hl:()=>K,hu:()=>O,jU:()=>nt,lb:()=>ha,m9:()=>dt,ne:()=>lt,p$:()=>G,pd:()=>ms,r3:()=>Jt,ru:()=>Ke,tV:()=>W,uI:()=>pe,ug:()=>it,vZ:()=>Ws,w1:()=>Ee,w9:()=>Xt,xO:()=>zi,xb:()=>ur,z$:()=>Ve,zI:()=>_e,zd:()=>Pr});var m=F(5861);const O=function($,B){if(!$)throw ae(B)},ae=function($){return new Error("Firebase Database (${JSCORE_VERSION}) INTERNAL ASSERT FAILED: "+$)},ee=function($){const B=[];let q=0;for(let ce=0;ce<$.length;ce++){let J=$.charCodeAt(ce);J<128?B[q++]=J:J<2048?(B[q++]=J>>6|192,B[q++]=63&J|128):55296==(64512&J)&&ce+1<$.length&&56320==(64512&$.charCodeAt(ce+1))?(J=65536+((1023&J)<<10)+(1023&$.charCodeAt(++ce)),B[q++]=J>>18|240,B[q++]=J>>12&63|128,B[q++]=J>>6&63|128,B[q++]=63&J|128):(B[q++]=J>>12|224,B[q++]=J>>6&63|128,B[q++]=63&J|128)}return B},se={byteToCharMap_:null,charToByteMap_:null,byteToCharMapWebSafe_:null,charToByteMapWebSafe_:null,ENCODED_VALS_BASE:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",get ENCODED_VALS(){return this.ENCODED_VALS_BASE+"+/="},get ENCODED_VALS_WEBSAFE(){return this.ENCODED_VALS_BASE+"-_."},HAS_NATIVE_SUPPORT:"function"==typeof atob,encodeByteArray($,B){if(!Array.isArray($))throw Error("encodeByteArray takes an array as a parameter");this.init_();const q=B?this.byteToCharMapWebSafe_:this.byteToCharMap_,ce=[];for(let J=0;J<$.length;J+=3){const Ue=$[J],_t=J+1<$.length,Zt=_t?$[J+1]:0,Cr=J+2<$.length,qt=Cr?$[J+2]:0;let fn=(15&Zt)<<2|qt>>6,ir=63&qt;Cr||(ir=64,_t||(fn=64)),ce.push(q[Ue>>2],q[(3&Ue)<<4|Zt>>4],q[fn],q[ir])}return ce.join("")},encodeString($,B){return this.HAS_NATIVE_SUPPORT&&!B?btoa($):this.encodeByteArray(ee($),B)},decodeString($,B){return this.HAS_NATIVE_SUPPORT&&!B?atob($):function($){const B=[];let q=0,ce=0;for(;q<$.length;){const J=$[q++];if(J<128)B[ce++]=String.fromCharCode(J);else if(J>191&&J<224){const Ue=$[q++];B[ce++]=String.fromCharCode((31&J)<<6|63&Ue)}else if(J>239&&J<365){const Cr=((7&J)<<18|(63&$[q++])<<12|(63&$[q++])<<6|63&$[q++])-65536;B[ce++]=String.fromCharCode(55296+(Cr>>10)),B[ce++]=String.fromCharCode(56320+(1023&Cr))}else{const Ue=$[q++],_t=$[q++];B[ce++]=String.fromCharCode((15&J)<<12|(63&Ue)<<6|63&_t)}}return B.join("")}(this.decodeStringToByteArray($,B))},decodeStringToByteArray($,B){this.init_();const q=B?this.charToByteMapWebSafe_:this.charToByteMap_,ce=[];for(let J=0;J<$.length;){const Ue=q[$.charAt(J++)],Zt=J<$.length?q[$.charAt(J)]:0;++J;const qt=J<$.length?q[$.charAt(J)]:64;++J;const Rt=J<$.length?q[$.charAt(J)]:64;if(++J,null==Ue||null==Zt||null==qt||null==Rt)throw Error();ce.push(Ue<<2|Zt>>4),64!==qt&&(ce.push(Zt<<4&240|qt>>2),64!==Rt&&ce.push(qt<<6&192|Rt))}return ce},init_(){if(!this.byteToCharMap_){this.byteToCharMap_={},this.charToByteMap_={},this.byteToCharMapWebSafe_={},this.charToByteMapWebSafe_={};for(let $=0;$<this.ENCODED_VALS.length;$++)this.byteToCharMap_[$]=this.ENCODED_VALS.charAt($),this.charToByteMap_[this.byteToCharMap_[$]]=$,this.byteToCharMapWebSafe_[$]=this.ENCODED_VALS_WEBSAFE.charAt($),this.charToByteMapWebSafe_[this.byteToCharMapWebSafe_[$]]=$,$>=this.ENCODED_VALS_BASE.length&&(this.charToByteMap_[this.ENCODED_VALS_WEBSAFE.charAt($)]=$,this.charToByteMapWebSafe_[this.ENCODED_VALS.charAt($)]=$)}}},he=function($){const B=ee($);return se.encodeByteArray(B,!0)},le=function($){return he($).replace(/\./g,"")},W=function($){try{return se.decodeString($,!0)}catch(B){console.error("base64Decode failed: ",B)}return null};function G($){return X(void 0,$)}function X($,B){if(!(B instanceof Object))return B;switch(B.constructor){case Date:return new Date(B.getTime());case Object:void 0===$&&($={});break;case Array:$=[];break;default:return B}for(const q in B)!B.hasOwnProperty(q)||!qe(q)||($[q]=X($[q],B[q]));return $}function qe($){return"__proto__"!==$}class Ae{constructor(){this.reject=()=>{},this.resolve=()=>{},this.promise=new Promise((B,q)=>{this.resolve=B,this.reject=q})}wrapCallback(B){return(q,ce)=>{q?this.reject(q):this.resolve(ce),"function"==typeof B&&(this.promise.catch(()=>{}),1===B.length?B(q):B(q,ce))}}}function Oe($,B){if($.uid)throw new Error('The "uid" field is no longer supported by mockUserToken. Please use "sub" instead for Firebase Auth User ID.');const ce=B||"demo-project",J=$.iat||0,Ue=$.sub||$.user_id;if(!Ue)throw new Error("mockUserToken must contain 'sub' or 'user_id' field!");const _t=Object.assign({iss:`https://securetoken.google.com/${ce}`,aud:ce,iat:J,exp:J+3600,auth_time:J,sub:Ue,user_id:Ue,firebase:{sign_in_provider:"custom",identities:{}}},$);return[le(JSON.stringify({alg:"none",type:"JWT"})),le(JSON.stringify(_t)),""].join(".")}function Ve(){return"undefined"!=typeof navigator&&"string"==typeof navigator.userAgent?navigator.userAgent:""}function pe(){return"undefined"!=typeof window&&!!(window.cordova||window.phonegap||window.PhoneGap)&&/ios|iphone|ipod|ipad|android|blackberry|iemobile/i.test(Ve())}function Ce(){try{return"[object process]"===Object.prototype.toString.call(global.process)}catch($){return!1}}function nt(){return"object"==typeof self&&self.self===self}function Ke(){const $="object"==typeof chrome?chrome.runtime:"object"==typeof browser?browser.runtime:void 0;return"object"==typeof $&&void 0!==$.id}function Te(){return"object"==typeof navigator&&"ReactNative"===navigator.product}function we(){return Ve().indexOf("Electron/")>=0}function Ee(){const $=Ve();return $.indexOf("MSIE ")>=0||$.indexOf("Trident/")>=0}function $e(){return Ve().indexOf("MSAppHost/")>=0}function je(){return!1}function ne(){return!Ce()&&navigator.userAgent.includes("Safari")&&!navigator.userAgent.includes("Chrome")}function K(){return"object"==typeof indexedDB}function re(){return new Promise(($,B)=>{try{let q=!0;const ce="validate-browser-context-for-indexeddb-analytics-module",J=self.indexedDB.open(ce);J.onsuccess=()=>{J.result.close(),q||self.indexedDB.deleteDatabase(ce),$(!0)},J.onupgradeneeded=()=>{q=!1},J.onerror=()=>{var Ue;B((null===(Ue=J.error)||void 0===Ue?void 0:Ue.message)||"")}}catch(q){B(q)}})}function _e(){return!("undefined"==typeof navigator||!navigator.cookieEnabled)}class ue extends Error{constructor(B,q,ce){super(q),this.code=B,this.customData=ce,this.name="FirebaseError",Object.setPrototypeOf(this,ue.prototype),Error.captureStackTrace&&Error.captureStackTrace(this,It.prototype.create)}}class It{constructor(B,q,ce){this.service=B,this.serviceName=q,this.errors=ce}create(B,...q){const ce=q[0]||{},J=`${this.service}/${B}`,Ue=this.errors[B],_t=Ue?function Qt($,B){return $.replace(Fn,(q,ce)=>{const J=B[ce];return null!=J?String(J):`<${ce}?>`})}(Ue,ce):"Error";return new ue(J,`${this.serviceName}: ${_t} (${J}).`,ce)}}const Fn=/\{\$([^}]+)}/g;function at($){return JSON.parse($)}function gt($){return JSON.stringify($)}const cn=function($){let B={},q={},ce={},J="";try{const Ue=$.split(".");B=at(W(Ue[0])||""),q=at(W(Ue[1])||""),J=Ue[2],ce=q.d||{},delete q.d}catch(Ue){}return{header:B,claims:q,data:ce,signature:J}},Xt=function($){const q=cn($).claims;return!!q&&"object"==typeof q&&q.hasOwnProperty("iat")},qi=function($){const B=cn($).claims;return"object"==typeof B&&!0===B.admin};function Jt($,B){return Object.prototype.hasOwnProperty.call($,B)}function Ht($,B){if(Object.prototype.hasOwnProperty.call($,B))return $[B]}function ur($){for(const B in $)if(Object.prototype.hasOwnProperty.call($,B))return!1;return!0}function Hr($,B,q){const ce={};for(const J in $)Object.prototype.hasOwnProperty.call($,J)&&(ce[J]=B.call(q,$[J],J,$));return ce}function Ws($,B){if($===B)return!0;const q=Object.keys($),ce=Object.keys(B);for(const J of q){if(!ce.includes(J))return!1;const Ue=$[J],_t=B[J];if(Nr(Ue)&&Nr(_t)){if(!Ws(Ue,_t))return!1}else if(Ue!==_t)return!1}for(const J of ce)if(!q.includes(J))return!1;return!0}function Nr($){return null!==$&&"object"==typeof $}function zi($){const B=[];for(const[q,ce]of Object.entries($))Array.isArray(ce)?ce.forEach(J=>{B.push(encodeURIComponent(q)+"="+encodeURIComponent(J))}):B.push(encodeURIComponent(q)+"="+encodeURIComponent(ce));return B.length?"&"+B.join("&"):""}function Pr($){const B={};return $.replace(/^\?/,"").split("&").forEach(ce=>{if(ce){const[J,Ue]=ce.split("=");B[decodeURIComponent(J)]=decodeURIComponent(Ue)}}),B}function ms($){const B=$.indexOf("?");if(!B)return"";const q=$.indexOf("#",B);return $.substring(B,q>0?q:void 0)}class Ki{constructor(){this.chain_=[],this.buf_=[],this.W_=[],this.pad_=[],this.inbuf_=0,this.total_=0,this.blockSize=64,this.pad_[0]=128;for(let B=1;B<this.blockSize;++B)this.pad_[B]=0;this.reset()}reset(){this.chain_[0]=1732584193,this.chain_[1]=4023233417,this.chain_[2]=2562383102,this.chain_[3]=271733878,this.chain_[4]=3285377520,this.inbuf_=0,this.total_=0}compress_(B,q){q||(q=0);const ce=this.W_;if("string"==typeof B)for(let Rt=0;Rt<16;Rt++)ce[Rt]=B.charCodeAt(q)<<24|B.charCodeAt(q+1)<<16|B.charCodeAt(q+2)<<8|B.charCodeAt(q+3),q+=4;else for(let Rt=0;Rt<16;Rt++)ce[Rt]=B[q]<<24|B[q+1]<<16|B[q+2]<<8|B[q+3],q+=4;for(let Rt=16;Rt<80;Rt++){const fn=ce[Rt-3]^ce[Rt-8]^ce[Rt-14]^ce[Rt-16];ce[Rt]=4294967295&(fn<<1|fn>>>31)}let qt,xn,J=this.chain_[0],Ue=this.chain_[1],_t=this.chain_[2],Zt=this.chain_[3],Cr=this.chain_[4];for(let Rt=0;Rt<80;Rt++){Rt<40?Rt<20?(qt=Zt^Ue&(_t^Zt),xn=1518500249):(qt=Ue^_t^Zt,xn=1859775393):Rt<60?(qt=Ue&_t|Zt&(Ue|_t),xn=2400959708):(qt=Ue^_t^Zt,xn=3395469782);const fn=(J<<5|J>>>27)+qt+Cr+xn+ce[Rt]&4294967295;Cr=Zt,Zt=_t,_t=4294967295&(Ue<<30|Ue>>>2),Ue=J,J=fn}this.chain_[0]=this.chain_[0]+J&4294967295,this.chain_[1]=this.chain_[1]+Ue&4294967295,this.chain_[2]=this.chain_[2]+_t&4294967295,this.chain_[3]=this.chain_[3]+Zt&4294967295,this.chain_[4]=this.chain_[4]+Cr&4294967295}update(B,q){if(null==B)return;void 0===q&&(q=B.length);const ce=q-this.blockSize;let J=0;const Ue=this.buf_;let _t=this.inbuf_;for(;J<q;){if(0===_t)for(;J<=ce;)this.compress_(B,J),J+=this.blockSize;if("string"==typeof B){for(;J<q;)if(Ue[_t]=B.charCodeAt(J),++_t,++J,_t===this.blockSize){this.compress_(Ue),_t=0;break}}else for(;J<q;)if(Ue[_t]=B[J],++_t,++J,_t===this.blockSize){this.compress_(Ue),_t=0;break}}this.inbuf_=_t,this.total_+=q}digest(){const B=[];let q=8*this.total_;this.update(this.pad_,this.inbuf_<56?56-this.inbuf_:this.blockSize-(this.inbuf_-56));for(let J=this.blockSize-1;J>=56;J--)this.buf_[J]=255&q,q/=256;this.compress_(this.buf_);let ce=0;for(let J=0;J<5;J++)for(let Ue=24;Ue>=0;Ue-=8)B[ce]=this.chain_[J]>>Ue&255,++ce;return B}}function lt($,B){const q=new $r($,B);return q.subscribe.bind(q)}class $r{constructor(B,q){this.observers=[],this.unsubscribes=[],this.observerCount=0,this.task=Promise.resolve(),this.finalized=!1,this.onNoObservers=q,this.task.then(()=>{B(this)}).catch(ce=>{this.error(ce)})}next(B){this.forEachObserver(q=>{q.next(B)})}error(B){this.forEachObserver(q=>{q.error(B)}),this.close(B)}complete(){this.forEachObserver(B=>{B.complete()}),this.close()}subscribe(B,q,ce){let J;if(void 0===B&&void 0===q&&void 0===ce)throw new Error("Missing Observer.");J=function Yn($,B){if("object"!=typeof $||null===$)return!1;for(const q of B)if(q in $&&"function"==typeof $[q])return!0;return!1}(B,["next","error","complete"])?B:{next:B,error:q,complete:ce},void 0===J.next&&(J.next=ri),void 0===J.error&&(J.error=ri),void 0===J.complete&&(J.complete=ri);const Ue=this.unsubscribeOne.bind(this,this.observers.length);return this.finalized&&this.task.then(()=>{try{this.finalError?J.error(this.finalError):J.complete()}catch(_t){}}),this.observers.push(J),Ue}unsubscribeOne(B){void 0===this.observers||void 0===this.observers[B]||(delete this.observers[B],this.observerCount-=1,0===this.observerCount&&void 0!==this.onNoObservers&&this.onNoObservers(this))}forEachObserver(B){if(!this.finalized)for(let q=0;q<this.observers.length;q++)this.sendOne(q,B)}sendOne(B,q){this.task.then(()=>{if(void 0!==this.observers&&void 0!==this.observers[B])try{q(this.observers[B])}catch(ce){"undefined"!=typeof console&&console.error&&console.error(ce)}})}close(B){this.finalized||(this.finalized=!0,void 0!==B&&(this.finalError=B),this.task.then(()=>{this.observers=void 0,this.onNoObservers=void 0}))}}function ri(){}const qs=function($,B,q,ce){let J;if(ce<B?J="at least "+B:ce>q&&(J=0===q?"none":"no more than "+q),J)throw new Error($+" failed: Was called with "+ce+(1===ce?" argument.":" arguments.")+" Expects "+J+".")};function vn($,B){return`${$} failed: ${B} argument `}function _s($,B,q,ce){if((!ce||q)&&"function"!=typeof q)throw new Error(vn($,B)+"must be a valid function.")}function ha($,B,q,ce){if((!ce||q)&&("object"!=typeof q||null===q))throw new Error(vn($,B)+"must be a valid context object.")}const $t=function($){const B=[];let q=0;for(let ce=0;ce<$.length;ce++){let J=$.charCodeAt(ce);if(J>=55296&&J<=56319){const Ue=J-55296;ce++,O(ce<$.length,"Surrogate pair missing trail surrogate."),J=65536+(Ue<<10)+($.charCodeAt(ce)-56320)}J<128?B[q++]=J:J<2048?(B[q++]=J>>6|192,B[q++]=63&J|128):J<65536?(B[q++]=J>>12|224,B[q++]=J>>6&63|128,B[q++]=63&J|128):(B[q++]=J>>18|240,B[q++]=J>>12&63|128,B[q++]=J>>6&63|128,B[q++]=63&J|128)}return B},it=function($){let B=0;for(let q=0;q<$.length;q++){const ce=$.charCodeAt(q);ce<128?B++:ce<2048?B+=2:ce>=55296&&ce<=56319?(B+=4,q++):B+=3}return B};function Mo($,B=1e3,q=2){const ce=B*Math.pow(q,$),J=Math.round(.5*ce*(Math.random()-.5)*2);return Math.min(144e5,ce+J)}function dt($){return $&&$._delegate?$._delegate:$}function Er($,B){return new Promise((q,ce)=>{$.onsuccess=J=>{q(J.target.result)},$.onerror=J=>{var Ue;ce(`${B}: ${null===(Ue=J.target.error)||void 0===Ue?void 0:Ue.message}`)}})}class Ut{constructor(B){this._db=B,this.objectStoreNames=this._db.objectStoreNames}transaction(B,q){return new Ze(this._db.transaction.call(this._db,B,q))}createObjectStore(B,q){return new Se(this._db.createObjectStore(B,q))}close(){this._db.close()}}class Ze{constructor(B){this._transaction=B,this.complete=new Promise((q,ce)=>{this._transaction.oncomplete=function(){q()},this._transaction.onerror=()=>{ce(this._transaction.error)},this._transaction.onabort=()=>{ce(this._transaction.error)}})}objectStore(B){return new Se(this._transaction.objectStore(B))}}class Se{constructor(B){this._store=B}index(B){return new Je(this._store.index(B))}createIndex(B,q,ce){return new Je(this._store.createIndex(B,q,ce))}get(B){return Er(this._store.get(B),"Error reading from IndexedDB")}put(B,q){return Er(this._store.put(B,q),"Error writing to IndexedDB")}delete(B){return Er(this._store.delete(B),"Error deleting from IndexedDB")}clear(){return Er(this._store.clear(),"Error clearing IndexedDB object store")}}class Je{constructor(B){this._index=B}get(B){return Er(this._index.get(B),"Error reading from IndexedDB")}}function ht($,B,q){return new Promise((ce,J)=>{try{const Ue=indexedDB.open($,B);Ue.onsuccess=_t=>{ce(new Ut(_t.target.result))},Ue.onerror=_t=>{var Zt;J(`Error opening indexedDB: ${null===(Zt=_t.target.error)||void 0===Zt?void 0:Zt.message}`)},Ue.onupgradeneeded=_t=>{q(new Ut(Ue.result),_t.oldVersion,_t.newVersion,new Ze(Ue.transaction))}}catch(Ue){J(`Error opening indexedDB: ${Ue.message}`)}})}function Bt($){return Lt.apply(this,arguments)}function Lt(){return(Lt=(0,m.Z)(function*($){return new Promise((B,q)=>{try{const ce=indexedDB.deleteDatabase($);ce.onsuccess=()=>{B()},ce.onerror=J=>{var Ue;q(`Error deleting indexedDB database "${$}": ${null===(Ue=J.target.error)||void 0===Ue?void 0:Ue.message}`)}}catch(ce){q(`Error deleting indexedDB database "${$}": ${ce.message}`)}})})).apply(this,arguments)}},8705:(ot,De,F)=>{var m=F(5e3);let Q=null;function O(){return Q}const se=new m.OlP("DocumentToken");let he=(()=>{class n{historyGo(t){throw new Error("Not implemented")}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275prov=m.Yz7({token:n,factory:function(){return function le(){return(0,m.LFG)(G)}()},providedIn:"platform"}),n})();const W=new m.OlP("Location Initialized");let G=(()=>{class n extends he{constructor(t){super(),this._doc=t,this._init()}_init(){this.location=window.location,this._history=window.history}getBaseHrefFromDOM(){return O().getBaseHref(this._doc)}onPopState(t){const r=O().getGlobalEventTarget(this._doc,"window");return r.addEventListener("popstate",t,!1),()=>r.removeEventListener("popstate",t)}onHashChange(t){const r=O().getGlobalEventTarget(this._doc,"window");return r.addEventListener("hashchange",t,!1),()=>r.removeEventListener("hashchange",t)}get href(){return this.location.href}get protocol(){return this.location.protocol}get hostname(){return this.location.hostname}get port(){return this.location.port}get pathname(){return this.location.pathname}get search(){return this.location.search}get hash(){return this.location.hash}set pathname(t){this.location.pathname=t}pushState(t,r,i){X()?this._history.pushState(t,r,i):this.location.hash=i}replaceState(t,r,i){X()?this._history.replaceState(t,r,i):this.location.hash=i}forward(){this._history.forward()}back(){this._history.back()}historyGo(t=0){this._history.go(t)}getState(){return this._history.state}}return n.\u0275fac=function(t){return new(t||n)(m.LFG(se))},n.\u0275prov=m.Yz7({token:n,factory:function(){return function qe(){return new G((0,m.LFG)(se))}()},providedIn:"platform"}),n})();function X(){return!!window.history.pushState}function Ae(n,e){if(0==n.length)return e;if(0==e.length)return n;let t=0;return n.endsWith("/")&&t++,e.startsWith("/")&&t++,2==t?n+e.substring(1):1==t?n+e:n+"/"+e}function Oe(n){const e=n.match(/#|\?|$/),t=e&&e.index||n.length;return n.slice(0,t-("/"===n[t-1]?1:0))+n.slice(t)}function Ve(n){return n&&"?"!==n[0]?"?"+n:n}let pe=(()=>{class n{historyGo(t){throw new Error("Not implemented")}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275prov=m.Yz7({token:n,factory:function(){return function Ce(n){const e=(0,m.LFG)(se).location;return new Ke((0,m.LFG)(he),e&&e.origin||"")}()},providedIn:"root"}),n})();const nt=new m.OlP("appBaseHref");let Ke=(()=>{class n extends pe{constructor(t,r){if(super(),this._platformLocation=t,this._removeListenerFns=[],null==r&&(r=this._platformLocation.getBaseHrefFromDOM()),null==r)throw new Error("No base href set. Please provide a value for the APP_BASE_HREF token or add a base element to the document.");this._baseHref=r}ngOnDestroy(){for(;this._removeListenerFns.length;)this._removeListenerFns.pop()()}onPopState(t){this._removeListenerFns.push(this._platformLocation.onPopState(t),this._platformLocation.onHashChange(t))}getBaseHref(){return this._baseHref}prepareExternalUrl(t){return Ae(this._baseHref,t)}path(t=!1){const r=this._platformLocation.pathname+Ve(this._platformLocation.search),i=this._platformLocation.hash;return i&&t?`${r}${i}`:r}pushState(t,r,i,a){const l=this.prepareExternalUrl(i+Ve(a));this._platformLocation.pushState(t,r,l)}replaceState(t,r,i,a){const l=this.prepareExternalUrl(i+Ve(a));this._platformLocation.replaceState(t,r,l)}forward(){this._platformLocation.forward()}back(){this._platformLocation.back()}historyGo(t=0){var r,i;null===(i=(r=this._platformLocation).historyGo)||void 0===i||i.call(r,t)}}return n.\u0275fac=function(t){return new(t||n)(m.LFG(he),m.LFG(nt,8))},n.\u0275prov=m.Yz7({token:n,factory:n.\u0275fac}),n})(),Te=(()=>{class n extends pe{constructor(t,r){super(),this._platformLocation=t,this._baseHref="",this._removeListenerFns=[],null!=r&&(this._baseHref=r)}ngOnDestroy(){for(;this._removeListenerFns.length;)this._removeListenerFns.pop()()}onPopState(t){this._removeListenerFns.push(this._platformLocation.onPopState(t),this._platformLocation.onHashChange(t))}getBaseHref(){return this._baseHref}path(t=!1){let r=this._platformLocation.hash;return null==r&&(r="#"),r.length>0?r.substring(1):r}prepareExternalUrl(t){const r=Ae(this._baseHref,t);return r.length>0?"#"+r:r}pushState(t,r,i,a){let l=this.prepareExternalUrl(i+Ve(a));0==l.length&&(l=this._platformLocation.pathname),this._platformLocation.pushState(t,r,l)}replaceState(t,r,i,a){let l=this.prepareExternalUrl(i+Ve(a));0==l.length&&(l=this._platformLocation.pathname),this._platformLocation.replaceState(t,r,l)}forward(){this._platformLocation.forward()}back(){this._platformLocation.back()}historyGo(t=0){var r,i;null===(i=(r=this._platformLocation).historyGo)||void 0===i||i.call(r,t)}}return n.\u0275fac=function(t){return new(t||n)(m.LFG(he),m.LFG(nt,8))},n.\u0275prov=m.Yz7({token:n,factory:n.\u0275fac}),n})(),we=(()=>{class n{constructor(t,r){this._subject=new m.vpe,this._urlChangeListeners=[],this._platformStrategy=t;const i=this._platformStrategy.getBaseHref();this._platformLocation=r,this._baseHref=Oe(je(i)),this._platformStrategy.onPopState(a=>{this._subject.emit({url:this.path(!0),pop:!0,state:a.state,type:a.type})})}path(t=!1){return this.normalize(this._platformStrategy.path(t))}getState(){return this._platformLocation.getState()}isCurrentPathEqualTo(t,r=""){return this.path()==this.normalize(t+Ve(r))}normalize(t){return n.stripTrailingSlash(function $e(n,e){return n&&e.startsWith(n)?e.substring(n.length):e}(this._baseHref,je(t)))}prepareExternalUrl(t){return t&&"/"!==t[0]&&(t="/"+t),this._platformStrategy.prepareExternalUrl(t)}go(t,r="",i=null){this._platformStrategy.pushState(i,"",t,r),this._notifyUrlChangeListeners(this.prepareExternalUrl(t+Ve(r)),i)}replaceState(t,r="",i=null){this._platformStrategy.replaceState(i,"",t,r),this._notifyUrlChangeListeners(this.prepareExternalUrl(t+Ve(r)),i)}forward(){this._platformStrategy.forward()}back(){this._platformStrategy.back()}historyGo(t=0){var r,i;null===(i=(r=this._platformStrategy).historyGo)||void 0===i||i.call(r,t)}onUrlChange(t){this._urlChangeListeners.push(t),this._urlChangeSubscription||(this._urlChangeSubscription=this.subscribe(r=>{this._notifyUrlChangeListeners(r.url,r.state)}))}_notifyUrlChangeListeners(t="",r){this._urlChangeListeners.forEach(i=>i(t,r))}subscribe(t,r,i){return this._subject.subscribe({next:t,error:r,complete:i})}}return n.normalizeQueryParams=Ve,n.joinWithSlash=Ae,n.stripTrailingSlash=Oe,n.\u0275fac=function(t){return new(t||n)(m.LFG(pe),m.LFG(he))},n.\u0275prov=m.Yz7({token:n,factory:function(){return function Ee(){return new we((0,m.LFG)(pe),(0,m.LFG)(he))}()},providedIn:"root"}),n})();function je(n){return n.replace(/\/index.html$/,"")}function Po(n,e){e=encodeURIComponent(e);for(const t of n.split(";")){const r=t.indexOf("="),[i,a]=-1==r?[t,""]:[t.slice(0,r),t.slice(r+1)];if(i.trim()===e)return decodeURIComponent(a)}return null}let si=(()=>{class n{constructor(t,r){this._viewContainer=t,this._context=new sn,this._thenTemplateRef=null,this._elseTemplateRef=null,this._thenViewRef=null,this._elseViewRef=null,this._thenTemplateRef=r}set ngIf(t){this._context.$implicit=this._context.ngIf=t,this._updateView()}set ngIfThen(t){Du("ngIfThen",t),this._thenTemplateRef=t,this._thenViewRef=null,this._updateView()}set ngIfElse(t){Du("ngIfElse",t),this._elseTemplateRef=t,this._elseViewRef=null,this._updateView()}_updateView(){this._context.$implicit?this._thenViewRef||(this._viewContainer.clear(),this._elseViewRef=null,this._thenTemplateRef&&(this._thenViewRef=this._viewContainer.createEmbeddedView(this._thenTemplateRef,this._context))):this._elseViewRef||(this._viewContainer.clear(),this._thenViewRef=null,this._elseTemplateRef&&(this._elseViewRef=this._viewContainer.createEmbeddedView(this._elseTemplateRef,this._context)))}static ngTemplateContextGuard(t,r){return!0}}return n.\u0275fac=function(t){return new(t||n)(m.Y36(m.s_b),m.Y36(m.Rgc))},n.\u0275dir=m.lG2({type:n,selectors:[["","ngIf",""]],inputs:{ngIf:"ngIf",ngIfThen:"ngIfThen",ngIfElse:"ngIfElse"}}),n})();class sn{constructor(){this.$implicit=null,this.ngIf=null}}function Du(n,e){if(e&&!e.createEmbeddedView)throw new Error(`${n} must be a TemplateRef, but received '${(0,m.AaK)(e)}'.`)}let ga=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=m.oAB({type:n}),n.\u0275inj=m.cJS({}),n})();function hr(n){return"server"===n}let Pu=(()=>{class n{}return n.\u0275prov=(0,m.Yz7)({token:n,providedIn:"root",factory:()=>new ku((0,m.LFG)(se),window)}),n})();class ku{constructor(e,t){this.document=e,this.window=t,this.offset=()=>[0,0]}setOffset(e){this.offset=Array.isArray(e)?()=>e:e}getScrollPosition(){return this.supportsScrolling()?[this.window.pageXOffset,this.window.pageYOffset]:[0,0]}scrollToPosition(e){this.supportsScrolling()&&this.window.scrollTo(e[0],e[1])}scrollToAnchor(e){if(!this.supportsScrolling())return;const t=function Ya(n,e){const t=n.getElementById(e)||n.getElementsByName(e)[0];if(t)return t;if("function"==typeof n.createTreeWalker&&n.body&&(n.body.createShadowRoot||n.body.attachShadow)){const r=n.createTreeWalker(n.body,NodeFilter.SHOW_ELEMENT);let i=r.currentNode;for(;i;){const a=i.shadowRoot;if(a){const l=a.getElementById(e)||a.querySelector(`[name="${e}"]`);if(l)return l}i=r.nextNode()}}return null}(this.document,e);t&&(this.scrollToElement(t),t.focus())}setHistoryScrollRestoration(e){if(this.supportScrollRestoration()){const t=this.window.history;t&&t.scrollRestoration&&(t.scrollRestoration=e)}}scrollToElement(e){const t=e.getBoundingClientRect(),r=t.left+this.window.pageXOffset,i=t.top+this.window.pageYOffset,a=this.offset();this.window.scrollTo(r-a[0],i-a[1])}supportScrollRestoration(){try{if(!this.supportsScrolling())return!1;const e=Cs(this.window.history)||Cs(Object.getPrototypeOf(this.window.history));return!(!e||!e.writable&&!e.set)}catch(e){return!1}}supportsScrolling(){try{return!!this.window&&!!this.window.scrollTo&&"pageXOffset"in this.window}catch(e){return!1}}}function Cs(n){return Object.getOwnPropertyDescriptor(n,"scrollRestoration")}class gn{}class eo extends class ma extends class me{}{constructor(){super(...arguments),this.supportsDOMEvents=!0}}{static makeCurrent(){!function ee(n){Q||(Q=n)}(new eo)}onAndCancel(e,t,r){return e.addEventListener(t,r,!1),()=>{e.removeEventListener(t,r,!1)}}dispatchEvent(e,t){e.dispatchEvent(t)}remove(e){e.parentNode&&e.parentNode.removeChild(e)}createElement(e,t){return(t=t||this.getDefaultDocument()).createElement(e)}createHtmlDocument(){return document.implementation.createHTMLDocument("fakeTitle")}getDefaultDocument(){return document}isElementNode(e){return e.nodeType===Node.ELEMENT_NODE}isShadowRoot(e){return e instanceof DocumentFragment}getGlobalEventTarget(e,t){return"window"===t?window:"document"===t?e:"body"===t?e.body:null}getBaseHref(e){const t=function ud(){return on=on||document.querySelector("base"),on?on.getAttribute("href"):null}();return null==t?null:function Vo(n){Lo=Lo||document.createElement("a"),Lo.setAttribute("href",n);const e=Lo.pathname;return"/"===e.charAt(0)?e:`/${e}`}(t)}resetBaseElement(){on=null}getUserAgent(){return window.navigator.userAgent}getCookie(e){return Po(document.cookie,e)}}let Lo,on=null;const br=new m.OlP("TRANSITION_ID"),Qa=[{provide:m.ip1,useFactory:function Vn(n,e,t){return()=>{t.get(m.CZH).donePromise.then(()=>{const r=O(),i=e.querySelectorAll(`style[ng-transition="${n}"]`);for(let a=0;a<i.length;a++)r.remove(i[a])})}},deps:[br,se,m.zs3],multi:!0}];class Si{static init(){(0,m.VLi)(new Si)}addToWindow(e){m.dqk.getAngularTestability=(r,i=!0)=>{const a=e.findTestabilityInTree(r,i);if(null==a)throw new Error("Could not find testability for element.");return a},m.dqk.getAllAngularTestabilities=()=>e.getAllTestabilities(),m.dqk.getAllAngularRootElements=()=>e.getAllRootElements(),m.dqk.frameworkStabilizers||(m.dqk.frameworkStabilizers=[]),m.dqk.frameworkStabilizers.push(r=>{const i=m.dqk.getAllAngularTestabilities();let a=i.length,l=!1;const h=function(_){l=l||_,a--,0==a&&r(l)};i.forEach(function(_){_.whenStable(h)})})}findTestabilityInTree(e,t,r){if(null==t)return null;const i=e.getTestability(t);return null!=i?i:r?O().isShadowRoot(t)?this.findTestabilityInTree(e,t.host,!0):this.findTestabilityInTree(e,t.parentElement,!0):null}}let Dr=(()=>{class n{build(){return new XMLHttpRequest}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275prov=m.Yz7({token:n,factory:n.\u0275fac}),n})();const to=new m.OlP("EventManagerPlugins");let Is=(()=>{class n{constructor(t,r){this._zone=r,this._eventNameToPlugin=new Map,t.forEach(i=>i.manager=this),this._plugins=t.slice().reverse()}addEventListener(t,r,i){return this._findPluginFor(r).addEventListener(t,r,i)}addGlobalEventListener(t,r,i){return this._findPluginFor(r).addGlobalEventListener(t,r,i)}getZone(){return this._zone}_findPluginFor(t){const r=this._eventNameToPlugin.get(t);if(r)return r;const i=this._plugins;for(let a=0;a<i.length;a++){const l=i[a];if(l.supports(t))return this._eventNameToPlugin.set(t,l),l}throw new Error(`No event manager plugin found for event ${t}`)}}return n.\u0275fac=function(t){return new(t||n)(m.LFG(to),m.LFG(m.R0b))},n.\u0275prov=m.Yz7({token:n,factory:n.\u0275fac}),n})();class Ou{constructor(e){this._doc=e}addGlobalEventListener(e,t,r){const i=O().getGlobalEventTarget(this._doc,e);if(!i)throw new Error(`Unsupported event target ${i} for event ${t}`);return this.addEventListener(i,t,r)}}let zr=(()=>{class n{constructor(){this._stylesSet=new Set}addStyles(t){const r=new Set;t.forEach(i=>{this._stylesSet.has(i)||(this._stylesSet.add(i),r.add(i))}),this.onStylesAdded(r)}onStylesAdded(t){}getAllStyles(){return Array.from(this._stylesSet)}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275prov=m.Yz7({token:n,factory:n.\u0275fac}),n})(),no=(()=>{class n extends zr{constructor(t){super(),this._doc=t,this._hostNodes=new Map,this._hostNodes.set(t.head,[])}_addStylesToHost(t,r,i){t.forEach(a=>{const l=this._doc.createElement("style");l.textContent=a,i.push(r.appendChild(l))})}addHost(t){const r=[];this._addStylesToHost(this._stylesSet,t,r),this._hostNodes.set(t,r)}removeHost(t){const r=this._hostNodes.get(t);r&&r.forEach(ro),this._hostNodes.delete(t)}onStylesAdded(t){this._hostNodes.forEach((r,i)=>{this._addStylesToHost(t,i,r)})}ngOnDestroy(){this._hostNodes.forEach(t=>t.forEach(ro))}}return n.\u0275fac=function(t){return new(t||n)(m.LFG(se))},n.\u0275prov=m.Yz7({token:n,factory:n.\u0275fac}),n})();function ro(n){O().remove(n)}const ft={svg:"http://www.w3.org/2000/svg",xhtml:"http://www.w3.org/1999/xhtml",xlink:"http://www.w3.org/1999/xlink",xml:"http://www.w3.org/XML/1998/namespace",xmlns:"http://www.w3.org/2000/xmlns/",math:"http://www.w3.org/1998/MathML/"},Fu=/%COMP%/g;function Ie(n,e,t){for(let r=0;r<e.length;r++){let i=e[r];Array.isArray(i)?Ie(n,i,t):(i=i.replace(Fu,n),t.push(i))}return t}function Vt(n){return e=>{if("__ngUnwrap__"===e)return n;!1===n(e)&&(e.preventDefault(),e.returnValue=!1)}}let Cn=(()=>{class n{constructor(t,r,i){this.eventManager=t,this.sharedStylesHost=r,this.appId=i,this.rendererByCompId=new Map,this.defaultRenderer=new _a(t)}createRenderer(t,r){if(!t||!r)return this.defaultRenderer;switch(r.encapsulation){case m.ifc.Emulated:{let i=this.rendererByCompId.get(r.id);return i||(i=new Vl(this.eventManager,this.sharedStylesHost,r,this.appId),this.rendererByCompId.set(r.id,i)),i.applyToHost(t),i}case 1:case m.ifc.ShadowDom:return new Ul(this.eventManager,this.sharedStylesHost,t,r);default:if(!this.rendererByCompId.has(r.id)){const i=Ie(r.id,r.styles,[]);this.sharedStylesHost.addStyles(i),this.rendererByCompId.set(r.id,this.defaultRenderer)}return this.defaultRenderer}}begin(){}end(){}}return n.\u0275fac=function(t){return new(t||n)(m.LFG(Is),m.LFG(no),m.LFG(m.AFp))},n.\u0275prov=m.Yz7({token:n,factory:n.\u0275fac}),n})();class _a{constructor(e){this.eventManager=e,this.data=Object.create(null),this.destroyNode=null}destroy(){}createElement(e,t){return t?document.createElementNS(ft[t]||t,e):document.createElement(e)}createComment(e){return document.createComment(e)}createText(e){return document.createTextNode(e)}appendChild(e,t){e.appendChild(t)}insertBefore(e,t,r){e&&e.insertBefore(t,r)}removeChild(e,t){e&&e.removeChild(t)}selectRootElement(e,t){let r="string"==typeof e?document.querySelector(e):e;if(!r)throw new Error(`The selector "${e}" did not match any elements`);return t||(r.textContent=""),r}parentNode(e){return e.parentNode}nextSibling(e){return e.nextSibling}setAttribute(e,t,r,i){if(i){t=i+":"+t;const a=ft[i];a?e.setAttributeNS(a,t,r):e.setAttribute(t,r)}else e.setAttribute(t,r)}removeAttribute(e,t,r){if(r){const i=ft[r];i?e.removeAttributeNS(i,t):e.removeAttribute(`${r}:${t}`)}else e.removeAttribute(t)}addClass(e,t){e.classList.add(t)}removeClass(e,t){e.classList.remove(t)}setStyle(e,t,r,i){i&(m.JOm.DashCase|m.JOm.Important)?e.style.setProperty(t,r,i&m.JOm.Important?"important":""):e.style[t]=r}removeStyle(e,t,r){r&m.JOm.DashCase?e.style.removeProperty(t):e.style[t]=""}setProperty(e,t,r){e[t]=r}setValue(e,t){e.nodeValue=t}listen(e,t,r){return"string"==typeof e?this.eventManager.addGlobalEventListener(e,t,Vt(r)):this.eventManager.addEventListener(e,t,Vt(r))}}class Vl extends _a{constructor(e,t,r,i){super(e),this.component=r;const a=Ie(i+"-"+r.id,r.styles,[]);t.addStyles(a),this.contentAttr=function Ol(n){return"_ngcontent-%COMP%".replace(Fu,n)}(i+"-"+r.id),this.hostAttr=function Fl(n){return"_nghost-%COMP%".replace(Fu,n)}(i+"-"+r.id)}applyToHost(e){super.setAttribute(e,this.hostAttr,"")}createElement(e,t){const r=super.createElement(e,t);return super.setAttribute(r,this.contentAttr,""),r}}class Ul extends _a{constructor(e,t,r,i){super(e),this.sharedStylesHost=t,this.hostEl=r,this.shadowRoot=r.attachShadow({mode:"open"}),this.sharedStylesHost.addHost(this.shadowRoot);const a=Ie(i.id,i.styles,[]);for(let l=0;l<a.length;l++){const h=document.createElement("style");h.textContent=a[l],this.shadowRoot.appendChild(h)}}nodeOrShadowRoot(e){return e===this.hostEl?this.shadowRoot:e}destroy(){this.sharedStylesHost.removeHost(this.shadowRoot)}appendChild(e,t){return super.appendChild(this.nodeOrShadowRoot(e),t)}insertBefore(e,t,r){return super.insertBefore(this.nodeOrShadowRoot(e),t,r)}removeChild(e,t){return super.removeChild(this.nodeOrShadowRoot(e),t)}parentNode(e){return this.nodeOrShadowRoot(super.parentNode(this.nodeOrShadowRoot(e)))}}let ld=(()=>{class n extends Ou{constructor(t){super(t)}supports(t){return!0}addEventListener(t,r,i){return t.addEventListener(r,i,!1),()=>this.removeEventListener(t,r,i)}removeEventListener(t,r,i){return t.removeEventListener(r,i)}}return n.\u0275fac=function(t){return new(t||n)(m.LFG(se))},n.\u0275prov=m.Yz7({token:n,factory:n.\u0275fac}),n})();const Bl=["alt","control","meta","shift"],io={"\b":"Backspace","\t":"Tab","\x7f":"Delete","\x1b":"Escape",Del:"Delete",Esc:"Escape",Left:"ArrowLeft",Right:"ArrowRight",Up:"ArrowUp",Down:"ArrowDown",Menu:"ContextMenu",Scroll:"ScrollLock",Win:"OS"},fr={A:"1",B:"2",C:"3",D:"4",E:"5",F:"6",G:"7",H:"8",I:"9",J:"*",K:"+",M:"-",N:".",O:"/","`":"0","\x90":"NumLock"},ui={alt:n=>n.altKey,control:n=>n.ctrlKey,meta:n=>n.metaKey,shift:n=>n.shiftKey};let ju=(()=>{class n extends Ou{constructor(t){super(t)}supports(t){return null!=n.parseEventName(t)}addEventListener(t,r,i){const a=n.parseEventName(r),l=n.eventCallback(a.fullKey,i,this.manager.getZone());return this.manager.getZone().runOutsideAngular(()=>O().onAndCancel(t,a.domEventName,l))}static parseEventName(t){const r=t.toLowerCase().split("."),i=r.shift();if(0===r.length||"keydown"!==i&&"keyup"!==i)return null;const a=n._normalizeKey(r.pop());let l="";if(Bl.forEach(_=>{const w=r.indexOf(_);w>-1&&(r.splice(w,1),l+=_+".")}),l+=a,0!=r.length||0===a.length)return null;const h={};return h.domEventName=i,h.fullKey=l,h}static getEventFullKey(t){let r="",i=function so(n){let e=n.key;if(null==e){if(e=n.keyIdentifier,null==e)return"Unidentified";e.startsWith("U+")&&(e=String.fromCharCode(parseInt(e.substring(2),16)),3===n.location&&fr.hasOwnProperty(e)&&(e=fr[e]))}return io[e]||e}(t);return i=i.toLowerCase()," "===i?i="space":"."===i&&(i="dot"),Bl.forEach(a=>{a!=i&&ui[a](t)&&(r+=a+".")}),r+=i,r}static eventCallback(t,r,i){return a=>{n.getEventFullKey(a)===t&&i.runGuarded(()=>r(a))}}static _normalizeKey(t){return"esc"===t?"escape":t}}return n.\u0275fac=function(t){return new(t||n)(m.LFG(se))},n.\u0275prov=m.Yz7({token:n,factory:n.\u0275fac}),n})();const Hl=(0,m.eFA)(m._c5,"browser",[{provide:m.Lbi,useValue:"browser"},{provide:m.g9A,useValue:function Ai(){eo.makeCurrent(),Si.init()},multi:!0},{provide:se,useFactory:function Hu(){return(0,m.RDi)(document),document},deps:[]}]),Xa=[{provide:m.zSh,useValue:"root"},{provide:m.qLn,useFactory:function jl(){return new m.qLn},deps:[]},{provide:to,useClass:ld,multi:!0,deps:[se,m.R0b,m.Lbi]},{provide:to,useClass:ju,multi:!0,deps:[se]},{provide:Cn,useClass:Cn,deps:[Is,no,m.AFp]},{provide:m.FYo,useExisting:Cn},{provide:zr,useExisting:no},{provide:no,useClass:no,deps:[se]},{provide:m.dDg,useClass:m.dDg,deps:[m.R0b]},{provide:Is,useClass:Is,deps:[to,m.R0b]},{provide:gn,useClass:Dr,deps:[]}];let eu=(()=>{class n{constructor(t){if(t)throw new Error("BrowserModule has already been loaded. If you need access to common directives such as NgIf and NgFor from a lazy loaded module, import CommonModule instead.")}static withServerTransition(t){return{ngModule:n,providers:[{provide:m.AFp,useValue:t.appId},{provide:br,useExisting:m.AFp},Qa]}}}return n.\u0275fac=function(t){return new(t||n)(m.LFG(n,12))},n.\u0275mod=m.oAB({type:n}),n.\u0275inj=m.cJS({providers:Xa,imports:[ga,m.hGG]}),n})();"undefined"!=typeof window&&window;var wn=F(8996),Mn=F(7669);function ct(...n){const e=(0,Mn.yG)(n);return(0,wn.D)(n,e)}var pr=F(7579);class Zr extends pr.x{constructor(e){super(),this._value=e}get value(){return this.getValue()}_subscribe(e){const t=super._subscribe(e);return!t.closed&&e.next(this._value),t}getValue(){const{hasError:e,thrownError:t,_value:r}=this;if(e)throw t;return this._throwIfClosed(),r}next(e){super.next(this._value=e)}}var gr=F(8306);const{isArray:wa}=Array,{getPrototypeOf:yd,prototype:mn,keys:rf}=Object;function xi(n){if(1===n.length){const e=n[0];if(wa(e))return{args:e,keys:null};if(function Wu(n){return n&&"object"==typeof n&&yd(n)===mn}(e)){const t=rf(e);return{args:t.map(r=>e[r]),keys:t}}}return{args:n,keys:null}}var Yr=F(4671),yt=F(4004);const{isArray:vd}=Array;function wd(n){return(0,yt.U)(e=>function Yl(n,e){return vd(e)?n(...e):n(e)}(n,e))}function $o(n,e){return n.reduce((t,r,i)=>(t[r]=e[i],t),{})}var In=F(5403),Ts=F(9672);function uo(n,e,t){n?(0,Ts.f)(t,n,e):e()}var nu=F(576);function Qi(n,e){const t=(0,nu.m)(n)?n:()=>n,r=i=>i.error(t());return new gr.y(e?i=>e.schedule(r,0,i):r)}const lo=(0,F(3888).d)(n=>function(){n(this),this.name="EmptyError",this.message="no elements in sequence"});var Ji=F(8189);function Ed(...n){return function Jl(){return(0,Ji.J)(1)}()((0,wn.D)(n,(0,Mn.yG)(n)))}var Go=F(8421);function Ri(n){return new gr.y(e=>{(0,Go.Xf)(n()).subscribe(e)})}var Ca=F(515),ru=F(727),sr=F(4482);function Mi(){return(0,sr.e)((n,e)=>{let t=null;n._refCount++;const r=(0,In.x)(e,void 0,void 0,void 0,()=>{if(!n||n._refCount<=0||0<--n._refCount)return void(t=null);const i=n._connection,a=t;t=null,i&&(!a||i===a)&&i.unsubscribe(),e.unsubscribe()});n.subscribe(r),r.closed||(t=n.connect())})}class Cd extends gr.y{constructor(e,t){super(),this.source=e,this.subjectFactory=t,this._subject=null,this._refCount=0,this._connection=null,(0,sr.A)(e)&&(this.lift=e.lift)}_subscribe(e){return this.getSubject().subscribe(e)}getSubject(){const e=this._subject;return(!e||e.isStopped)&&(this._subject=this.subjectFactory()),this._subject}_teardown(){this._refCount=0;const{_connection:e}=this;this._subject=this._connection=null,null==e||e.unsubscribe()}connect(){let e=this._connection;if(!e){e=this._connection=new ru.w0;const t=this.getSubject();e.add(this.source.subscribe((0,In.x)(t,void 0,()=>{this._teardown(),t.complete()},r=>{this._teardown(),t.error(r)},()=>this._teardown()))),e.closed&&(this._connection=null,e=ru.w0.EMPTY)}return e}refCount(){return Mi()(this)}}function bn(n,e){return(0,sr.e)((t,r)=>{let i=null,a=0,l=!1;const h=()=>l&&!i&&r.complete();t.subscribe((0,In.x)(r,_=>{null==i||i.unsubscribe();let w=0;const D=a++;(0,Go.Xf)(n(_,D)).subscribe(i=(0,In.x)(r,S=>r.next(e?e(_,S,D,w++):S),()=>{i=null,h()}))},()=>{l=!0,h()}))})}var Ia=F(5698);function Ni(...n){const e=(0,Mn.yG)(n);return(0,sr.e)((t,r)=>{(e?Ed(n,t,e):Ed(n,t)).subscribe(r)})}function ba(n,e,t,r,i){return(a,l)=>{let h=t,_=e,w=0;a.subscribe((0,In.x)(l,D=>{const S=w++;_=h?n(_,D,S):(h=!0,D),r&&l.next(_)},i&&(()=>{h&&l.next(_),l.complete()})))}}function or(n,e){return(0,sr.e)(ba(n,e,arguments.length>=2,!0))}function Xi(n,e){return(0,sr.e)((t,r)=>{let i=0;t.subscribe((0,In.x)(r,a=>n.call(e,a,i++)&&r.next(a)))})}function es(n){return(0,sr.e)((e,t)=>{let a,r=null,i=!1;r=e.subscribe((0,In.x)(t,void 0,void 0,l=>{a=(0,Go.Xf)(n(l,es(n)(e))),r?(r.unsubscribe(),r=null,a.subscribe(t)):i=!0})),i&&(r.unsubscribe(),r=null,a.subscribe(t))})}var Nn=F(5577);function Ss(n,e){return(0,nu.m)(e)?(0,Nn.z)(n,e,1):(0,Nn.z)(n,1)}function Id(n){return n<=0?()=>Ca.E:(0,sr.e)((e,t)=>{let r=[];e.subscribe((0,In.x)(t,i=>{r.push(i),n<r.length&&r.shift()},()=>{for(const i of r)t.next(i);t.complete()},void 0,()=>{r=null}))})}function Pn(n=wg){return(0,sr.e)((e,t)=>{let r=!1;e.subscribe((0,In.x)(t,i=>{r=!0,t.next(i)},()=>r?t.complete():t.error(n())))})}function wg(){return new lo}function Eg(n){return(0,sr.e)((e,t)=>{let r=!1;e.subscribe((0,In.x)(t,i=>{r=!0,t.next(i)},()=>{r||t.next(n),t.complete()}))})}function co(n,e){const t=arguments.length>=2;return r=>r.pipe(n?Xi((i,a)=>n(i,a,r)):Yr.y,(0,Ia.q)(1),t?Eg(e):Pn(()=>new lo))}var Qr=F(8505);class ho{constructor(e,t){this.id=e,this.url=t}}class As extends ho{constructor(e,t,r="imperative",i=null){super(e,t),this.navigationTrigger=r,this.restoredState=i}toString(){return`NavigationStart(id: ${this.id}, url: '${this.url}')`}}class qu extends ho{constructor(e,t,r){super(e,t),this.urlAfterRedirects=r}toString(){return`NavigationEnd(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}')`}}class Sn extends ho{constructor(e,t,r){super(e,t),this.reason=r}toString(){return`NavigationCancel(id: ${this.id}, url: '${this.url}')`}}class Xl extends ho{constructor(e,t,r){super(e,t),this.error=r}toString(){return`NavigationError(id: ${this.id}, url: '${this.url}', error: ${this.error})`}}class Da extends ho{constructor(e,t,r,i){super(e,t),this.urlAfterRedirects=r,this.state=i}toString(){return`RoutesRecognized(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}}class bg extends ho{constructor(e,t,r,i){super(e,t),this.urlAfterRedirects=r,this.state=i}toString(){return`GuardsCheckStart(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}}class ec extends ho{constructor(e,t,r,i,a){super(e,t),this.urlAfterRedirects=r,this.state=i,this.shouldActivate=a}toString(){return`GuardsCheckEnd(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state}, shouldActivate: ${this.shouldActivate})`}}class mr extends ho{constructor(e,t,r,i){super(e,t),this.urlAfterRedirects=r,this.state=i}toString(){return`ResolveStart(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}}class ci extends ho{constructor(e,t,r,i){super(e,t),this.urlAfterRedirects=r,this.state=i}toString(){return`ResolveEnd(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}}class tc{constructor(e){this.route=e}toString(){return`RouteConfigLoadStart(path: ${this.route.path})`}}class xs{constructor(e){this.route=e}toString(){return`RouteConfigLoadEnd(path: ${this.route.path})`}}class Pi{constructor(e){this.snapshot=e}toString(){return`ChildActivationStart(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}}class ts{constructor(e){this.snapshot=e}toString(){return`ChildActivationEnd(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}}class iu{constructor(e){this.snapshot=e}toString(){return`ActivationStart(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}}class nc{constructor(e){this.snapshot=e}toString(){return`ActivationEnd(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}}class rc{constructor(e,t,r){this.routerEvent=e,this.position=t,this.anchor=r}toString(){return`Scroll(anchor: '${this.anchor}', position: '${this.position?`${this.position[0]}, ${this.position[1]}`:null}')`}}const Ot="primary";class ic{constructor(e){this.params=e||{}}has(e){return Object.prototype.hasOwnProperty.call(this.params,e)}get(e){if(this.has(e)){const t=this.params[e];return Array.isArray(t)?t[0]:t}return null}getAll(e){if(this.has(e)){const t=this.params[e];return Array.isArray(t)?t:[t]}return[]}get keys(){return Object.keys(this.params)}}function Jn(n){return new ic(n)}const sc="ngNavigationCancelingError";function fo(n){const e=Error("NavigationCancelingError: "+n);return e[sc]=!0,e}function Wo(n,e,t){const r=t.path.split("/");if(r.length>n.length||"full"===t.pathMatch&&(e.hasChildren()||r.length<n.length))return null;const i={};for(let a=0;a<r.length;a++){const l=r[a],h=n[a];if(l.startsWith(":"))i[l.substring(1)]=h;else if(l!==h.path)return null}return{consumed:n.slice(0,r.length),posParams:i}}function ns(n,e){const t=n?Object.keys(n):void 0,r=e?Object.keys(e):void 0;if(!t||!r||t.length!=r.length)return!1;let i;for(let a=0;a<t.length;a++)if(i=t[a],!Ku(n[i],e[i]))return!1;return!0}function Ku(n,e){if(Array.isArray(n)&&Array.isArray(e)){if(n.length!==e.length)return!1;const t=[...n].sort(),r=[...e].sort();return t.every((i,a)=>r[a]===i)}return n===e}function rs(n){return Array.prototype.concat.apply([],n)}function Dd(n){return n.length>0?n[n.length-1]:null}function $n(n,e){for(const t in n)n.hasOwnProperty(t)&&e(n[t],t)}function di(n){return(0,m.CqO)(n)?n:(0,m.QGY)(n)?(0,wn.D)(Promise.resolve(n)):ct(n)}const qo={exact:function T(n,e,t){if(!Mt(n.segments,e.segments)||!te(n.segments,e.segments,t)||n.numberOfChildren!==e.numberOfChildren)return!1;for(const r in e.children)if(!n.children[r]||!T(n.children[r],e.children[r],t))return!1;return!0},subset:U},Ta={exact:function b(n,e){return ns(n,e)},subset:function M(n,e){return Object.keys(e).length<=Object.keys(n).length&&Object.keys(e).every(t=>Ku(n[t],e[t]))},ignored:()=>!0};function Zu(n,e,t){return qo[t.paths](n.root,e.root,t.matrixParams)&&Ta[t.queryParams](n.queryParams,e.queryParams)&&!("exact"===t.fragment&&n.fragment!==e.fragment)}function U(n,e,t){return Z(n,e,e.segments,t)}function Z(n,e,t,r){if(n.segments.length>t.length){const i=n.segments.slice(0,t.length);return!(!Mt(i,t)||e.hasChildren()||!te(i,t,r))}if(n.segments.length===t.length){if(!Mt(n.segments,t)||!te(n.segments,t,r))return!1;for(const i in e.children)if(!n.children[i]||!U(n.children[i],e.children[i],r))return!1;return!0}{const i=t.slice(0,n.segments.length),a=t.slice(n.segments.length);return!!(Mt(n.segments,i)&&te(n.segments,i,r)&&n.children[Ot])&&Z(n.children[Ot],e,a,r)}}function te(n,e,t){return e.every((r,i)=>Ta[t](n[i].parameters,r.parameters))}class xe{constructor(e,t,r){this.root=e,this.queryParams=t,this.fragment=r}get queryParamMap(){return this._queryParamMap||(this._queryParamMap=Jn(this.queryParams)),this._queryParamMap}toString(){return Sa.serialize(this)}}class Re{constructor(e,t){this.segments=e,this.children=t,this.parent=null,$n(t,(r,i)=>r.parent=this)}hasChildren(){return this.numberOfChildren>0}get numberOfChildren(){return Object.keys(this.children).length}toString(){return zo(this)}}class Ye{constructor(e,t){this.path=e,this.parameters=t}get parameterMap(){return this._parameterMap||(this._parameterMap=Jn(this.parameters)),this._parameterMap}toString(){return su(this)}}function Mt(n,e){return n.length===e.length&&n.every((t,r)=>t.path===e[r].path)}class Gn{}class kn{parse(e){const t=new Sd(e);return new xe(t.parseRootSegment(),t.parseQueryParams(),t.parseFragment())}serialize(e){const t=`/${kr(e.root,!0)}`,r=function ry(n){const e=Object.keys(n).map(t=>{const r=n[t];return Array.isArray(r)?r.map(i=>`${ki(t)}=${ki(i)}`).join("&"):`${ki(t)}=${ki(r)}`}).filter(t=>!!t);return e.length?`?${e.join("&")}`:""}(e.queryParams);return`${t}${r}${"string"==typeof e.fragment?`#${function Ko(n){return encodeURI(n)}(e.fragment)}`:""}`}}const Sa=new kn;function zo(n){return n.segments.map(e=>su(e)).join("/")}function kr(n,e){if(!n.hasChildren())return zo(n);if(e){const t=n.children[Ot]?kr(n.children[Ot],!1):"",r=[];return $n(n.children,(i,a)=>{a!==Ot&&r.push(`${a}:${kr(i,!1)}`)}),r.length>0?`${t}(${r.join("//")})`:t}{const t=function bt(n,e){let t=[];return $n(n.children,(r,i)=>{i===Ot&&(t=t.concat(e(r,i)))}),$n(n.children,(r,i)=>{i!==Ot&&(t=t.concat(e(r,i)))}),t}(n,(r,i)=>i===Ot?[kr(n.children[Ot],!1)]:[`${i}:${kr(r,!1)}`]);return 1===Object.keys(n.children).length&&null!=n.children[Ot]?`${zo(n)}/${t[0]}`:`${zo(n)}/(${t.join("//")})`}}function hi(n){return encodeURIComponent(n).replace(/%40/g,"@").replace(/%3A/gi,":").replace(/%24/g,"$").replace(/%2C/gi,",")}function ki(n){return hi(n).replace(/%3B/gi,";")}function Td(n){return hi(n).replace(/\(/g,"%28").replace(/\)/g,"%29").replace(/%26/gi,"&")}function ac(n){return decodeURIComponent(n)}function uc(n){return ac(n.replace(/\+/g,"%20"))}function su(n){return`${Td(n.path)}${function Dg(n){return Object.keys(n).map(e=>`;${Td(e)}=${Td(n[e])}`).join("")}(n.parameters)}`}const iy=/^[^\/()?;=#]+/;function Rs(n){const e=n.match(iy);return e?e[0]:""}const lc=/^[^=?&#]+/,oy=/^[^&#]+/;class Sd{constructor(e){this.url=e,this.remaining=e}parseRootSegment(){return this.consumeOptional("/"),""===this.remaining||this.peekStartsWith("?")||this.peekStartsWith("#")?new Re([],{}):new Re([],this.parseChildren())}parseQueryParams(){const e={};if(this.consumeOptional("?"))do{this.parseQueryParam(e)}while(this.consumeOptional("&"));return e}parseFragment(){return this.consumeOptional("#")?decodeURIComponent(this.remaining):null}parseChildren(){if(""===this.remaining)return{};this.consumeOptional("/");const e=[];for(this.peekStartsWith("(")||e.push(this.parseSegment());this.peekStartsWith("/")&&!this.peekStartsWith("//")&&!this.peekStartsWith("/(");)this.capture("/"),e.push(this.parseSegment());let t={};this.peekStartsWith("/(")&&(this.capture("/"),t=this.parseParens(!0));let r={};return this.peekStartsWith("(")&&(r=this.parseParens(!1)),(e.length>0||Object.keys(t).length>0)&&(r[Ot]=new Re(e,t)),r}parseSegment(){const e=Rs(this.remaining);if(""===e&&this.peekStartsWith(";"))throw new Error(`Empty path url segment cannot have parameters: '${this.remaining}'.`);return this.capture(e),new Ye(ac(e),this.parseMatrixParams())}parseMatrixParams(){const e={};for(;this.consumeOptional(";");)this.parseParam(e);return e}parseParam(e){const t=Rs(this.remaining);if(!t)return;this.capture(t);let r="";if(this.consumeOptional("=")){const i=Rs(this.remaining);i&&(r=i,this.capture(r))}e[ac(t)]=ac(r)}parseQueryParam(e){const t=function sy(n){const e=n.match(lc);return e?e[0]:""}(this.remaining);if(!t)return;this.capture(t);let r="";if(this.consumeOptional("=")){const l=function Tg(n){const e=n.match(oy);return e?e[0]:""}(this.remaining);l&&(r=l,this.capture(r))}const i=uc(t),a=uc(r);if(e.hasOwnProperty(i)){let l=e[i];Array.isArray(l)||(l=[l],e[i]=l),l.push(a)}else e[i]=a}parseParens(e){const t={};for(this.capture("(");!this.consumeOptional(")")&&this.remaining.length>0;){const r=Rs(this.remaining),i=this.remaining[r.length];if("/"!==i&&")"!==i&&";"!==i)throw new Error(`Cannot parse url '${this.url}'`);let a;r.indexOf(":")>-1?(a=r.substr(0,r.indexOf(":")),this.capture(a),this.capture(":")):e&&(a=Ot);const l=this.parseChildren();t[a]=1===Object.keys(l).length?l[Ot]:new Re([],l),this.consumeOptional("//")}return t}peekStartsWith(e){return this.remaining.startsWith(e)}consumeOptional(e){return!!this.peekStartsWith(e)&&(this.remaining=this.remaining.substring(e.length),!0)}capture(e){if(!this.consumeOptional(e))throw new Error(`Expected "${e}".`)}}class ay{constructor(e){this._root=e}get root(){return this._root.value}parent(e){const t=this.pathFromRoot(e);return t.length>1?t[t.length-2]:null}children(e){const t=sf(e,this._root);return t?t.children.map(r=>r.value):[]}firstChild(e){const t=sf(e,this._root);return t&&t.children.length>0?t.children[0].value:null}siblings(e){const t=af(e,this._root);return t.length<2?[]:t[t.length-2].children.map(i=>i.value).filter(i=>i!==e)}pathFromRoot(e){return af(e,this._root).map(t=>t.value)}}function sf(n,e){if(n===e.value)return e;for(const t of e.children){const r=sf(n,t);if(r)return r}return null}function af(n,e){if(n===e.value)return[e];for(const t of e.children){const r=af(n,t);if(r.length)return r.unshift(e),r}return[]}class Zo{constructor(e,t){this.value=e,this.children=t}toString(){return`TreeNode(${this.value})`}}function Yo(n){const e={};return n&&n.children.forEach(t=>e[t.value.outlet]=t),e}class Ad extends ay{constructor(e,t){super(e),this.snapshot=t,Rd(this,e)}toString(){return this.snapshot.toString()}}function ou(n,e){const t=function uy(n,e){const l=new Yu([],{},{},"",{},Ot,e,null,n.root,-1,{});return new uf("",new Zo(l,[]))}(n,e),r=new Zr([new Ye("",{})]),i=new Zr({}),a=new Zr({}),l=new Zr({}),h=new Zr(""),_=new Aa(r,i,l,h,a,Ot,e,t.root);return _.snapshot=t.root,new Ad(new Zo(_,[]),t)}class Aa{constructor(e,t,r,i,a,l,h,_){this.url=e,this.params=t,this.queryParams=r,this.fragment=i,this.data=a,this.outlet=l,this.component=h,this._futureSnapshot=_}get routeConfig(){return this._futureSnapshot.routeConfig}get root(){return this._routerState.root}get parent(){return this._routerState.parent(this)}get firstChild(){return this._routerState.firstChild(this)}get children(){return this._routerState.children(this)}get pathFromRoot(){return this._routerState.pathFromRoot(this)}get paramMap(){return this._paramMap||(this._paramMap=this.params.pipe((0,yt.U)(e=>Jn(e)))),this._paramMap}get queryParamMap(){return this._queryParamMap||(this._queryParamMap=this.queryParams.pipe((0,yt.U)(e=>Jn(e)))),this._queryParamMap}toString(){return this.snapshot?this.snapshot.toString():`Future(${this._futureSnapshot})`}}function ly(n,e="emptyOnly"){const t=n.pathFromRoot;let r=0;if("always"!==e)for(r=t.length-1;r>=1;){const i=t[r],a=t[r-1];if(i.routeConfig&&""===i.routeConfig.path)r--;else{if(a.component)break;r--}}return function xd(n){return n.reduce((e,t)=>({params:Object.assign(Object.assign({},e.params),t.params),data:Object.assign(Object.assign({},e.data),t.data),resolve:Object.assign(Object.assign({},e.resolve),t._resolvedData)}),{params:{},data:{},resolve:{}})}(t.slice(r))}class Yu{constructor(e,t,r,i,a,l,h,_,w,D,S){this.url=e,this.params=t,this.queryParams=r,this.fragment=i,this.data=a,this.outlet=l,this.component=h,this.routeConfig=_,this._urlSegment=w,this._lastPathIndex=D,this._resolve=S}get root(){return this._routerState.root}get parent(){return this._routerState.parent(this)}get firstChild(){return this._routerState.firstChild(this)}get children(){return this._routerState.children(this)}get pathFromRoot(){return this._routerState.pathFromRoot(this)}get paramMap(){return this._paramMap||(this._paramMap=Jn(this.params)),this._paramMap}get queryParamMap(){return this._queryParamMap||(this._queryParamMap=Jn(this.queryParams)),this._queryParamMap}toString(){return`Route(url:'${this.url.map(r=>r.toString()).join("/")}', path:'${this.routeConfig?this.routeConfig.path:""}')`}}class uf extends ay{constructor(e,t){super(t),this.url=e,Rd(this,t)}toString(){return Md(this._root)}}function Rd(n,e){e.value._routerState=n,e.children.forEach(t=>Rd(n,t))}function Md(n){const e=n.children.length>0?` { ${n.children.map(Md).join(", ")} } `:"";return`${n.value}${e}`}function Nd(n){if(n.snapshot){const e=n.snapshot,t=n._futureSnapshot;n.snapshot=t,ns(e.queryParams,t.queryParams)||n.queryParams.next(t.queryParams),e.fragment!==t.fragment&&n.fragment.next(t.fragment),ns(e.params,t.params)||n.params.next(t.params),function zu(n,e){if(n.length!==e.length)return!1;for(let t=0;t<n.length;++t)if(!ns(n[t],e[t]))return!1;return!0}(e.url,t.url)||n.url.next(t.url),ns(e.data,t.data)||n.data.next(t.data)}else n.snapshot=n._futureSnapshot,n.data.next(n._futureSnapshot.data)}function lf(n,e){const t=ns(n.params,e.params)&&function Ct(n,e){return Mt(n,e)&&n.every((t,r)=>ns(t.parameters,e[r].parameters))}(n.url,e.url);return t&&!(!n.parent!=!e.parent)&&(!n.parent||lf(n.parent,e.parent))}function cc(n,e,t){if(t&&n.shouldReuseRoute(e.value,t.value.snapshot)){const r=t.value;r._futureSnapshot=e.value;const i=function cf(n,e,t){return e.children.map(r=>{for(const i of t.children)if(n.shouldReuseRoute(r.value,i.value.snapshot))return cc(n,r,i);return cc(n,r)})}(n,e,t);return new Zo(r,i)}{if(n.shouldAttach(e.value)){const a=n.retrieve(e.value);if(null!==a){const l=a.route;return l.value._futureSnapshot=e.value,l.children=e.children.map(h=>cc(n,h)),l}}const r=function dy(n){return new Aa(new Zr(n.url),new Zr(n.params),new Zr(n.queryParams),new Zr(n.fragment),new Zr(n.data),n.outlet,n.component,n)}(e.value),i=e.children.map(a=>cc(n,a));return new Zo(r,i)}}function xa(n){return"object"==typeof n&&null!=n&&!n.outlets&&!n.segmentPath}function Qu(n){return"object"==typeof n&&null!=n&&n.outlets}function Sg(n,e,t,r,i){let a={};if(r&&$n(r,(h,_)=>{a[_]=Array.isArray(h)?h.map(w=>`${w}`):`${h}`}),n===e)return new xe(t,a,i);const l=df(n,e,t);return new xe(l,a,i)}function df(n,e,t){const r={};return $n(n.children,(i,a)=>{r[a]=i===e?t:df(i,e,t)}),new Re(n.segments,r)}class hy{constructor(e,t,r){if(this.isAbsolute=e,this.numberOfDoubleDots=t,this.commands=r,e&&r.length>0&&xa(r[0]))throw new Error("Root segment cannot have matrix parameters");const i=r.find(Qu);if(i&&i!==Dd(r))throw new Error("{outlets:{}} has to be the last command")}toRoot(){return this.isAbsolute&&1===this.commands.length&&"/"==this.commands[0]}}class hf{constructor(e,t,r){this.segmentGroup=e,this.processChildren=t,this.index=r}}function my(n,e,t){if(n||(n=new Re([],{})),0===n.segments.length&&n.hasChildren())return go(n,e,t);const r=function kE(n,e,t){let r=0,i=e;const a={match:!1,pathIndex:0,commandIndex:0};for(;i<n.segments.length;){if(r>=t.length)return a;const l=n.segments[i],h=t[r];if(Qu(h))break;const _=`${h}`,w=r<t.length-1?t[r+1]:null;if(i>0&&void 0===_)break;if(_&&w&&"object"==typeof w&&void 0===w.outlets){if(!Oi(_,w,l))return a;r+=2}else{if(!Oi(_,{},l))return a;r++}i++}return{match:!0,pathIndex:i,commandIndex:r}}(n,e,t),i=t.slice(r.commandIndex);if(r.match&&r.pathIndex<n.segments.length){const a=new Re(n.segments.slice(0,r.pathIndex),{});return a.children[Ot]=new Re(n.segments.slice(r.pathIndex),n.children),go(a,0,i)}return r.match&&0===i.length?new Re(n.segments,{}):r.match&&!n.hasChildren()?ff(n,e,t):r.match?go(n,0,i):ff(n,e,t)}function go(n,e,t){if(0===t.length)return new Re(n.segments,{});{const r=function gy(n){return Qu(n[0])?n[0].outlets:{[Ot]:n}}(t),i={};return $n(r,(a,l)=>{"string"==typeof a&&(a=[a]),null!==a&&(i[l]=my(n.children[l],e,a))}),$n(n.children,(a,l)=>{void 0===r[l]&&(i[l]=a)}),new Re(n.segments,i)}}function ff(n,e,t){const r=n.segments.slice(0,e);let i=0;for(;i<t.length;){const a=t[i];if(Qu(a)){const _=Ju(a.outlets);return new Re(r,_)}if(0===i&&xa(t[0])){r.push(new Ye(n.segments[e].path,pf(t[0]))),i++;continue}const l=Qu(a)?a.outlets[Ot]:`${a}`,h=i<t.length-1?t[i+1]:null;l&&h&&xa(h)?(r.push(new Ye(l,pf(h))),i+=2):(r.push(new Ye(l,{})),i++)}return new Re(r,{})}function Ju(n){const e={};return $n(n,(t,r)=>{"string"==typeof t&&(t=[t]),null!==t&&(e[r]=ff(new Re([],{}),0,t))}),e}function pf(n){const e={};return $n(n,(t,r)=>e[r]=`${t}`),e}function Oi(n,e,t){return n==t.path&&ns(e,t.parameters)}class xg{constructor(e,t,r,i){this.routeReuseStrategy=e,this.futureState=t,this.currState=r,this.forwardEvent=i}activate(e){const t=this.futureState._root,r=this.currState?this.currState._root:null;this.deactivateChildRoutes(t,r,e),Nd(this.futureState.root),this.activateChildRoutes(t,r,e)}deactivateChildRoutes(e,t,r){const i=Yo(t);e.children.forEach(a=>{const l=a.value.outlet;this.deactivateRoutes(a,i[l],r),delete i[l]}),$n(i,(a,l)=>{this.deactivateRouteAndItsChildren(a,r)})}deactivateRoutes(e,t,r){const i=e.value,a=t?t.value:null;if(i===a)if(i.component){const l=r.getContext(i.outlet);l&&this.deactivateChildRoutes(e,t,l.children)}else this.deactivateChildRoutes(e,t,r);else a&&this.deactivateRouteAndItsChildren(t,r)}deactivateRouteAndItsChildren(e,t){e.value.component&&this.routeReuseStrategy.shouldDetach(e.value.snapshot)?this.detachAndStoreRouteSubtree(e,t):this.deactivateRouteAndOutlet(e,t)}detachAndStoreRouteSubtree(e,t){const r=t.getContext(e.value.outlet),i=r&&e.value.component?r.children:t,a=Yo(e);for(const l of Object.keys(a))this.deactivateRouteAndItsChildren(a[l],i);if(r&&r.outlet){const l=r.outlet.detach(),h=r.children.onOutletDeactivated();this.routeReuseStrategy.store(e.value.snapshot,{componentRef:l,route:e,contexts:h})}}deactivateRouteAndOutlet(e,t){const r=t.getContext(e.value.outlet),i=r&&e.value.component?r.children:t,a=Yo(e);for(const l of Object.keys(a))this.deactivateRouteAndItsChildren(a[l],i);r&&r.outlet&&(r.outlet.deactivate(),r.children.onOutletDeactivated(),r.attachRef=null,r.resolver=null,r.route=null)}activateChildRoutes(e,t,r){const i=Yo(t);e.children.forEach(a=>{this.activateRoutes(a,i[a.value.outlet],r),this.forwardEvent(new nc(a.value.snapshot))}),e.children.length&&this.forwardEvent(new ts(e.value.snapshot))}activateRoutes(e,t,r){const i=e.value,a=t?t.value:null;if(Nd(i),i===a)if(i.component){const l=r.getOrCreateContext(i.outlet);this.activateChildRoutes(e,t,l.children)}else this.activateChildRoutes(e,t,r);else if(i.component){const l=r.getOrCreateContext(i.outlet);if(this.routeReuseStrategy.shouldAttach(i.snapshot)){const h=this.routeReuseStrategy.retrieve(i.snapshot);this.routeReuseStrategy.store(i.snapshot,null),l.children.onOutletReAttached(h.contexts),l.attachRef=h.componentRef,l.route=h.route.value,l.outlet&&l.outlet.attach(h.componentRef,h.route.value),Nd(h.route.value),this.activateChildRoutes(e,null,l.children)}else{const h=function Pd(n){for(let e=n.parent;e;e=e.parent){const t=e.routeConfig;if(t&&t._loadedConfig)return t._loadedConfig;if(t&&t.component)return null}return null}(i.snapshot),_=h?h.module.componentFactoryResolver:null;l.attachRef=null,l.route=i,l.resolver=_,l.outlet&&l.outlet.activateWith(i,_),this.activateChildRoutes(e,null,l.children)}}else this.activateChildRoutes(e,null,r)}}class kd{constructor(e,t){this.routes=e,this.module=t}}function au(n){return"function"==typeof n}function Xu(n){return n instanceof xe}const hc=Symbol("INITIAL_VALUE");function Ra(){return bn(n=>function Ea(...n){const e=(0,Mn.yG)(n),t=(0,Mn.jO)(n),{args:r,keys:i}=xi(n);if(0===r.length)return(0,wn.D)([],e);const a=new gr.y(function li(n,e,t=Yr.y){return r=>{uo(e,()=>{const{length:i}=n,a=new Array(i);let l=i,h=i;for(let _=0;_<i;_++)uo(e,()=>{const w=(0,wn.D)(n[_],e);let D=!1;w.subscribe((0,In.x)(r,S=>{a[_]=S,D||(D=!0,h--),h||r.next(t(a.slice()))},()=>{--l||r.complete()}))},r)},r)}}(r,e,i?l=>$o(i,l):Yr.y));return t?a.pipe(wd(t)):a}(n.map(e=>e.pipe((0,Ia.q)(1),Ni(hc)))).pipe(or((e,t)=>{let r=!1;return t.reduce((i,a,l)=>i!==hc?i:(a===hc&&(r=!0),r||!1!==a&&l!==t.length-1&&!Xu(a)?i:a),e)},hc),Xi(e=>e!==hc),(0,yt.U)(e=>Xu(e)?e:!0===e),(0,Ia.q)(1)))}class _y{constructor(){this.outlet=null,this.route=null,this.resolver=null,this.children=new fc,this.attachRef=null}}class fc{constructor(){this.contexts=new Map}onChildOutletCreated(e,t){const r=this.getOrCreateContext(e);r.outlet=t,this.contexts.set(e,r)}onChildOutletDestroyed(e){const t=this.getContext(e);t&&(t.outlet=null,t.attachRef=null)}onOutletDeactivated(){const e=this.contexts;return this.contexts=new Map,e}onOutletReAttached(e){this.contexts=e}getOrCreateContext(e){let t=this.getContext(e);return t||(t=new _y,this.contexts.set(e,t)),t}getContext(e){return this.contexts.get(e)||null}}let pc=(()=>{class n{constructor(t,r,i,a,l){this.parentContexts=t,this.location=r,this.resolver=i,this.changeDetector=l,this.activated=null,this._activatedRoute=null,this.activateEvents=new m.vpe,this.deactivateEvents=new m.vpe,this.attachEvents=new m.vpe,this.detachEvents=new m.vpe,this.name=a||Ot,t.onChildOutletCreated(this.name,this)}ngOnDestroy(){this.parentContexts.onChildOutletDestroyed(this.name)}ngOnInit(){if(!this.activated){const t=this.parentContexts.getContext(this.name);t&&t.route&&(t.attachRef?this.attach(t.attachRef,t.route):this.activateWith(t.route,t.resolver||null))}}get isActivated(){return!!this.activated}get component(){if(!this.activated)throw new Error("Outlet is not activated");return this.activated.instance}get activatedRoute(){if(!this.activated)throw new Error("Outlet is not activated");return this._activatedRoute}get activatedRouteData(){return this._activatedRoute?this._activatedRoute.snapshot.data:{}}detach(){if(!this.activated)throw new Error("Outlet is not activated");this.location.detach();const t=this.activated;return this.activated=null,this._activatedRoute=null,this.detachEvents.emit(t.instance),t}attach(t,r){this.activated=t,this._activatedRoute=r,this.location.insert(t.hostView),this.attachEvents.emit(t.instance)}deactivate(){if(this.activated){const t=this.component;this.activated.destroy(),this.activated=null,this._activatedRoute=null,this.deactivateEvents.emit(t)}}activateWith(t,r){if(this.isActivated)throw new Error("Cannot activate an already activated outlet");this._activatedRoute=t;const l=(r=r||this.resolver).resolveComponentFactory(t._futureSnapshot.routeConfig.component),h=this.parentContexts.getOrCreateContext(this.name).children,_=new yf(t,h,this.location.injector);this.activated=this.location.createComponent(l,this.location.length,_),this.changeDetector.markForCheck(),this.activateEvents.emit(this.activated.instance)}}return n.\u0275fac=function(t){return new(t||n)(m.Y36(fc),m.Y36(m.s_b),m.Y36(m._Vd),m.$8M("name"),m.Y36(m.sBO))},n.\u0275dir=m.lG2({type:n,selectors:[["router-outlet"]],outputs:{activateEvents:"activate",deactivateEvents:"deactivate",attachEvents:"attach",detachEvents:"detach"},exportAs:["outlet"]}),n})();class yf{constructor(e,t,r){this.route=e,this.childContexts=t,this.parent=r}get(e,t){return e===Aa?this.route:e===fc?this.childContexts:this.parent.get(e,t)}}let vf=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275cmp=m.Xpm({type:n,selectors:[["ng-component"]],decls:1,vars:0,template:function(t,r){1&t&&m._UZ(0,"router-outlet")},directives:[pc],encapsulation:2}),n})();function gc(n,e=""){for(let t=0;t<n.length;t++){const r=n[t];Od(r,wf(e,r))}}function Od(n,e){n.children&&gc(n.children,e)}function wf(n,e){return e?n||e.path?n&&!e.path?`${n}/`:!n&&e.path?e.path:`${n}/${e.path}`:"":n}function Ef(n){const e=n.children&&n.children.map(Ef),t=e?Object.assign(Object.assign({},n),{children:e}):Object.assign({},n);return!t.component&&(e||t.loadChildren)&&t.outlet&&t.outlet!==Ot&&(t.component=vf),t}function en(n){return n.outlet||Ot}function Cf(n,e){const t=n.filter(r=>en(r)===e);return t.push(...n.filter(r=>en(r)!==e)),t}const Mg={matched:!1,consumedSegments:[],remainingSegments:[],parameters:{},positionalParamSegments:{}};function el(n,e,t){var r;if(""===e.path)return"full"===e.pathMatch&&(n.hasChildren()||t.length>0)?Object.assign({},Mg):{matched:!0,consumedSegments:[],remainingSegments:t,parameters:{},positionalParamSegments:{}};const a=(e.matcher||Wo)(t,n,e);if(!a)return Object.assign({},Mg);const l={};$n(a.posParams,(_,w)=>{l[w]=_.path});const h=a.consumed.length>0?Object.assign(Object.assign({},l),a.consumed[a.consumed.length-1].parameters):l;return{matched:!0,consumedSegments:a.consumed,remainingSegments:t.slice(a.consumed.length),parameters:h,positionalParamSegments:null!==(r=a.posParams)&&void 0!==r?r:{}}}function mc(n,e,t,r,i="corrected"){if(t.length>0&&function vy(n,e,t){return t.some(r=>Ld(n,e,r)&&en(r)!==Ot)}(n,t,r)){const l=new Re(e,function Fd(n,e,t,r){const i={};i[Ot]=r,r._sourceSegment=n,r._segmentIndexShift=e.length;for(const a of t)if(""===a.path&&en(a)!==Ot){const l=new Re([],{});l._sourceSegment=n,l._segmentIndexShift=e.length,i[en(a)]=l}return i}(n,e,r,new Re(t,n.children)));return l._sourceSegment=n,l._segmentIndexShift=e.length,{segmentGroup:l,slicedSegments:[]}}if(0===t.length&&function Ng(n,e,t){return t.some(r=>Ld(n,e,r))}(n,t,r)){const l=new Re(n.segments,function yy(n,e,t,r,i,a){const l={};for(const h of r)if(Ld(n,t,h)&&!i[en(h)]){const _=new Re([],{});_._sourceSegment=n,_._segmentIndexShift="legacy"===a?n.segments.length:e.length,l[en(h)]=_}return Object.assign(Object.assign({},i),l)}(n,e,t,r,n.children,i));return l._sourceSegment=n,l._segmentIndexShift=e.length,{segmentGroup:l,slicedSegments:t}}const a=new Re(n.segments,n.children);return a._sourceSegment=n,a._segmentIndexShift=e.length,{segmentGroup:a,slicedSegments:t}}function Ld(n,e,t){return(!(n.hasChildren()||e.length>0)||"full"!==t.pathMatch)&&""===t.path}function wy(n,e,t,r){return!!(en(n)===r||r!==Ot&&Ld(e,t,n))&&("**"===n.path||el(e,n,t).matched)}function Ey(n,e,t){return 0===e.length&&!n.children[t]}class Ma{constructor(e){this.segmentGroup=e||null}}class Sr{constructor(e){this.urlTree=e}}function Qo(n){return Qi(new Ma(n))}function _c(n){return Qi(new Sr(n))}class bf{constructor(e,t,r,i,a){this.configLoader=t,this.urlSerializer=r,this.urlTree=i,this.config=a,this.allowRedirects=!0,this.ngModule=e.get(m.h0i)}apply(){const e=mc(this.urlTree.root,[],[],this.config).segmentGroup,t=new Re(e.segments,e.children);return this.expandSegmentGroup(this.ngModule,this.config,t,Ot).pipe((0,yt.U)(a=>this.createUrlTree(lu(a),this.urlTree.queryParams,this.urlTree.fragment))).pipe(es(a=>{if(a instanceof Sr)return this.allowRedirects=!1,this.match(a.urlTree);throw a instanceof Ma?this.noMatchError(a):a}))}match(e){return this.expandSegmentGroup(this.ngModule,this.config,e.root,Ot).pipe((0,yt.U)(i=>this.createUrlTree(lu(i),e.queryParams,e.fragment))).pipe(es(i=>{throw i instanceof Ma?this.noMatchError(i):i}))}noMatchError(e){return new Error(`Cannot match any routes. URL Segment: '${e.segmentGroup}'`)}createUrlTree(e,t,r){const i=e.segments.length>0?new Re([],{[Ot]:e}):e;return new xe(i,t,r)}expandSegmentGroup(e,t,r,i){return 0===r.segments.length&&r.hasChildren()?this.expandChildren(e,t,r).pipe((0,yt.U)(a=>new Re([],a))):this.expandSegment(e,r,t,r.segments,i,!0)}expandChildren(e,t,r){const i=[];for(const a of Object.keys(r.children))"primary"===a?i.unshift(a):i.push(a);return(0,wn.D)(i).pipe(Ss(a=>{const l=r.children[a],h=Cf(t,a);return this.expandSegmentGroup(e,h,l,a).pipe((0,yt.U)(_=>({segment:_,outlet:a})))}),or((a,l)=>(a[l.outlet]=l.segment,a),{}),function Cg(n,e){const t=arguments.length>=2;return r=>r.pipe(n?Xi((i,a)=>n(i,a,r)):Yr.y,Id(1),t?Eg(e):Pn(()=>new lo))}())}expandSegment(e,t,r,i,a,l){return(0,wn.D)(r).pipe(Ss(h=>this.expandSegmentAgainstRoute(e,t,r,h,i,a,l).pipe(es(w=>{if(w instanceof Ma)return ct(null);throw w}))),co(h=>!!h),es((h,_)=>{if(h instanceof lo||"EmptyError"===h.name)return Ey(t,i,a)?ct(new Re([],{})):Qo(t);throw h}))}expandSegmentAgainstRoute(e,t,r,i,a,l,h){return wy(i,t,a,l)?void 0===i.redirectTo?this.matchSegmentAgainstRoute(e,t,i,a,l):h&&this.allowRedirects?this.expandSegmentAgainstRouteUsingRedirect(e,t,r,i,a,l):Qo(t):Qo(t)}expandSegmentAgainstRouteUsingRedirect(e,t,r,i,a,l){return"**"===i.path?this.expandWildCardWithParamsAgainstRouteUsingRedirect(e,r,i,l):this.expandRegularSegmentAgainstRouteUsingRedirect(e,t,r,i,a,l)}expandWildCardWithParamsAgainstRouteUsingRedirect(e,t,r,i){const a=this.applyRedirectCommands([],r.redirectTo,{});return r.redirectTo.startsWith("/")?_c(a):this.lineralizeSegments(r,a).pipe((0,Nn.z)(l=>{const h=new Re(l,{});return this.expandSegment(e,h,t,l,i,!1)}))}expandRegularSegmentAgainstRouteUsingRedirect(e,t,r,i,a,l){const{matched:h,consumedSegments:_,remainingSegments:w,positionalParamSegments:D}=el(t,i,a);if(!h)return Qo(t);const S=this.applyRedirectCommands(_,i.redirectTo,D);return i.redirectTo.startsWith("/")?_c(S):this.lineralizeSegments(i,S).pipe((0,Nn.z)(N=>this.expandSegment(e,t,r,N.concat(w),l,!1)))}matchSegmentAgainstRoute(e,t,r,i,a){if("**"===r.path)return r.loadChildren?(r._loadedConfig?ct(r._loadedConfig):this.configLoader.load(e.injector,r)).pipe((0,yt.U)(S=>(r._loadedConfig=S,new Re(i,{})))):ct(new Re(i,{}));const{matched:l,consumedSegments:h,remainingSegments:_}=el(t,r,i);return l?this.getChildConfig(e,r,i).pipe((0,Nn.z)(D=>{const S=D.module,N=D.routes,{segmentGroup:L,slicedSegments:j}=mc(t,h,_,N),fe=new Re(L.segments,L.children);if(0===j.length&&fe.hasChildren())return this.expandChildren(S,N,fe).pipe((0,yt.U)(wt=>new Re(h,wt)));if(0===N.length&&0===j.length)return ct(new Re(h,{}));const Me=en(r)===a;return this.expandSegment(S,fe,N,j,Me?Ot:a,!0).pipe((0,yt.U)(We=>new Re(h.concat(We.segments),We.children)))})):Qo(t)}getChildConfig(e,t,r){return t.children?ct(new kd(t.children,e)):t.loadChildren?void 0!==t._loadedConfig?ct(t._loadedConfig):this.runCanLoadGuards(e.injector,t,r).pipe((0,Nn.z)(i=>i?this.configLoader.load(e.injector,t).pipe((0,yt.U)(a=>(t._loadedConfig=a,a))):function Or(n){return Qi(fo(`Cannot load children because the guard of the route "path: '${n.path}'" returned false`))}(t))):ct(new kd([],e))}runCanLoadGuards(e,t,r){const i=t.canLoad;return i&&0!==i.length?ct(i.map(l=>{const h=e.get(l);let _;if(function gf(n){return n&&au(n.canLoad)}(h))_=h.canLoad(t,r);else{if(!au(h))throw new Error("Invalid CanLoad guard");_=h(t,r)}return di(_)})).pipe(Ra(),(0,Qr.b)(l=>{if(!Xu(l))return;const h=fo(`Redirecting to "${this.urlSerializer.serialize(l)}"`);throw h.url=l,h}),(0,yt.U)(l=>!0===l)):ct(!0)}lineralizeSegments(e,t){let r=[],i=t.root;for(;;){if(r=r.concat(i.segments),0===i.numberOfChildren)return ct(r);if(i.numberOfChildren>1||!i.children[Ot])return Qi(new Error(`Only absolute redirects can have named outlets. redirectTo: '${e.redirectTo}'`));i=i.children[Ot]}}applyRedirectCommands(e,t,r){return this.applyRedirectCreatreUrlTree(t,this.urlSerializer.parse(t),e,r)}applyRedirectCreatreUrlTree(e,t,r,i){const a=this.createSegmentGroup(e,t.root,r,i);return new xe(a,this.createQueryParams(t.queryParams,this.urlTree.queryParams),t.fragment)}createQueryParams(e,t){const r={};return $n(e,(i,a)=>{if("string"==typeof i&&i.startsWith(":")){const h=i.substring(1);r[a]=t[h]}else r[a]=i}),r}createSegmentGroup(e,t,r,i){const a=this.createSegments(e,t.segments,r,i);let l={};return $n(t.children,(h,_)=>{l[_]=this.createSegmentGroup(e,h,r,i)}),new Re(a,l)}createSegments(e,t,r,i){return t.map(a=>a.path.startsWith(":")?this.findPosParam(e,a,i):this.findOrReturn(a,r))}findPosParam(e,t,r){const i=r[t.path.substring(1)];if(!i)throw new Error(`Cannot redirect to '${e}'. Cannot find '${t.path}'.`);return i}findOrReturn(e,t){let r=0;for(const i of t){if(i.path===e.path)return t.splice(r),i;r++}return e}}function lu(n){const e={};for(const r of Object.keys(n.children)){const a=lu(n.children[r]);(a.segments.length>0||a.hasChildren())&&(e[r]=a)}return function Fi(n){if(1===n.numberOfChildren&&n.children[Ot]){const e=n.children[Ot];return new Re(n.segments.concat(e.segments),e.children)}return n}(new Re(n.segments,e))}class Pg{constructor(e){this.path=e,this.route=this.path[this.path.length-1]}}class cu{constructor(e,t){this.component=e,this.route=t}}function Tf(n,e,t){const r=n._root;return fi(r,e?e._root:null,t,[r.value])}function yc(n,e,t){const r=function Cy(n){if(!n)return null;for(let e=n.parent;e;e=e.parent){const t=e.routeConfig;if(t&&t._loadedConfig)return t._loadedConfig}return null}(e);return(r?r.module.injector:t).get(n)}function fi(n,e,t,r,i={canDeactivateChecks:[],canActivateChecks:[]}){const a=Yo(e);return n.children.forEach(l=>{(function Og(n,e,t,r,i={canDeactivateChecks:[],canActivateChecks:[]}){const a=n.value,l=e?e.value:null,h=t?t.getContext(n.value.outlet):null;if(l&&a.routeConfig===l.routeConfig){const _=function Iy(n,e,t){if("function"==typeof t)return t(n,e);switch(t){case"pathParamsChange":return!Mt(n.url,e.url);case"pathParamsOrQueryParamsChange":return!Mt(n.url,e.url)||!ns(n.queryParams,e.queryParams);case"always":return!0;case"paramsOrQueryParamsChange":return!lf(n,e)||!ns(n.queryParams,e.queryParams);default:return!lf(n,e)}}(l,a,a.routeConfig.runGuardsAndResolvers);_?i.canActivateChecks.push(new Pg(r)):(a.data=l.data,a._resolvedData=l._resolvedData),fi(n,e,a.component?h?h.children:null:t,r,i),_&&h&&h.outlet&&h.outlet.isActivated&&i.canDeactivateChecks.push(new cu(h.outlet.component,l))}else l&&du(e,h,i),i.canActivateChecks.push(new Pg(r)),fi(n,null,a.component?h?h.children:null:t,r,i)})(l,a[l.value.outlet],t,r.concat([l.value]),i),delete a[l.value.outlet]}),$n(a,(l,h)=>du(l,t.getContext(h),i)),i}function du(n,e,t){const r=Yo(n),i=n.value;$n(r,(a,l)=>{du(a,i.component?e?e.children.getContext(l):null:e,t)}),t.canDeactivateChecks.push(new cu(i.component&&e&&e.outlet&&e.outlet.isActivated?e.outlet.component:null,i))}class xf{}function Rf(n){return new gr.y(e=>e.error(n))}class Mf{constructor(e,t,r,i,a,l){this.rootComponentType=e,this.config=t,this.urlTree=r,this.url=i,this.paramsInheritanceStrategy=a,this.relativeLinkResolution=l}recognize(){const e=mc(this.urlTree.root,[],[],this.config.filter(l=>void 0===l.redirectTo),this.relativeLinkResolution).segmentGroup,t=this.processSegmentGroup(this.config,e,Ot);if(null===t)return null;const r=new Yu([],Object.freeze({}),Object.freeze(Object.assign({},this.urlTree.queryParams)),this.urlTree.fragment,{},Ot,this.rootComponentType,null,this.urlTree.root,-1,{}),i=new Zo(r,t),a=new uf(this.url,i);return this.inheritParamsAndData(a._root),a}inheritParamsAndData(e){const t=e.value,r=ly(t,this.paramsInheritanceStrategy);t.params=Object.freeze(r.params),t.data=Object.freeze(r.data),e.children.forEach(i=>this.inheritParamsAndData(i))}processSegmentGroup(e,t,r){return 0===t.segments.length&&t.hasChildren()?this.processChildren(e,t):this.processSegment(e,t,t.segments,r)}processChildren(e,t){const r=[];for(const a of Object.keys(t.children)){const l=t.children[a],h=Cf(e,a),_=this.processSegmentGroup(h,l,a);if(null===_)return null;r.push(..._)}const i=Lg(r);return function Sy(n){n.sort((e,t)=>e.value.outlet===Ot?-1:t.value.outlet===Ot?1:e.value.outlet.localeCompare(t.value.outlet))}(i),i}processSegment(e,t,r,i){for(const a of e){const l=this.processSegmentAgainstRoute(a,t,r,i);if(null!==l)return l}return Ey(t,r,i)?[]:null}processSegmentAgainstRoute(e,t,r,i){if(e.redirectTo||!wy(e,t,r,i))return null;let a,l=[],h=[];if("**"===e.path){const L=r.length>0?Dd(r).parameters:{};a=new Yu(r,L,Object.freeze(Object.assign({},this.urlTree.queryParams)),this.urlTree.fragment,E(e),en(e),e.component,e,f(t),g(t)+r.length,x(e))}else{const L=el(t,e,r);if(!L.matched)return null;l=L.consumedSegments,h=L.remainingSegments,a=new Yu(l,L.parameters,Object.freeze(Object.assign({},this.urlTree.queryParams)),this.urlTree.fragment,E(e),en(e),e.component,e,f(t),g(t)+l.length,x(e))}const _=function Ay(n){return n.children?n.children:n.loadChildren?n._loadedConfig.routes:[]}(e),{segmentGroup:w,slicedSegments:D}=mc(t,l,h,_.filter(L=>void 0===L.redirectTo),this.relativeLinkResolution);if(0===D.length&&w.hasChildren()){const L=this.processChildren(_,w);return null===L?null:[new Zo(a,L)]}if(0===_.length&&0===D.length)return[new Zo(a,[])];const S=en(e)===i,N=this.processSegment(_,w,D,S?Ot:i);return null===N?null:[new Zo(a,N)]}}function xy(n){const e=n.value.routeConfig;return e&&""===e.path&&void 0===e.redirectTo}function Lg(n){const e=[],t=new Set;for(const r of n){if(!xy(r)){e.push(r);continue}const i=e.find(a=>r.value.routeConfig===a.value.routeConfig);void 0!==i?(i.children.push(...r.children),t.add(i)):e.push(r)}for(const r of t){const i=Lg(r.children);e.push(new Zo(r.value,i))}return e.filter(r=>!t.has(r))}function f(n){let e=n;for(;e._sourceSegment;)e=e._sourceSegment;return e}function g(n){let e=n,t=e._segmentIndexShift?e._segmentIndexShift:0;for(;e._sourceSegment;)e=e._sourceSegment,t+=e._segmentIndexShift?e._segmentIndexShift:0;return t-1}function E(n){return n.data||{}}function x(n){return n.resolve||{}}function Xe(n){return[...Object.keys(n),...Object.getOwnPropertySymbols(n)]}function ut(n){return bn(e=>{const t=n(e);return t?(0,wn.D)(t).pipe((0,yt.U)(()=>e)):ct(e)})}class wc extends class ss{shouldDetach(e){return!1}store(e,t){}shouldAttach(e){return!1}retrieve(e){return null}shouldReuseRoute(e,t){return e.routeConfig===t.routeConfig}}{}const tl=new m.OlP("ROUTES");class nl{constructor(e,t,r,i){this.injector=e,this.compiler=t,this.onLoadStartListener=r,this.onLoadEndListener=i}load(e,t){if(t._loader$)return t._loader$;this.onLoadStartListener&&this.onLoadStartListener(t);const i=this.loadModuleFactory(t.loadChildren).pipe((0,yt.U)(a=>{this.onLoadEndListener&&this.onLoadEndListener(t);const l=a.create(e);return new kd(rs(l.injector.get(tl,void 0,m.XFs.Self|m.XFs.Optional)).map(Ef),l)}),es(a=>{throw t._loader$=void 0,a}));return t._loader$=new Cd(i,()=>new pr.x).pipe(Mi()),t._loader$}loadModuleFactory(e){return di(e()).pipe((0,Nn.z)(t=>t instanceof m.YKP?ct(t):(0,wn.D)(this.compiler.compileModuleAsync(t))))}}class Ry{shouldProcessUrl(e){return!0}extract(e){return e}merge(e,t){return e}}function Na(n){throw n}function Vd(n,e,t){return e.parse("/")}function Ud(n,e){return ct(null)}const Pf={paths:"exact",fragment:"ignored",matrixParams:"ignored",queryParams:"exact"},Bd={paths:"subset",fragment:"ignored",matrixParams:"ignored",queryParams:"subset"};let Li=(()=>{class n{constructor(t,r,i,a,l,h,_){this.rootComponentType=t,this.urlSerializer=r,this.rootContexts=i,this.location=a,this.config=_,this.lastSuccessfulNavigation=null,this.currentNavigation=null,this.disposed=!1,this.navigationId=0,this.currentPageId=0,this.isNgZoneEnabled=!1,this.events=new pr.x,this.errorHandler=Na,this.malformedUriErrorHandler=Vd,this.navigated=!1,this.lastSuccessfulId=-1,this.hooks={beforePreactivation:Ud,afterPreactivation:Ud},this.urlHandlingStrategy=new Ry,this.routeReuseStrategy=new wc,this.onSameUrlNavigation="ignore",this.paramsInheritanceStrategy="emptyOnly",this.urlUpdateStrategy="deferred",this.relativeLinkResolution="corrected",this.canceledNavigationResolution="replace",this.ngModule=l.get(m.h0i),this.console=l.get(m.c2e);const S=l.get(m.R0b);this.isNgZoneEnabled=S instanceof m.R0b&&m.R0b.isInAngularZone(),this.resetConfig(_),this.currentUrlTree=function oc(){return new xe(new Re([],{}),{},null)}(),this.rawUrlTree=this.currentUrlTree,this.browserUrlTree=this.currentUrlTree,this.configLoader=new nl(l,h,N=>this.triggerEvent(new tc(N)),N=>this.triggerEvent(new xs(N))),this.routerState=ou(this.currentUrlTree,this.rootComponentType),this.transitions=new Zr({id:0,targetPageId:0,currentUrlTree:this.currentUrlTree,currentRawUrl:this.currentUrlTree,extractedUrl:this.urlHandlingStrategy.extract(this.currentUrlTree),urlAfterRedirects:this.urlHandlingStrategy.extract(this.currentUrlTree),rawUrl:this.currentUrlTree,extras:{},resolve:null,reject:null,promise:Promise.resolve(!0),source:"imperative",restoredState:null,currentSnapshot:this.routerState.snapshot,targetSnapshot:null,currentRouterState:this.routerState,targetRouterState:null,guards:{canActivateChecks:[],canDeactivateChecks:[]},guardsResult:null}),this.navigations=this.setupNavigations(this.transitions),this.processNavigations()}get browserPageId(){var t;return null===(t=this.location.getState())||void 0===t?void 0:t.\u0275routerPageId}setupNavigations(t){const r=this.events;return t.pipe(Xi(i=>0!==i.id),(0,yt.U)(i=>Object.assign(Object.assign({},i),{extractedUrl:this.urlHandlingStrategy.extract(i.rawUrl)})),bn(i=>{let a=!1,l=!1;return ct(i).pipe((0,Qr.b)(h=>{this.currentNavigation={id:h.id,initialUrl:h.currentRawUrl,extractedUrl:h.extractedUrl,trigger:h.source,extras:h.extras,previousNavigation:this.lastSuccessfulNavigation?Object.assign(Object.assign({},this.lastSuccessfulNavigation),{previousNavigation:null}):null}}),bn(h=>{const _=this.browserUrlTree.toString(),w=!this.navigated||h.extractedUrl.toString()!==_||_!==this.currentUrlTree.toString();if(("reload"===this.onSameUrlNavigation||w)&&this.urlHandlingStrategy.shouldProcessUrl(h.rawUrl))return Vg(h.source)&&(this.browserUrlTree=h.extractedUrl),ct(h).pipe(bn(S=>{const N=this.transitions.getValue();return r.next(new As(S.id,this.serializeUrl(S.extractedUrl),S.source,S.restoredState)),N!==this.transitions.getValue()?Ca.E:Promise.resolve(S)}),function Df(n,e,t,r){return bn(i=>function uu(n,e,t,r,i){return new bf(n,e,t,r,i).apply()}(n,e,t,i.extractedUrl,r).pipe((0,yt.U)(a=>Object.assign(Object.assign({},i),{urlAfterRedirects:a}))))}(this.ngModule.injector,this.configLoader,this.urlSerializer,this.config),(0,Qr.b)(S=>{this.currentNavigation=Object.assign(Object.assign({},this.currentNavigation),{finalUrl:S.urlAfterRedirects})}),function P(n,e,t,r,i){return(0,Nn.z)(a=>function Ty(n,e,t,r,i="emptyOnly",a="legacy"){try{const l=new Mf(n,e,t,r,i,a).recognize();return null===l?Rf(new xf):ct(l)}catch(l){return Rf(l)}}(n,e,a.urlAfterRedirects,t(a.urlAfterRedirects),r,i).pipe((0,yt.U)(l=>Object.assign(Object.assign({},a),{targetSnapshot:l}))))}(this.rootComponentType,this.config,S=>this.serializeUrl(S),this.paramsInheritanceStrategy,this.relativeLinkResolution),(0,Qr.b)(S=>{if("eager"===this.urlUpdateStrategy){if(!S.extras.skipLocationChange){const L=this.urlHandlingStrategy.merge(S.urlAfterRedirects,S.rawUrl);this.setBrowserUrl(L,S)}this.browserUrlTree=S.urlAfterRedirects}const N=new Da(S.id,this.serializeUrl(S.extractedUrl),this.serializeUrl(S.urlAfterRedirects),S.targetSnapshot);r.next(N)}));if(w&&this.rawUrlTree&&this.urlHandlingStrategy.shouldProcessUrl(this.rawUrlTree)){const{id:N,extractedUrl:L,source:j,restoredState:fe,extras:Me}=h,et=new As(N,this.serializeUrl(L),j,fe);r.next(et);const We=ou(L,this.rootComponentType).snapshot;return ct(Object.assign(Object.assign({},h),{targetSnapshot:We,urlAfterRedirects:L,extras:Object.assign(Object.assign({},Me),{skipLocationChange:!1,replaceUrl:!1})}))}return this.rawUrlTree=h.rawUrl,h.resolve(null),Ca.E}),ut(h=>{const{targetSnapshot:_,id:w,extractedUrl:D,rawUrl:S,extras:{skipLocationChange:N,replaceUrl:L}}=h;return this.hooks.beforePreactivation(_,{navigationId:w,appliedUrlTree:D,rawUrlTree:S,skipLocationChange:!!N,replaceUrl:!!L})}),(0,Qr.b)(h=>{const _=new bg(h.id,this.serializeUrl(h.extractedUrl),this.serializeUrl(h.urlAfterRedirects),h.targetSnapshot);this.triggerEvent(_)}),(0,yt.U)(h=>Object.assign(Object.assign({},h),{guards:Tf(h.targetSnapshot,h.currentSnapshot,this.rootContexts)})),function by(n,e){return(0,Nn.z)(t=>{const{targetSnapshot:r,currentSnapshot:i,guards:{canActivateChecks:a,canDeactivateChecks:l}}=t;return 0===l.length&&0===a.length?ct(Object.assign(Object.assign({},t),{guardsResult:!0})):function Fg(n,e,t,r){return(0,wn.D)(n).pipe((0,Nn.z)(i=>function vc(n,e,t,r,i){const a=e&&e.routeConfig?e.routeConfig.canDeactivate:null;return a&&0!==a.length?ct(a.map(h=>{const _=yc(h,e,i);let w;if(function OE(n){return n&&au(n.canDeactivate)}(_))w=di(_.canDeactivate(n,e,t,r));else{if(!au(_))throw new Error("Invalid CanDeactivate guard");w=di(_(n,e,t,r))}return w.pipe(co())})).pipe(Ra()):ct(!0)}(i.component,i.route,t,e,r)),co(i=>!0!==i,!0))}(l,r,i,n).pipe((0,Nn.z)(h=>h&&function Rg(n){return"boolean"==typeof n}(h)?function Ar(n,e,t,r){return(0,wn.D)(e).pipe(Ss(i=>Ed(function Af(n,e){return null!==n&&e&&e(new Pi(n)),ct(!0)}(i.route.parent,r),function Sf(n,e){return null!==n&&e&&e(new iu(n)),ct(!0)}(i.route,r),function Jo(n,e,t){const r=e[e.length-1],a=e.slice(0,e.length-1).reverse().map(l=>function kg(n){const e=n.routeConfig?n.routeConfig.canActivateChild:null;return e&&0!==e.length?{node:n,guards:e}:null}(l)).filter(l=>null!==l).map(l=>Ri(()=>ct(l.guards.map(_=>{const w=yc(_,l.node,t);let D;if(function _f(n){return n&&au(n.canActivateChild)}(w))D=di(w.canActivateChild(r,n));else{if(!au(w))throw new Error("Invalid CanActivateChild guard");D=di(w(r,n))}return D.pipe(co())})).pipe(Ra())));return ct(a).pipe(Ra())}(n,i.path,t),function Dy(n,e,t){const r=e.routeConfig?e.routeConfig.canActivate:null;if(!r||0===r.length)return ct(!0);const i=r.map(a=>Ri(()=>{const l=yc(a,e,t);let h;if(function mf(n){return n&&au(n.canActivate)}(l))h=di(l.canActivate(e,n));else{if(!au(l))throw new Error("Invalid CanActivate guard");h=di(l(e,n))}return h.pipe(co())}));return ct(i).pipe(Ra())}(n,i.route,t))),co(i=>!0!==i,!0))}(r,a,n,e):ct(h)),(0,yt.U)(h=>Object.assign(Object.assign({},t),{guardsResult:h})))})}(this.ngModule.injector,h=>this.triggerEvent(h)),(0,Qr.b)(h=>{if(Xu(h.guardsResult)){const w=fo(`Redirecting to "${this.serializeUrl(h.guardsResult)}"`);throw w.url=h.guardsResult,w}const _=new ec(h.id,this.serializeUrl(h.extractedUrl),this.serializeUrl(h.urlAfterRedirects),h.targetSnapshot,!!h.guardsResult);this.triggerEvent(_)}),Xi(h=>!!h.guardsResult||(this.restoreHistory(h),this.cancelNavigationTransition(h,""),!1)),ut(h=>{if(h.guards.canActivateChecks.length)return ct(h).pipe((0,Qr.b)(_=>{const w=new mr(_.id,this.serializeUrl(_.extractedUrl),this.serializeUrl(_.urlAfterRedirects),_.targetSnapshot);this.triggerEvent(w)}),bn(_=>{let w=!1;return ct(_).pipe(function z(n,e){return(0,Nn.z)(t=>{const{targetSnapshot:r,guards:{canActivateChecks:i}}=t;if(!i.length)return ct(t);let a=0;return(0,wn.D)(i).pipe(Ss(l=>function oe(n,e,t,r){return function Be(n,e,t,r){const i=Xe(n);if(0===i.length)return ct({});const a={};return(0,wn.D)(i).pipe((0,Nn.z)(l=>function vt(n,e,t,r){const i=yc(n,e,r);return di(i.resolve?i.resolve(e,t):i(e,t))}(n[l],e,t,r).pipe((0,Qr.b)(h=>{a[l]=h}))),Id(1),(0,Nn.z)(()=>Xe(a).length===i.length?ct(a):Ca.E))}(n._resolve,n,e,r).pipe((0,yt.U)(a=>(n._resolvedData=a,n.data=Object.assign(Object.assign({},n.data),ly(n,t).resolve),null)))}(l.route,r,n,e)),(0,Qr.b)(()=>a++),Id(1),(0,Nn.z)(l=>a===i.length?ct(t):Ca.E))})}(this.paramsInheritanceStrategy,this.ngModule.injector),(0,Qr.b)({next:()=>w=!0,complete:()=>{w||(this.restoreHistory(_),this.cancelNavigationTransition(_,"At least one route resolver didn't emit any value."))}}))}),(0,Qr.b)(_=>{const w=new ci(_.id,this.serializeUrl(_.extractedUrl),this.serializeUrl(_.urlAfterRedirects),_.targetSnapshot);this.triggerEvent(w)}))}),ut(h=>{const{targetSnapshot:_,id:w,extractedUrl:D,rawUrl:S,extras:{skipLocationChange:N,replaceUrl:L}}=h;return this.hooks.afterPreactivation(_,{navigationId:w,appliedUrlTree:D,rawUrlTree:S,skipLocationChange:!!N,replaceUrl:!!L})}),(0,yt.U)(h=>{const _=function cy(n,e,t){const r=cc(n,e._root,t?t._root:void 0);return new Ad(r,e)}(this.routeReuseStrategy,h.targetSnapshot,h.currentRouterState);return Object.assign(Object.assign({},h),{targetRouterState:_})}),(0,Qr.b)(h=>{this.currentUrlTree=h.urlAfterRedirects,this.rawUrlTree=this.urlHandlingStrategy.merge(h.urlAfterRedirects,h.rawUrl),this.routerState=h.targetRouterState,"deferred"===this.urlUpdateStrategy&&(h.extras.skipLocationChange||this.setBrowserUrl(this.rawUrlTree,h),this.browserUrlTree=h.urlAfterRedirects)}),((n,e,t)=>(0,yt.U)(r=>(new xg(e,r.targetRouterState,r.currentRouterState,t).activate(n),r)))(this.rootContexts,this.routeReuseStrategy,h=>this.triggerEvent(h)),(0,Qr.b)({next(){a=!0},complete(){a=!0}}),function Ig(n){return(0,sr.e)((e,t)=>{try{e.subscribe(t)}finally{t.add(n)}})}(()=>{var h;a||l||this.cancelNavigationTransition(i,`Navigation ID ${i.id} is not equal to the current navigation id ${this.navigationId}`),(null===(h=this.currentNavigation)||void 0===h?void 0:h.id)===i.id&&(this.currentNavigation=null)}),es(h=>{if(l=!0,function bd(n){return n&&n[sc]}(h)){const _=Xu(h.url);_||(this.navigated=!0,this.restoreHistory(i,!0));const w=new Sn(i.id,this.serializeUrl(i.extractedUrl),h.message);r.next(w),_?setTimeout(()=>{const D=this.urlHandlingStrategy.merge(h.url,this.rawUrlTree),S={skipLocationChange:i.extras.skipLocationChange,replaceUrl:"eager"===this.urlUpdateStrategy||Vg(i.source)};this.scheduleNavigation(D,"imperative",null,S,{resolve:i.resolve,reject:i.reject,promise:i.promise})},0):i.resolve(!1)}else{this.restoreHistory(i,!0);const _=new Xl(i.id,this.serializeUrl(i.extractedUrl),h);r.next(_);try{i.resolve(this.errorHandler(h))}catch(w){i.reject(w)}}return Ca.E}))}))}resetRootComponentType(t){this.rootComponentType=t,this.routerState.root.component=this.rootComponentType}setTransition(t){this.transitions.next(Object.assign(Object.assign({},this.transitions.value),t))}initialNavigation(){this.setUpLocationChangeListener(),0===this.navigationId&&this.navigateByUrl(this.location.path(!0),{replaceUrl:!0})}setUpLocationChangeListener(){this.locationSubscription||(this.locationSubscription=this.location.subscribe(t=>{const r="popstate"===t.type?"popstate":"hashchange";"popstate"===r&&setTimeout(()=>{var i;const a={replaceUrl:!0},l=(null===(i=t.state)||void 0===i?void 0:i.navigationId)?t.state:null;if(l){const _=Object.assign({},l);delete _.navigationId,delete _.\u0275routerPageId,0!==Object.keys(_).length&&(a.state=_)}const h=this.parseUrl(t.url);this.scheduleNavigation(h,r,l,a)},0)}))}get url(){return this.serializeUrl(this.currentUrlTree)}getCurrentNavigation(){return this.currentNavigation}triggerEvent(t){this.events.next(t)}resetConfig(t){gc(t),this.config=t.map(Ef),this.navigated=!1,this.lastSuccessfulId=-1}ngOnDestroy(){this.dispose()}dispose(){this.transitions.complete(),this.locationSubscription&&(this.locationSubscription.unsubscribe(),this.locationSubscription=void 0),this.disposed=!0}createUrlTree(t,r={}){const{relativeTo:i,queryParams:a,fragment:l,queryParamsHandling:h,preserveFragment:_}=r,w=i||this.routerState.root,D=_?this.currentUrlTree.fragment:l;let S=null;switch(h){case"merge":S=Object.assign(Object.assign({},this.currentUrlTree.queryParams),a);break;case"preserve":S=this.currentUrlTree.queryParams;break;default:S=a||null}return null!==S&&(S=this.removeEmptyProps(S)),function po(n,e,t,r,i){if(0===t.length)return Sg(e.root,e.root,e.root,r,i);const a=function fy(n){if("string"==typeof n[0]&&1===n.length&&"/"===n[0])return new hy(!0,0,n);let e=0,t=!1;const r=n.reduce((i,a,l)=>{if("object"==typeof a&&null!=a){if(a.outlets){const h={};return $n(a.outlets,(_,w)=>{h[w]="string"==typeof _?_.split("/"):_}),[...i,{outlets:h}]}if(a.segmentPath)return[...i,a.segmentPath]}return"string"!=typeof a?[...i,a]:0===l?(a.split("/").forEach((h,_)=>{0==_&&"."===h||(0==_&&""===h?t=!0:".."===h?e++:""!=h&&i.push(h))}),i):[...i,a]},[]);return new hy(t,e,r)}(t);if(a.toRoot())return Sg(e.root,e.root,new Re([],{}),r,i);const l=function Ag(n,e,t){if(n.isAbsolute)return new hf(e.root,!0,0);if(-1===t.snapshot._lastPathIndex){const a=t.snapshot._urlSegment;return new hf(a,a===e.root,0)}const r=xa(n.commands[0])?0:1;return function py(n,e,t){let r=n,i=e,a=t;for(;a>i;){if(a-=i,r=r.parent,!r)throw new Error("Invalid number of '../'");i=r.segments.length}return new hf(r,!1,i-a)}(t.snapshot._urlSegment,t.snapshot._lastPathIndex+r,n.numberOfDoubleDots)}(a,e,n),h=l.processChildren?go(l.segmentGroup,l.index,a.commands):my(l.segmentGroup,l.index,a.commands);return Sg(e.root,l.segmentGroup,h,r,i)}(w,this.currentUrlTree,t,S,null!=D?D:null)}navigateByUrl(t,r={skipLocationChange:!1}){const i=Xu(t)?t:this.parseUrl(t),a=this.urlHandlingStrategy.merge(i,this.rawUrlTree);return this.scheduleNavigation(a,"imperative",null,r)}navigate(t,r={skipLocationChange:!1}){return function kf(n){for(let e=0;e<n.length;e++){const t=n[e];if(null==t)throw new Error(`The requested path contains ${t} segment at index ${e}`)}}(t),this.navigateByUrl(this.createUrlTree(t,r),r)}serializeUrl(t){return this.urlSerializer.serialize(t)}parseUrl(t){let r;try{r=this.urlSerializer.parse(t)}catch(i){r=this.malformedUriErrorHandler(i,this.urlSerializer,t)}return r}isActive(t,r){let i;if(i=!0===r?Object.assign({},Pf):!1===r?Object.assign({},Bd):r,Xu(t))return Zu(this.currentUrlTree,t,i);const a=this.parseUrl(t);return Zu(this.currentUrlTree,a,i)}removeEmptyProps(t){return Object.keys(t).reduce((r,i)=>{const a=t[i];return null!=a&&(r[i]=a),r},{})}processNavigations(){this.navigations.subscribe(t=>{this.navigated=!0,this.lastSuccessfulId=t.id,this.currentPageId=t.targetPageId,this.events.next(new qu(t.id,this.serializeUrl(t.extractedUrl),this.serializeUrl(this.currentUrlTree))),this.lastSuccessfulNavigation=this.currentNavigation,t.resolve(!0)},t=>{this.console.warn(`Unhandled Navigation Error: ${t}`)})}scheduleNavigation(t,r,i,a,l){var h,_;if(this.disposed)return Promise.resolve(!1);let w,D,S;l?(w=l.resolve,D=l.reject,S=l.promise):S=new Promise((j,fe)=>{w=j,D=fe});const N=++this.navigationId;let L;return"computed"===this.canceledNavigationResolution?(0===this.currentPageId&&(i=this.location.getState()),L=i&&i.\u0275routerPageId?i.\u0275routerPageId:a.replaceUrl||a.skipLocationChange?null!==(h=this.browserPageId)&&void 0!==h?h:0:(null!==(_=this.browserPageId)&&void 0!==_?_:0)+1):L=0,this.setTransition({id:N,targetPageId:L,source:r,restoredState:i,currentUrlTree:this.currentUrlTree,currentRawUrl:this.rawUrlTree,rawUrl:t,extras:a,resolve:w,reject:D,promise:S,currentSnapshot:this.routerState.snapshot,currentRouterState:this.routerState}),S.catch(j=>Promise.reject(j))}setBrowserUrl(t,r){const i=this.urlSerializer.serialize(t),a=Object.assign(Object.assign({},r.extras.state),this.generateNgRouterState(r.id,r.targetPageId));this.location.isCurrentPathEqualTo(i)||r.extras.replaceUrl?this.location.replaceState(i,"",a):this.location.go(i,"",a)}restoreHistory(t,r=!1){var i,a;if("computed"===this.canceledNavigationResolution){const l=this.currentPageId-t.targetPageId;"popstate"!==t.source&&"eager"!==this.urlUpdateStrategy&&this.currentUrlTree!==(null===(i=this.currentNavigation)||void 0===i?void 0:i.finalUrl)||0===l?this.currentUrlTree===(null===(a=this.currentNavigation)||void 0===a?void 0:a.finalUrl)&&0===l&&(this.resetState(t),this.browserUrlTree=t.currentUrlTree,this.resetUrlToCurrentUrlTree()):this.location.historyGo(l)}else"replace"===this.canceledNavigationResolution&&(r&&this.resetState(t),this.resetUrlToCurrentUrlTree())}resetState(t){this.routerState=t.currentRouterState,this.currentUrlTree=t.currentUrlTree,this.rawUrlTree=this.urlHandlingStrategy.merge(this.currentUrlTree,t.rawUrl)}resetUrlToCurrentUrlTree(){this.location.replaceState(this.urlSerializer.serialize(this.rawUrlTree),"",this.generateNgRouterState(this.lastSuccessfulId,this.currentPageId))}cancelNavigationTransition(t,r){const i=new Sn(t.id,this.serializeUrl(t.extractedUrl),r);this.triggerEvent(i),t.resolve(!1)}generateNgRouterState(t,r){return"computed"===this.canceledNavigationResolution?{navigationId:t,\u0275routerPageId:r}:{navigationId:t}}}return n.\u0275fac=function(t){m.$Z()},n.\u0275prov=m.Yz7({token:n,factory:n.\u0275fac}),n})();function Vg(n){return"imperative"!==n}class ky{}class LE{preload(e,t){return ct(null)}}let VE=(()=>{class n{constructor(t,r,i,a){this.router=t,this.injector=i,this.preloadingStrategy=a,this.loader=new nl(i,r,_=>t.triggerEvent(new tc(_)),_=>t.triggerEvent(new xs(_)))}setUpPreloading(){this.subscription=this.router.events.pipe(Xi(t=>t instanceof qu),Ss(()=>this.preload())).subscribe(()=>{})}preload(){const t=this.injector.get(m.h0i);return this.processRoutes(t,this.router.config)}ngOnDestroy(){this.subscription&&this.subscription.unsubscribe()}processRoutes(t,r){const i=[];for(const a of r)if(a.loadChildren&&!a.canLoad&&a._loadedConfig){const l=a._loadedConfig;i.push(this.processRoutes(l.module,l.routes))}else a.loadChildren&&!a.canLoad?i.push(this.preloadConfig(t,a)):a.children&&i.push(this.processRoutes(t,a.children));return(0,wn.D)(i).pipe((0,Ji.J)(),(0,yt.U)(a=>{}))}preloadConfig(t,r){return this.preloadingStrategy.preload(r,()=>(r._loadedConfig?ct(r._loadedConfig):this.loader.load(t.injector,r)).pipe((0,Nn.z)(a=>(r._loadedConfig=a,this.processRoutes(a.module,a.routes)))))}}return n.\u0275fac=function(t){return new(t||n)(m.LFG(Li),m.LFG(m.Sil),m.LFG(m.zs3),m.LFG(ky))},n.\u0275prov=m.Yz7({token:n,factory:n.\u0275fac}),n})(),Ug=(()=>{class n{constructor(t,r,i={}){this.router=t,this.viewportScroller=r,this.options=i,this.lastId=0,this.lastSource="imperative",this.restoredId=0,this.store={},i.scrollPositionRestoration=i.scrollPositionRestoration||"disabled",i.anchorScrolling=i.anchorScrolling||"disabled"}init(){"disabled"!==this.options.scrollPositionRestoration&&this.viewportScroller.setHistoryScrollRestoration("manual"),this.routerEventsSubscription=this.createScrollEvents(),this.scrollEventsSubscription=this.consumeScrollEvents()}createScrollEvents(){return this.router.events.subscribe(t=>{t instanceof As?(this.store[this.lastId]=this.viewportScroller.getScrollPosition(),this.lastSource=t.navigationTrigger,this.restoredId=t.restoredState?t.restoredState.navigationId:0):t instanceof qu&&(this.lastId=t.id,this.scheduleScrollEvent(t,this.router.parseUrl(t.urlAfterRedirects).fragment))})}consumeScrollEvents(){return this.router.events.subscribe(t=>{t instanceof rc&&(t.position?"top"===this.options.scrollPositionRestoration?this.viewportScroller.scrollToPosition([0,0]):"enabled"===this.options.scrollPositionRestoration&&this.viewportScroller.scrollToPosition(t.position):t.anchor&&"enabled"===this.options.anchorScrolling?this.viewportScroller.scrollToAnchor(t.anchor):"disabled"!==this.options.scrollPositionRestoration&&this.viewportScroller.scrollToPosition([0,0]))})}scheduleScrollEvent(t,r){this.router.triggerEvent(new rc(t,"popstate"===this.lastSource?this.store[this.restoredId]:null,r))}ngOnDestroy(){this.routerEventsSubscription&&this.routerEventsSubscription.unsubscribe(),this.scrollEventsSubscription&&this.scrollEventsSubscription.unsubscribe()}}return n.\u0275fac=function(t){m.$Z()},n.\u0275prov=m.Yz7({token:n,factory:n.\u0275fac}),n})();const Ms=new m.OlP("ROUTER_CONFIGURATION"),Fy=new m.OlP("ROUTER_FORROOT_GUARD"),UE=[we,{provide:Gn,useClass:kn},{provide:Li,useFactory:function Vy(n,e,t,r,i,a,l={},h,_){const w=new Li(null,n,e,t,r,i,rs(a));return h&&(w.urlHandlingStrategy=h),_&&(w.routeReuseStrategy=_),function HE(n,e){n.errorHandler&&(e.errorHandler=n.errorHandler),n.malformedUriErrorHandler&&(e.malformedUriErrorHandler=n.malformedUriErrorHandler),n.onSameUrlNavigation&&(e.onSameUrlNavigation=n.onSameUrlNavigation),n.paramsInheritanceStrategy&&(e.paramsInheritanceStrategy=n.paramsInheritanceStrategy),n.relativeLinkResolution&&(e.relativeLinkResolution=n.relativeLinkResolution),n.urlUpdateStrategy&&(e.urlUpdateStrategy=n.urlUpdateStrategy),n.canceledNavigationResolution&&(e.canceledNavigationResolution=n.canceledNavigationResolution)}(l,w),l.enableTracing&&w.events.subscribe(D=>{var S,N;null===(S=console.group)||void 0===S||S.call(console,`Router Event: ${D.constructor.name}`),console.log(D.toString()),console.log(D),null===(N=console.groupEnd)||void 0===N||N.call(console)}),w},deps:[Gn,fc,we,m.zs3,m.Sil,tl,Ms,[class Nf{},new m.FiY],[class On{},new m.FiY]]},fc,{provide:Aa,useFactory:function Bg(n){return n.routerState.root},deps:[Li]},VE,LE,class Oy{preload(e,t){return t().pipe(es(()=>ct(null)))}},{provide:Ms,useValue:{enableTracing:!1}}];function CT(){return new m.PXZ("Router",Li)}let Of=(()=>{class n{constructor(t,r){}static forRoot(t,r){return{ngModule:n,providers:[UE,Ly(t),{provide:Fy,useFactory:jE,deps:[[Li,new m.FiY,new m.tp0]]},{provide:Ms,useValue:r||{}},{provide:pe,useFactory:BE,deps:[he,[new m.tBr(nt),new m.FiY],Ms]},{provide:Ug,useFactory:IT,deps:[Li,Pu,Ms]},{provide:ky,useExisting:r&&r.preloadingStrategy?r.preloadingStrategy:LE},{provide:m.PXZ,multi:!0,useFactory:CT},[Hd,{provide:m.ip1,multi:!0,useFactory:$E,deps:[Hd]},{provide:By,useFactory:Uy,deps:[Hd]},{provide:m.tb,multi:!0,useExisting:By}]]}}static forChild(t){return{ngModule:n,providers:[Ly(t)]}}}return n.\u0275fac=function(t){return new(t||n)(m.LFG(Fy,8),m.LFG(Li,8))},n.\u0275mod=m.oAB({type:n}),n.\u0275inj=m.cJS({}),n})();function IT(n,e,t){return t.scrollOffset&&e.setOffset(t.scrollOffset),new Ug(n,e,t)}function BE(n,e,t={}){return t.useHash?new Te(n,e):new Ke(n,e)}function jE(n){return"guarded"}function Ly(n){return[{provide:m.deG,multi:!0,useValue:n},{provide:tl,multi:!0,useValue:n}]}let Hd=(()=>{class n{constructor(t){this.injector=t,this.initNavigation=!1,this.destroyed=!1,this.resultOfPreactivationDone=new pr.x}appInitializer(){return this.injector.get(W,Promise.resolve(null)).then(()=>{if(this.destroyed)return Promise.resolve(!0);let r=null;const i=new Promise(h=>r=h),a=this.injector.get(Li),l=this.injector.get(Ms);return"disabled"===l.initialNavigation?(a.setUpLocationChangeListener(),r(!0)):"enabled"===l.initialNavigation||"enabledBlocking"===l.initialNavigation?(a.hooks.afterPreactivation=()=>this.initNavigation?ct(null):(this.initNavigation=!0,r(!0),this.resultOfPreactivationDone),a.initialNavigation()):r(!0),i})}bootstrapListener(t){const r=this.injector.get(Ms),i=this.injector.get(VE),a=this.injector.get(Ug),l=this.injector.get(Li),h=this.injector.get(m.z2F);t===h.components[0]&&(("enabledNonBlocking"===r.initialNavigation||void 0===r.initialNavigation)&&l.initialNavigation(),i.setUpPreloading(),a.init(),l.resetRootComponentType(h.componentTypes[0]),this.resultOfPreactivationDone.next(null),this.resultOfPreactivationDone.complete())}ngOnDestroy(){this.destroyed=!0}}return n.\u0275fac=function(t){return new(t||n)(m.LFG(m.zs3))},n.\u0275prov=m.Yz7({token:n,factory:n.\u0275fac}),n})();function $E(n){return n.appInitializer.bind(n)}function Uy(n){return n.bootstrapListener.bind(n)}const By=new m.OlP("Router Initializer"),bT=[];let GE=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=m.oAB({type:n}),n.\u0275inj=m.cJS({imports:[[Of.forRoot(bT)],Of]}),n})(),WE=(()=>{class n{constructor(t,r){this._renderer=t,this._elementRef=r,this.onChange=i=>{},this.onTouched=()=>{}}setProperty(t,r){this._renderer.setProperty(this._elementRef.nativeElement,t,r)}registerOnTouched(t){this.onTouched=t}registerOnChange(t){this.onChange=t}setDisabledState(t){this.setProperty("disabled",t)}}return n.\u0275fac=function(t){return new(t||n)(m.Y36(m.Qsj),m.Y36(m.SBq))},n.\u0275dir=m.lG2({type:n}),n})(),rl=(()=>{class n extends WE{}return n.\u0275fac=function(){let e;return function(r){return(e||(e=m.n5z(n)))(r||n)}}(),n.\u0275dir=m.lG2({type:n,features:[m.qOj]}),n})();const mo=new m.OlP("NgValueAccessor"),zE={provide:mo,useExisting:(0,m.Gpc)(()=>Hg),multi:!0},KE=new m.OlP("CompositionEventMode");let Hg=(()=>{class n extends WE{constructor(t,r,i){super(t,r),this._compositionMode=i,this._composing=!1,null==this._compositionMode&&(this._compositionMode=!function ST(){const n=O()?O().getUserAgent():"";return/android (\d+)/.test(n.toLowerCase())}())}writeValue(t){this.setProperty("value",null==t?"":t)}_handleInput(t){(!this._compositionMode||this._compositionMode&&!this._composing)&&this.onChange(t)}_compositionStart(){this._composing=!0}_compositionEnd(t){this._composing=!1,this._compositionMode&&this.onChange(t)}}return n.\u0275fac=function(t){return new(t||n)(m.Y36(m.Qsj),m.Y36(m.SBq),m.Y36(KE,8))},n.\u0275dir=m.lG2({type:n,selectors:[["input","formControlName","",3,"type","checkbox"],["textarea","formControlName",""],["input","formControl","",3,"type","checkbox"],["textarea","formControl",""],["input","ngModel","",3,"type","checkbox"],["textarea","ngModel",""],["","ngDefaultControl",""]],hostBindings:function(t,r){1&t&&m.NdJ("input",function(a){return r._handleInput(a.target.value)})("blur",function(){return r.onTouched()})("compositionstart",function(){return r._compositionStart()})("compositionend",function(a){return r._compositionEnd(a.target.value)})},features:[m._Bn([zE]),m.qOj]}),n})();function il(n){return null==n||0===n.length}function _o(n){return null!=n&&"number"==typeof n.length}const pi=new m.OlP("NgValidators"),hu=new m.OlP("NgAsyncValidators"),AT=/^(?=.{1,254}$)(?=.{1,64}@)[a-zA-Z0-9!#$%&'*+/=?^_`{|}~-]+(?:\.[a-zA-Z0-9!#$%&'*+/=?^_`{|}~-]+)*@[a-zA-Z0-9](?:[a-zA-Z0-9-]{0,61}[a-zA-Z0-9])?(?:\.[a-zA-Z0-9](?:[a-zA-Z0-9-]{0,61}[a-zA-Z0-9])?)*$/;class $g{static min(e){return function ZE(n){return e=>{if(il(e.value)||il(n))return null;const t=parseFloat(e.value);return!isNaN(t)&&t<n?{min:{min:n,actual:e.value}}:null}}(e)}static max(e){return function YE(n){return e=>{if(il(e.value)||il(n))return null;const t=parseFloat(e.value);return!isNaN(t)&&t>n?{max:{max:n,actual:e.value}}:null}}(e)}static required(e){return function Hy(n){return il(n.value)?{required:!0}:null}(e)}static requiredTrue(e){return function QE(n){return!0===n.value?null:{required:!0}}(e)}static email(e){return function JE(n){return il(n.value)||AT.test(n.value)?null:{email:!0}}(e)}static minLength(e){return function XE(n){return e=>il(e.value)||!_o(e.value)?null:e.value.length<n?{minlength:{requiredLength:n,actualLength:e.value.length}}:null}(e)}static maxLength(e){return function St(n){return e=>_o(e.value)&&e.value.length>n?{maxlength:{requiredLength:n,actualLength:e.value.length}}:null}(e)}static pattern(e){return function $y(n){if(!n)return Ff;let e,t;return"string"==typeof n?(t="","^"!==n.charAt(0)&&(t+="^"),t+=n,"$"!==n.charAt(n.length-1)&&(t+="$"),e=new RegExp(t)):(t=n.toString(),e=n),r=>{if(il(r.value))return null;const i=r.value;return e.test(i)?null:{pattern:{requiredPattern:t,actualValue:i}}}}(e)}static nullValidator(e){return null}static compose(e){return Pa(e)}static composeAsync(e){return qy(e)}}function Ff(n){return null}function Gy(n){return null!=n}function Lf(n){const e=(0,m.QGY)(n)?(0,wn.D)(n):n;return(0,m.CqO)(e),e}function yo(n){let e={};return n.forEach(t=>{e=null!=t?Object.assign(Object.assign({},e),t):e}),0===Object.keys(e).length?null:e}function Wy(n,e){return e.map(t=>t(n))}function Gg(n){return n.map(e=>function xT(n){return!n.validate}(e)?e:t=>e.validate(t))}function Pa(n){if(!n)return null;const e=n.filter(Gy);return 0==e.length?null:function(t){return yo(Wy(t,e))}}function Vf(n){return null!=n?Pa(Gg(n)):null}function qy(n){if(!n)return null;const e=n.filter(Gy);return 0==e.length?null:function(t){return function DT(...n){const e=(0,Mn.jO)(n),{args:t,keys:r}=xi(n),i=new gr.y(a=>{const{length:l}=t;if(!l)return void a.complete();const h=new Array(l);let _=l,w=l;for(let D=0;D<l;D++){let S=!1;(0,Go.Xf)(t[D]).subscribe((0,In.x)(a,N=>{S||(S=!0,w--),h[D]=N},()=>_--,void 0,()=>{(!_||!S)&&(w||a.next(r?$o(r,h):h),a.complete())}))}});return e?i.pipe(wd(e)):i}(Wy(t,e).map(Lf)).pipe((0,yt.U)(yo))}}function Uf(n){return null!=n?qy(Gg(n)):null}function RT(n,e){return null===n?[e]:Array.isArray(n)?[...n,e]:[n,e]}function zy(n){return n._rawValidators}function MT(n){return n._rawAsyncValidators}function $d(n){return n?Array.isArray(n)?n:[n]:[]}function Ec(n,e){return Array.isArray(n)?n.includes(e):n===e}function Wg(n,e){const t=$d(e);return $d(n).forEach(i=>{Ec(t,i)||t.push(i)}),t}function qg(n,e){return $d(e).filter(t=>!Ec(n,t))}class zg{constructor(){this._rawValidators=[],this._rawAsyncValidators=[],this._onDestroyCallbacks=[]}get value(){return this.control?this.control.value:null}get valid(){return this.control?this.control.valid:null}get invalid(){return this.control?this.control.invalid:null}get pending(){return this.control?this.control.pending:null}get disabled(){return this.control?this.control.disabled:null}get enabled(){return this.control?this.control.enabled:null}get errors(){return this.control?this.control.errors:null}get pristine(){return this.control?this.control.pristine:null}get dirty(){return this.control?this.control.dirty:null}get touched(){return this.control?this.control.touched:null}get status(){return this.control?this.control.status:null}get untouched(){return this.control?this.control.untouched:null}get statusChanges(){return this.control?this.control.statusChanges:null}get valueChanges(){return this.control?this.control.valueChanges:null}get path(){return null}_setValidators(e){this._rawValidators=e||[],this._composedValidatorFn=Vf(this._rawValidators)}_setAsyncValidators(e){this._rawAsyncValidators=e||[],this._composedAsyncValidatorFn=Uf(this._rawAsyncValidators)}get validator(){return this._composedValidatorFn||null}get asyncValidator(){return this._composedAsyncValidatorFn||null}_registerOnDestroy(e){this._onDestroyCallbacks.push(e)}_invokeOnDestroyCallbacks(){this._onDestroyCallbacks.forEach(e=>e()),this._onDestroyCallbacks=[]}reset(e){this.control&&this.control.reset(e)}hasError(e,t){return!!this.control&&this.control.hasError(e,t)}getError(e,t){return this.control?this.control.getError(e,t):null}}class Cc extends zg{constructor(){super(...arguments),this._parent=null,this.name=null,this.valueAccessor=null}}class Vi extends zg{get formDirective(){return null}get path(){return null}}class eC{constructor(e){this._cd=e}is(e){var t,r,i;return"submitted"===e?!!(null===(t=this._cd)||void 0===t?void 0:t.submitted):!!(null===(i=null===(r=this._cd)||void 0===r?void 0:r.control)||void 0===i?void 0:i[e])}}let Ky=(()=>{class n extends eC{constructor(t){super(t)}}return n.\u0275fac=function(t){return new(t||n)(m.Y36(Cc,2))},n.\u0275dir=m.lG2({type:n,selectors:[["","formControlName",""],["","ngModel",""],["","formControl",""]],hostVars:14,hostBindings:function(t,r){2&t&&m.ekj("ng-untouched",r.is("untouched"))("ng-touched",r.is("touched"))("ng-pristine",r.is("pristine"))("ng-dirty",r.is("dirty"))("ng-valid",r.is("valid"))("ng-invalid",r.is("invalid"))("ng-pending",r.is("pending"))},features:[m.qOj]}),n})(),NT=(()=>{class n extends eC{constructor(t){super(t)}}return n.\u0275fac=function(t){return new(t||n)(m.Y36(Vi,10))},n.\u0275dir=m.lG2({type:n,selectors:[["","formGroupName",""],["","formArrayName",""],["","ngModelGroup",""],["","formGroup",""],["form",3,"ngNoForm",""],["","ngForm",""]],hostVars:16,hostBindings:function(t,r){2&t&&m.ekj("ng-untouched",r.is("untouched"))("ng-touched",r.is("touched"))("ng-pristine",r.is("pristine"))("ng-dirty",r.is("dirty"))("ng-valid",r.is("valid"))("ng-invalid",r.is("invalid"))("ng-pending",r.is("pending"))("ng-submitted",r.is("submitted"))},features:[m.qOj]}),n})();function Ic(n,e){Yg(n,e),e.valueAccessor.writeValue(n.value),function OT(n,e){e.valueAccessor.registerOnChange(t=>{n._pendingValue=t,n._pendingChange=!0,n._pendingDirty=!0,"change"===n.updateOn&&Jy(n,e)})}(n,e),function FT(n,e){const t=(r,i)=>{e.valueAccessor.writeValue(r),i&&e.viewToModelUpdate(r)};n.registerOnChange(t),e._registerOnDestroy(()=>{n._unregisterOnChange(t)})}(n,e),function sl(n,e){e.valueAccessor.registerOnTouched(()=>{n._pendingTouched=!0,"blur"===n.updateOn&&n._pendingChange&&Jy(n,e),"submit"!==n.updateOn&&n.markAsTouched()})}(n,e),function Qy(n,e){if(e.valueAccessor.setDisabledState){const t=r=>{e.valueAccessor.setDisabledState(r)};n.registerOnDisabledChange(t),e._registerOnDestroy(()=>{n._unregisterOnDisabledChange(t)})}}(n,e)}function Zg(n,e,t=!0){const r=()=>{};e.valueAccessor&&(e.valueAccessor.registerOnChange(r),e.valueAccessor.registerOnTouched(r)),Gd(n,e),n&&(e._invokeOnDestroyCallbacks(),n._registerOnCollectionChange(()=>{}))}function Bf(n,e){n.forEach(t=>{t.registerOnValidatorChange&&t.registerOnValidatorChange(e)})}function Yg(n,e){const t=zy(n);null!==e.validator?n.setValidators(RT(t,e.validator)):"function"==typeof t&&n.setValidators([t]);const r=MT(n);null!==e.asyncValidator?n.setAsyncValidators(RT(r,e.asyncValidator)):"function"==typeof r&&n.setAsyncValidators([r]);const i=()=>n.updateValueAndValidity();Bf(e._rawValidators,i),Bf(e._rawAsyncValidators,i)}function Gd(n,e){let t=!1;if(null!==n){if(null!==e.validator){const i=zy(n);if(Array.isArray(i)&&i.length>0){const a=i.filter(l=>l!==e.validator);a.length!==i.length&&(t=!0,n.setValidators(a))}}if(null!==e.asyncValidator){const i=MT(n);if(Array.isArray(i)&&i.length>0){const a=i.filter(l=>l!==e.asyncValidator);a.length!==i.length&&(t=!0,n.setAsyncValidators(a))}}}const r=()=>{};return Bf(e._rawValidators,r),Bf(e._rawAsyncValidators,r),t}function Jy(n,e){n._pendingDirty&&n.markAsDirty(),n.setValue(n._pendingValue,{emitModelToViewChange:!1}),e.viewToModelUpdate(n._pendingValue),n._pendingChange=!1}function al(n,e){const t=n.indexOf(e);t>-1&&n.splice(t,1)}const Wd="VALID",qd="INVALID",ul="PENDING",zd="DISABLED";function ev(n){return(jf(n)?n.validators:n)||null}function tv(n){return Array.isArray(n)?Vf(n):n||null}function iC(n,e){return(jf(e)?e.asyncValidators:n)||null}function nv(n){return Array.isArray(n)?Uf(n):n||null}function jf(n){return null!=n&&!Array.isArray(n)&&"object"==typeof n}const rv=n=>n instanceof uC,Hf=n=>n instanceof sv,sC=n=>n instanceof ov;function oC(n){return rv(n)?n.value:n.getRawValue()}function os(n,e){const t=Hf(n),r=n.controls;if(!(t?Object.keys(r):r).length)throw new m.vHH(1e3,"");if(!r[e])throw new m.vHH(1001,"")}function aC(n,e){Hf(n),n._forEachChild((r,i)=>{if(void 0===e[i])throw new m.vHH(1002,"")})}class iv{constructor(e,t){this._pendingDirty=!1,this._hasOwnPendingAsyncValidator=!1,this._pendingTouched=!1,this._onCollectionChange=()=>{},this._parent=null,this.pristine=!0,this.touched=!1,this._onDisabledChange=[],this._rawValidators=e,this._rawAsyncValidators=t,this._composedValidatorFn=tv(this._rawValidators),this._composedAsyncValidatorFn=nv(this._rawAsyncValidators)}get validator(){return this._composedValidatorFn}set validator(e){this._rawValidators=this._composedValidatorFn=e}get asyncValidator(){return this._composedAsyncValidatorFn}set asyncValidator(e){this._rawAsyncValidators=this._composedAsyncValidatorFn=e}get parent(){return this._parent}get valid(){return this.status===Wd}get invalid(){return this.status===qd}get pending(){return this.status==ul}get disabled(){return this.status===zd}get enabled(){return this.status!==zd}get dirty(){return!this.pristine}get untouched(){return!this.touched}get updateOn(){return this._updateOn?this._updateOn:this.parent?this.parent.updateOn:"change"}setValidators(e){this._rawValidators=e,this._composedValidatorFn=tv(e)}setAsyncValidators(e){this._rawAsyncValidators=e,this._composedAsyncValidatorFn=nv(e)}addValidators(e){this.setValidators(Wg(e,this._rawValidators))}addAsyncValidators(e){this.setAsyncValidators(Wg(e,this._rawAsyncValidators))}removeValidators(e){this.setValidators(qg(e,this._rawValidators))}removeAsyncValidators(e){this.setAsyncValidators(qg(e,this._rawAsyncValidators))}hasValidator(e){return Ec(this._rawValidators,e)}hasAsyncValidator(e){return Ec(this._rawAsyncValidators,e)}clearValidators(){this.validator=null}clearAsyncValidators(){this.asyncValidator=null}markAsTouched(e={}){this.touched=!0,this._parent&&!e.onlySelf&&this._parent.markAsTouched(e)}markAllAsTouched(){this.markAsTouched({onlySelf:!0}),this._forEachChild(e=>e.markAllAsTouched())}markAsUntouched(e={}){this.touched=!1,this._pendingTouched=!1,this._forEachChild(t=>{t.markAsUntouched({onlySelf:!0})}),this._parent&&!e.onlySelf&&this._parent._updateTouched(e)}markAsDirty(e={}){this.pristine=!1,this._parent&&!e.onlySelf&&this._parent.markAsDirty(e)}markAsPristine(e={}){this.pristine=!0,this._pendingDirty=!1,this._forEachChild(t=>{t.markAsPristine({onlySelf:!0})}),this._parent&&!e.onlySelf&&this._parent._updatePristine(e)}markAsPending(e={}){this.status=ul,!1!==e.emitEvent&&this.statusChanges.emit(this.status),this._parent&&!e.onlySelf&&this._parent.markAsPending(e)}disable(e={}){const t=this._parentMarkedDirty(e.onlySelf);this.status=zd,this.errors=null,this._forEachChild(r=>{r.disable(Object.assign(Object.assign({},e),{onlySelf:!0}))}),this._updateValue(),!1!==e.emitEvent&&(this.valueChanges.emit(this.value),this.statusChanges.emit(this.status)),this._updateAncestors(Object.assign(Object.assign({},e),{skipPristineCheck:t})),this._onDisabledChange.forEach(r=>r(!0))}enable(e={}){const t=this._parentMarkedDirty(e.onlySelf);this.status=Wd,this._forEachChild(r=>{r.enable(Object.assign(Object.assign({},e),{onlySelf:!0}))}),this.updateValueAndValidity({onlySelf:!0,emitEvent:e.emitEvent}),this._updateAncestors(Object.assign(Object.assign({},e),{skipPristineCheck:t})),this._onDisabledChange.forEach(r=>r(!1))}_updateAncestors(e){this._parent&&!e.onlySelf&&(this._parent.updateValueAndValidity(e),e.skipPristineCheck||this._parent._updatePristine(),this._parent._updateTouched())}setParent(e){this._parent=e}updateValueAndValidity(e={}){this._setInitialStatus(),this._updateValue(),this.enabled&&(this._cancelExistingSubscription(),this.errors=this._runValidator(),this.status=this._calculateStatus(),(this.status===Wd||this.status===ul)&&this._runAsyncValidator(e.emitEvent)),!1!==e.emitEvent&&(this.valueChanges.emit(this.value),this.statusChanges.emit(this.status)),this._parent&&!e.onlySelf&&this._parent.updateValueAndValidity(e)}_updateTreeValidity(e={emitEvent:!0}){this._forEachChild(t=>t._updateTreeValidity(e)),this.updateValueAndValidity({onlySelf:!0,emitEvent:e.emitEvent})}_setInitialStatus(){this.status=this._allControlsDisabled()?zd:Wd}_runValidator(){return this.validator?this.validator(this):null}_runAsyncValidator(e){if(this.asyncValidator){this.status=ul,this._hasOwnPendingAsyncValidator=!0;const t=Lf(this.asyncValidator(this));this._asyncValidationSubscription=t.subscribe(r=>{this._hasOwnPendingAsyncValidator=!1,this.setErrors(r,{emitEvent:e})})}}_cancelExistingSubscription(){this._asyncValidationSubscription&&(this._asyncValidationSubscription.unsubscribe(),this._hasOwnPendingAsyncValidator=!1)}setErrors(e,t={}){this.errors=e,this._updateControlsErrors(!1!==t.emitEvent)}get(e){return function em(n,e,t){if(null==e||(Array.isArray(e)||(e=e.split(t)),Array.isArray(e)&&0===e.length))return null;let r=n;return e.forEach(i=>{r=Hf(r)?r.controls.hasOwnProperty(i)?r.controls[i]:null:sC(r)&&r.at(i)||null}),r}(this,e,".")}getError(e,t){const r=t?this.get(t):this;return r&&r.errors?r.errors[e]:null}hasError(e,t){return!!this.getError(e,t)}get root(){let e=this;for(;e._parent;)e=e._parent;return e}_updateControlsErrors(e){this.status=this._calculateStatus(),e&&this.statusChanges.emit(this.status),this._parent&&this._parent._updateControlsErrors(e)}_initObservables(){this.valueChanges=new m.vpe,this.statusChanges=new m.vpe}_calculateStatus(){return this._allControlsDisabled()?zd:this.errors?qd:this._hasOwnPendingAsyncValidator||this._anyControlsHaveStatus(ul)?ul:this._anyControlsHaveStatus(qd)?qd:Wd}_anyControlsHaveStatus(e){return this._anyControls(t=>t.status===e)}_anyControlsDirty(){return this._anyControls(e=>e.dirty)}_anyControlsTouched(){return this._anyControls(e=>e.touched)}_updatePristine(e={}){this.pristine=!this._anyControlsDirty(),this._parent&&!e.onlySelf&&this._parent._updatePristine(e)}_updateTouched(e={}){this.touched=this._anyControlsTouched(),this._parent&&!e.onlySelf&&this._parent._updateTouched(e)}_isBoxedValue(e){return"object"==typeof e&&null!==e&&2===Object.keys(e).length&&"value"in e&&"disabled"in e}_registerOnCollectionChange(e){this._onCollectionChange=e}_setUpdateStrategy(e){jf(e)&&null!=e.updateOn&&(this._updateOn=e.updateOn)}_parentMarkedDirty(e){return!e&&!(!this._parent||!this._parent.dirty)&&!this._parent._anyControlsDirty()}}class uC extends iv{constructor(e=null,t,r){super(ev(t),iC(r,t)),this.defaultValue=null,this._onChange=[],this._pendingChange=!1,this._applyFormState(e),this._setUpdateStrategy(t),this._initObservables(),this.updateValueAndValidity({onlySelf:!0,emitEvent:!!this.asyncValidator}),jf(t)&&t.initialValueIsDefault&&(this.defaultValue=this._isBoxedValue(e)?e.value:e)}setValue(e,t={}){this.value=this._pendingValue=e,this._onChange.length&&!1!==t.emitModelToViewChange&&this._onChange.forEach(r=>r(this.value,!1!==t.emitViewToModelChange)),this.updateValueAndValidity(t)}patchValue(e,t={}){this.setValue(e,t)}reset(e=this.defaultValue,t={}){this._applyFormState(e),this.markAsPristine(t),this.markAsUntouched(t),this.setValue(this.value,t),this._pendingChange=!1}_updateValue(){}_anyControls(e){return!1}_allControlsDisabled(){return this.disabled}registerOnChange(e){this._onChange.push(e)}_unregisterOnChange(e){al(this._onChange,e)}registerOnDisabledChange(e){this._onDisabledChange.push(e)}_unregisterOnDisabledChange(e){al(this._onDisabledChange,e)}_forEachChild(e){}_syncPendingControls(){return!("submit"!==this.updateOn||(this._pendingDirty&&this.markAsDirty(),this._pendingTouched&&this.markAsTouched(),!this._pendingChange)||(this.setValue(this._pendingValue,{onlySelf:!0,emitModelToViewChange:!1}),0))}_applyFormState(e){this._isBoxedValue(e)?(this.value=this._pendingValue=e.value,e.disabled?this.disable({onlySelf:!0,emitEvent:!1}):this.enable({onlySelf:!0,emitEvent:!1})):this.value=this._pendingValue=e}}class sv extends iv{constructor(e,t,r){super(ev(t),iC(r,t)),this.controls=e,this._initObservables(),this._setUpdateStrategy(t),this._setUpControls(),this.updateValueAndValidity({onlySelf:!0,emitEvent:!!this.asyncValidator})}registerControl(e,t){return this.controls[e]?this.controls[e]:(this.controls[e]=t,t.setParent(this),t._registerOnCollectionChange(this._onCollectionChange),t)}addControl(e,t,r={}){this.registerControl(e,t),this.updateValueAndValidity({emitEvent:r.emitEvent}),this._onCollectionChange()}removeControl(e,t={}){this.controls[e]&&this.controls[e]._registerOnCollectionChange(()=>{}),delete this.controls[e],this.updateValueAndValidity({emitEvent:t.emitEvent}),this._onCollectionChange()}setControl(e,t,r={}){this.controls[e]&&this.controls[e]._registerOnCollectionChange(()=>{}),delete this.controls[e],t&&this.registerControl(e,t),this.updateValueAndValidity({emitEvent:r.emitEvent}),this._onCollectionChange()}contains(e){return this.controls.hasOwnProperty(e)&&this.controls[e].enabled}setValue(e,t={}){aC(this,e),Object.keys(e).forEach(r=>{os(this,r),this.controls[r].setValue(e[r],{onlySelf:!0,emitEvent:t.emitEvent})}),this.updateValueAndValidity(t)}patchValue(e,t={}){null!=e&&(Object.keys(e).forEach(r=>{this.controls[r]&&this.controls[r].patchValue(e[r],{onlySelf:!0,emitEvent:t.emitEvent})}),this.updateValueAndValidity(t))}reset(e={},t={}){this._forEachChild((r,i)=>{r.reset(e[i],{onlySelf:!0,emitEvent:t.emitEvent})}),this._updatePristine(t),this._updateTouched(t),this.updateValueAndValidity(t)}getRawValue(){return this._reduceChildren({},(e,t,r)=>(e[r]=oC(t),e))}_syncPendingControls(){let e=this._reduceChildren(!1,(t,r)=>!!r._syncPendingControls()||t);return e&&this.updateValueAndValidity({onlySelf:!0}),e}_forEachChild(e){Object.keys(this.controls).forEach(t=>{const r=this.controls[t];r&&e(r,t)})}_setUpControls(){this._forEachChild(e=>{e.setParent(this),e._registerOnCollectionChange(this._onCollectionChange)})}_updateValue(){this.value=this._reduceValue()}_anyControls(e){for(const t of Object.keys(this.controls)){const r=this.controls[t];if(this.contains(t)&&e(r))return!0}return!1}_reduceValue(){return this._reduceChildren({},(e,t,r)=>((t.enabled||this.disabled)&&(e[r]=t.value),e))}_reduceChildren(e,t){let r=e;return this._forEachChild((i,a)=>{r=t(r,i,a)}),r}_allControlsDisabled(){for(const e of Object.keys(this.controls))if(this.controls[e].enabled)return!1;return Object.keys(this.controls).length>0||this.disabled}}class ov extends iv{constructor(e,t,r){super(ev(t),iC(r,t)),this.controls=e,this._initObservables(),this._setUpdateStrategy(t),this._setUpControls(),this.updateValueAndValidity({onlySelf:!0,emitEvent:!!this.asyncValidator})}at(e){return this.controls[e]}push(e,t={}){this.controls.push(e),this._registerControl(e),this.updateValueAndValidity({emitEvent:t.emitEvent}),this._onCollectionChange()}insert(e,t,r={}){this.controls.splice(e,0,t),this._registerControl(t),this.updateValueAndValidity({emitEvent:r.emitEvent})}removeAt(e,t={}){this.controls[e]&&this.controls[e]._registerOnCollectionChange(()=>{}),this.controls.splice(e,1),this.updateValueAndValidity({emitEvent:t.emitEvent})}setControl(e,t,r={}){this.controls[e]&&this.controls[e]._registerOnCollectionChange(()=>{}),this.controls.splice(e,1),t&&(this.controls.splice(e,0,t),this._registerControl(t)),this.updateValueAndValidity({emitEvent:r.emitEvent}),this._onCollectionChange()}get length(){return this.controls.length}setValue(e,t={}){aC(this,e),e.forEach((r,i)=>{os(this,i),this.at(i).setValue(r,{onlySelf:!0,emitEvent:t.emitEvent})}),this.updateValueAndValidity(t)}patchValue(e,t={}){null!=e&&(e.forEach((r,i)=>{this.at(i)&&this.at(i).patchValue(r,{onlySelf:!0,emitEvent:t.emitEvent})}),this.updateValueAndValidity(t))}reset(e=[],t={}){this._forEachChild((r,i)=>{r.reset(e[i],{onlySelf:!0,emitEvent:t.emitEvent})}),this._updatePristine(t),this._updateTouched(t),this.updateValueAndValidity(t)}getRawValue(){return this.controls.map(e=>oC(e))}clear(e={}){this.controls.length<1||(this._forEachChild(t=>t._registerOnCollectionChange(()=>{})),this.controls.splice(0),this.updateValueAndValidity({emitEvent:e.emitEvent}))}_syncPendingControls(){let e=this.controls.reduce((t,r)=>!!r._syncPendingControls()||t,!1);return e&&this.updateValueAndValidity({onlySelf:!0}),e}_forEachChild(e){this.controls.forEach((t,r)=>{e(t,r)})}_updateValue(){this.value=this.controls.filter(e=>e.enabled||this.disabled).map(e=>e.value)}_anyControls(e){return this.controls.some(t=>t.enabled&&e(t))}_setUpControls(){this._forEachChild(e=>this._registerControl(e))}_allControlsDisabled(){for(const e of this.controls)if(e.enabled)return!1;return this.controls.length>0||this.disabled}_registerControl(e){e.setParent(this),e._registerOnCollectionChange(this._onCollectionChange)}}let cv=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275dir=m.lG2({type:n,selectors:[["form",3,"ngNoForm","",3,"ngNativeValidate",""]],hostAttrs:["novalidate",""]}),n})(),cC=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=m.oAB({type:n}),n.\u0275inj=m.cJS({}),n})();const fv=new m.OlP("NgModelWithFormControlWarning"),WT={provide:Vi,useExisting:(0,m.Gpc)(()=>Tc)};let Tc=(()=>{class n extends Vi{constructor(t,r){super(),this.validators=t,this.asyncValidators=r,this.submitted=!1,this._onCollectionChange=()=>this._updateDomValue(),this.directives=[],this.form=null,this.ngSubmit=new m.vpe,this._setValidators(t),this._setAsyncValidators(r)}ngOnChanges(t){this._checkFormPresent(),t.hasOwnProperty("form")&&(this._updateValidators(),this._updateDomValue(),this._updateRegistrations(),this._oldForm=this.form)}ngOnDestroy(){this.form&&(Gd(this.form,this),this.form._onCollectionChange===this._onCollectionChange&&this.form._registerOnCollectionChange(()=>{}))}get formDirective(){return this}get control(){return this.form}get path(){return[]}addControl(t){const r=this.form.get(t.path);return Ic(r,t),r.updateValueAndValidity({emitEvent:!1}),this.directives.push(t),r}getControl(t){return this.form.get(t.path)}removeControl(t){Zg(t.control||null,t,!1),al(this.directives,t)}addFormGroup(t){this._setUpFormContainer(t)}removeFormGroup(t){this._cleanUpFormContainer(t)}getFormGroup(t){return this.form.get(t.path)}addFormArray(t){this._setUpFormContainer(t)}removeFormArray(t){this._cleanUpFormContainer(t)}getFormArray(t){return this.form.get(t.path)}updateModel(t,r){this.form.get(t.path).setValue(r)}onSubmit(t){return this.submitted=!0,function bc(n,e){n._syncPendingControls(),e.forEach(t=>{const r=t.control;"submit"===r.updateOn&&r._pendingChange&&(t.viewToModelUpdate(r._pendingValue),r._pendingChange=!1)})}(this.form,this.directives),this.ngSubmit.emit(t),!1}onReset(){this.resetForm()}resetForm(t){this.form.reset(t),this.submitted=!1}_updateDomValue(){this.directives.forEach(t=>{const r=t.control,i=this.form.get(t.path);r!==i&&(Zg(r||null,t),rv(i)&&(Ic(i,t),t.control=i))}),this.form._updateTreeValidity({emitEvent:!1})}_setUpFormContainer(t){const r=this.form.get(t.path);(function Qg(n,e){Yg(n,e)})(r,t),r.updateValueAndValidity({emitEvent:!1})}_cleanUpFormContainer(t){if(this.form){const r=this.form.get(t.path);r&&function LT(n,e){return Gd(n,e)}(r,t)&&r.updateValueAndValidity({emitEvent:!1})}}_updateRegistrations(){this.form._registerOnCollectionChange(this._onCollectionChange),this._oldForm&&this._oldForm._registerOnCollectionChange(()=>{})}_updateValidators(){Yg(this.form,this),this._oldForm&&Gd(this._oldForm,this)}_checkFormPresent(){}}return n.\u0275fac=function(t){return new(t||n)(m.Y36(pi,10),m.Y36(hu,10))},n.\u0275dir=m.lG2({type:n,selectors:[["","formGroup",""]],hostBindings:function(t,r){1&t&&m.NdJ("submit",function(a){return r.onSubmit(a)})("reset",function(){return r.onReset()})},inputs:{form:["formGroup","form"]},outputs:{ngSubmit:"ngSubmit"},exportAs:["ngForm"],features:[m._Bn([WT]),m.qOj,m.TTD]}),n})();const qT={provide:Cc,useExisting:(0,m.Gpc)(()=>vv)};let vv=(()=>{class n extends Cc{constructor(t,r,i,a,l){super(),this._ngModelWarningConfig=l,this._added=!1,this.update=new m.vpe,this._ngModelWarningSent=!1,this._parent=t,this._setValidators(r),this._setAsyncValidators(i),this.valueAccessor=function Dc(n,e){if(!e)return null;let t,r,i;return Array.isArray(e),e.forEach(a=>{a.constructor===Hg?t=a:function Xy(n){return Object.getPrototypeOf(n.constructor)===rl}(a)?r=a:i=a}),i||r||t||null}(0,a)}set isDisabled(t){}ngOnChanges(t){this._added||this._setUpControl(),function ol(n,e){if(!n.hasOwnProperty("model"))return!1;const t=n.model;return!!t.isFirstChange()||!Object.is(e,t.currentValue)}(t,this.viewModel)&&(this.viewModel=this.model,this.formDirective.updateModel(this,this.model))}ngOnDestroy(){this.formDirective&&this.formDirective.removeControl(this)}viewToModelUpdate(t){this.viewModel=t,this.update.emit(t)}get path(){return function Xo(n,e){return[...e.path,n]}(null==this.name?this.name:this.name.toString(),this._parent)}get formDirective(){return this._parent?this._parent.formDirective:null}_checkParentType(){}_setUpControl(){this._checkParentType(),this.control=this.formDirective.addControl(this),this.control.disabled&&this.valueAccessor.setDisabledState&&this.valueAccessor.setDisabledState(!0),this._added=!0}}return n._ngModelWarningSentOnce=!1,n.\u0275fac=function(t){return new(t||n)(m.Y36(Vi,13),m.Y36(pi,10),m.Y36(hu,10),m.Y36(mo,10),m.Y36(fv,8))},n.\u0275dir=m.lG2({type:n,selectors:[["","formControlName",""]],inputs:{name:["formControlName","name"],isDisabled:["disabled","isDisabled"],model:["ngModel","model"]},outputs:{update:"ngModelChange"},features:[m._Bn([qT]),m.qOj,m.TTD]}),n})(),XT=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=m.oAB({type:n}),n.\u0275inj=m.cJS({imports:[[cC]]}),n})(),vo=(()=>{class n{static withConfig(t){return{ngModule:n,providers:[{provide:fv,useValue:t.warnOnNgModelWithFormControl}]}}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=m.oAB({type:n}),n.\u0275inj=m.cJS({imports:[XT]}),n})(),CC=(()=>{class n{group(t,r=null){const i=this._reduceControls(t);let h,a=null,l=null;return null!=r&&(function Tv(n){return void 0!==n.asyncValidators||void 0!==n.validators||void 0!==n.updateOn}(r)?(a=null!=r.validators?r.validators:null,l=null!=r.asyncValidators?r.asyncValidators:null,h=null!=r.updateOn?r.updateOn:void 0):(a=null!=r.validator?r.validator:null,l=null!=r.asyncValidator?r.asyncValidator:null)),new sv(i,{asyncValidators:l,updateOn:h,validators:a})}control(t,r,i){return new uC(t,r,i)}array(t,r,i){const a=t.map(l=>this._createControl(l));return new ov(a,r,i)}_reduceControls(t){const r={};return Object.keys(t).forEach(i=>{r[i]=this._createControl(t[i])}),r}_createControl(t){return rv(t)||Hf(t)||sC(t)?t:Array.isArray(t)?this.control(t[0],t.length>1?t[1]:null,t.length>2?t[2]:null):this.control(t)}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275prov=m.Yz7({token:n,factory:n.\u0275fac,providedIn:vo}),n})();class Sv{}class Av{}class ka{constructor(e){this.normalizedNames=new Map,this.lazyUpdate=null,e?this.lazyInit="string"==typeof e?()=>{this.headers=new Map,e.split("\n").forEach(t=>{const r=t.indexOf(":");if(r>0){const i=t.slice(0,r),a=i.toLowerCase(),l=t.slice(r+1).trim();this.maybeSetNormalizedName(i,a),this.headers.has(a)?this.headers.get(a).push(l):this.headers.set(a,[l])}})}:()=>{this.headers=new Map,Object.keys(e).forEach(t=>{let r=e[t];const i=t.toLowerCase();"string"==typeof r&&(r=[r]),r.length>0&&(this.headers.set(i,r),this.maybeSetNormalizedName(t,i))})}:this.headers=new Map}has(e){return this.init(),this.headers.has(e.toLowerCase())}get(e){this.init();const t=this.headers.get(e.toLowerCase());return t&&t.length>0?t[0]:null}keys(){return this.init(),Array.from(this.normalizedNames.values())}getAll(e){return this.init(),this.headers.get(e.toLowerCase())||null}append(e,t){return this.clone({name:e,value:t,op:"a"})}set(e,t){return this.clone({name:e,value:t,op:"s"})}delete(e,t){return this.clone({name:e,value:t,op:"d"})}maybeSetNormalizedName(e,t){this.normalizedNames.has(t)||this.normalizedNames.set(t,e)}init(){this.lazyInit&&(this.lazyInit instanceof ka?this.copyFrom(this.lazyInit):this.lazyInit(),this.lazyInit=null,this.lazyUpdate&&(this.lazyUpdate.forEach(e=>this.applyUpdate(e)),this.lazyUpdate=null))}copyFrom(e){e.init(),Array.from(e.headers.keys()).forEach(t=>{this.headers.set(t,e.headers.get(t)),this.normalizedNames.set(t,e.normalizedNames.get(t))})}clone(e){const t=new ka;return t.lazyInit=this.lazyInit&&this.lazyInit instanceof ka?this.lazyInit:this,t.lazyUpdate=(this.lazyUpdate||[]).concat([e]),t}applyUpdate(e){const t=e.name.toLowerCase();switch(e.op){case"a":case"s":let r=e.value;if("string"==typeof r&&(r=[r]),0===r.length)return;this.maybeSetNormalizedName(e.name,t);const i=("a"===e.op?this.headers.get(t):void 0)||[];i.push(...r),this.headers.set(t,i);break;case"d":const a=e.value;if(a){let l=this.headers.get(t);if(!l)return;l=l.filter(h=>-1===a.indexOf(h)),0===l.length?(this.headers.delete(t),this.normalizedNames.delete(t)):this.headers.set(t,l)}else this.headers.delete(t),this.normalizedNames.delete(t)}}forEach(e){this.init(),Array.from(this.normalizedNames.keys()).forEach(t=>e(this.normalizedNames.get(t),this.headers.get(t)))}}class tS{encodeKey(e){return iS(e)}encodeValue(e){return iS(e)}decodeKey(e){return decodeURIComponent(e)}decodeValue(e){return decodeURIComponent(e)}}const rS=/%(\d[a-f0-9])/gi,IC={40:"@","3A":":",24:"$","2C":",","3B":";","2B":"+","3D":"=","3F":"?","2F":"/"};function iS(n){return encodeURIComponent(n).replace(rS,(e,t)=>{var r;return null!==(r=IC[t])&&void 0!==r?r:e})}function xv(n){return`${n}`}class dl{constructor(e={}){if(this.updates=null,this.cloneFrom=null,this.encoder=e.encoder||new tS,e.fromString){if(e.fromObject)throw new Error("Cannot specify both fromString and fromObject.");this.map=function nS(n,e){const t=new Map;return n.length>0&&n.replace(/^\?/,"").split("&").forEach(i=>{const a=i.indexOf("="),[l,h]=-1==a?[e.decodeKey(i),""]:[e.decodeKey(i.slice(0,a)),e.decodeValue(i.slice(a+1))],_=t.get(l)||[];_.push(h),t.set(l,_)}),t}(e.fromString,this.encoder)}else e.fromObject?(this.map=new Map,Object.keys(e.fromObject).forEach(t=>{const r=e.fromObject[t];this.map.set(t,Array.isArray(r)?r:[r])})):this.map=null}has(e){return this.init(),this.map.has(e)}get(e){this.init();const t=this.map.get(e);return t?t[0]:null}getAll(e){return this.init(),this.map.get(e)||null}keys(){return this.init(),Array.from(this.map.keys())}append(e,t){return this.clone({param:e,value:t,op:"a"})}appendAll(e){const t=[];return Object.keys(e).forEach(r=>{const i=e[r];Array.isArray(i)?i.forEach(a=>{t.push({param:r,value:a,op:"a"})}):t.push({param:r,value:i,op:"a"})}),this.clone(t)}set(e,t){return this.clone({param:e,value:t,op:"s"})}delete(e,t){return this.clone({param:e,value:t,op:"d"})}toString(){return this.init(),this.keys().map(e=>{const t=this.encoder.encodeKey(e);return this.map.get(e).map(r=>t+"="+this.encoder.encodeValue(r)).join("&")}).filter(e=>""!==e).join("&")}clone(e){const t=new dl({encoder:this.encoder});return t.cloneFrom=this.cloneFrom||this,t.updates=(this.updates||[]).concat(e),t}init(){null===this.map&&(this.map=new Map),null!==this.cloneFrom&&(this.cloneFrom.init(),this.cloneFrom.keys().forEach(e=>this.map.set(e,this.cloneFrom.map.get(e))),this.updates.forEach(e=>{switch(e.op){case"a":case"s":const t=("a"===e.op?this.map.get(e.param):void 0)||[];t.push(xv(e.value)),this.map.set(e.param,t);break;case"d":if(void 0===e.value){this.map.delete(e.param);break}{let r=this.map.get(e.param)||[];const i=r.indexOf(xv(e.value));-1!==i&&r.splice(i,1),r.length>0?this.map.set(e.param,r):this.map.delete(e.param)}}}),this.cloneFrom=this.updates=null)}}class tP{constructor(){this.map=new Map}set(e,t){return this.map.set(e,t),this}get(e){return this.map.has(e)||this.map.set(e,e.defaultValue()),this.map.get(e)}delete(e){return this.map.delete(e),this}has(e){return this.map.has(e)}keys(){return this.map.keys()}}function sm(n){return"undefined"!=typeof ArrayBuffer&&n instanceof ArrayBuffer}function bC(n){return"undefined"!=typeof Blob&&n instanceof Blob}function Rv(n){return"undefined"!=typeof FormData&&n instanceof FormData}class om{constructor(e,t,r,i){let a;if(this.url=t,this.body=null,this.reportProgress=!1,this.withCredentials=!1,this.responseType="json",this.method=e.toUpperCase(),function nP(n){switch(n){case"DELETE":case"GET":case"HEAD":case"OPTIONS":case"JSONP":return!1;default:return!0}}(this.method)||i?(this.body=void 0!==r?r:null,a=i):a=r,a&&(this.reportProgress=!!a.reportProgress,this.withCredentials=!!a.withCredentials,a.responseType&&(this.responseType=a.responseType),a.headers&&(this.headers=a.headers),a.context&&(this.context=a.context),a.params&&(this.params=a.params)),this.headers||(this.headers=new ka),this.context||(this.context=new tP),this.params){const l=this.params.toString();if(0===l.length)this.urlWithParams=t;else{const h=t.indexOf("?");this.urlWithParams=t+(-1===h?"?":h<t.length-1?"&":"")+l}}else this.params=new dl,this.urlWithParams=t}serializeBody(){return null===this.body?null:sm(this.body)||bC(this.body)||Rv(this.body)||function DC(n){return"undefined"!=typeof URLSearchParams&&n instanceof URLSearchParams}(this.body)||"string"==typeof this.body?this.body:this.body instanceof dl?this.body.toString():"object"==typeof this.body||"boolean"==typeof this.body||Array.isArray(this.body)?JSON.stringify(this.body):this.body.toString()}detectContentTypeHeader(){return null===this.body||Rv(this.body)?null:bC(this.body)?this.body.type||null:sm(this.body)?null:"string"==typeof this.body?"text/plain":this.body instanceof dl?"application/x-www-form-urlencoded;charset=UTF-8":"object"==typeof this.body||"number"==typeof this.body||"boolean"==typeof this.body?"application/json":null}clone(e={}){var t;const r=e.method||this.method,i=e.url||this.url,a=e.responseType||this.responseType,l=void 0!==e.body?e.body:this.body,h=void 0!==e.withCredentials?e.withCredentials:this.withCredentials,_=void 0!==e.reportProgress?e.reportProgress:this.reportProgress;let w=e.headers||this.headers,D=e.params||this.params;const S=null!==(t=e.context)&&void 0!==t?t:this.context;return void 0!==e.setHeaders&&(w=Object.keys(e.setHeaders).reduce((N,L)=>N.set(L,e.setHeaders[L]),w)),e.setParams&&(D=Object.keys(e.setParams).reduce((N,L)=>N.set(L,e.setParams[L]),D)),new om(r,i,l,{params:D,headers:w,context:S,reportProgress:_,responseType:a,withCredentials:h})}}var _n=(()=>((_n=_n||{})[_n.Sent=0]="Sent",_n[_n.UploadProgress=1]="UploadProgress",_n[_n.ResponseHeader=2]="ResponseHeader",_n[_n.DownloadProgress=3]="DownloadProgress",_n[_n.Response=4]="Response",_n[_n.User=5]="User",_n))();class TC{constructor(e,t=200,r="OK"){this.headers=e.headers||new ka,this.status=void 0!==e.status?e.status:t,this.statusText=e.statusText||r,this.url=e.url||null,this.ok=this.status>=200&&this.status<300}}class SC extends TC{constructor(e={}){super(e),this.type=_n.ResponseHeader}clone(e={}){return new SC({headers:e.headers||this.headers,status:void 0!==e.status?e.status:this.status,statusText:e.statusText||this.statusText,url:e.url||this.url||void 0})}}class zf extends TC{constructor(e={}){super(e),this.type=_n.Response,this.body=void 0!==e.body?e.body:null}clone(e={}){return new zf({body:void 0!==e.body?e.body:this.body,headers:e.headers||this.headers,status:void 0!==e.status?e.status:this.status,statusText:e.statusText||this.statusText,url:e.url||this.url||void 0})}}class Mv extends TC{constructor(e){super(e,0,"Unknown Error"),this.name="HttpErrorResponse",this.ok=!1,this.message=this.status>=200&&this.status<300?`Http failure during parsing for ${e.url||"(unknown url)"}`:`Http failure response for ${e.url||"(unknown url)"}: ${e.status} ${e.statusText}`,this.error=e.error||null}}function am(n,e){return{body:e,headers:n.headers,context:n.context,observe:n.observe,params:n.params,reportProgress:n.reportProgress,responseType:n.responseType,withCredentials:n.withCredentials}}let Nv=(()=>{class n{constructor(t){this.handler=t}request(t,r,i={}){let a;if(t instanceof om)a=t;else{let _,w;_=i.headers instanceof ka?i.headers:new ka(i.headers),i.params&&(w=i.params instanceof dl?i.params:new dl({fromObject:i.params})),a=new om(t,r,void 0!==i.body?i.body:null,{headers:_,context:i.context,params:w,reportProgress:i.reportProgress,responseType:i.responseType||"json",withCredentials:i.withCredentials})}const l=ct(a).pipe(Ss(_=>this.handler.handle(_)));if(t instanceof om||"events"===i.observe)return l;const h=l.pipe(Xi(_=>_ instanceof zf));switch(i.observe||"body"){case"body":switch(a.responseType){case"arraybuffer":return h.pipe((0,yt.U)(_=>{if(null!==_.body&&!(_.body instanceof ArrayBuffer))throw new Error("Response is not an ArrayBuffer.");return _.body}));case"blob":return h.pipe((0,yt.U)(_=>{if(null!==_.body&&!(_.body instanceof Blob))throw new Error("Response is not a Blob.");return _.body}));case"text":return h.pipe((0,yt.U)(_=>{if(null!==_.body&&"string"!=typeof _.body)throw new Error("Response is not a string.");return _.body}));default:return h.pipe((0,yt.U)(_=>_.body))}case"response":return h;default:throw new Error(`Unreachable: unhandled observe type ${i.observe}}`)}}delete(t,r={}){return this.request("DELETE",t,r)}get(t,r={}){return this.request("GET",t,r)}head(t,r={}){return this.request("HEAD",t,r)}jsonp(t,r){return this.request("JSONP",t,{params:(new dl).append(r,"JSONP_CALLBACK"),observe:"body",responseType:"json"})}options(t,r={}){return this.request("OPTIONS",t,r)}patch(t,r,i={}){return this.request("PATCH",t,am(i,r))}post(t,r,i={}){return this.request("POST",t,am(i,r))}put(t,r,i={}){return this.request("PUT",t,am(i,r))}}return n.\u0275fac=function(t){return new(t||n)(m.LFG(Sv))},n.\u0275prov=m.Yz7({token:n,factory:n.\u0275fac}),n})();class sS{constructor(e,t){this.next=e,this.interceptor=t}handle(e){return this.interceptor.intercept(e,this.next)}}const Pv=new m.OlP("HTTP_INTERCEPTORS");let kv=(()=>{class n{intercept(t,r){return r.handle(t)}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275prov=m.Yz7({token:n,factory:n.\u0275fac}),n})();const um=/^\)\]\}',?\n/;let xC=(()=>{class n{constructor(t){this.xhrFactory=t}handle(t){if("JSONP"===t.method)throw new Error("Attempted to construct Jsonp request without HttpClientJsonpModule installed.");return new gr.y(r=>{const i=this.xhrFactory.build();if(i.open(t.method,t.urlWithParams),t.withCredentials&&(i.withCredentials=!0),t.headers.forEach((L,j)=>i.setRequestHeader(L,j.join(","))),t.headers.has("Accept")||i.setRequestHeader("Accept","application/json, text/plain, */*"),!t.headers.has("Content-Type")){const L=t.detectContentTypeHeader();null!==L&&i.setRequestHeader("Content-Type",L)}if(t.responseType){const L=t.responseType.toLowerCase();i.responseType="json"!==L?L:"text"}const a=t.serializeBody();let l=null;const h=()=>{if(null!==l)return l;const L=i.statusText||"OK",j=new ka(i.getAllResponseHeaders()),fe=function Qd(n){return"responseURL"in n&&n.responseURL?n.responseURL:/^X-Request-URL:/m.test(n.getAllResponseHeaders())?n.getResponseHeader("X-Request-URL"):null}(i)||t.url;return l=new SC({headers:j,status:i.status,statusText:L,url:fe}),l},_=()=>{let{headers:L,status:j,statusText:fe,url:Me}=h(),et=null;204!==j&&(et=void 0===i.response?i.responseText:i.response),0===j&&(j=et?200:0);let We=j>=200&&j<300;if("json"===t.responseType&&"string"==typeof et){const wt=et;et=et.replace(um,"");try{et=""!==et?JSON.parse(et):null}catch(tt){et=wt,We&&(We=!1,et={error:tt,text:et})}}We?(r.next(new zf({body:et,headers:L,status:j,statusText:fe,url:Me||void 0})),r.complete()):r.error(new Mv({error:et,headers:L,status:j,statusText:fe,url:Me||void 0}))},w=L=>{const{url:j}=h(),fe=new Mv({error:L,status:i.status||0,statusText:i.statusText||"Unknown Error",url:j||void 0});r.error(fe)};let D=!1;const S=L=>{D||(r.next(h()),D=!0);let j={type:_n.DownloadProgress,loaded:L.loaded};L.lengthComputable&&(j.total=L.total),"text"===t.responseType&&!!i.responseText&&(j.partialText=i.responseText),r.next(j)},N=L=>{let j={type:_n.UploadProgress,loaded:L.loaded};L.lengthComputable&&(j.total=L.total),r.next(j)};return i.addEventListener("load",_),i.addEventListener("error",w),i.addEventListener("timeout",w),i.addEventListener("abort",w),t.reportProgress&&(i.addEventListener("progress",S),null!==a&&i.upload&&i.upload.addEventListener("progress",N)),i.send(a),r.next({type:_n.Sent}),()=>{i.removeEventListener("error",w),i.removeEventListener("abort",w),i.removeEventListener("load",_),i.removeEventListener("timeout",w),t.reportProgress&&(i.removeEventListener("progress",S),null!==a&&i.upload&&i.upload.removeEventListener("progress",N)),i.readyState!==i.DONE&&i.abort()}})}}return n.\u0275fac=function(t){return new(t||n)(m.LFG(gn))},n.\u0275prov=m.Yz7({token:n,factory:n.\u0275fac}),n})();const Sc=new m.OlP("XSRF_COOKIE_NAME"),Ov=new m.OlP("XSRF_HEADER_NAME");class RC{}let Fv=(()=>{class n{constructor(t,r,i){this.doc=t,this.platform=r,this.cookieName=i,this.lastCookieString="",this.lastToken=null,this.parseCount=0}getToken(){if("server"===this.platform)return null;const t=this.doc.cookie||"";return t!==this.lastCookieString&&(this.parseCount++,this.lastToken=Po(t,this.cookieName),this.lastCookieString=t),this.lastToken}}return n.\u0275fac=function(t){return new(t||n)(m.LFG(se),m.LFG(m.Lbi),m.LFG(Sc))},n.\u0275prov=m.Yz7({token:n,factory:n.\u0275fac}),n})(),wo=(()=>{class n{constructor(t,r){this.tokenService=t,this.headerName=r}intercept(t,r){const i=t.url.toLowerCase();if("GET"===t.method||"HEAD"===t.method||i.startsWith("http://")||i.startsWith("https://"))return r.handle(t);const a=this.tokenService.getToken();return null!==a&&!t.headers.has(this.headerName)&&(t=t.clone({headers:t.headers.set(this.headerName,a)})),r.handle(t)}}return n.\u0275fac=function(t){return new(t||n)(m.LFG(RC),m.LFG(Ov))},n.\u0275prov=m.Yz7({token:n,factory:n.\u0275fac}),n})(),Kf=(()=>{class n{constructor(t,r){this.backend=t,this.injector=r,this.chain=null}handle(t){if(null===this.chain){const r=this.injector.get(Pv,[]);this.chain=r.reduceRight((i,a)=>new sS(i,a),this.backend)}return this.chain.handle(t)}}return n.\u0275fac=function(t){return new(t||n)(m.LFG(Av),m.LFG(m.zs3))},n.\u0275prov=m.Yz7({token:n,factory:n.\u0275fac}),n})(),lm=(()=>{class n{static disable(){return{ngModule:n,providers:[{provide:wo,useClass:kv}]}}static withOptions(t={}){return{ngModule:n,providers:[t.cookieName?{provide:Sc,useValue:t.cookieName}:[],t.headerName?{provide:Ov,useValue:t.headerName}:[]]}}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=m.oAB({type:n}),n.\u0275inj=m.cJS({providers:[wo,{provide:Pv,useExisting:wo,multi:!0},{provide:RC,useClass:Fv},{provide:Sc,useValue:"XSRF-TOKEN"},{provide:Ov,useValue:"X-XSRF-TOKEN"}]}),n})(),Eo=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=m.oAB({type:n}),n.\u0275inj=m.cJS({providers:[Nv,{provide:Sv,useClass:Kf},xC,{provide:Av,useExisting:xC}],imports:[[lm.withOptions({cookieName:"XSRF-TOKEN",headerName:"X-XSRF-TOKEN"})]]}),n})(),Xd=(()=>{class n{constructor(t){this.http=t,this.headers=new ka({"Content-Type":"application/json"})}shorten(t,r){let i="";return r&&(i=`&alias=${encodeURIComponent(r)}`),this.http.get("https://tinyurl.com/api-create.php?url="+encodeURIComponent(t)+i,{headers:this.headers,responseType:"text"}).pipe((0,yt.U)(a=>a.toString()))}}return n.\u0275fac=function(t){return new(t||n)(m.LFG(Nv))},n.\u0275prov=(0,m.Yz7)({factory:function(){return new n((0,m.LFG)(Nv))},token:n,providedIn:"root"}),n})(),eh=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=m.oAB({type:n}),n.\u0275inj=m.cJS({imports:[[Eo]]}),n})();var hl=F(4986),fl=F(6451),Ac=F(3099);function xc(n,e=Yr.y){return n=null!=n?n:th,(0,sr.e)((t,r)=>{let i,a=!0;t.subscribe((0,In.x)(r,l=>{const h=e(l);(a||!n(i,h))&&(a=!1,i=h,r.next(l))}))})}function th(n,e){return n===e}var nh=F(5032),tn=F(5813),_r=F(2011),cm=(F(4087),F(3942)),Co=F(4859),ye=F(5861),gi=F(9681),k=F(2090),Io=F(1877);const kC="@firebase/database";let dm="";function FC(n){dm=n}class aS{constructor(e){this.domStorage_=e,this.prefix_="firebase:"}set(e,t){null==t?this.domStorage_.removeItem(this.prefixedName_(e)):this.domStorage_.setItem(this.prefixedName_(e),(0,k.Pz)(t))}get(e){const t=this.domStorage_.getItem(this.prefixedName_(e));return null==t?null:(0,k.cI)(t)}remove(e){this.domStorage_.removeItem(this.prefixedName_(e))}prefixedName_(e){return this.prefix_+e}toString(){return this.domStorage_.toString()}}class LC{constructor(){this.cache_={},this.isInMemoryStorage=!0}set(e,t){null==t?delete this.cache_[e]:this.cache_[e]=t}get(e){return(0,k.r3)(this.cache_,e)?this.cache_[e]:null}remove(e){delete this.cache_[e]}}const VC=function(n){try{if("undefined"!=typeof window&&void 0!==window[n]){const e=window[n];return e.setItem("firebase:sentinel","cache"),e.removeItem("firebase:sentinel"),new aS(e)}}catch(e){}return new LC},pl=VC("localStorage"),Lv=VC("sessionStorage"),rh=new Io.Yd("@firebase/database"),uS=function(){let n=1;return function(){return n++}}(),UC=function(n){const e=(0,k.dS)(n),t=new k.gQ;t.update(e);const r=t.digest();return k.US.encodeByteArray(r)},Rc=function(...n){let e="";for(let t=0;t<n.length;t++){const r=n[t];Array.isArray(r)||r&&"object"==typeof r&&"number"==typeof r.length?e+=Rc.apply(null,r):e+="object"==typeof r?(0,k.Pz)(r):r,e+=" "}return e};let fu=null,BC=!0;const lS=function(n,e){(0,k.hu)(!e||!0===n||!1===n,"Can't turn on custom loggers persistently."),!0===n?(rh.logLevel=Io.in.VERBOSE,fu=rh.log.bind(rh),e&&Lv.set("logging_enabled",!0)):"function"==typeof n?fu=n:(fu=null,Lv.remove("logging_enabled"))},Jr=function(...n){if(!0===BC&&(BC=!1,null===fu&&!0===Lv.get("logging_enabled")&&lS(!0)),fu){const e=Rc.apply(null,n);fu(e)}},hm=function(n){return function(...e){Jr(n,...e)}},Vv=function(...n){const e="FIREBASE INTERNAL ERROR: "+Rc(...n);rh.error(e)},ta=function(...n){const e=`FIREBASE FATAL ERROR: ${Rc(...n)}`;throw rh.error(e),new Error(e)},as=function(...n){const e="FIREBASE WARNING: "+Rc(...n);rh.warn(e)},pu=function(n){return"number"==typeof n&&(n!=n||n===Number.POSITIVE_INFINITY||n===Number.NEGATIVE_INFINITY)},Oa="[MIN_NAME]",Fa="[MAX_NAME]",gl=function(n,e){if(n===e)return 0;if(n===Oa||e===Fa)return-1;if(e===Oa||n===Fa)return 1;{const t=ih(n),r=ih(e);return null!==t?null!==r?t-r==0?n.length-e.length:t-r:-1:null!==r?1:n<e?-1:1}},fm=function(n,e){return n===e?0:n<e?-1:1},Yf=function(n,e){if(e&&n in e)return e[n];throw new Error("Missing required key ("+n+") in object: "+(0,k.Pz)(e))},pm=function(n){if("object"!=typeof n||null===n)return(0,k.Pz)(n);const e=[];for(const r in n)e.push(r);e.sort();let t="{";for(let r=0;r<e.length;r++)0!==r&&(t+=","),t+=(0,k.Pz)(e[r]),t+=":",t+=pm(n[e[r]]);return t+="}",t},jC=function(n,e){const t=n.length;if(t<=e)return[n];const r=[];for(let i=0;i<t;i+=e)r.push(n.substring(i,i+e>t?t:i+e));return r};function Fr(n,e){for(const t in n)n.hasOwnProperty(t)&&e(t,n[t])}const HC=function(n){(0,k.hu)(!pu(n),"Invalid JSON number");const r=1023;let i,a,l,h,_;0===n?(a=0,l=0,i=1/n==-1/0?1:0):(i=n<0,(n=Math.abs(n))>=Math.pow(2,1-r)?(h=Math.min(Math.floor(Math.log(n)/Math.LN2),r),a=h+r,l=Math.round(n*Math.pow(2,52-h)-Math.pow(2,52))):(a=0,l=Math.round(n/Math.pow(2,-1074))));const w=[];for(_=52;_;_-=1)w.push(l%2?1:0),l=Math.floor(l/2);for(_=11;_;_-=1)w.push(a%2?1:0),a=Math.floor(a/2);w.push(i?1:0),w.reverse();const D=w.join("");let S="";for(_=0;_<64;_+=8){let N=parseInt(D.substr(_,8),2).toString(16);1===N.length&&(N="0"+N),S+=N}return S.toLowerCase()},pS=new RegExp("^-?(0*)\\d{1,10}$"),Uv=-2147483648,gm=2147483647,ih=function(n){if(pS.test(n)){const e=Number(n);if(e>=Uv&&e<=gm)return e}return null},Qf=function(n){try{n()}catch(e){setTimeout(()=>{throw as("Exception was thrown by user callback.",e.stack||""),e},Math.floor(0))}},Jf=function(n,e){const t=setTimeout(n,e);return"object"==typeof t&&t.unref&&t.unref(),t};class cP{constructor(e,t){this.appName_=e,this.appCheckProvider=t,this.appCheck=null==t?void 0:t.getImmediate({optional:!0}),this.appCheck||null==t||t.get().then(r=>this.appCheck=r)}getToken(e){return this.appCheck?this.appCheck.getToken(e):new Promise((t,r)=>{setTimeout(()=>{this.appCheck?this.getToken(e).then(t,r):t(null)},0)})}addTokenChangeListener(e){var t;null===(t=this.appCheckProvider)||void 0===t||t.get().then(r=>r.addTokenListener(e))}notifyForInvalidToken(){as(`Provided AppCheck credentials for the app named "${this.appName_}" are invalid. This usually indicates your app was not initialized correctly.`)}}class Xf{constructor(e,t,r){this.appName_=e,this.firebaseOptions_=t,this.authProvider_=r,this.auth_=null,this.auth_=r.getImmediate({optional:!0}),this.auth_||r.onInit(i=>this.auth_=i)}getToken(e){return this.auth_?this.auth_.getToken(e).catch(t=>t&&"auth/token-not-initialized"===t.code?(Jr("Got auth/token-not-initialized error.  Treating as null token."),null):Promise.reject(t)):new Promise((t,r)=>{setTimeout(()=>{this.auth_?this.getToken(e).then(t,r):t(null)},0)})}addTokenChangeListener(e){this.auth_?this.auth_.addAuthTokenListener(e):this.authProvider_.get().then(t=>t.addAuthTokenListener(e))}removeTokenChangeListener(e){this.authProvider_.get().then(t=>t.removeAuthTokenListener(e))}notifyForInvalidToken(){let e='Provided authentication credentials for the app named "'+this.appName_+'" are invalid. This usually indicates your app was not initialized correctly. ';e+="credential"in this.firebaseOptions_?'Make sure the "credential" property provided to initializeApp() is authorized to access the specified "databaseURL" and is from the correct project.':"serviceAccount"in this.firebaseOptions_?'Make sure the "serviceAccount" property provided to initializeApp() is authorized to access the specified "databaseURL" and is from the correct project.':'Make sure the "apiKey" and "databaseURL" properties provided to initializeApp() match the values provided for your app at https://console.firebase.google.com/.',as(e)}}let sh=(()=>{class n{constructor(t){this.accessToken=t}getToken(t){return Promise.resolve({accessToken:this.accessToken})}addTokenChangeListener(t){t(this.accessToken)}removeTokenChangeListener(t){}notifyForInvalidToken(){}}return n.OWNER="owner",n})();const _m=/(console\.firebase|firebase-console-\w+\.corp|firebase\.corp)\.google\.com/,ym="websocket",jv="long_polling";class vm{constructor(e,t,r,i,a=!1,l="",h=!1){this.secure=t,this.namespace=r,this.webSocketOnly=i,this.nodeAdmin=a,this.persistenceKey=l,this.includeNamespaceInQueryParams=h,this._host=e.toLowerCase(),this._domain=this._host.substr(this._host.indexOf(".")+1),this.internalHost=pl.get("host:"+e)||this._host}isCacheableHost(){return"s-"===this.internalHost.substr(0,2)}isCustomHost(){return"firebaseio.com"!==this._domain&&"firebaseio-demo.com"!==this._domain}get host(){return this._host}set host(e){e!==this.internalHost&&(this.internalHost=e,this.isCacheableHost()&&pl.set("host:"+this._host,this.internalHost))}toString(){let e=this.toURLString();return this.persistenceKey&&(e+="<"+this.persistenceKey+">"),e}toURLString(){return`${this.secure?"https://":"http://"}${this.host}/${this.includeNamespaceInQueryParams?`?ns=${this.namespace}`:""}`}}function $v(n,e,t){let r;if((0,k.hu)("string"==typeof e,"typeof type must == string"),(0,k.hu)("object"==typeof t,"typeof params must == object"),e===ym)r=(n.secure?"wss://":"ws://")+n.internalHost+"/.ws?";else{if(e!==jv)throw new Error("Unknown connection type: "+e);r=(n.secure?"https://":"http://")+n.internalHost+"/.lp?"}(function Hv(n){return n.host!==n.internalHost||n.isCustomHost()||n.includeNamespaceInQueryParams})(n)&&(t.ns=n.namespace);const i=[];return Fr(t,(a,l)=>{i.push(a+"="+l)}),r+i.join("&")}class WC{constructor(){this.counters_={}}incrementCounter(e,t=1){(0,k.r3)(this.counters_,e)||(this.counters_[e]=0),this.counters_[e]+=t}get(){return(0,k.p$)(this.counters_)}}const rp={},wm={};function Gv(n){const e=n.toString();return rp[e]||(rp[e]=new WC),rp[e]}class zC{constructor(e){this.onMessage_=e,this.pendingResponses=[],this.currentResponseNum=0,this.closeAfterResponse=-1,this.onClose=null}closeAfter(e,t){this.closeAfterResponse=e,this.onClose=t,this.closeAfterResponse<this.currentResponseNum&&(this.onClose(),this.onClose=null)}handleResponse(e,t){for(this.pendingResponses[e]=t;this.pendingResponses[this.currentResponseNum];){const r=this.pendingResponses[this.currentResponseNum];delete this.pendingResponses[this.currentResponseNum];for(let i=0;i<r.length;++i)r[i]&&Qf(()=>{this.onMessage_(r[i])});if(this.currentResponseNum===this.closeAfterResponse){this.onClose&&(this.onClose(),this.onClose=null);break}this.currentResponseNum++}}}class ah{constructor(e,t,r,i,a,l,h){this.connId=e,this.repoInfo=t,this.applicationId=r,this.appCheckToken=i,this.authToken=a,this.transportSessionId=l,this.lastSessionId=h,this.bytesSent=0,this.bytesReceived=0,this.everConnected_=!1,this.log_=hm(e),this.stats_=Gv(t),this.urlFn=_=>(this.appCheckToken&&(_.ac=this.appCheckToken),$v(t,jv,_))}open(e,t){this.curSegmentNum=0,this.onDisconnect_=t,this.myPacketOrderer=new zC(e),this.isClosed_=!1,this.connectTimeoutTimer_=setTimeout(()=>{this.log_("Timed out trying to connect."),this.onClosed_(),this.connectTimeoutTimer_=null},Math.floor(3e4)),function(n){if((0,k.Yr)()||"complete"===document.readyState)n();else{let e=!1;const t=function(){document.body?e||(e=!0,n()):setTimeout(t,Math.floor(10))};document.addEventListener?(document.addEventListener("DOMContentLoaded",t,!1),window.addEventListener("load",t,!1)):document.attachEvent&&(document.attachEvent("onreadystatechange",()=>{"complete"===document.readyState&&t()}),window.attachEvent("onload",t))}}(()=>{if(this.isClosed_)return;this.scriptTagHolder=new Im((...a)=>{const[l,h,_,w,D]=a;if(this.incrementIncomingBytes_(a),this.scriptTagHolder)if(this.connectTimeoutTimer_&&(clearTimeout(this.connectTimeoutTimer_),this.connectTimeoutTimer_=null),this.everConnected_=!0,"start"===l)this.id=h,this.password=_;else{if("close"!==l)throw new Error("Unrecognized command received: "+l);h?(this.scriptTagHolder.sendNewPolls=!1,this.myPacketOrderer.closeAfter(h,()=>{this.onClosed_()})):this.onClosed_()}},(...a)=>{const[l,h]=a;this.incrementIncomingBytes_(a),this.myPacketOrderer.handleResponse(l,h)},()=>{this.onClosed_()},this.urlFn);const r={start:"t"};r.ser=Math.floor(1e8*Math.random()),this.scriptTagHolder.uniqueCallbackIdentifier&&(r.cb=this.scriptTagHolder.uniqueCallbackIdentifier),r.v="5",this.transportSessionId&&(r.s=this.transportSessionId),this.lastSessionId&&(r.ls=this.lastSessionId),this.applicationId&&(r.p=this.applicationId),this.appCheckToken&&(r.ac=this.appCheckToken),"undefined"!=typeof location&&location.hostname&&_m.test(location.hostname)&&(r.r="f");const i=this.urlFn(r);this.log_("Connecting via long-poll to "+i),this.scriptTagHolder.addTag(i,()=>{})})}start(){this.scriptTagHolder.startLongPoll(this.id,this.password),this.addDisconnectPingFrame(this.id,this.password)}static forceAllow(){ah.forceAllow_=!0}static forceDisallow(){ah.forceDisallow_=!0}static isAvailable(){return!((0,k.Yr)()||!ah.forceAllow_&&(ah.forceDisallow_||"undefined"==typeof document||null==document.createElement||"object"==typeof window&&window.chrome&&window.chrome.extension&&!/^chrome/.test(window.location.href)||"object"==typeof Windows&&"object"==typeof Windows.UI))}markConnectionHealthy(){}shutdown_(){this.isClosed_=!0,this.scriptTagHolder&&(this.scriptTagHolder.close(),this.scriptTagHolder=null),this.myDisconnFrame&&(document.body.removeChild(this.myDisconnFrame),this.myDisconnFrame=null),this.connectTimeoutTimer_&&(clearTimeout(this.connectTimeoutTimer_),this.connectTimeoutTimer_=null)}onClosed_(){this.isClosed_||(this.log_("Longpoll is closing itself"),this.shutdown_(),this.onDisconnect_&&(this.onDisconnect_(this.everConnected_),this.onDisconnect_=null))}close(){this.isClosed_||(this.log_("Longpoll is being closed."),this.shutdown_())}send(e){const t=(0,k.Pz)(e);this.bytesSent+=t.length,this.stats_.incrementCounter("bytes_sent",t.length);const r=(0,k.h$)(t),i=jC(r,1840);for(let a=0;a<i.length;a++)this.scriptTagHolder.enqueueSegment(this.curSegmentNum,i.length,i[a]),this.curSegmentNum++}addDisconnectPingFrame(e,t){if((0,k.Yr)())return;this.myDisconnFrame=document.createElement("iframe");const r={dframe:"t"};r.id=e,r.pw=t,this.myDisconnFrame.src=this.urlFn(r),this.myDisconnFrame.style.display="none",document.body.appendChild(this.myDisconnFrame)}incrementIncomingBytes_(e){const t=(0,k.Pz)(e).length;this.bytesReceived+=t,this.stats_.incrementCounter("bytes_received",t)}}class Im{constructor(e,t,r,i){if(this.onDisconnect=r,this.urlFn=i,this.outstandingRequests=new Set,this.pendingSegs=[],this.currentSerial=Math.floor(1e8*Math.random()),this.sendNewPolls=!0,(0,k.Yr)())this.commandCB=e,this.onMessageCB=t;else{this.uniqueCallbackIdentifier=uS(),window["pLPCommand"+this.uniqueCallbackIdentifier]=e,window["pRTLPCB"+this.uniqueCallbackIdentifier]=t,this.myIFrame=Im.createIFrame_();let a="";this.myIFrame.src&&"javascript:"===this.myIFrame.src.substr(0,11)&&(a='<script>document.domain="'+document.domain+'";<\/script>');const l="<html><body>"+a+"</body></html>";try{this.myIFrame.doc.open(),this.myIFrame.doc.write(l),this.myIFrame.doc.close()}catch(h){Jr("frame writing exception"),h.stack&&Jr(h.stack),Jr(h)}}}static createIFrame_(){const e=document.createElement("iframe");if(e.style.display="none",!document.body)throw"Document body has not initialized. Wait to initialize Firebase until after the document is ready.";document.body.appendChild(e);try{e.contentWindow.document||Jr("No IE domain setting required")}catch(t){const r=document.domain;e.src="javascript:void((function(){document.open();document.domain='"+r+"';document.close();})())"}return e.contentDocument?e.doc=e.contentDocument:e.contentWindow?e.doc=e.contentWindow.document:e.document&&(e.doc=e.document),e}close(){this.alive=!1,this.myIFrame&&(this.myIFrame.doc.body.innerHTML="",setTimeout(()=>{null!==this.myIFrame&&(document.body.removeChild(this.myIFrame),this.myIFrame=null)},Math.floor(0)));const e=this.onDisconnect;e&&(this.onDisconnect=null,e())}startLongPoll(e,t){for(this.myID=e,this.myPW=t,this.alive=!0;this.newRequest_(););}newRequest_(){if(this.alive&&this.sendNewPolls&&this.outstandingRequests.size<(this.pendingSegs.length>0?2:1)){this.currentSerial++;const e={};e.id=this.myID,e.pw=this.myPW,e.ser=this.currentSerial;let t=this.urlFn(e),r="",i=0;for(;this.pendingSegs.length>0&&this.pendingSegs[0].d.length+30+r.length<=1870;){const l=this.pendingSegs.shift();r=r+"&seg"+i+"="+l.seg+"&ts"+i+"="+l.ts+"&d"+i+"="+l.d,i++}return t+=r,this.addLongPollTag_(t,this.currentSerial),!0}return!1}enqueueSegment(e,t,r){this.pendingSegs.push({seg:e,ts:t,d:r}),this.alive&&this.newRequest_()}addLongPollTag_(e,t){this.outstandingRequests.add(t);const r=()=>{this.outstandingRequests.delete(t),this.newRequest_()},i=setTimeout(r,Math.floor(25e3));this.addTag(e,()=>{clearTimeout(i),r()})}addTag(e,t){(0,k.Yr)()?this.doNodeLongPoll(e,t):setTimeout(()=>{try{if(!this.sendNewPolls)return;const r=this.myIFrame.doc.createElement("script");r.type="text/javascript",r.async=!0,r.src=e,r.onload=r.onreadystatechange=function(){const i=r.readyState;(!i||"loaded"===i||"complete"===i)&&(r.onload=r.onreadystatechange=null,r.parentNode&&r.parentNode.removeChild(r),t())},r.onerror=()=>{Jr("Long-poll script failed to load: "+e),this.sendNewPolls=!1,this.close()},this.myIFrame.doc.body.appendChild(r)}catch(r){}},Math.floor(1))}}let uh=null;"undefined"!=typeof MozWebSocket?uh=MozWebSocket:"undefined"!=typeof WebSocket&&(uh=WebSocket);let ip=(()=>{class n{constructor(t,r,i,a,l,h,_){this.connId=t,this.applicationId=i,this.appCheckToken=a,this.authToken=l,this.keepaliveTimer=null,this.frames=null,this.totalFrames=0,this.bytesSent=0,this.bytesReceived=0,this.log_=hm(this.connId),this.stats_=Gv(r),this.connURL=n.connectionURL_(r,h,_,a),this.nodeAdmin=r.nodeAdmin}static connectionURL_(t,r,i,a){const l={v:"5"};return!(0,k.Yr)()&&"undefined"!=typeof location&&location.hostname&&_m.test(location.hostname)&&(l.r="f"),r&&(l.s=r),i&&(l.ls=i),a&&(l.ac=a),$v(t,ym,l)}open(t,r){this.onDisconnect=r,this.onMessage=t,this.log_("Websocket connecting to "+this.connURL),this.everConnected_=!1,pl.set("previous_websocket_failure",!0);try{if((0,k.Yr)()){const a={headers:{"User-Agent":`Firebase/5/${dm}/${process.platform}/${this.nodeAdmin?"AdminNode":"Node"}`,"X-Firebase-GMPID":this.applicationId||""}};this.authToken&&(a.headers.Authorization=`Bearer ${this.authToken}`),this.appCheckToken&&(a.headers["X-Firebase-AppCheck"]=this.appCheckToken);const l=process.env,h=0===this.connURL.indexOf("wss://")?l.HTTPS_PROXY||l.https_proxy:l.HTTP_PROXY||l.http_proxy;h&&(a.proxy={origin:h}),this.mySock=new uh(this.connURL,[],a)}else this.mySock=new uh(this.connURL,[],{headers:{"X-Firebase-GMPID":this.applicationId||"","X-Firebase-AppCheck":this.appCheckToken||""}})}catch(i){this.log_("Error instantiating WebSocket.");const a=i.message||i.data;return a&&this.log_(a),void this.onClosed_()}this.mySock.onopen=()=>{this.log_("Websocket connected."),this.everConnected_=!0},this.mySock.onclose=()=>{this.log_("Websocket connection was disconnected."),this.mySock=null,this.onClosed_()},this.mySock.onmessage=i=>{this.handleIncomingFrame(i)},this.mySock.onerror=i=>{this.log_("WebSocket error.  Closing connection.");const a=i.message||i.data;a&&this.log_(a),this.onClosed_()}}start(){}static forceDisallow(){n.forceDisallow_=!0}static isAvailable(){let t=!1;if("undefined"!=typeof navigator&&navigator.userAgent){const i=navigator.userAgent.match(/Android ([0-9]{0,}\.[0-9]{0,})/);i&&i.length>1&&parseFloat(i[1])<4.4&&(t=!0)}return!t&&null!==uh&&!n.forceDisallow_}static previouslyFailed(){return pl.isInMemoryStorage||!0===pl.get("previous_websocket_failure")}markConnectionHealthy(){pl.remove("previous_websocket_failure")}appendFrame_(t){if(this.frames.push(t),this.frames.length===this.totalFrames){const r=this.frames.join("");this.frames=null;const i=(0,k.cI)(r);this.onMessage(i)}}handleNewFrameCount_(t){this.totalFrames=t,this.frames=[]}extractFrameCount_(t){if((0,k.hu)(null===this.frames,"We already have a frame buffer"),t.length<=6){const r=Number(t);if(!isNaN(r))return this.handleNewFrameCount_(r),null}return this.handleNewFrameCount_(1),t}handleIncomingFrame(t){if(null===this.mySock)return;const r=t.data;if(this.bytesReceived+=r.length,this.stats_.incrementCounter("bytes_received",r.length),this.resetKeepAlive(),null!==this.frames)this.appendFrame_(r);else{const i=this.extractFrameCount_(r);null!==i&&this.appendFrame_(i)}}send(t){this.resetKeepAlive();const r=(0,k.Pz)(t);this.bytesSent+=r.length,this.stats_.incrementCounter("bytes_sent",r.length);const i=jC(r,16384);i.length>1&&this.sendString_(String(i.length));for(let a=0;a<i.length;a++)this.sendString_(i[a])}shutdown_(){this.isClosed_=!0,this.keepaliveTimer&&(clearInterval(this.keepaliveTimer),this.keepaliveTimer=null),this.mySock&&(this.mySock.close(),this.mySock=null)}onClosed_(){this.isClosed_||(this.log_("WebSocket is closing itself"),this.shutdown_(),this.onDisconnect&&(this.onDisconnect(this.everConnected_),this.onDisconnect=null))}close(){this.isClosed_||(this.log_("WebSocket is being closed"),this.shutdown_())}resetKeepAlive(){clearInterval(this.keepaliveTimer),this.keepaliveTimer=setInterval(()=>{this.mySock&&this.sendString_("0"),this.resetKeepAlive()},Math.floor(45e3))}sendString_(t){try{this.mySock.send(t)}catch(r){this.log_("Exception thrown from WebSocket.send():",r.message||r.data,"Closing connection."),setTimeout(this.onClosed_.bind(this),0)}}}return n.responsesRequiredToBeHealthy=2,n.healthyTimeout=3e4,n})();class Kv{constructor(e){this.initTransports_(e)}static get ALL_TRANSPORTS(){return[ah,ip]}initTransports_(e){const t=ip&&ip.isAvailable();let r=t&&!ip.previouslyFailed();if(e.webSocketOnly&&(t||as("wss:// URL used, but browser isn't known to support websockets.  Trying anyway."),r=!0),r)this.transports_=[ip];else{const i=this.transports_=[];for(const a of Kv.ALL_TRANSPORTS)a&&a.isAvailable()&&i.push(a)}}initialTransport(){if(this.transports_.length>0)return this.transports_[0];throw new Error("No transports available")}upgradeTransport(){return this.transports_.length>1?this.transports_[1]:null}}class oI{constructor(e,t,r,i,a,l,h,_,w,D){this.id=e,this.repoInfo_=t,this.applicationId_=r,this.appCheckToken_=i,this.authToken_=a,this.onMessage_=l,this.onReady_=h,this.onDisconnect_=_,this.onKill_=w,this.lastSessionId=D,this.connectionCount=0,this.pendingDataMessages=[],this.state_=0,this.log_=hm("c:"+this.id+":"),this.transportManager_=new Kv(t),this.log_("Connection created"),this.start_()}start_(){const e=this.transportManager_.initialTransport();this.conn_=new e(this.nextTransportId_(),this.repoInfo_,this.applicationId_,this.appCheckToken_,this.authToken_,null,this.lastSessionId),this.primaryResponsesRequired_=e.responsesRequiredToBeHealthy||0;const t=this.connReceiver_(this.conn_),r=this.disconnReceiver_(this.conn_);this.tx_=this.conn_,this.rx_=this.conn_,this.secondaryConn_=null,this.isHealthy_=!1,setTimeout(()=>{this.conn_&&this.conn_.open(t,r)},Math.floor(0));const i=e.healthyTimeout||0;i>0&&(this.healthyTimeout_=Jf(()=>{this.healthyTimeout_=null,this.isHealthy_||(this.conn_&&this.conn_.bytesReceived>102400?(this.log_("Connection exceeded healthy timeout but has received "+this.conn_.bytesReceived+" bytes.  Marking connection healthy."),this.isHealthy_=!0,this.conn_.markConnectionHealthy()):this.conn_&&this.conn_.bytesSent>10240?this.log_("Connection exceeded healthy timeout but has sent "+this.conn_.bytesSent+" bytes.  Leaving connection alive."):(this.log_("Closing unhealthy connection after timeout."),this.close()))},Math.floor(i)))}nextTransportId_(){return"c:"+this.id+":"+this.connectionCount++}disconnReceiver_(e){return t=>{e===this.conn_?this.onConnectionLost_(t):e===this.secondaryConn_?(this.log_("Secondary connection lost."),this.onSecondaryConnectionLost_()):this.log_("closing an old connection")}}connReceiver_(e){return t=>{2!==this.state_&&(e===this.rx_?this.onPrimaryMessageReceived_(t):e===this.secondaryConn_?this.onSecondaryMessageReceived_(t):this.log_("message on old connection"))}}sendRequest(e){this.sendData_({t:"d",d:e})}tryCleanupConnection(){this.tx_===this.secondaryConn_&&this.rx_===this.secondaryConn_&&(this.log_("cleaning up and promoting a connection: "+this.secondaryConn_.connId),this.conn_=this.secondaryConn_,this.secondaryConn_=null)}onSecondaryControl_(e){if("t"in e){const t=e.t;"a"===t?this.upgradeIfSecondaryHealthy_():"r"===t?(this.log_("Got a reset on secondary, closing it"),this.secondaryConn_.close(),(this.tx_===this.secondaryConn_||this.rx_===this.secondaryConn_)&&this.close()):"o"===t&&(this.log_("got pong on secondary."),this.secondaryResponsesRequired_--,this.upgradeIfSecondaryHealthy_())}}onSecondaryMessageReceived_(e){const t=Yf("t",e),r=Yf("d",e);if("c"===t)this.onSecondaryControl_(r);else{if("d"!==t)throw new Error("Unknown protocol layer: "+t);this.pendingDataMessages.push(r)}}upgradeIfSecondaryHealthy_(){this.secondaryResponsesRequired_<=0?(this.log_("Secondary connection is healthy."),this.isHealthy_=!0,this.secondaryConn_.markConnectionHealthy(),this.proceedWithUpgrade_()):(this.log_("sending ping on secondary."),this.secondaryConn_.send({t:"c",d:{t:"p",d:{}}}))}proceedWithUpgrade_(){this.secondaryConn_.start(),this.log_("sending client ack on secondary"),this.secondaryConn_.send({t:"c",d:{t:"a",d:{}}}),this.log_("Ending transmission on primary"),this.conn_.send({t:"c",d:{t:"n",d:{}}}),this.tx_=this.secondaryConn_,this.tryCleanupConnection()}onPrimaryMessageReceived_(e){const t=Yf("t",e),r=Yf("d",e);"c"===t?this.onControl_(r):"d"===t&&this.onDataMessage_(r)}onDataMessage_(e){this.onPrimaryResponse_(),this.onMessage_(e)}onPrimaryResponse_(){this.isHealthy_||(this.primaryResponsesRequired_--,this.primaryResponsesRequired_<=0&&(this.log_("Primary connection is healthy."),this.isHealthy_=!0,this.conn_.markConnectionHealthy()))}onControl_(e){const t=Yf("t",e);if("d"in e){const r=e.d;if("h"===t)this.onHandshake_(r);else if("n"===t){this.log_("recvd end transmission on primary"),this.rx_=this.secondaryConn_;for(let i=0;i<this.pendingDataMessages.length;++i)this.onDataMessage_(this.pendingDataMessages[i]);this.pendingDataMessages=[],this.tryCleanupConnection()}else"s"===t?this.onConnectionShutdown_(r):"r"===t?this.onReset_(r):"e"===t?Vv("Server Error: "+r):"o"===t?(this.log_("got pong on primary."),this.onPrimaryResponse_(),this.sendPingOnPrimaryIfNecessary_()):Vv("Unknown control packet command: "+t)}}onHandshake_(e){const t=e.ts,r=e.v,i=e.h;this.sessionId=e.s,this.repoInfo_.host=i,0===this.state_&&(this.conn_.start(),this.onConnectionEstablished_(this.conn_,t),"5"!==r&&as("Protocol version mismatch detected"),this.tryStartUpgrade_())}tryStartUpgrade_(){const e=this.transportManager_.upgradeTransport();e&&this.startUpgrade_(e)}startUpgrade_(e){this.secondaryConn_=new e(this.nextTransportId_(),this.repoInfo_,this.applicationId_,this.appCheckToken_,this.authToken_,this.sessionId),this.secondaryResponsesRequired_=e.responsesRequiredToBeHealthy||0;const t=this.connReceiver_(this.secondaryConn_),r=this.disconnReceiver_(this.secondaryConn_);this.secondaryConn_.open(t,r),Jf(()=>{this.secondaryConn_&&(this.log_("Timed out trying to upgrade."),this.secondaryConn_.close())},Math.floor(6e4))}onReset_(e){this.log_("Reset packet received.  New host: "+e),this.repoInfo_.host=e,1===this.state_?this.close():(this.closeConnections_(),this.start_())}onConnectionEstablished_(e,t){this.log_("Realtime connection established."),this.conn_=e,this.state_=1,this.onReady_&&(this.onReady_(t,this.sessionId),this.onReady_=null),0===this.primaryResponsesRequired_?(this.log_("Primary connection is healthy."),this.isHealthy_=!0):Jf(()=>{this.sendPingOnPrimaryIfNecessary_()},Math.floor(5e3))}sendPingOnPrimaryIfNecessary_(){!this.isHealthy_&&1===this.state_&&(this.log_("sending ping on primary."),this.sendData_({t:"c",d:{t:"p",d:{}}}))}onSecondaryConnectionLost_(){const e=this.secondaryConn_;this.secondaryConn_=null,(this.tx_===e||this.rx_===e)&&this.close()}onConnectionLost_(e){this.conn_=null,e||0!==this.state_?1===this.state_&&this.log_("Realtime connection lost."):(this.log_("Realtime connection failed."),this.repoInfo_.isCacheableHost()&&(pl.remove("host:"+this.repoInfo_.host),this.repoInfo_.internalHost=this.repoInfo_.host)),this.close()}onConnectionShutdown_(e){this.log_("Connection shutdown command received. Shutting down..."),this.onKill_&&(this.onKill_(e),this.onKill_=null),this.onDisconnect_=null,this.close()}sendData_(e){if(1!==this.state_)throw"Connection is not connected";this.tx_.send(e)}close(){2!==this.state_&&(this.log_("Closing realtime connection."),this.state_=2,this.closeConnections_(),this.onDisconnect_&&(this.onDisconnect_(),this.onDisconnect_=null))}closeConnections_(){this.log_("Shutting down all connections"),this.conn_&&(this.conn_.close(),this.conn_=null),this.secondaryConn_&&(this.secondaryConn_.close(),this.secondaryConn_=null),this.healthyTimeout_&&(clearTimeout(this.healthyTimeout_),this.healthyTimeout_=null)}}class aI{put(e,t,r,i){}merge(e,t,r,i){}refreshAuthToken(e){}refreshAppCheckToken(e){}onDisconnectPut(e,t,r){}onDisconnectMerge(e,t,r){}onDisconnectCancel(e,t){}reportStats(e){}}class na{constructor(e){this.allowedEvents_=e,this.listeners_={},(0,k.hu)(Array.isArray(e)&&e.length>0,"Requires a non-empty array")}trigger(e,...t){if(Array.isArray(this.listeners_[e])){const r=[...this.listeners_[e]];for(let i=0;i<r.length;i++)r[i].callback.apply(r[i].context,t)}}on(e,t,r){this.validateEventType_(e),this.listeners_[e]=this.listeners_[e]||[],this.listeners_[e].push({callback:t,context:r});const i=this.getInitialEvent(e);i&&t.apply(r,i)}off(e,t,r){this.validateEventType_(e);const i=this.listeners_[e]||[];for(let a=0;a<i.length;a++)if(i[a].callback===t&&(!r||r===i[a].context))return void i.splice(a,1)}validateEventType_(e){(0,k.hu)(this.allowedEvents_.find(t=>t===e),"Unknown event: "+e)}}class us extends na{constructor(){super(["online"]),this.online_=!0,"undefined"!=typeof window&&void 0!==window.addEventListener&&!(0,k.uI)()&&(window.addEventListener("online",()=>{this.online_||(this.online_=!0,this.trigger("online",!0))},!1),window.addEventListener("offline",()=>{this.online_&&(this.online_=!1,this.trigger("online",!1))},!1))}static getInstance(){return new us}getInitialEvent(e){return(0,k.hu)("online"===e,"Unknown event type: "+e),[this.online_]}currentlyOnline(){return this.online_}}class hn{constructor(e,t){if(void 0===t){this.pieces_=e.split("/");let r=0;for(let i=0;i<this.pieces_.length;i++)this.pieces_[i].length>0&&(this.pieces_[r]=this.pieces_[i],r++);this.pieces_.length=r,this.pieceNum_=0}else this.pieces_=e,this.pieceNum_=t}toString(){let e="";for(let t=this.pieceNum_;t<this.pieces_.length;t++)""!==this.pieces_[t]&&(e+="/"+this.pieces_[t]);return e||"/"}}function an(){return new hn("")}function Wt(n){return n.pieceNum_>=n.pieces_.length?null:n.pieces_[n.pieceNum_]}function _l(n){return n.pieces_.length-n.pieceNum_}function Dn(n){let e=n.pieceNum_;return e<n.pieces_.length&&e++,new hn(n.pieces_,e)}function sp(n){return n.pieceNum_<n.pieces_.length?n.pieces_[n.pieces_.length-1]:null}function ap(n,e=0){return n.pieces_.slice(n.pieceNum_+e)}function Xv(n){if(n.pieceNum_>=n.pieces_.length)return null;const e=[];for(let t=n.pieceNum_;t<n.pieces_.length-1;t++)e.push(n.pieces_[t]);return new hn(e,0)}function Un(n,e){const t=[];for(let r=n.pieceNum_;r<n.pieces_.length;r++)t.push(n.pieces_[r]);if(e instanceof hn)for(let r=e.pieceNum_;r<e.pieces_.length;r++)t.push(e.pieces_[r]);else{const r=e.split("/");for(let i=0;i<r.length;i++)r[i].length>0&&t.push(r[i])}return new hn(t,0)}function jt(n){return n.pieceNum_>=n.pieces_.length}function mi(n,e){const t=Wt(n),r=Wt(e);if(null===t)return e;if(t===r)return mi(Dn(n),Dn(e));throw new Error("INTERNAL ERROR: innerPath ("+e+") is not within outerPath ("+n+")")}function Dm(n,e){const t=ap(n,0),r=ap(e,0);for(let i=0;i<t.length&&i<r.length;i++){const a=gl(t[i],r[i]);if(0!==a)return a}return t.length===r.length?0:t.length<r.length?-1:1}function e0(n,e){if(_l(n)!==_l(e))return!1;for(let t=n.pieceNum_,r=e.pieceNum_;t<=n.pieces_.length;t++,r++)if(n.pieces_[t]!==e.pieces_[r])return!1;return!0}function Ns(n,e){let t=n.pieceNum_,r=e.pieceNum_;if(_l(n)>_l(e))return!1;for(;t<n.pieces_.length;){if(n.pieces_[t]!==e.pieces_[r])return!1;++t,++r}return!0}class uI{constructor(e,t){this.errorPrefix_=t,this.parts_=ap(e,0),this.byteLength_=Math.max(1,this.parts_.length);for(let r=0;r<this.parts_.length;r++)this.byteLength_+=(0,k.ug)(this.parts_[r]);n0(this)}}function n0(n){if(n.byteLength_>768)throw new Error(n.errorPrefix_+"has a key path longer than 768 bytes ("+n.byteLength_+").");if(n.parts_.length>32)throw new Error(n.errorPrefix_+"path specified exceeds the maximum depth that can be written (32) or object contains a cycle "+yl(n))}function yl(n){return 0===n.parts_.length?"":"in property '"+n.parts_.join(".")+"'"}class Sm extends na{constructor(){let e,t;super(["visible"]),"undefined"!=typeof document&&void 0!==document.addEventListener&&(void 0!==document.hidden?(t="visibilitychange",e="hidden"):void 0!==document.mozHidden?(t="mozvisibilitychange",e="mozHidden"):void 0!==document.msHidden?(t="msvisibilitychange",e="msHidden"):void 0!==document.webkitHidden&&(t="webkitvisibilitychange",e="webkitHidden")),this.visible_=!0,t&&document.addEventListener(t,()=>{const r=!document[e];r!==this.visible_&&(this.visible_=r,this.trigger("visible",r))},!1)}static getInstance(){return new Sm}getInitialEvent(e){return(0,k.hu)("visible"===e,"Unknown event type: "+e),[this.visible_]}}const lh=1e3;let xm,Mc=(()=>{class n extends aI{constructor(t,r,i,a,l,h,_,w){if(super(),this.repoInfo_=t,this.applicationId_=r,this.onDataUpdate_=i,this.onConnectStatus_=a,this.onServerInfoUpdate_=l,this.authTokenProvider_=h,this.appCheckTokenProvider_=_,this.authOverride_=w,this.id=n.nextPersistentConnectionId_++,this.log_=hm("p:"+this.id+":"),this.interruptReasons_={},this.listens=new Map,this.outstandingPuts_=[],this.outstandingGets_=[],this.outstandingPutCount_=0,this.outstandingGetCount_=0,this.onDisconnectRequestQueue_=[],this.connected_=!1,this.reconnectDelay_=lh,this.maxReconnectDelay_=3e5,this.securityDebugCallback_=null,this.lastSessionId=null,this.establishConnectionTimer_=null,this.visible_=!1,this.requestCBHash_={},this.requestNumber_=0,this.realtime_=null,this.authToken_=null,this.appCheckToken_=null,this.forceTokenRefresh_=!1,this.invalidAuthTokenCount_=0,this.invalidAppCheckTokenCount_=0,this.firstConnection_=!0,this.lastConnectionAttemptTime_=null,this.lastConnectionEstablishedTime_=null,w&&!(0,k.Yr)())throw new Error("Auth override specified in options, but not supported on non Node.js platforms");Sm.getInstance().on("visible",this.onVisible_,this),-1===t.host.indexOf("fblocal")&&us.getInstance().on("online",this.onOnline_,this)}sendRequest(t,r,i){const a=++this.requestNumber_,l={r:a,a:t,b:r};this.log_((0,k.Pz)(l)),(0,k.hu)(this.connected_,"sendRequest call when we're not connected not allowed."),this.realtime_.sendRequest(l),i&&(this.requestCBHash_[a]=i)}get(t){this.initConnection_();const r=new k.BH,i={p:t._path.toString(),q:t._queryObject},a={action:"g",request:i,onComplete:h=>{const _=h.d;"ok"===h.s?(this.onDataUpdate_(i.p,_,!1,null),r.resolve(_)):r.reject(_)}};this.outstandingGets_.push(a),this.outstandingGetCount_++;const l=this.outstandingGets_.length-1;return this.connected_||setTimeout(()=>{const h=this.outstandingGets_[l];void 0===h||a!==h||(delete this.outstandingGets_[l],this.outstandingGetCount_--,0===this.outstandingGetCount_&&(this.outstandingGets_=[]),this.log_("get "+l+" timed out on connection"),r.reject(new Error("Client is offline.")))},3e3),this.connected_&&this.sendGet_(l),r.promise}listen(t,r,i,a){this.initConnection_();const l=t._queryIdentifier,h=t._path.toString();this.log_("Listen called for "+h+" "+l),this.listens.has(h)||this.listens.set(h,new Map),(0,k.hu)(t._queryParams.isDefault()||!t._queryParams.loadsAllData(),"listen() called for non-default but complete query"),(0,k.hu)(!this.listens.get(h).has(l),"listen() called twice for same path/queryId.");const _={onComplete:a,hashFn:r,query:t,tag:i};this.listens.get(h).set(l,_),this.connected_&&this.sendListen_(_)}sendGet_(t){const r=this.outstandingGets_[t];this.sendRequest("g",r.request,i=>{delete this.outstandingGets_[t],this.outstandingGetCount_--,0===this.outstandingGetCount_&&(this.outstandingGets_=[]),r.onComplete&&r.onComplete(i)})}sendListen_(t){const r=t.query,i=r._path.toString(),a=r._queryIdentifier;this.log_("Listen on "+i+" for "+a);const l={p:i};t.tag&&(l.q=r._queryObject,l.t=t.tag),l.h=t.hashFn(),this.sendRequest("q",l,_=>{const w=_.d,D=_.s;n.warnOnListenWarnings_(w,r),(this.listens.get(i)&&this.listens.get(i).get(a))===t&&(this.log_("listen response",_),"ok"!==D&&this.removeListen_(i,a),t.onComplete&&t.onComplete(D,w))})}static warnOnListenWarnings_(t,r){if(t&&"object"==typeof t&&(0,k.r3)(t,"w")){const i=(0,k.DV)(t,"w");if(Array.isArray(i)&&~i.indexOf("no_index")){const a='".indexOn": "'+r._queryParams.getIndex().toString()+'"',l=r._path.toString();as(`Using an unspecified index. Your data will be downloaded and filtered on the client. Consider adding ${a} at ${l} to your security rules for better performance.`)}}}refreshAuthToken(t){this.authToken_=t,this.log_("Auth token refreshed"),this.authToken_?this.tryAuth():this.connected_&&this.sendRequest("unauth",{},()=>{}),this.reduceReconnectDelayIfAdminCredential_(t)}reduceReconnectDelayIfAdminCredential_(t){(t&&40===t.length||(0,k.GJ)(t))&&(this.log_("Admin auth credential detected.  Reducing max reconnect time."),this.maxReconnectDelay_=3e4)}refreshAppCheckToken(t){this.appCheckToken_=t,this.log_("App check token refreshed"),this.appCheckToken_?this.tryAppCheck():this.connected_&&this.sendRequest("unappeck",{},()=>{})}tryAuth(){if(this.connected_&&this.authToken_){const t=this.authToken_,r=(0,k.w9)(t)?"auth":"gauth",i={cred:t};null===this.authOverride_?i.noauth=!0:"object"==typeof this.authOverride_&&(i.authvar=this.authOverride_),this.sendRequest(r,i,a=>{const l=a.s,h=a.d||"error";this.authToken_===t&&("ok"===l?this.invalidAuthTokenCount_=0:this.onAuthRevoked_(l,h))})}}tryAppCheck(){this.connected_&&this.appCheckToken_&&this.sendRequest("appcheck",{token:this.appCheckToken_},t=>{const r=t.s,i=t.d||"error";"ok"===r?this.invalidAppCheckTokenCount_=0:this.onAppCheckRevoked_(r,i)})}unlisten(t,r){const i=t._path.toString(),a=t._queryIdentifier;this.log_("Unlisten called for "+i+" "+a),(0,k.hu)(t._queryParams.isDefault()||!t._queryParams.loadsAllData(),"unlisten() called for non-default but complete query"),this.removeListen_(i,a)&&this.connected_&&this.sendUnlisten_(i,a,t._queryObject,r)}sendUnlisten_(t,r,i,a){this.log_("Unlisten on "+t+" for "+r);const l={p:t};a&&(l.q=i,l.t=a),this.sendRequest("n",l)}onDisconnectPut(t,r,i){this.initConnection_(),this.connected_?this.sendOnDisconnect_("o",t,r,i):this.onDisconnectRequestQueue_.push({pathString:t,action:"o",data:r,onComplete:i})}onDisconnectMerge(t,r,i){this.initConnection_(),this.connected_?this.sendOnDisconnect_("om",t,r,i):this.onDisconnectRequestQueue_.push({pathString:t,action:"om",data:r,onComplete:i})}onDisconnectCancel(t,r){this.initConnection_(),this.connected_?this.sendOnDisconnect_("oc",t,null,r):this.onDisconnectRequestQueue_.push({pathString:t,action:"oc",data:null,onComplete:r})}sendOnDisconnect_(t,r,i,a){const l={p:r,d:i};this.log_("onDisconnect "+t,l),this.sendRequest(t,l,h=>{a&&setTimeout(()=>{a(h.s,h.d)},Math.floor(0))})}put(t,r,i,a){this.putInternal("p",t,r,i,a)}merge(t,r,i,a){this.putInternal("m",t,r,i,a)}putInternal(t,r,i,a,l){this.initConnection_();const h={p:r,d:i};void 0!==l&&(h.h=l),this.outstandingPuts_.push({action:t,request:h,onComplete:a}),this.outstandingPutCount_++,this.connected_?this.sendPut_(this.outstandingPuts_.length-1):this.log_("Buffering put: "+r)}sendPut_(t){const r=this.outstandingPuts_[t].action,i=this.outstandingPuts_[t].request,a=this.outstandingPuts_[t].onComplete;this.outstandingPuts_[t].queued=this.connected_,this.sendRequest(r,i,l=>{this.log_(r+" response",l),delete this.outstandingPuts_[t],this.outstandingPutCount_--,0===this.outstandingPutCount_&&(this.outstandingPuts_=[]),a&&a(l.s,l.d)})}reportStats(t){if(this.connected_){const r={c:t};this.log_("reportStats",r),this.sendRequest("s",r,i=>{"ok"!==i.s&&this.log_("reportStats","Error sending stats: "+i.d)})}}onDataMessage_(t){if("r"in t){this.log_("from server: "+(0,k.Pz)(t));const r=t.r,i=this.requestCBHash_[r];i&&(delete this.requestCBHash_[r],i(t.b))}else{if("error"in t)throw"A server-side error has occurred: "+t.error;"a"in t&&this.onDataPush_(t.a,t.b)}}onDataPush_(t,r){this.log_("handleServerMessage",t,r),"d"===t?this.onDataUpdate_(r.p,r.d,!1,r.t):"m"===t?this.onDataUpdate_(r.p,r.d,!0,r.t):"c"===t?this.onListenRevoked_(r.p,r.q):"ac"===t?this.onAuthRevoked_(r.s,r.d):"apc"===t?this.onAppCheckRevoked_(r.s,r.d):"sd"===t?this.onSecurityDebugPacket_(r):Vv("Unrecognized action received from server: "+(0,k.Pz)(t)+"\nAre you using the latest client?")}onReady_(t,r){this.log_("connection ready"),this.connected_=!0,this.lastConnectionEstablishedTime_=(new Date).getTime(),this.handleTimestamp_(t),this.lastSessionId=r,this.firstConnection_&&this.sendConnectStats_(),this.restoreState_(),this.firstConnection_=!1,this.onConnectStatus_(!0)}scheduleConnect_(t){(0,k.hu)(!this.realtime_,"Scheduling a connect when we're already connected/ing?"),this.establishConnectionTimer_&&clearTimeout(this.establishConnectionTimer_),this.establishConnectionTimer_=setTimeout(()=>{this.establishConnectionTimer_=null,this.establishConnection_()},Math.floor(t))}initConnection_(){!this.realtime_&&this.firstConnection_&&this.scheduleConnect_(0)}onVisible_(t){t&&!this.visible_&&this.reconnectDelay_===this.maxReconnectDelay_&&(this.log_("Window became visible.  Reducing delay."),this.reconnectDelay_=lh,this.realtime_||this.scheduleConnect_(0)),this.visible_=t}onOnline_(t){t?(this.log_("Browser went online."),this.reconnectDelay_=lh,this.realtime_||this.scheduleConnect_(0)):(this.log_("Browser went offline.  Killing connection."),this.realtime_&&this.realtime_.close())}onRealtimeDisconnect_(){if(this.log_("data client disconnected"),this.connected_=!1,this.realtime_=null,this.cancelSentTransactions_(),this.requestCBHash_={},this.shouldReconnect_()){this.visible_?this.lastConnectionEstablishedTime_&&((new Date).getTime()-this.lastConnectionEstablishedTime_>3e4&&(this.reconnectDelay_=lh),this.lastConnectionEstablishedTime_=null):(this.log_("Window isn't visible.  Delaying reconnect."),this.reconnectDelay_=this.maxReconnectDelay_,this.lastConnectionAttemptTime_=(new Date).getTime());const t=(new Date).getTime()-this.lastConnectionAttemptTime_;let r=Math.max(0,this.reconnectDelay_-t);r=Math.random()*r,this.log_("Trying to reconnect in "+r+"ms"),this.scheduleConnect_(r),this.reconnectDelay_=Math.min(this.maxReconnectDelay_,1.3*this.reconnectDelay_)}this.onConnectStatus_(!1)}establishConnection_(){var t=this;return(0,ye.Z)(function*(){if(t.shouldReconnect_()){t.log_("Making a connection attempt"),t.lastConnectionAttemptTime_=(new Date).getTime(),t.lastConnectionEstablishedTime_=null;const r=t.onDataMessage_.bind(t),i=t.onReady_.bind(t),a=t.onRealtimeDisconnect_.bind(t),l=t.id+":"+n.nextConnectionId_++,h=t.lastSessionId;let _=!1,w=null;const D=function(){w?w.close():(_=!0,a())};t.realtime_={close:D,sendRequest:function(L){(0,k.hu)(w,"sendRequest call when we're not connected not allowed."),w.sendRequest(L)}};const N=t.forceTokenRefresh_;t.forceTokenRefresh_=!1;try{const[L,j]=yield Promise.all([t.authTokenProvider_.getToken(N),t.appCheckTokenProvider_.getToken(N)]);_?Jr("getToken() completed but was canceled"):(Jr("getToken() completed. Creating connection."),t.authToken_=L&&L.accessToken,t.appCheckToken_=j&&j.token,w=new oI(l,t.repoInfo_,t.applicationId_,t.appCheckToken_,t.authToken_,r,i,a,fe=>{as(fe+" ("+t.repoInfo_.toString()+")"),t.interrupt("server_kill")},h))}catch(L){t.log_("Failed to get token: "+L),_||(t.repoInfo_.nodeAdmin&&as(L),D())}}})()}interrupt(t){Jr("Interrupting connection for reason: "+t),this.interruptReasons_[t]=!0,this.realtime_?this.realtime_.close():(this.establishConnectionTimer_&&(clearTimeout(this.establishConnectionTimer_),this.establishConnectionTimer_=null),this.connected_&&this.onRealtimeDisconnect_())}resume(t){Jr("Resuming connection for reason: "+t),delete this.interruptReasons_[t],(0,k.xb)(this.interruptReasons_)&&(this.reconnectDelay_=lh,this.realtime_||this.scheduleConnect_(0))}handleTimestamp_(t){const r=t-(new Date).getTime();this.onServerInfoUpdate_({serverTimeOffset:r})}cancelSentTransactions_(){for(let t=0;t<this.outstandingPuts_.length;t++){const r=this.outstandingPuts_[t];r&&"h"in r.request&&r.queued&&(r.onComplete&&r.onComplete("disconnect"),delete this.outstandingPuts_[t],this.outstandingPutCount_--)}0===this.outstandingPutCount_&&(this.outstandingPuts_=[])}onListenRevoked_(t,r){let i;i=r?r.map(l=>pm(l)).join("$"):"default";const a=this.removeListen_(t,i);a&&a.onComplete&&a.onComplete("permission_denied")}removeListen_(t,r){const i=new hn(t).toString();let a;if(this.listens.has(i)){const l=this.listens.get(i);a=l.get(r),l.delete(r),0===l.size&&this.listens.delete(i)}else a=void 0;return a}onAuthRevoked_(t,r){Jr("Auth token revoked: "+t+"/"+r),this.authToken_=null,this.forceTokenRefresh_=!0,this.realtime_.close(),("invalid_token"===t||"permission_denied"===t)&&(this.invalidAuthTokenCount_++,this.invalidAuthTokenCount_>=3&&(this.reconnectDelay_=3e4,this.authTokenProvider_.notifyForInvalidToken()))}onAppCheckRevoked_(t,r){Jr("App check token revoked: "+t+"/"+r),this.appCheckToken_=null,this.forceTokenRefresh_=!0,("invalid_token"===t||"permission_denied"===t)&&(this.invalidAppCheckTokenCount_++,this.invalidAppCheckTokenCount_>=3&&this.appCheckTokenProvider_.notifyForInvalidToken())}onSecurityDebugPacket_(t){this.securityDebugCallback_?this.securityDebugCallback_(t):"msg"in t&&console.log("FIREBASE: "+t.msg.replace("\n","\nFIREBASE: "))}restoreState_(){this.tryAuth(),this.tryAppCheck();for(const t of this.listens.values())for(const r of t.values())this.sendListen_(r);for(let t=0;t<this.outstandingPuts_.length;t++)this.outstandingPuts_[t]&&this.sendPut_(t);for(;this.onDisconnectRequestQueue_.length;){const t=this.onDisconnectRequestQueue_.shift();this.sendOnDisconnect_(t.action,t.pathString,t.data,t.onComplete)}for(let t=0;t<this.outstandingGets_.length;t++)this.outstandingGets_[t]&&this.sendGet_(t)}sendConnectStats_(){const t={};let r="js";(0,k.Yr)()&&(r=this.repoInfo_.nodeAdmin?"admin_node":"node"),t["sdk."+r+"."+dm.replace(/\./g,"-")]=1,(0,k.uI)()?t["framework.cordova"]=1:(0,k.b$)()&&(t["framework.reactnative"]=1),this.reportStats(t)}shouldReconnect_(){const t=us.getInstance().currentlyOnline();return(0,k.xb)(this.interruptReasons_)&&t}}return n.nextPersistentConnectionId_=0,n.nextConnectionId_=0,n})();class zt{constructor(e,t){this.name=e,this.node=t}static Wrap(e,t){return new zt(e,t)}}class Am{getCompare(){return this.compare.bind(this)}indexedValueChanged(e,t){const r=new zt(Oa,e),i=new zt(Oa,t);return 0!==this.compare(r,i)}minPost(){return zt.MIN}}class fI extends Am{static get __EMPTY_NODE(){return xm}static set __EMPTY_NODE(e){xm=e}compare(e,t){return gl(e.name,t.name)}isDefinedOn(e){throw(0,k.g5)("KeyIndex.isDefinedOn not expected to be called.")}indexedValueChanged(e,t){return!1}minPost(){return zt.MIN}maxPost(){return new zt(Fa,xm)}makePost(e,t){return(0,k.hu)("string"==typeof e,"KeyIndex indexValue must always be a string."),new zt(e,xm)}toString(){return".key"}}const Va=new fI;class Rm{constructor(e,t,r,i,a=null){this.isReverse_=i,this.resultGenerator_=a,this.nodeStack_=[];let l=1;for(;!e.isEmpty();)if(e=e,l=t?r(e.key,t):1,i&&(l*=-1),l<0)e=this.isReverse_?e.left:e.right;else{if(0===l){this.nodeStack_.push(e);break}this.nodeStack_.push(e),e=this.isReverse_?e.right:e.left}}getNext(){if(0===this.nodeStack_.length)return null;let t,e=this.nodeStack_.pop();if(t=this.resultGenerator_?this.resultGenerator_(e.key,e.value):{key:e.key,value:e.value},this.isReverse_)for(e=e.left;!e.isEmpty();)this.nodeStack_.push(e),e=e.right;else for(e=e.right;!e.isEmpty();)this.nodeStack_.push(e),e=e.left;return t}hasNext(){return this.nodeStack_.length>0}peek(){if(0===this.nodeStack_.length)return null;const e=this.nodeStack_[this.nodeStack_.length-1];return this.resultGenerator_?this.resultGenerator_(e.key,e.value):{key:e.key,value:e.value}}}let o0,ra=(()=>{class n{constructor(t,r,i,a,l){this.key=t,this.value=r,this.color=null!=i?i:n.RED,this.left=null!=a?a:ls.EMPTY_NODE,this.right=null!=l?l:ls.EMPTY_NODE}copy(t,r,i,a,l){return new n(null!=t?t:this.key,null!=r?r:this.value,null!=i?i:this.color,null!=a?a:this.left,null!=l?l:this.right)}count(){return this.left.count()+1+this.right.count()}isEmpty(){return!1}inorderTraversal(t){return this.left.inorderTraversal(t)||!!t(this.key,this.value)||this.right.inorderTraversal(t)}reverseTraversal(t){return this.right.reverseTraversal(t)||t(this.key,this.value)||this.left.reverseTraversal(t)}min_(){return this.left.isEmpty()?this:this.left.min_()}minKey(){return this.min_().key}maxKey(){return this.right.isEmpty()?this.key:this.right.maxKey()}insert(t,r,i){let a=this;const l=i(t,a.key);return a=l<0?a.copy(null,null,null,a.left.insert(t,r,i),null):0===l?a.copy(null,r,null,null,null):a.copy(null,null,null,null,a.right.insert(t,r,i)),a.fixUp_()}removeMin_(){if(this.left.isEmpty())return ls.EMPTY_NODE;let t=this;return!t.left.isRed_()&&!t.left.left.isRed_()&&(t=t.moveRedLeft_()),t=t.copy(null,null,null,t.left.removeMin_(),null),t.fixUp_()}remove(t,r){let i,a;if(i=this,r(t,i.key)<0)!i.left.isEmpty()&&!i.left.isRed_()&&!i.left.left.isRed_()&&(i=i.moveRedLeft_()),i=i.copy(null,null,null,i.left.remove(t,r),null);else{if(i.left.isRed_()&&(i=i.rotateRight_()),!i.right.isEmpty()&&!i.right.isRed_()&&!i.right.left.isRed_()&&(i=i.moveRedRight_()),0===r(t,i.key)){if(i.right.isEmpty())return ls.EMPTY_NODE;a=i.right.min_(),i=i.copy(a.key,a.value,null,null,i.right.removeMin_())}i=i.copy(null,null,null,null,i.right.remove(t,r))}return i.fixUp_()}isRed_(){return this.color}fixUp_(){let t=this;return t.right.isRed_()&&!t.left.isRed_()&&(t=t.rotateLeft_()),t.left.isRed_()&&t.left.left.isRed_()&&(t=t.rotateRight_()),t.left.isRed_()&&t.right.isRed_()&&(t=t.colorFlip_()),t}moveRedLeft_(){let t=this.colorFlip_();return t.right.left.isRed_()&&(t=t.copy(null,null,null,null,t.right.rotateRight_()),t=t.rotateLeft_(),t=t.colorFlip_()),t}moveRedRight_(){let t=this.colorFlip_();return t.left.left.isRed_()&&(t=t.rotateRight_(),t=t.colorFlip_()),t}rotateLeft_(){const t=this.copy(null,null,n.RED,null,this.right.left);return this.right.copy(null,null,this.color,t,null)}rotateRight_(){const t=this.copy(null,null,n.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,t)}colorFlip_(){const t=this.left.copy(null,null,!this.left.color,null,null),r=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,t,r)}checkMaxDepth_(){const t=this.check_();return Math.pow(2,t)<=this.count()+1}check_(){if(this.isRed_()&&this.left.isRed_())throw new Error("Red node has red child("+this.key+","+this.value+")");if(this.right.isRed_())throw new Error("Right child of ("+this.key+","+this.value+") is red");const t=this.left.check_();if(t!==this.right.check_())throw new Error("Black depths differ");return t+(this.isRed_()?0:1)}}return n.RED=!0,n.BLACK=!1,n})();class ls{constructor(e,t=ls.EMPTY_NODE){this.comparator_=e,this.root_=t}insert(e,t){return new ls(this.comparator_,this.root_.insert(e,t,this.comparator_).copy(null,null,ra.BLACK,null,null))}remove(e){return new ls(this.comparator_,this.root_.remove(e,this.comparator_).copy(null,null,ra.BLACK,null,null))}get(e){let t,r=this.root_;for(;!r.isEmpty();){if(t=this.comparator_(e,r.key),0===t)return r.value;t<0?r=r.left:t>0&&(r=r.right)}return null}getPredecessorKey(e){let t,r=this.root_,i=null;for(;!r.isEmpty();){if(t=this.comparator_(e,r.key),0===t){if(r.left.isEmpty())return i?i.key:null;for(r=r.left;!r.right.isEmpty();)r=r.right;return r.key}t<0?r=r.left:t>0&&(i=r,r=r.right)}throw new Error("Attempted to find predecessor key for a nonexistent key.  What gives?")}isEmpty(){return this.root_.isEmpty()}count(){return this.root_.count()}minKey(){return this.root_.minKey()}maxKey(){return this.root_.maxKey()}inorderTraversal(e){return this.root_.inorderTraversal(e)}reverseTraversal(e){return this.root_.reverseTraversal(e)}getIterator(e){return new Rm(this.root_,null,this.comparator_,!1,e)}getIteratorFrom(e,t){return new Rm(this.root_,e,this.comparator_,!1,t)}getReverseIteratorFrom(e,t){return new Rm(this.root_,e,this.comparator_,!0,t)}getReverseIterator(e){return new Rm(this.root_,null,this.comparator_,!0,e)}}function AS(n,e){return gl(n.name,e.name)}function s0(n,e){return gl(n,e)}ls.EMPTY_NODE=new class SS{copy(e,t,r,i,a){return this}insert(e,t,r){return new ra(e,t,null)}remove(e,t){return this}count(){return 0}isEmpty(){return!0}inorderTraversal(e){return!1}reverseTraversal(e){return!1}minKey(){return null}maxKey(){return null}check_(){return 0}isRed_(){return!1}};const pI=function(n){return"number"==typeof n?"number:"+HC(n):"string:"+n},a0=function(n){if(n.isLeafNode()){const e=n.val();(0,k.hu)("string"==typeof e||"number"==typeof e||"object"==typeof e&&(0,k.r3)(e,".sv"),"Priority must be a string or number.")}else(0,k.hu)(n===o0||n.isEmpty(),"priority of unexpected type.");(0,k.hu)(n===o0||n.getPriority().isEmpty(),"Priority nodes can't have a priority of their own.")};let u0,l0,c0,Nc=(()=>{class n{constructor(t,r=n.__childrenNodeConstructor.EMPTY_NODE){this.value_=t,this.priorityNode_=r,this.lazyHash_=null,(0,k.hu)(null!=this.value_,"LeafNode shouldn't be created with null/undefined value."),a0(this.priorityNode_)}static set __childrenNodeConstructor(t){u0=t}static get __childrenNodeConstructor(){return u0}isLeafNode(){return!0}getPriority(){return this.priorityNode_}updatePriority(t){return new n(this.value_,t)}getImmediateChild(t){return".priority"===t?this.priorityNode_:n.__childrenNodeConstructor.EMPTY_NODE}getChild(t){return jt(t)?this:".priority"===Wt(t)?this.priorityNode_:n.__childrenNodeConstructor.EMPTY_NODE}hasChild(){return!1}getPredecessorChildName(t,r){return null}updateImmediateChild(t,r){return".priority"===t?this.updatePriority(r):r.isEmpty()&&".priority"!==t?this:n.__childrenNodeConstructor.EMPTY_NODE.updateImmediateChild(t,r).updatePriority(this.priorityNode_)}updateChild(t,r){const i=Wt(t);return null===i?r:r.isEmpty()&&".priority"!==i?this:((0,k.hu)(".priority"!==i||1===_l(t),".priority must be the last token in a path"),this.updateImmediateChild(i,n.__childrenNodeConstructor.EMPTY_NODE.updateChild(Dn(t),r)))}isEmpty(){return!1}numChildren(){return 0}forEachChild(t,r){return!1}val(t){return t&&!this.getPriority().isEmpty()?{".value":this.getValue(),".priority":this.getPriority().val()}:this.getValue()}hash(){if(null===this.lazyHash_){let t="";this.priorityNode_.isEmpty()||(t+="priority:"+pI(this.priorityNode_.val())+":");const r=typeof this.value_;t+=r+":",t+="number"===r?HC(this.value_):this.value_,this.lazyHash_=UC(t)}return this.lazyHash_}getValue(){return this.value_}compareTo(t){return t===n.__childrenNodeConstructor.EMPTY_NODE?1:t instanceof n.__childrenNodeConstructor?-1:((0,k.hu)(t.isLeafNode(),"Unknown node type"),this.compareToLeafNode_(t))}compareToLeafNode_(t){const r=typeof t.value_,i=typeof this.value_,a=n.VALUE_TYPE_ORDER.indexOf(r),l=n.VALUE_TYPE_ORDER.indexOf(i);return(0,k.hu)(a>=0,"Unknown leaf type: "+r),(0,k.hu)(l>=0,"Unknown leaf type: "+i),a===l?"object"===i?0:this.value_<t.value_?-1:this.value_===t.value_?0:1:l-a}withIndex(){return this}isIndexed(){return!0}equals(t){if(t===this)return!0;if(t.isLeafNode()){const r=t;return this.value_===r.value_&&this.priorityNode_.equals(r.priorityNode_)}return!1}}return n.VALUE_TYPE_ORDER=["object","boolean","number","string"],n})();const Tn=new class _I extends Am{compare(e,t){const r=e.node.getPriority(),i=t.node.getPriority(),a=r.compareTo(i);return 0===a?gl(e.name,t.name):a}isDefinedOn(e){return!e.getPriority().isEmpty()}indexedValueChanged(e,t){return!e.getPriority().equals(t.getPriority())}minPost(){return zt.MIN}maxPost(){return new zt(Fa,new Nc("[PRIORITY-POST]",c0))}makePost(e,t){const r=l0(e);return new zt(t,new Nc("[PRIORITY-POST]",r))}toString(){return".priority"}},yI=Math.log(2);class vI{constructor(e){this.count=parseInt(Math.log(e+1)/yI,10),this.current_=this.count-1;const i=(a=>parseInt(Array(this.count+1).join("1"),2))();this.bits_=e+1&i}nextBitIsOne(){const e=!(this.bits_&1<<this.current_);return this.current_--,e}}const Ua=function(n,e,t,r){n.sort(e);const i=function(_,w){const D=w-_;let S,N;if(0===D)return null;if(1===D)return S=n[_],N=t?t(S):S,new ra(N,S.node,ra.BLACK,null,null);{const L=parseInt(D/2,10)+_,j=i(_,L),fe=i(L+1,w);return S=n[L],N=t?t(S):S,new ra(N,S.node,ra.BLACK,j,fe)}},h=function(_){let w=null,D=null,S=n.length;const N=function(j,fe){const Me=S-j,et=S;S-=j;const We=i(Me+1,et),wt=n[Me],tt=t?t(wt):wt;L(new ra(tt,wt.node,fe,null,We))},L=function(j){w?(w.left=j,w=j):(D=j,w=j)};for(let j=0;j<_.count;++j){const fe=_.nextBitIsOne(),Me=Math.pow(2,_.count-(j+1));fe?N(Me,ra.BLACK):(N(Me,ra.BLACK),N(Me,ra.RED))}return D}(new vI(n.length));return new ls(r||e,h)};let d0;const ch={};class cs{constructor(e,t){this.indexes_=e,this.indexSet_=t}static get Default(){return(0,k.hu)(ch&&Tn,"ChildrenNode.ts has not been loaded"),d0=d0||new cs({".priority":ch},{".priority":Tn}),d0}get(e){const t=(0,k.DV)(this.indexes_,e);if(!t)throw new Error("No index defined for "+e);return t instanceof ls?t:null}hasIndex(e){return(0,k.r3)(this.indexSet_,e.toString())}addIndex(e,t){(0,k.hu)(e!==Va,"KeyIndex always exists and isn't meant to be added to the IndexMap.");const r=[];let i=!1;const a=t.getIterator(zt.Wrap);let h,l=a.getNext();for(;l;)i=i||e.isDefinedOn(l.node),r.push(l),l=a.getNext();h=i?Ua(r,e.getCompare()):ch;const _=e.toString(),w=Object.assign({},this.indexSet_);w[_]=e;const D=Object.assign({},this.indexes_);return D[_]=h,new cs(D,w)}addToIndexes(e,t){const r=(0,k.UI)(this.indexes_,(i,a)=>{const l=(0,k.DV)(this.indexSet_,a);if((0,k.hu)(l,"Missing index implementation for "+a),i===ch){if(l.isDefinedOn(e.node)){const h=[],_=t.getIterator(zt.Wrap);let w=_.getNext();for(;w;)w.name!==e.name&&h.push(w),w=_.getNext();return h.push(e),Ua(h,l.getCompare())}return ch}{const h=t.get(e.name);let _=i;return h&&(_=_.remove(new zt(e.name,h))),_.insert(e,e.node)}});return new cs(r,this.indexSet_)}removeFromIndexes(e,t){const r=(0,k.UI)(this.indexes_,i=>{if(i===ch)return i;{const a=t.get(e.name);return a?i.remove(new zt(e.name,a)):i}});return new cs(r,this.indexSet_)}}let Mm,At=(()=>{class n{constructor(t,r,i){this.children_=t,this.priorityNode_=r,this.indexMap_=i,this.lazyHash_=null,this.priorityNode_&&a0(this.priorityNode_),this.children_.isEmpty()&&(0,k.hu)(!this.priorityNode_||this.priorityNode_.isEmpty(),"An empty node cannot have a priority")}static get EMPTY_NODE(){return Mm||(Mm=new n(new ls(s0),null,cs.Default))}isLeafNode(){return!1}getPriority(){return this.priorityNode_||Mm}updatePriority(t){return this.children_.isEmpty()?this:new n(this.children_,t,this.indexMap_)}getImmediateChild(t){if(".priority"===t)return this.getPriority();{const r=this.children_.get(t);return null===r?Mm:r}}getChild(t){const r=Wt(t);return null===r?this:this.getImmediateChild(r).getChild(Dn(t))}hasChild(t){return null!==this.children_.get(t)}updateImmediateChild(t,r){if((0,k.hu)(r,"We should always be passing snapshot nodes"),".priority"===t)return this.updatePriority(r);{const i=new zt(t,r);let a,l;r.isEmpty()?(a=this.children_.remove(t),l=this.indexMap_.removeFromIndexes(i,this.children_)):(a=this.children_.insert(t,r),l=this.indexMap_.addToIndexes(i,this.children_));const h=a.isEmpty()?Mm:this.priorityNode_;return new n(a,h,l)}}updateChild(t,r){const i=Wt(t);if(null===i)return r;{(0,k.hu)(".priority"!==Wt(t)||1===_l(t),".priority must be the last token in a path");const a=this.getImmediateChild(i).updateChild(Dn(t),r);return this.updateImmediateChild(i,a)}}isEmpty(){return this.children_.isEmpty()}numChildren(){return this.children_.count()}val(t){if(this.isEmpty())return null;const r={};let i=0,a=0,l=!0;if(this.forEachChild(Tn,(h,_)=>{r[h]=_.val(t),i++,l&&n.INTEGER_REGEXP_.test(h)?a=Math.max(a,Number(h)):l=!1}),!t&&l&&a<2*i){const h=[];for(const _ in r)h[_]=r[_];return h}return t&&!this.getPriority().isEmpty()&&(r[".priority"]=this.getPriority().val()),r}hash(){if(null===this.lazyHash_){let t="";this.getPriority().isEmpty()||(t+="priority:"+pI(this.getPriority().val())+":"),this.forEachChild(Tn,(r,i)=>{const a=i.hash();""!==a&&(t+=":"+r+":"+a)}),this.lazyHash_=""===t?"":UC(t)}return this.lazyHash_}getPredecessorChildName(t,r,i){const a=this.resolveIndex_(i);if(a){const l=a.getPredecessorKey(new zt(t,r));return l?l.name:null}return this.children_.getPredecessorKey(t)}getFirstChildName(t){const r=this.resolveIndex_(t);if(r){const i=r.minKey();return i&&i.name}return this.children_.minKey()}getFirstChild(t){const r=this.getFirstChildName(t);return r?new zt(r,this.children_.get(r)):null}getLastChildName(t){const r=this.resolveIndex_(t);if(r){const i=r.maxKey();return i&&i.name}return this.children_.maxKey()}getLastChild(t){const r=this.getLastChildName(t);return r?new zt(r,this.children_.get(r)):null}forEachChild(t,r){const i=this.resolveIndex_(t);return i?i.inorderTraversal(a=>r(a.name,a.node)):this.children_.inorderTraversal(r)}getIterator(t){return this.getIteratorFrom(t.minPost(),t)}getIteratorFrom(t,r){const i=this.resolveIndex_(r);if(i)return i.getIteratorFrom(t,a=>a);{const a=this.children_.getIteratorFrom(t.name,zt.Wrap);let l=a.peek();for(;null!=l&&r.compare(l,t)<0;)a.getNext(),l=a.peek();return a}}getReverseIterator(t){return this.getReverseIteratorFrom(t.maxPost(),t)}getReverseIteratorFrom(t,r){const i=this.resolveIndex_(r);if(i)return i.getReverseIteratorFrom(t,a=>a);{const a=this.children_.getReverseIteratorFrom(t.name,zt.Wrap);let l=a.peek();for(;null!=l&&r.compare(l,t)>0;)a.getNext(),l=a.peek();return a}}compareTo(t){return this.isEmpty()?t.isEmpty()?0:-1:t.isLeafNode()||t.isEmpty()?1:t===dh?-1:0}withIndex(t){if(t===Va||this.indexMap_.hasIndex(t))return this;{const r=this.indexMap_.addIndex(t,this.children_);return new n(this.children_,this.priorityNode_,r)}}isIndexed(t){return t===Va||this.indexMap_.hasIndex(t)}equals(t){if(t===this)return!0;if(t.isLeafNode())return!1;{const r=t;if(this.getPriority().equals(r.getPriority())){if(this.children_.count()===r.children_.count()){const i=this.getIterator(Tn),a=r.getIterator(Tn);let l=i.getNext(),h=a.getNext();for(;l&&h;){if(l.name!==h.name||!l.node.equals(h.node))return!1;l=i.getNext(),h=a.getNext()}return null===l&&null===h}return!1}return!1}}resolveIndex_(t){return t===Va?null:this.indexMap_.get(t.toString())}}return n.INTEGER_REGEXP_=/^(0|[1-9]\d*)$/,n})();const dh=new class hP extends At{constructor(){super(new ls(s0),At.EMPTY_NODE,cs.Default)}compareTo(e){return e===this?0:1}equals(e){return e===this}getPriority(){return this}getImmediateChild(e){return At.EMPTY_NODE}isEmpty(){return!1}};function Xn(n,e=null){if(null===n)return At.EMPTY_NODE;if("object"==typeof n&&".priority"in n&&(e=n[".priority"]),(0,k.hu)(null===e||"string"==typeof e||"number"==typeof e||"object"==typeof e&&".sv"in e,"Invalid priority type found: "+typeof e),"object"==typeof n&&".value"in n&&null!==n[".value"]&&(n=n[".value"]),"object"!=typeof n||".sv"in n)return new Nc(n,Xn(e));if(n instanceof Array){let t=At.EMPTY_NODE;return Fr(n,(r,i)=>{if((0,k.r3)(n,r)&&"."!==r.substring(0,1)){const a=Xn(i);(a.isLeafNode()||!a.isEmpty())&&(t=t.updateImmediateChild(r,a))}}),t.updatePriority(Xn(e))}{const t=[];let r=!1;if(Fr(n,(l,h)=>{if("."!==l.substring(0,1)){const _=Xn(h);_.isEmpty()||(r=r||!_.getPriority().isEmpty(),t.push(new zt(l,_)))}}),0===t.length)return At.EMPTY_NODE;const a=Ua(t,AS,l=>l.name,s0);if(r){const l=Ua(t,Tn.getCompare());return new At(a,Xn(e),new cs({".priority":l},{".priority":Tn}))}return new At(a,Xn(e),cs.Default)}}Object.defineProperties(zt,{MIN:{value:new zt(Oa,At.EMPTY_NODE)},MAX:{value:new zt(Fa,dh)}}),fI.__EMPTY_NODE=At.EMPTY_NODE,Nc.__childrenNodeConstructor=At,function xS(n){o0=n}(dh),function mI(n){c0=n}(dh),function gI(n){l0=n}(Xn);class mt extends Am{constructor(e){super(),this.indexPath_=e,(0,k.hu)(!jt(e)&&".priority"!==Wt(e),"Can't create PathIndex with empty path or .priority key")}extractChild(e){return e.getChild(this.indexPath_)}isDefinedOn(e){return!e.getChild(this.indexPath_).isEmpty()}compare(e,t){const r=this.extractChild(e.node),i=this.extractChild(t.node),a=r.compareTo(i);return 0===a?gl(e.name,t.name):a}makePost(e,t){const r=Xn(e),i=At.EMPTY_NODE.updateChild(this.indexPath_,r);return new zt(t,i)}maxPost(){const e=At.EMPTY_NODE.updateChild(this.indexPath_,dh);return new zt(Fa,e)}toString(){return ap(this.indexPath_,0).join("/")}}const h0=new class RS extends Am{compare(e,t){const r=e.node.compareTo(t.node);return 0===r?gl(e.name,t.name):r}isDefinedOn(e){return!0}indexedValueChanged(e,t){return!e.equals(t)}minPost(){return zt.MIN}maxPost(){return zt.MAX}makePost(e,t){const r=Xn(e);return new zt(t,r)}toString(){return".value"}},hh="-0123456789ABCDEFGHIJKLMNOPQRSTUVWXYZ_abcdefghijklmnopqrstuvwxyz",Nm=function(){let n=0;const e=[];return function(t){const r=t===n;let i;n=t;const a=new Array(8);for(i=7;i>=0;i--)a[i]=hh.charAt(t%64),t=Math.floor(t/64);(0,k.hu)(0===t,"Cannot push at time == 0");let l=a.join("");if(r){for(i=11;i>=0&&63===e[i];i--)e[i]=0;e[i]++}else for(i=0;i<12;i++)e[i]=Math.floor(64*Math.random());for(i=0;i<12;i++)l+=hh.charAt(e[i]);return(0,k.hu)(20===l.length,"nextPushId: Length should be 20."),l}}(),Wn=function(n){if(n===""+gm)return"-";const e=ih(n);if(null!=e)return""+(e+1);const t=new Array(n.length);for(let l=0;l<t.length;l++)t[l]=n.charAt(l);if(t.length<786)return t.push("-"),t.join("");let r=t.length-1;for(;r>=0&&"z"===t[r];)r--;if(-1===r)return Fa;const a=hh.charAt(hh.indexOf(t[r])+1);return t[r]=a,t.slice(0,r+1).join("")},MS=function(n){if(n===""+Uv)return Oa;const e=ih(n);if(null!=e)return""+(e-1);const t=new Array(n.length);for(let r=0;r<t.length;r++)t[r]=n.charAt(r);return"-"===t[t.length-1]?1===t.length?""+gm:(delete t[t.length-1],t.join("")):(t[t.length-1]=hh.charAt(hh.indexOf(t[t.length-1])-1),t.join("")+"z".repeat(786-t.length))};function f0(n){return{type:"value",snapshotNode:n}}function ph(n,e){return{type:"child_added",snapshotNode:e,childName:n}}function lp(n,e){return{type:"child_removed",snapshotNode:e,childName:n}}function gh(n,e,t){return{type:"child_changed",snapshotNode:e,childName:n,oldSnap:t}}class Pm{constructor(e){this.index_=e}updateChild(e,t,r,i,a,l){(0,k.hu)(e.isIndexed(this.index_),"A node must be indexed if only a child is updated");const h=e.getImmediateChild(t);return h.getChild(i).equals(r.getChild(i))&&h.isEmpty()===r.isEmpty()||(null!=l&&(r.isEmpty()?e.hasChild(t)?l.trackChildChange(lp(t,h)):(0,k.hu)(e.isLeafNode(),"A child remove without an old child only makes sense on a leaf node"):h.isEmpty()?l.trackChildChange(ph(t,r)):l.trackChildChange(gh(t,r,h))),e.isLeafNode()&&r.isEmpty())?e:e.updateImmediateChild(t,r).withIndex(this.index_)}updateFullNode(e,t,r){return null!=r&&(e.isLeafNode()||e.forEachChild(Tn,(i,a)=>{t.hasChild(i)||r.trackChildChange(lp(i,a))}),t.isLeafNode()||t.forEachChild(Tn,(i,a)=>{if(e.hasChild(i)){const l=e.getImmediateChild(i);l.equals(a)||r.trackChildChange(gh(i,a,l))}else r.trackChildChange(ph(i,a))})),t.withIndex(this.index_)}updatePriority(e,t){return e.isEmpty()?At.EMPTY_NODE:e.updatePriority(t)}filtersNodes(){return!1}getIndexedFilter(){return this}getIndex(){return this.index_}}class mh{constructor(e){this.indexedFilter_=new Pm(e.getIndex()),this.index_=e.getIndex(),this.startPost_=mh.getStartPost_(e),this.endPost_=mh.getEndPost_(e)}getStartPost(){return this.startPost_}getEndPost(){return this.endPost_}matches(e){return this.index_.compare(this.getStartPost(),e)<=0&&this.index_.compare(e,this.getEndPost())<=0}updateChild(e,t,r,i,a,l){return this.matches(new zt(t,r))||(r=At.EMPTY_NODE),this.indexedFilter_.updateChild(e,t,r,i,a,l)}updateFullNode(e,t,r){t.isLeafNode()&&(t=At.EMPTY_NODE);let i=t.withIndex(this.index_);i=i.updatePriority(At.EMPTY_NODE);const a=this;return t.forEachChild(Tn,(l,h)=>{a.matches(new zt(l,h))||(i=i.updateImmediateChild(l,At.EMPTY_NODE))}),this.indexedFilter_.updateFullNode(e,i,r)}updatePriority(e,t){return e}filtersNodes(){return!0}getIndexedFilter(){return this.indexedFilter_}getIndex(){return this.index_}static getStartPost_(e){if(e.hasStart()){const t=e.getIndexStartName();return e.getIndex().makePost(e.getIndexStartValue(),t)}return e.getIndex().minPost()}static getEndPost_(e){if(e.hasEnd()){const t=e.getIndexEndName();return e.getIndex().makePost(e.getIndexEndValue(),t)}return e.getIndex().maxPost()}}class NS{constructor(e){this.rangedFilter_=new mh(e),this.index_=e.getIndex(),this.limit_=e.getLimit(),this.reverse_=!e.isViewFromLeft()}updateChild(e,t,r,i,a,l){return this.rangedFilter_.matches(new zt(t,r))||(r=At.EMPTY_NODE),e.getImmediateChild(t).equals(r)?e:e.numChildren()<this.limit_?this.rangedFilter_.getIndexedFilter().updateChild(e,t,r,i,a,l):this.fullLimitUpdateChild_(e,t,r,a,l)}updateFullNode(e,t,r){let i;if(t.isLeafNode()||t.isEmpty())i=At.EMPTY_NODE.withIndex(this.index_);else if(2*this.limit_<t.numChildren()&&t.isIndexed(this.index_)){let a;i=At.EMPTY_NODE.withIndex(this.index_),a=this.reverse_?t.getReverseIteratorFrom(this.rangedFilter_.getEndPost(),this.index_):t.getIteratorFrom(this.rangedFilter_.getStartPost(),this.index_);let l=0;for(;a.hasNext()&&l<this.limit_;){const h=a.getNext();let _;if(_=this.reverse_?this.index_.compare(this.rangedFilter_.getStartPost(),h)<=0:this.index_.compare(h,this.rangedFilter_.getEndPost())<=0,!_)break;i=i.updateImmediateChild(h.name,h.node),l++}}else{let a,l,h,_;if(i=t.withIndex(this.index_),i=i.updatePriority(At.EMPTY_NODE),this.reverse_){_=i.getReverseIterator(this.index_),a=this.rangedFilter_.getEndPost(),l=this.rangedFilter_.getStartPost();const S=this.index_.getCompare();h=(N,L)=>S(L,N)}else _=i.getIterator(this.index_),a=this.rangedFilter_.getStartPost(),l=this.rangedFilter_.getEndPost(),h=this.index_.getCompare();let w=0,D=!1;for(;_.hasNext();){const S=_.getNext();!D&&h(a,S)<=0&&(D=!0),D&&w<this.limit_&&h(S,l)<=0?w++:i=i.updateImmediateChild(S.name,At.EMPTY_NODE)}}return this.rangedFilter_.getIndexedFilter().updateFullNode(e,i,r)}updatePriority(e,t){return e}filtersNodes(){return!0}getIndexedFilter(){return this.rangedFilter_.getIndexedFilter()}getIndex(){return this.index_}fullLimitUpdateChild_(e,t,r,i,a){let l;if(this.reverse_){const S=this.index_.getCompare();l=(N,L)=>S(L,N)}else l=this.index_.getCompare();const h=e;(0,k.hu)(h.numChildren()===this.limit_,"");const _=new zt(t,r),w=this.reverse_?h.getFirstChild(this.index_):h.getLastChild(this.index_),D=this.rangedFilter_.matches(_);if(h.hasChild(t)){const S=h.getImmediateChild(t);let N=i.getChildAfterChild(this.index_,w,this.reverse_);for(;null!=N&&(N.name===t||h.hasChild(N.name));)N=i.getChildAfterChild(this.index_,N,this.reverse_);const L=null==N?1:l(N,_);if(D&&!r.isEmpty()&&L>=0)return null!=a&&a.trackChildChange(gh(t,r,S)),h.updateImmediateChild(t,r);{null!=a&&a.trackChildChange(lp(t,S));const fe=h.updateImmediateChild(t,At.EMPTY_NODE);return null!=N&&this.rangedFilter_.matches(N)?(null!=a&&a.trackChildChange(ph(N.name,N.node)),fe.updateImmediateChild(N.name,N.node)):fe}}return r.isEmpty()?e:D&&l(w,_)>=0?(null!=a&&(a.trackChildChange(lp(w.name,w.node)),a.trackChildChange(ph(t,r))),h.updateImmediateChild(t,r).updateImmediateChild(w.name,At.EMPTY_NODE)):e}}class km{constructor(){this.limitSet_=!1,this.startSet_=!1,this.startNameSet_=!1,this.startAfterSet_=!1,this.endSet_=!1,this.endNameSet_=!1,this.endBeforeSet_=!1,this.limit_=0,this.viewFrom_="",this.indexStartValue_=null,this.indexStartName_="",this.indexEndValue_=null,this.indexEndName_="",this.index_=Tn}hasStart(){return this.startSet_}hasStartAfter(){return this.startAfterSet_}hasEndBefore(){return this.endBeforeSet_}isViewFromLeft(){return""===this.viewFrom_?this.startSet_:"l"===this.viewFrom_}getIndexStartValue(){return(0,k.hu)(this.startSet_,"Only valid if start has been set"),this.indexStartValue_}getIndexStartName(){return(0,k.hu)(this.startSet_,"Only valid if start has been set"),this.startNameSet_?this.indexStartName_:Oa}hasEnd(){return this.endSet_}getIndexEndValue(){return(0,k.hu)(this.endSet_,"Only valid if end has been set"),this.indexEndValue_}getIndexEndName(){return(0,k.hu)(this.endSet_,"Only valid if end has been set"),this.endNameSet_?this.indexEndName_:Fa}hasLimit(){return this.limitSet_}hasAnchoredLimit(){return this.limitSet_&&""!==this.viewFrom_}getLimit(){return(0,k.hu)(this.limitSet_,"Only valid if limit has been set"),this.limit_}getIndex(){return this.index_}loadsAllData(){return!(this.startSet_||this.endSet_||this.limitSet_)}isDefault(){return this.loadsAllData()&&this.index_===Tn}copy(){const e=new km;return e.limitSet_=this.limitSet_,e.limit_=this.limit_,e.startSet_=this.startSet_,e.indexStartValue_=this.indexStartValue_,e.startNameSet_=this.startNameSet_,e.indexStartName_=this.indexStartName_,e.endSet_=this.endSet_,e.indexEndValue_=this.indexEndValue_,e.endNameSet_=this.endNameSet_,e.indexEndName_=this.indexEndName_,e.index_=this.index_,e.viewFrom_=this.viewFrom_,e}}function p0(n,e,t){const r=n.copy();return r.startSet_=!0,void 0===e&&(e=null),r.indexStartValue_=e,null!=t?(r.startNameSet_=!0,r.indexStartName_=t):(r.startNameSet_=!1,r.indexStartName_=""),r}function _h(n,e,t){const r=n.copy();return r.endSet_=!0,void 0===e&&(e=null),r.indexEndValue_=e,void 0!==t?(r.endNameSet_=!0,r.indexEndName_=t):(r.endNameSet_=!1,r.indexEndName_=""),r}function dp(n,e){const t=n.copy();return t.index_=e,t}function g0(n){const e={};if(n.isDefault())return e;let t;return n.index_===Tn?t="$priority":n.index_===h0?t="$value":n.index_===Va?t="$key":((0,k.hu)(n.index_ instanceof mt,"Unrecognized index type!"),t=n.index_.toString()),e.orderBy=(0,k.Pz)(t),n.startSet_&&(e.startAt=(0,k.Pz)(n.indexStartValue_),n.startNameSet_&&(e.startAt+=","+(0,k.Pz)(n.indexStartName_))),n.endSet_&&(e.endAt=(0,k.Pz)(n.indexEndValue_),n.endNameSet_&&(e.endAt+=","+(0,k.Pz)(n.indexEndName_))),n.limitSet_&&(n.isViewFromLeft()?e.limitToFirst=n.limit_:e.limitToLast=n.limit_),e}function bI(n){const e={};if(n.startSet_&&(e.sp=n.indexStartValue_,n.startNameSet_&&(e.sn=n.indexStartName_)),n.endSet_&&(e.ep=n.indexEndValue_,n.endNameSet_&&(e.en=n.indexEndName_)),n.limitSet_){e.l=n.limit_;let t=n.viewFrom_;""===t&&(t=n.isViewFromLeft()?"l":"r"),e.vf=t}return n.index_!==Tn&&(e.i=n.index_.toString()),e}class vl extends aI{constructor(e,t,r,i){super(),this.repoInfo_=e,this.onDataUpdate_=t,this.authTokenProvider_=r,this.appCheckTokenProvider_=i,this.log_=hm("p:rest:"),this.listens_={}}reportStats(e){throw new Error("Method not implemented.")}static getListenId_(e,t){return void 0!==t?"tag$"+t:((0,k.hu)(e._queryParams.isDefault(),"should have a tag if it's not a default query."),e._path.toString())}listen(e,t,r,i){const a=e._path.toString();this.log_("Listen called for "+a+" "+e._queryIdentifier);const l=vl.getListenId_(e,r),h={};this.listens_[l]=h;const _=g0(e._queryParams);this.restRequest_(a+".json",_,(w,D)=>{let S=D;if(404===w&&(S=null,w=null),null===w&&this.onDataUpdate_(a,S,!1,r),(0,k.DV)(this.listens_,l)===h){let N;N=w?401===w?"permission_denied":"rest_error:"+w:"ok",i(N,null)}})}unlisten(e,t){const r=vl.getListenId_(e,t);delete this.listens_[r]}get(e){const t=g0(e._queryParams),r=e._path.toString(),i=new k.BH;return this.restRequest_(r+".json",t,(a,l)=>{let h=l;404===a&&(h=null,a=null),null===a?(this.onDataUpdate_(r,h,!1,null),i.resolve(h)):i.reject(new Error(h))}),i.promise}refreshAuthToken(e){}restRequest_(e,t={},r){return t.format="export",Promise.all([this.authTokenProvider_.getToken(!1),this.appCheckTokenProvider_.getToken(!1)]).then(([i,a])=>{i&&i.accessToken&&(t.auth=i.accessToken),a&&a.token&&(t.ac=a.token);const l=(this.repoInfo_.secure?"https://":"http://")+this.repoInfo_.host+e+"?ns="+this.repoInfo_.namespace+(0,k.xO)(t);this.log_("Sending REST request for "+l);const h=new XMLHttpRequest;h.onreadystatechange=()=>{if(r&&4===h.readyState){this.log_("REST Response for "+l+" received. status:",h.status,"response:",h.responseText);let _=null;if(h.status>=200&&h.status<300){try{_=(0,k.cI)(h.responseText)}catch(w){as("Failed to parse JSON response for "+l+": "+h.responseText)}r(null,_)}else 401!==h.status&&404!==h.status&&as("Got unsuccessful REST response for "+l+" Status: "+h.status),r(h.status);r=null}},h.open("GET",l,!0),h.send()})}}class hp{constructor(){this.rootNode_=At.EMPTY_NODE}getNode(e){return this.rootNode_.getChild(e)}updateSnapshot(e,t){this.rootNode_=this.rootNode_.updateChild(e,t)}}function Om(){return{value:null,children:new Map}}function yh(n,e,t){if(jt(e))n.value=t,n.children.clear();else if(null!==n.value)n.value=n.value.updateChild(e,t);else{const r=Wt(e);n.children.has(r)||n.children.set(r,Om()),yh(n.children.get(r),e=Dn(e),t)}}function m0(n,e){if(jt(e))return n.value=null,n.children.clear(),!0;if(null!==n.value){if(n.value.isLeafNode())return!1;{const t=n.value;return n.value=null,t.forEachChild(Tn,(r,i)=>{yh(n,new hn(r),i)}),m0(n,e)}}if(n.children.size>0){const t=Wt(e);return e=Dn(e),n.children.has(t)&&m0(n.children.get(t),e)&&n.children.delete(t),0===n.children.size}return!0}function Fm(n,e,t){null!==n.value?t(e,n.value):function DI(n,e){n.children.forEach((t,r)=>{e(r,t)})}(n,(r,i)=>{Fm(i,new hn(e.toString()+"/"+r),t)})}class TI{constructor(e){this.collection_=e,this.last_=null}get(){const e=this.collection_.get(),t=Object.assign({},e);return this.last_&&Fr(this.last_,(r,i)=>{t[r]=t[r]-i}),this.last_=e,t}}class LS{constructor(e,t){this.server_=t,this.statsToReport_={},this.statsListener_=new TI(e);const r=1e4+2e4*Math.random();Jf(this.reportStats_.bind(this),Math.floor(r))}reportStats_(){const e=this.statsListener_.get(),t={};let r=!1;Fr(e,(i,a)=>{a>0&&(0,k.r3)(this.statsToReport_,i)&&(t[i]=a,r=!0)}),r&&this.server_.reportStats(t),Jf(this.reportStats_.bind(this),Math.floor(2*Math.random()*3e5))}}var ia=(()=>{return(n=ia||(ia={}))[n.OVERWRITE=0]="OVERWRITE",n[n.MERGE=1]="MERGE",n[n.ACK_USER_WRITE=2]="ACK_USER_WRITE",n[n.LISTEN_COMPLETE=3]="LISTEN_COMPLETE",ia;var n})();function MI(n){return{fromUser:!1,fromServer:!0,queryId:n,tagged:!0}}class fp{constructor(e,t,r){this.path=e,this.affectedTree=t,this.revert=r,this.type=ia.ACK_USER_WRITE,this.source={fromUser:!0,fromServer:!1,queryId:null,tagged:!1}}operationForChild(e){if(jt(this.path)){if(null!=this.affectedTree.value)return(0,k.hu)(this.affectedTree.children.isEmpty(),"affectedTree should not have overlapping affected paths."),this;{const t=this.affectedTree.subtree(new hn(e));return new fp(an(),t,this.revert)}}return(0,k.hu)(Wt(this.path)===e,"operationForChild called for unrelated child."),new fp(Dn(this.path),this.affectedTree,this.revert)}}class wl{constructor(e,t){this.source=e,this.path=t,this.type=ia.LISTEN_COMPLETE}operationForChild(e){return jt(this.path)?new wl(this.source,an()):new wl(this.source,Dn(this.path))}}class Pc{constructor(e,t,r){this.source=e,this.path=t,this.snap=r,this.type=ia.OVERWRITE}operationForChild(e){return jt(this.path)?new Pc(this.source,an(),this.snap.getImmediateChild(e)):new Pc(this.source,Dn(this.path),this.snap)}}class vh{constructor(e,t,r){this.source=e,this.path=t,this.children=r,this.type=ia.MERGE}operationForChild(e){if(jt(this.path)){const t=this.children.subtree(new hn(e));return t.isEmpty()?null:t.value?new Pc(this.source,an(),t.value):new vh(this.source,an(),t)}return(0,k.hu)(Wt(this.path)===e,"Can't get a merge for a child not on the path of the operation"),new vh(this.source,Dn(this.path),this.children)}toString(){return"Operation("+this.path+": "+this.source.toString()+" merge: "+this.children.toString()+")"}}class gu{constructor(e,t,r){this.node_=e,this.fullyInitialized_=t,this.filtered_=r}isFullyInitialized(){return this.fullyInitialized_}isFiltered(){return this.filtered_}isCompleteForPath(e){if(jt(e))return this.isFullyInitialized()&&!this.filtered_;const t=Wt(e);return this.isCompleteForChild(t)}isCompleteForChild(e){return this.isFullyInitialized()&&!this.filtered_||this.node_.hasChild(e)}getNode(){return this.node_}}class pp{constructor(e){this.query_=e,this.index_=this.query_._queryParams.getIndex()}}function gp(n,e,t,r,i,a){const l=r.filter(h=>h.type===t);l.sort((h,_)=>function BS(n,e,t){if(null==e.childName||null==t.childName)throw(0,k.g5)("Should only compare child_ events.");const r=new zt(e.childName,e.snapshotNode),i=new zt(t.childName,t.snapshotNode);return n.index_.compare(r,i)}(n,h,_)),l.forEach(h=>{const _=function US(n,e,t){return"value"===e.type||"child_removed"===e.type||(e.prevName=t.getPredecessorChildName(e.childName,e.snapshotNode,n.index_)),e}(n,h,a);i.forEach(w=>{w.respondsTo(h.type)&&e.push(w.createEvent(_,n.query_))})})}function Lm(n,e){return{eventCache:n,serverCache:e}}function wh(n,e,t,r){return Lm(new gu(e,t,r),n.serverCache)}function NI(n,e,t,r){return Lm(n.eventCache,new gu(e,t,r))}function Vm(n){return n.eventCache.isFullyInitialized()?n.eventCache.getNode():null}function Do(n){return n.serverCache.isFullyInitialized()?n.serverCache.getNode():null}let _0;class An{constructor(e,t=(()=>(_0||(_0=new ls(fm)),_0))()){this.value=e,this.children=t}static fromObject(e){let t=new An(null);return Fr(e,(r,i)=>{t=t.set(new hn(r),i)}),t}isEmpty(){return null===this.value&&this.children.isEmpty()}findRootMostMatchingPathAndValue(e,t){if(null!=this.value&&t(this.value))return{path:an(),value:this.value};if(jt(e))return null;{const r=Wt(e),i=this.children.get(r);if(null!==i){const a=i.findRootMostMatchingPathAndValue(Dn(e),t);return null!=a?{path:Un(new hn(r),a.path),value:a.value}:null}return null}}findRootMostValueAndPath(e){return this.findRootMostMatchingPathAndValue(e,()=>!0)}subtree(e){if(jt(e))return this;{const t=Wt(e),r=this.children.get(t);return null!==r?r.subtree(Dn(e)):new An(null)}}set(e,t){if(jt(e))return new An(t,this.children);{const r=Wt(e),a=(this.children.get(r)||new An(null)).set(Dn(e),t),l=this.children.insert(r,a);return new An(this.value,l)}}remove(e){if(jt(e))return this.children.isEmpty()?new An(null):new An(null,this.children);{const t=Wt(e),r=this.children.get(t);if(r){const i=r.remove(Dn(e));let a;return a=i.isEmpty()?this.children.remove(t):this.children.insert(t,i),null===this.value&&a.isEmpty()?new An(null):new An(this.value,a)}return this}}get(e){if(jt(e))return this.value;{const t=Wt(e),r=this.children.get(t);return r?r.get(Dn(e)):null}}setTree(e,t){if(jt(e))return t;{const r=Wt(e),a=(this.children.get(r)||new An(null)).setTree(Dn(e),t);let l;return l=a.isEmpty()?this.children.remove(r):this.children.insert(r,a),new An(this.value,l)}}fold(e){return this.fold_(an(),e)}fold_(e,t){const r={};return this.children.inorderTraversal((i,a)=>{r[i]=a.fold_(Un(e,i),t)}),t(e,this.value,r)}findOnPath(e,t){return this.findOnPath_(e,an(),t)}findOnPath_(e,t,r){const i=!!this.value&&r(t,this.value);if(i)return i;if(jt(e))return null;{const a=Wt(e),l=this.children.get(a);return l?l.findOnPath_(Dn(e),Un(t,a),r):null}}foreachOnPath(e,t){return this.foreachOnPath_(e,an(),t)}foreachOnPath_(e,t,r){if(jt(e))return this;{this.value&&r(t,this.value);const i=Wt(e),a=this.children.get(i);return a?a.foreachOnPath_(Dn(e),Un(t,i),r):new An(null)}}foreach(e){this.foreach_(an(),e)}foreach_(e,t){this.children.inorderTraversal((r,i)=>{i.foreach_(Un(e,r),t)}),this.value&&t(e,this.value)}foreachChild(e){this.children.inorderTraversal((t,r)=>{r.value&&e(t,r.value)})}}class To{constructor(e){this.writeTree_=e}static empty(){return new To(new An(null))}}function mp(n,e,t){if(jt(e))return new To(new An(t));{const r=n.writeTree_.findRootMostValueAndPath(e);if(null!=r){const i=r.path;let a=r.value;const l=mi(i,e);return a=a.updateChild(l,t),new To(n.writeTree_.set(i,a))}{const i=new An(t),a=n.writeTree_.setTree(e,i);return new To(a)}}}function Um(n,e,t){let r=n;return Fr(t,(i,a)=>{r=mp(r,Un(e,i),a)}),r}function kI(n,e){if(jt(e))return To.empty();{const t=n.writeTree_.setTree(e,new An(null));return new To(t)}}function _p(n,e){return null!=kc(n,e)}function kc(n,e){const t=n.writeTree_.findRootMostValueAndPath(e);return null!=t?n.writeTree_.get(t.path).getChild(mi(t.path,e)):null}function y0(n){const e=[],t=n.writeTree_.value;return null!=t?t.isLeafNode()||t.forEachChild(Tn,(r,i)=>{e.push(new zt(r,i))}):n.writeTree_.children.inorderTraversal((r,i)=>{null!=i.value&&e.push(new zt(r,i.value))}),e}function mu(n,e){if(jt(e))return n;{const t=kc(n,e);return new To(null!=t?new An(t):n.writeTree_.subtree(e))}}function v0(n){return n.writeTree_.isEmpty()}function Eh(n,e){return OI(an(),n.writeTree_,e)}function OI(n,e,t){if(null!=e.value)return t.updateChild(n,e.value);{let r=null;return e.children.inorderTraversal((i,a)=>{".priority"===i?((0,k.hu)(null!==a.value,"Priority writes must always be leaf nodes"),r=a.value):t=OI(Un(n,i),a,t)}),!t.getChild(n).isEmpty()&&null!==r&&(t=t.updateChild(Un(n,".priority"),r)),t}}function Ch(n,e){return $I(e,n)}function GS(n,e){if(n.snap)return Ns(n.path,e);for(const t in n.children)if(n.children.hasOwnProperty(t)&&Ns(Un(n.path,t),e))return!0;return!1}function qS(n){return n.visible}function LI(n,e,t){let r=To.empty();for(let i=0;i<n.length;++i){const a=n[i];if(e(a)){const l=a.path;let h;if(a.snap)Ns(t,l)?(h=mi(t,l),r=mp(r,h,a.snap)):Ns(l,t)&&(h=mi(l,t),r=mp(r,an(),a.snap.getChild(h)));else{if(!a.children)throw(0,k.g5)("WriteRecord should have .snap or .children");if(Ns(t,l))h=mi(t,l),r=Um(r,h,a.children);else if(Ns(l,t))if(h=mi(l,t),jt(h))r=Um(r,an(),a.children);else{const _=(0,k.DV)(a.children,Wt(h));if(_){const w=_.getChild(Dn(h));r=mp(r,an(),w)}}}}}return r}function VI(n,e,t,r,i){if(r||i){const a=mu(n.visibleWrites,e);return!i&&v0(a)?t:i||null!=t||_p(a,an())?Eh(LI(n.allWrites,function(w){return(w.visible||i)&&(!r||!~r.indexOf(w.writeId))&&(Ns(w.path,e)||Ns(e,w.path))},e),t||At.EMPTY_NODE):null}{const a=kc(n.visibleWrites,e);if(null!=a)return a;{const l=mu(n.visibleWrites,e);return v0(l)?t:null!=t||_p(l,an())?Eh(l,t||At.EMPTY_NODE):null}}}function Bm(n,e,t,r){return VI(n.writeTree,n.treePath,e,t,r)}function w0(n,e){return function zS(n,e,t){let r=At.EMPTY_NODE;const i=kc(n.visibleWrites,e);if(i)return i.isLeafNode()||i.forEachChild(Tn,(a,l)=>{r=r.updateImmediateChild(a,l)}),r;if(t){const a=mu(n.visibleWrites,e);return t.forEachChild(Tn,(l,h)=>{const _=Eh(mu(a,new hn(l)),h);r=r.updateImmediateChild(l,_)}),y0(a).forEach(l=>{r=r.updateImmediateChild(l.name,l.node)}),r}return y0(mu(n.visibleWrites,e)).forEach(l=>{r=r.updateImmediateChild(l.name,l.node)}),r}(n.writeTree,n.treePath,e)}function HI(n,e,t,r){return function UI(n,e,t,r,i){(0,k.hu)(r||i,"Either existingEventSnap or existingServerSnap must exist");const a=Un(e,t);if(_p(n.visibleWrites,a))return null;{const l=mu(n.visibleWrites,a);return v0(l)?i.getChild(t):Eh(l,i.getChild(t))}}(n.writeTree,n.treePath,e,t,r)}function Ih(n,e){return function KS(n,e){return kc(n.visibleWrites,e)}(n.writeTree,Un(n.treePath,e))}function jm(n,e,t){return function BI(n,e,t,r){const i=Un(e,t),a=kc(n.visibleWrites,i);return null!=a?a:r.isCompleteForChild(t)?Eh(mu(n.visibleWrites,i),r.getNode().getImmediateChild(t)):null}(n.writeTree,n.treePath,e,t)}function Hm(n,e){return $I(Un(n.treePath,e),n.writeTree)}function $I(n,e){return{treePath:n,writeTree:e}}class YS{constructor(){this.changeMap=new Map}trackChildChange(e){const t=e.type,r=e.childName;(0,k.hu)("child_added"===t||"child_changed"===t||"child_removed"===t,"Only child changes supported for tracking"),(0,k.hu)(".priority"!==r,"Only non-priority child changes can be tracked.");const i=this.changeMap.get(r);if(i){const a=i.type;if("child_added"===t&&"child_removed"===a)this.changeMap.set(r,gh(r,e.snapshotNode,i.snapshotNode));else if("child_removed"===t&&"child_added"===a)this.changeMap.delete(r);else if("child_removed"===t&&"child_changed"===a)this.changeMap.set(r,lp(r,i.oldSnap));else if("child_changed"===t&&"child_added"===a)this.changeMap.set(r,ph(r,e.snapshotNode));else{if("child_changed"!==t||"child_changed"!==a)throw(0,k.g5)("Illegal combination of changes: "+e+" occurred after "+i);this.changeMap.set(r,gh(r,e.snapshotNode,i.oldSnap))}}else this.changeMap.set(r,e)}getChanges(){return Array.from(this.changeMap.values())}}const GI=new class C0{getCompleteChild(e){return null}getChildAfterChild(e,t,r){return null}};class $m{constructor(e,t,r=null){this.writes_=e,this.viewCache_=t,this.optCompleteServerCache_=r}getCompleteChild(e){const t=this.viewCache_.eventCache;if(t.isCompleteForChild(e))return t.getNode().getImmediateChild(e);{const r=null!=this.optCompleteServerCache_?new gu(this.optCompleteServerCache_,!0,!1):this.viewCache_.serverCache;return jm(this.writes_,e,r)}}getChildAfterChild(e,t,r){const i=null!=this.optCompleteServerCache_?this.optCompleteServerCache_:Do(this.viewCache_),a=function E0(n,e,t,r,i,a){return function ZS(n,e,t,r,i,a,l){let h;const _=mu(n.visibleWrites,e),w=kc(_,an());if(null!=w)h=w;else{if(null==t)return[];h=Eh(_,t)}if(h=h.withIndex(l),h.isEmpty()||h.isLeafNode())return[];{const D=[],S=l.getCompare(),N=a?h.getReverseIteratorFrom(r,l):h.getIteratorFrom(r,l);let L=N.getNext();for(;L&&D.length<i;)0!==S(L,r)&&D.push(L),L=N.getNext();return D}}(n.writeTree,n.treePath,e,t,r,i,a)}(this.writes_,i,t,1,r,e);return 0===a.length?null:a[0]}}function XS(n,e,t,r,i,a){const l=e.eventCache;if(null!=Ih(r,t))return e;{let h,_;if(jt(t))if((0,k.hu)(e.serverCache.isFullyInitialized(),"If change path is empty, we must have complete server data"),e.serverCache.isFiltered()){const w=Do(e),S=w0(r,w instanceof At?w:At.EMPTY_NODE);h=n.filter.updateFullNode(e.eventCache.getNode(),S,a)}else{const w=Bm(r,Do(e));h=n.filter.updateFullNode(e.eventCache.getNode(),w,a)}else{const w=Wt(t);if(".priority"===w){(0,k.hu)(1===_l(t),"Can't have a priority with additional path components");const D=l.getNode();_=e.serverCache.getNode();const S=HI(r,t,D,_);h=null!=S?n.filter.updatePriority(D,S):l.getNode()}else{const D=Dn(t);let S;if(l.isCompleteForChild(w)){_=e.serverCache.getNode();const N=HI(r,t,l.getNode(),_);S=null!=N?l.getNode().getImmediateChild(w).updateChild(D,N):l.getNode().getImmediateChild(w)}else S=jm(r,w,e.serverCache);h=null!=S?n.filter.updateChild(l.getNode(),w,S,D,i,a):l.getNode()}}return wh(e,h,l.isFullyInitialized()||jt(t),n.filter.filtersNodes())}}function Gm(n,e,t,r,i,a,l,h){const _=e.serverCache;let w;const D=l?n.filter:n.filter.getIndexedFilter();if(jt(t))w=D.updateFullNode(_.getNode(),r,null);else if(D.filtersNodes()&&!_.isFiltered()){const L=_.getNode().updateChild(t,r);w=D.updateFullNode(_.getNode(),L,null)}else{const L=Wt(t);if(!_.isCompleteForPath(t)&&_l(t)>1)return e;const j=Dn(t),Me=_.getNode().getImmediateChild(L).updateChild(j,r);w=".priority"===L?D.updatePriority(_.getNode(),Me):D.updateChild(_.getNode(),L,Me,j,GI,null)}const S=NI(e,w,_.isFullyInitialized()||jt(t),D.filtersNodes());return XS(n,S,t,i,new $m(i,S,a),h)}function bh(n,e,t,r,i,a,l){const h=e.eventCache;let _,w;const D=new $m(i,e,a);if(jt(t))w=n.filter.updateFullNode(e.eventCache.getNode(),r,l),_=wh(e,w,!0,n.filter.filtersNodes());else{const S=Wt(t);if(".priority"===S)w=n.filter.updatePriority(e.eventCache.getNode(),r),_=wh(e,w,h.isFullyInitialized(),h.isFiltered());else{const N=Dn(t),L=h.getNode().getImmediateChild(S);let j;if(jt(N))j=r;else{const fe=D.getCompleteChild(S);j=null!=fe?".priority"===sp(N)&&fe.getChild(Xv(N)).isEmpty()?fe:fe.updateChild(N,r):At.EMPTY_NODE}_=L.equals(j)?e:wh(e,n.filter.updateChild(h.getNode(),S,j,N,D,l),h.isFullyInitialized(),n.filter.filtersNodes())}}return _}function zI(n,e){return n.eventCache.isCompleteForChild(e)}function Th(n,e,t){return t.foreach((r,i)=>{e=e.updateChild(r,i)}),e}function I0(n,e,t,r,i,a,l,h){if(e.serverCache.getNode().isEmpty()&&!e.serverCache.isFullyInitialized())return e;let w,_=e;w=jt(t)?r:new An(null).setTree(t,r);const D=e.serverCache.getNode();return w.children.inorderTraversal((S,N)=>{if(D.hasChild(S)){const j=Th(0,e.serverCache.getNode().getImmediateChild(S),N);_=Gm(n,_,new hn(S),j,i,a,l,h)}}),w.children.inorderTraversal((S,N)=>{const L=!e.serverCache.isCompleteForChild(S)&&void 0===N.value;if(!D.hasChild(S)&&!L){const fe=Th(0,e.serverCache.getNode().getImmediateChild(S),N);_=Gm(n,_,new hn(S),fe,i,a,l,h)}}),_}class tA{constructor(e,t){this.query_=e,this.eventRegistrations_=[];const r=this.query_._queryParams,i=new Pm(r.getIndex()),a=function PS(n){return n.loadsAllData()?new Pm(n.getIndex()):n.hasLimit()?new NS(n):new mh(n)}(r);this.processor_=function QS(n){return{filter:n}}(a);const l=t.serverCache,h=t.eventCache,_=i.updateFullNode(At.EMPTY_NODE,l.getNode(),null),w=a.updateFullNode(At.EMPTY_NODE,h.getNode(),null),D=new gu(_,l.isFullyInitialized(),i.filtersNodes()),S=new gu(w,h.isFullyInitialized(),a.filtersNodes());this.viewCache_=Lm(S,D),this.eventGenerator_=new pp(this.query_)}get query(){return this.query_}}function ZI(n,e){const t=Do(n.viewCache_);return t&&(n.query._queryParams.loadsAllData()||!jt(e)&&!t.getImmediateChild(Wt(e)).isEmpty())?t.getChild(e):null}function b0(n){return 0===n.eventRegistrations_.length}function yp(n,e,t){const r=[];if(t){(0,k.hu)(null==e,"A cancel should cancel all event registrations.");const i=n.query._path;n.eventRegistrations_.forEach(a=>{const l=a.createCancelEvent(t,i);l&&r.push(l)})}if(e){let i=[];for(let a=0;a<n.eventRegistrations_.length;++a){const l=n.eventRegistrations_[a];if(l.matches(e)){if(e.hasAnyCallback()){i=i.concat(n.eventRegistrations_.slice(a+1));break}}else i.push(l)}n.eventRegistrations_=i}else n.eventRegistrations_=[];return r}function Sh(n,e,t,r){e.type===ia.MERGE&&null!==e.source.queryId&&((0,k.hu)(Do(n.viewCache_),"We should always have a full cache before handling merges"),(0,k.hu)(Vm(n.viewCache_),"Missing event cache, even though we have a server cache"));const i=n.viewCache_,a=function JS(n,e,t,r,i){const a=new YS;let l,h;if(t.type===ia.OVERWRITE){const w=t;w.source.fromUser?l=bh(n,e,w.path,w.snap,r,i,a):((0,k.hu)(w.source.fromServer,"Unknown source."),h=w.source.tagged||e.serverCache.isFiltered()&&!jt(w.path),l=Gm(n,e,w.path,w.snap,r,i,h,a))}else if(t.type===ia.MERGE){const w=t;w.source.fromUser?l=function Dh(n,e,t,r,i,a,l){let h=e;return r.foreach((_,w)=>{const D=Un(t,_);zI(e,Wt(D))&&(h=bh(n,h,D,w,i,a,l))}),r.foreach((_,w)=>{const D=Un(t,_);zI(e,Wt(D))||(h=bh(n,h,D,w,i,a,l))}),h}(n,e,w.path,w.children,r,i,a):((0,k.hu)(w.source.fromServer,"Unknown source."),h=w.source.tagged||e.serverCache.isFiltered(),l=I0(n,e,w.path,w.children,r,i,h,a))}else if(t.type===ia.ACK_USER_WRITE){const w=t;l=w.revert?function eA(n,e,t,r,i,a){let l;if(null!=Ih(r,t))return e;{const h=new $m(r,e,i),_=e.eventCache.getNode();let w;if(jt(t)||".priority"===Wt(t)){let D;if(e.serverCache.isFullyInitialized())D=Bm(r,Do(e));else{const S=e.serverCache.getNode();(0,k.hu)(S instanceof At,"serverChildren would be complete if leaf node"),D=w0(r,S)}D=D,w=n.filter.updateFullNode(_,D,a)}else{const D=Wt(t);let S=jm(r,D,e.serverCache);null==S&&e.serverCache.isCompleteForChild(D)&&(S=_.getImmediateChild(D)),w=null!=S?n.filter.updateChild(_,D,S,Dn(t),h,a):e.eventCache.getNode().hasChild(D)?n.filter.updateChild(_,D,At.EMPTY_NODE,Dn(t),h,a):_,w.isEmpty()&&e.serverCache.isFullyInitialized()&&(l=Bm(r,Do(e)),l.isLeafNode()&&(w=n.filter.updateFullNode(w,l,a)))}return l=e.serverCache.isFullyInitialized()||null!=Ih(r,an()),wh(e,w,l,n.filter.filtersNodes())}}(n,e,w.path,r,i,a):function fP(n,e,t,r,i,a,l){if(null!=Ih(i,t))return e;const h=e.serverCache.isFiltered(),_=e.serverCache;if(null!=r.value){if(jt(t)&&_.isFullyInitialized()||_.isCompleteForPath(t))return Gm(n,e,t,_.getNode().getChild(t),i,a,h,l);if(jt(t)){let w=new An(null);return _.getNode().forEachChild(Va,(D,S)=>{w=w.set(new hn(D),S)}),I0(n,e,t,w,i,a,h,l)}return e}{let w=new An(null);return r.foreach((D,S)=>{const N=Un(t,D);_.isCompleteForPath(N)&&(w=w.set(D,_.getNode().getChild(N)))}),I0(n,e,t,w,i,a,h,l)}}(n,e,w.path,w.affectedTree,r,i,a)}else{if(t.type!==ia.LISTEN_COMPLETE)throw(0,k.g5)("Unknown operation type: "+t.type);l=function KI(n,e,t,r,i){const a=e.serverCache;return XS(n,NI(e,a.getNode(),a.isFullyInitialized()||jt(t),a.isFiltered()),t,r,GI,i)}(n,e,t.path,r,a)}const _=a.getChanges();return function qI(n,e,t){const r=e.eventCache;if(r.isFullyInitialized()){const i=r.getNode().isLeafNode()||r.getNode().isEmpty(),a=Vm(n);(t.length>0||!n.eventCache.isFullyInitialized()||i&&!r.getNode().equals(a)||!r.getNode().getPriority().equals(a.getPriority()))&&t.push(f0(Vm(e)))}}(e,l,_),{viewCache:l,changes:_}}(n.processor_,i,e,t,r);return function WI(n,e){(0,k.hu)(e.eventCache.getNode().isIndexed(n.filter.getIndex()),"Event snap not indexed"),(0,k.hu)(e.serverCache.getNode().isIndexed(n.filter.getIndex()),"Server snap not indexed")}(n.processor_,a.viewCache),(0,k.hu)(a.viewCache.serverCache.isFullyInitialized()||!i.serverCache.isFullyInitialized(),"Once a server snap is complete, it should never go back"),n.viewCache_=a.viewCache,T0(n,a.changes,a.viewCache.eventCache.getNode(),null)}function T0(n,e,t,r){return function VS(n,e,t,r){const i=[],a=[];return e.forEach(l=>{"child_changed"===l.type&&n.index_.indexedValueChanged(l.oldSnap,l.snapshotNode)&&a.push(function CI(n,e){return{type:"child_moved",snapshotNode:e,childName:n}}(l.childName,l.snapshotNode))}),gp(n,i,"child_removed",e,r,t),gp(n,i,"child_added",e,r,t),gp(n,i,"child_moved",a,r,t),gp(n,i,"child_changed",e,r,t),gp(n,i,"value",e,r,t),i}(n.eventGenerator_,e,t,r?[r]:n.eventRegistrations_)}let vp,wp;class YI{constructor(){this.views=new Map}}function QI(n,e,t,r){const i=e.source.queryId;if(null!==i){const a=n.views.get(i);return(0,k.hu)(null!=a,"SyncTree gave us an op for an invalid query."),Sh(a,e,t,r)}{let a=[];for(const l of n.views.values())a=a.concat(Sh(l,e,t,r));return a}}function JI(n,e,t,r,i){const l=n.views.get(e._queryIdentifier);if(!l){let h=Bm(t,i?r:null),_=!1;h?_=!0:r instanceof At?(h=w0(t,r),_=!1):(h=At.EMPTY_NODE,_=!1);const w=Lm(new gu(h,_,!1),new gu(r,i,!1));return new tA(e,w)}return l}function A0(n){const e=[];for(const t of n.views.values())t.query._queryParams.loadsAllData()||e.push(t);return e}function Ps(n,e){let t=null;for(const r of n.views.values())t=t||ZI(r,e);return t}function uA(n,e){return e._queryParams.loadsAllData()?R0(n):n.views.get(e._queryIdentifier)}function x0(n,e){return null!=uA(n,e)}function El(n){return null!=R0(n)}function R0(n){for(const e of n.views.values())if(e.query._queryParams.loadsAllData())return e;return null}let M0=1;class eb{constructor(e){this.listenProvider_=e,this.syncPointTree_=new An(null),this.pendingWriteTree_=function jI(){return{visibleWrites:To.empty(),allWrites:[],lastWriteId:-1}}(),this.tagToQueryMap=new Map,this.queryToTagMap=new Map}}function N0(n,e,t,r,i){return function jS(n,e,t,r,i){(0,k.hu)(r>n.lastWriteId,"Stacking an older write on top of newer ones"),void 0===i&&(i=!0),n.allWrites.push({path:e,snap:t,writeId:r,visible:i}),i&&(n.visibleWrites=mp(n.visibleWrites,e,t)),n.lastWriteId=r}(n.pendingWriteTree_,e,t,r,i),i?Oc(n,new Pc({fromUser:!0,fromServer:!1,queryId:null,tagged:!1},e,t)):[]}function Cl(n,e,t=!1){const r=function HS(n,e){for(let t=0;t<n.allWrites.length;t++){const r=n.allWrites[t];if(r.writeId===e)return r}return null}(n.pendingWriteTree_,e);if(function $S(n,e){const t=n.allWrites.findIndex(h=>h.writeId===e);(0,k.hu)(t>=0,"removeWrite called with nonexistent writeId.");const r=n.allWrites[t];n.allWrites.splice(t,1);let i=r.visible,a=!1,l=n.allWrites.length-1;for(;i&&l>=0;){const h=n.allWrites[l];h.visible&&(l>=t&&GS(h,r.path)?i=!1:Ns(r.path,h.path)&&(a=!0)),l--}return!!i&&(a?(function WS(n){n.visibleWrites=LI(n.allWrites,qS,an()),n.lastWriteId=n.allWrites.length>0?n.allWrites[n.allWrites.length-1].writeId:-1}(n),!0):(r.snap?n.visibleWrites=kI(n.visibleWrites,r.path):Fr(r.children,_=>{n.visibleWrites=kI(n.visibleWrites,Un(r.path,_))}),!0))}(n.pendingWriteTree_,e)){let a=new An(null);return null!=r.snap?a=a.set(an(),!0):Fr(r.children,l=>{a=a.set(new hn(l),!0)}),Oc(n,new fp(r.path,a,t))}return[]}function Ep(n,e,t){return Oc(n,new Pc({fromUser:!1,fromServer:!0,queryId:null,tagged:!1},e,t))}function P0(n,e,t,r){const i=e._path,a=n.syncPointTree_.get(i);let l=[];if(a&&("default"===e._queryIdentifier||x0(a,e))){const h=function Ah(n,e,t,r){const i=e._queryIdentifier,a=[];let l=[];const h=El(n);if("default"===i)for(const[_,w]of n.views.entries())l=l.concat(yp(w,t,r)),b0(w)&&(n.views.delete(_),w.query._queryParams.loadsAllData()||a.push(w.query));else{const _=n.views.get(i);_&&(l=l.concat(yp(_,t,r)),b0(_)&&(n.views.delete(i),_.query._queryParams.loadsAllData()||a.push(_.query)))}return h&&!El(n)&&a.push(new(function S0(){return(0,k.hu)(vp,"Reference.ts has not been loaded"),vp}())(e._repo,e._path)),{removed:a,events:l}}(a,e,t,r);(function oA(n){return 0===n.views.size})(a)&&(n.syncPointTree_=n.syncPointTree_.remove(i));const _=h.removed;l=h.events;const w=-1!==_.findIndex(S=>S._queryParams.loadsAllData()),D=n.syncPointTree_.findOnPath(i,(S,N)=>El(N));if(w&&!D){const S=n.syncPointTree_.subtree(i);if(!S.isEmpty()){const N=function bp(n){return n.fold((e,t,r)=>{if(t&&El(t))return[R0(t)];{let i=[];return t&&(i=A0(t)),Fr(r,(a,l)=>{i=i.concat(l)}),i}})}(S);for(let L=0;L<N.length;++L){const j=N[L],fe=j.query,Me=rb(n,j);n.listenProvider_.startListening(Dp(fe),Wm(n,fe),Me.hashFn,Me.onComplete)}}}!D&&_.length>0&&!r&&(w?n.listenProvider_.stopListening(Dp(e),null):_.forEach(S=>{const N=n.queryToTagMap.get(qm(S));n.listenProvider_.stopListening(Dp(S),N)})),function U0(n,e){for(let t=0;t<e.length;++t){const r=e[t];if(!r._queryParams.loadsAllData()){const i=qm(r),a=n.queryToTagMap.get(i);n.queryToTagMap.delete(i),n.tagToQueryMap.delete(a)}}}(n,_)}return l}function k0(n,e,t){const r=e._path;let i=null,a=!1;n.syncPointTree_.foreachOnPath(r,(S,N)=>{const L=mi(S,r);i=i||Ps(N,L),a=a||El(N)});let h,l=n.syncPointTree_.get(r);l?(a=a||El(l),i=i||Ps(l,an())):(l=new YI,n.syncPointTree_=n.syncPointTree_.set(r,l)),null!=i?h=!0:(h=!1,i=At.EMPTY_NODE,n.syncPointTree_.subtree(r).foreachChild((N,L)=>{const j=Ps(L,an());j&&(i=i.updateImmediateChild(N,j))}));const _=x0(l,e);if(!_&&!e._queryParams.loadsAllData()){const S=qm(e);(0,k.hu)(!n.queryToTagMap.has(S),"View does not exist, but we have a tag");const N=function Ba(){return M0++}();n.queryToTagMap.set(S,N),n.tagToQueryMap.set(N,S)}let D=function aA(n,e,t,r,i,a){const l=JI(n,e,r,i,a);return n.views.has(e._queryIdentifier)||n.views.set(e._queryIdentifier,l),function D0(n,e){n.eventRegistrations_.push(e)}(l,t),function iA(n,e){const t=n.viewCache_.eventCache,r=[];return t.getNode().isLeafNode()||t.getNode().forEachChild(Tn,(a,l)=>{r.push(ph(a,l))}),t.isFullyInitialized()&&r.push(f0(t.getNode())),T0(n,r,t.getNode(),e)}(l,t)}(l,e,t,Ch(n.pendingWriteTree_,r),i,h);if(!_&&!a){const S=uA(l,e);D=D.concat(function pA(n,e,t){const r=e._path,i=Wm(n,e),a=rb(n,t),l=n.listenProvider_.startListening(Dp(e),i,a.hashFn,a.onComplete),h=n.syncPointTree_.subtree(r);if(i)(0,k.hu)(!El(h.value),"If we're adding a query, it shouldn't be shadowed");else{const _=h.fold((w,D,S)=>{if(!jt(w)&&D&&El(D))return[R0(D).query];{let N=[];return D&&(N=N.concat(A0(D).map(L=>L.query))),Fr(S,(L,j)=>{N=N.concat(j)}),N}});for(let w=0;w<_.length;++w){const D=_[w];n.listenProvider_.stopListening(Dp(D),Wm(n,D))}}return l}(n,e,S))}return D}function Ip(n,e,t){const i=n.pendingWriteTree_,a=n.syncPointTree_.findOnPath(e,(l,h)=>{const w=Ps(h,mi(l,e));if(w)return w});return VI(i,e,a,t,!0)}function Oc(n,e){return O0(e,n.syncPointTree_,null,Ch(n.pendingWriteTree_,an()))}function O0(n,e,t,r){if(jt(n.path))return nb(n,e,t,r);{const i=e.get(an());null==t&&null!=i&&(t=Ps(i,an()));let a=[];const l=Wt(n.path),h=n.operationForChild(l),_=e.children.get(l);if(_&&h){const w=t?t.getImmediateChild(l):null,D=Hm(r,l);a=a.concat(O0(h,_,w,D))}return i&&(a=a.concat(QI(i,n,r,t))),a}}function nb(n,e,t,r){const i=e.get(an());null==t&&null!=i&&(t=Ps(i,an()));let a=[];return e.children.inorderTraversal((l,h)=>{const _=t?t.getImmediateChild(l):null,w=Hm(r,l),D=n.operationForChild(l);D&&(a=a.concat(nb(D,h,_,w)))}),i&&(a=a.concat(QI(i,n,r,t))),a}function rb(n,e){const t=e.query,r=Wm(n,t);return{hashFn:()=>(function nA(n){return n.viewCache_.serverCache.getNode()}(e)||At.EMPTY_NODE).hash(),onComplete:i=>{if("ok"===i)return r?function hA(n,e,t){const r=F0(n,t);if(r){const i=L0(r),a=i.path,l=i.queryId,h=mi(a,e);return V0(n,a,new wl(MI(l),h))}return[]}(n,t._path,r):function dA(n,e){return Oc(n,new wl({fromUser:!1,fromServer:!0,queryId:null,tagged:!1},e))}(n,t._path);{const a=function $C(n,e){let t="Unknown Error";"too_big"===n?t="The data requested exceeds the maximum size that can be accessed with a single request.":"permission_denied"===n?t="Client doesn't have permission to access the desired data.":"unavailable"===n&&(t="The service is unavailable");const r=new Error(n+" at "+e._path.toString()+": "+t);return r.code=n.toUpperCase(),r}(i,t);return P0(n,t,null,a)}}}}function Wm(n,e){const t=qm(e);return n.queryToTagMap.get(t)}function qm(n){return n._path.toString()+"$"+n._queryIdentifier}function F0(n,e){return n.tagToQueryMap.get(e)}function L0(n){const e=n.indexOf("$");return(0,k.hu)(-1!==e&&e<n.length-1,"Bad queryKey."),{queryId:n.substr(e+1),path:new hn(n.substr(0,e))}}function V0(n,e,t){const r=n.syncPointTree_.get(e);return(0,k.hu)(r,"Missing sync point for query tag that we're tracking"),QI(r,t,Ch(n.pendingWriteTree_,e),null)}function Dp(n){return n._queryParams.loadsAllData()&&!n._queryParams.isDefault()?new(function XI(){return(0,k.hu)(wp,"Reference.ts has not been loaded"),wp}())(n._repo,n._path):n}class Tp{constructor(e){this.node_=e}getImmediateChild(e){const t=this.node_.getImmediateChild(e);return new Tp(t)}node(){return this.node_}}class Fc{constructor(e,t){this.syncTree_=e,this.path_=t}getImmediateChild(e){const t=Un(this.path_,e);return new Fc(this.syncTree_,t)}node(){return Ip(this.syncTree_,this.path_)}}const ib=function(n,e,t){return n&&"object"==typeof n?((0,k.hu)(".sv"in n,"Unexpected leaf node or priority contents"),"string"==typeof n[".sv"]?mA(n[".sv"],e,t):"object"==typeof n[".sv"]?zm(n[".sv"],e):void(0,k.hu)(!1,"Unexpected server value: "+JSON.stringify(n,null,2))):n},mA=function(n,e,t){if("timestamp"===n)return t.timestamp;(0,k.hu)(!1,"Unexpected server value: "+n)},zm=function(n,e,t){n.hasOwnProperty("increment")||(0,k.hu)(!1,"Unexpected server value: "+JSON.stringify(n,null,2));const r=n.increment;"number"!=typeof r&&(0,k.hu)(!1,"Unexpected increment value: "+r);const i=e.node();if((0,k.hu)(null!=i,"Expected ChildrenNode.EMPTY_NODE for nulls"),!i.isLeafNode())return r;const l=i.getValue();return"number"!=typeof l?r:l+r},Sp=function(n,e,t,r){return j0(e,new Fc(t,n),r)},B0=function(n,e,t){return j0(n,new Tp(e),t)};function j0(n,e,t){const r=n.getPriority().val(),i=ib(r,e.getImmediateChild(".priority"),t);let a;if(n.isLeafNode()){const l=n,h=ib(l.getValue(),e,t);return h!==l.getValue()||i!==l.getPriority().val()?new Nc(h,Xn(i)):n}{const l=n;return a=l,i!==l.getPriority().val()&&(a=a.updatePriority(new Nc(i))),l.forEachChild(Tn,(h,_)=>{const w=j0(_,e.getImmediateChild(h),t);w!==_&&(a=a.updateImmediateChild(h,w))}),a}}class Km{constructor(e="",t=null,r={children:{},childCount:0}){this.name=e,this.parent=t,this.node=r}}function Ap(n,e){let t=e instanceof hn?e:new hn(e),r=n,i=Wt(t);for(;null!==i;){const a=(0,k.DV)(r.node.children,i)||{children:{},childCount:0};r=new Km(i,r,a),t=Dn(t),i=Wt(t)}return r}function _u(n){return n.node.value}function Zm(n,e){n.node.value=e,xp(n)}function sb(n){return n.node.childCount>0}function H0(n,e){Fr(n.node.children,(t,r)=>{e(new Km(t,n,r))})}function Ym(n,e,t,r){t&&!r&&e(n),H0(n,i=>{Ym(i,e,!0,r)}),t&&r&&e(n)}function xh(n){return new hn(null===n.parent?n.name:xh(n.parent)+"/"+n.name)}function xp(n){null!==n.parent&&function G0(n,e,t){const r=function _A(n){return void 0===_u(n)&&!sb(n)}(t),i=(0,k.r3)(n.node.children,e);r&&i?(delete n.node.children[e],n.node.childCount--,xp(n)):!r&&!i&&(n.node.children[e]=t.node,n.node.childCount++,xp(n))}(n.parent,n.name,n)}const yA=/[\[\].#$\/\u0000-\u001F\u007F]/,vA=/[\[\].#$\u0000-\u001F\u007F]/,W0=10485760,Qm=function(n){return"string"==typeof n&&0!==n.length&&!yA.test(n)},q0=function(n){return"string"==typeof n&&0!==n.length&&!vA.test(n)},Rh=function(n){return null===n||"string"==typeof n||"number"==typeof n&&!pu(n)||n&&"object"==typeof n&&(0,k.r3)(n,".sv")},ja=function(n,e,t,r){r&&void 0===e||Mh((0,k.gK)(n,"value"),e,t)},Mh=function(n,e,t){const r=t instanceof hn?new uI(t,n):t;if(void 0===e)throw new Error(n+"contains undefined "+yl(r));if("function"==typeof e)throw new Error(n+"contains a function "+yl(r)+" with contents = "+e.toString());if(pu(e))throw new Error(n+"contains "+e.toString()+" "+yl(r));if("string"==typeof e&&e.length>W0/3&&(0,k.ug)(e)>W0)throw new Error(n+"contains a string greater than "+W0+" utf8 bytes "+yl(r)+" ('"+e.substring(0,50)+"...')");if(e&&"object"==typeof e){let i=!1,a=!1;if(Fr(e,(l,h)=>{if(".value"===l)i=!0;else if(".priority"!==l&&".sv"!==l&&(a=!0,!Qm(l)))throw new Error(n+" contains an invalid key ("+l+") "+yl(r)+'.  Keys must be non-empty strings and can\'t contain ".", "#", "$", "/", "[", or "]"');(function t0(n,e){n.parts_.length>0&&(n.byteLength_+=1),n.parts_.push(e),n.byteLength_+=(0,k.ug)(e),n0(n)})(r,l),Mh(n,h,r),function Tm(n){const e=n.parts_.pop();n.byteLength_-=(0,k.ug)(e),n.parts_.length>0&&(n.byteLength_-=1)}(r)}),i&&a)throw new Error(n+' contains ".value" child '+yl(r)+" in addition to actual children.")}},ab=function(n,e,t,r){if(r&&void 0===e)return;const i=(0,k.gK)(n,"values");if(!e||"object"!=typeof e||Array.isArray(e))throw new Error(i+" must be an object containing the children to replace.");const a=[];Fr(e,(l,h)=>{const _=new hn(l);if(Mh(i,h,Un(t,_)),".priority"===sp(_)&&!Rh(h))throw new Error(i+"contains an invalid value for '"+_.toString()+"', which must be a valid Firebase priority (a string, finite number, server value, or null).");a.push(_)}),function(n,e){let t,r;for(t=0;t<e.length;t++){r=e[t];const a=ap(r);for(let l=0;l<a.length;l++)if((".priority"!==a[l]||l!==a.length-1)&&!Qm(a[l]))throw new Error(n+"contains an invalid key ("+a[l]+") in path "+r.toString()+'. Keys must be non-empty strings and can\'t contain ".", "#", "$", "/", "[", or "]"')}e.sort(Dm);let i=null;for(t=0;t<e.length;t++){if(r=e[t],null!==i&&Ns(i,r))throw new Error(n+"contains a path "+i.toString()+" that is ancestor of another path "+r.toString());i=r}}(i,a)},Jm=function(n,e,t){if(!t||void 0!==e){if(pu(e))throw new Error((0,k.gK)(n,"priority")+"is "+e.toString()+", but must be a valid Firebase priority (a string, finite number, server value, or null).");if(!Rh(e))throw new Error((0,k.gK)(n,"priority")+"must be a valid Firebase priority (a string, finite number, server value, or null).")}},Nh=function(n,e,t,r){if(!(r&&void 0===t||Qm(t)))throw new Error((0,k.gK)(n,e)+'was an invalid key = "'+t+'".  Firebase keys must be non-empty strings and can\'t contain ".", "#", "$", "/", "[", or "]").')},Rp=function(n,e,t,r){if(!(r&&void 0===t||q0(t)))throw new Error((0,k.gK)(n,e)+'was an invalid path = "'+t+'". Paths must be non-empty strings and can\'t contain ".", "#", "$", "[", or "]"')},So=function(n,e){if(".info"===Wt(e))throw new Error(n+" failed = Can't modify data under /.info/")},_i=function(n,e){const t=e.path.toString();if("string"!=typeof e.repoInfo.host||0===e.repoInfo.host.length||!Qm(e.repoInfo.namespace)&&"localhost"!==e.repoInfo.host.split(":")[0]||0!==t.length&&!function(n){return n&&(n=n.replace(/^\/*\.info(\/|$)/,"/")),q0(n)}(t))throw new Error((0,k.gK)(n,"url")+'must be a valid firebase URL and the path can\'t contain ".", "#", "$", "[", or "]".')};class Ph{constructor(){this.eventLists_=[],this.recursionDepth_=0}}function Xm(n,e){let t=null;for(let r=0;r<e.length;r++){const i=e[r],a=i.getPath();null!==t&&!e0(a,t.path)&&(n.eventLists_.push(t),t=null),null===t&&(t={events:[],path:a}),t.events.push(i)}t&&n.eventLists_.push(t)}function K0(n,e,t){Xm(n,t),kh(n,r=>e0(r,e))}function sa(n,e,t){Xm(n,t),kh(n,r=>Ns(r,e)||Ns(e,r))}function kh(n,e){n.recursionDepth_++;let t=!0;for(let r=0;r<n.eventLists_.length;r++){const i=n.eventLists_[r];i&&(e(i.path)?(wA(n.eventLists_[r]),n.eventLists_[r]=null):t=!1)}t&&(n.eventLists_=[]),n.recursionDepth_--}function wA(n){for(let e=0;e<n.events.length;e++){const t=n.events[e];if(null!==t){n.events[e]=null;const r=t.getEventRunner();fu&&Jr("event: "+t.toString()),Qf(r)}}}const e_="repo_interrupt";class lb{constructor(e,t,r,i){this.repoInfo_=e,this.forceRestClient_=t,this.authTokenProvider_=r,this.appCheckProvider_=i,this.dataUpdateCount=0,this.statsListener_=null,this.eventQueue_=new Ph,this.nextWriteId_=1,this.interceptServerDataCallback_=null,this.onDisconnect_=Om(),this.transactionQueueTree_=new Km,this.persistentConnection_=null,this.key=this.repoInfo_.toURLString()}toString(){return(this.repoInfo_.secure?"https://":"http://")+this.repoInfo_.host}}function cb(n){const t=n.infoData_.getNode(new hn(".info/serverTimeOffset")).val()||0;return(new Date).getTime()+t}function Lc(n){return function(n){return(n=n||{}).timestamp=n.timestamp||(new Date).getTime(),n}({timestamp:cb(n)})}function Z0(n,e,t,r,i){n.dataUpdateCount++;const a=new hn(e);t=n.interceptServerDataCallback_?n.interceptServerDataCallback_(e,t):t;let l=[];if(i)if(r){const _=(0,k.UI)(t,w=>Xn(w));l=function Cp(n,e,t,r){const i=F0(n,r);if(i){const a=L0(i),l=a.path,h=a.queryId,_=mi(l,e),w=An.fromObject(t);return V0(n,l,new vh(MI(h),_,w))}return[]}(n.serverSyncTree_,a,_,i)}else{const _=Xn(t);l=function fA(n,e,t,r){const i=F0(n,r);if(null!=i){const a=L0(i),l=a.path,h=a.queryId,_=mi(l,e);return V0(n,l,new Pc(MI(h),_,t))}return[]}(n.serverSyncTree_,a,_,i)}else if(r){const _=(0,k.UI)(t,w=>Xn(w));l=function cA(n,e,t){const r=An.fromObject(t);return Oc(n,new vh({fromUser:!1,fromServer:!0,queryId:null,tagged:!1},e,r))}(n.serverSyncTree_,a,_)}else{const _=Xn(t);l=Ep(n.serverSyncTree_,a,_)}let h=a;l.length>0&&(h=Uc(n,a)),sa(n.eventQueue_,h,l)}function Y0(n,e){Mp(n,"connected",e),!1===e&&function n_(n){Vc(n,"onDisconnectEvents");const e=Lc(n),t=Om();Fm(n.onDisconnect_,an(),(i,a)=>{const l=Sp(i,a,n.serverSyncTree_,e);yh(t,i,l)});let r=[];Fm(t,an(),(i,a)=>{r=r.concat(Ep(n.serverSyncTree_,i,a));const l=sw(n,i);Uc(n,l)}),n.onDisconnect_=Om(),sa(n.eventQueue_,an(),r)}(n)}function Mp(n,e,t){const r=new hn("/.info/"+e),i=Xn(t);n.infoData_.updateSnapshot(r,i);const a=Ep(n.infoSyncTree_,r,i);sa(n.eventQueue_,r,a)}function Q0(n){return n.nextWriteId_++}function J0(n,e,t,r,i){Vc(n,"set",{path:e.toString(),value:t,priority:r});const a=Lc(n),l=Xn(t,r),h=Ip(n.serverSyncTree_,e),_=B0(l,h,a),w=Q0(n),D=N0(n.serverSyncTree_,e,_,w,!0);Xm(n.eventQueue_,D),n.server_.put(e.toString(),l.val(!0),(N,L)=>{const j="ok"===N;j||as("set at "+e+" failed: "+N);const fe=Cl(n.serverSyncTree_,w,!j);sa(n.eventQueue_,e,fe),Il(0,i,N,L)});const S=sw(n,e);Uc(n,S),sa(n.eventQueue_,S,[])}function fb(n,e,t){n.server_.onDisconnectCancel(e.toString(),(r,i)=>{"ok"===r&&m0(n.onDisconnect_,e),Il(0,t,r,i)})}function pb(n,e,t,r){const i=Xn(t);n.server_.onDisconnectPut(e.toString(),i.val(!0),(a,l)=>{"ok"===a&&yh(n.onDisconnect_,e,i),Il(0,r,a,l)})}function tw(n,e,t){let r;r=".info"===Wt(e._path)?P0(n.infoSyncTree_,e,t):P0(n.serverSyncTree_,e,t),K0(n.eventQueue_,e._path,r)}function gb(n){n.persistentConnection_&&n.persistentConnection_.interrupt(e_)}function Vc(n,...e){let t="";n.persistentConnection_&&(t=n.persistentConnection_.id+":"),Jr(t,...e)}function Il(n,e,t,r){e&&Qf(()=>{if("ok"===t)e(null);else{const i=(t||"error").toUpperCase();let a=i;r&&(a+=": "+r);const l=new Error(a);l.code=i,e(l)}})}function r_(n,e,t){return Ip(n.serverSyncTree_,e,t)||At.EMPTY_NODE}function i_(n,e=n.transactionQueueTree_){if(e||Np(n,e),_u(e)){const t=rw(n,e);(0,k.hu)(t.length>0,"Sending zero length transaction queue"),t.every(i=>0===i.status)&&function IA(n,e,t){const r=t.map(w=>w.currentWriteId),i=r_(n,e,r);let a=i;const l=i.hash();for(let w=0;w<t.length;w++){const D=t[w];(0,k.hu)(0===D.status,"tryToSendTransactionQueue_: items in queue should all be run."),D.status=1,D.retryCount++;const S=mi(e,D.path);a=a.updateChild(S,D.currentOutputSnapshotRaw)}const h=a.val(!0),_=e;n.server_.put(_.toString(),h,w=>{Vc(n,"transaction put response",{path:_.toString(),status:w});let D=[];if("ok"===w){const S=[];for(let N=0;N<t.length;N++)t[N].status=2,D=D.concat(Cl(n.serverSyncTree_,t[N].currentWriteId)),t[N].onComplete&&S.push(()=>t[N].onComplete(null,!0,t[N].currentOutputSnapshotResolved)),t[N].unwatcher();Np(n,Ap(n.transactionQueueTree_,e)),i_(n,n.transactionQueueTree_),sa(n.eventQueue_,e,D);for(let N=0;N<S.length;N++)Qf(S[N])}else{if("datastale"===w)for(let S=0;S<t.length;S++)t[S].status=3===t[S].status?4:0;else{as("transaction at "+_.toString()+" failed: "+w);for(let S=0;S<t.length;S++)t[S].status=4,t[S].abortReason=w}Uc(n,e)}},l)}(n,xh(e),t)}else sb(e)&&H0(e,t=>{i_(n,t)})}function Uc(n,e){const t=nw(n,e),r=xh(t);return function bA(n,e,t){if(0===e.length)return;const r=[];let i=[];const l=e.filter(h=>0===h.status).map(h=>h.currentWriteId);for(let h=0;h<e.length;h++){const _=e[h],w=mi(t,_.path);let S,D=!1;if((0,k.hu)(null!==w,"rerunTransactionsUnderNode_: relativePath should not be null."),4===_.status)D=!0,S=_.abortReason,i=i.concat(Cl(n.serverSyncTree_,_.currentWriteId,!0));else if(0===_.status)if(_.retryCount>=25)D=!0,S="maxretry",i=i.concat(Cl(n.serverSyncTree_,_.currentWriteId,!0));else{const N=r_(n,_.path,l);_.currentInputSnapshot=N;const L=e[h].update(N.val());if(void 0!==L){Mh("transaction failed: Data returned ",L,_.path);let j=Xn(L);"object"==typeof L&&null!=L&&(0,k.r3)(L,".priority")||(j=j.updatePriority(N.getPriority()));const Me=_.currentWriteId,et=Lc(n),We=B0(j,N,et);_.currentOutputSnapshotRaw=j,_.currentOutputSnapshotResolved=We,_.currentWriteId=Q0(n),l.splice(l.indexOf(Me),1),i=i.concat(N0(n.serverSyncTree_,_.path,We,_.currentWriteId,_.applyLocally)),i=i.concat(Cl(n.serverSyncTree_,Me,!0))}else D=!0,S="nodata",i=i.concat(Cl(n.serverSyncTree_,_.currentWriteId,!0))}sa(n.eventQueue_,t,i),i=[],D&&(e[h].status=2,setTimeout(e[h].unwatcher,Math.floor(0)),e[h].onComplete&&r.push("nodata"===S?()=>e[h].onComplete(null,!1,e[h].currentInputSnapshot):()=>e[h].onComplete(new Error(S),!1,null)))}Np(n,n.transactionQueueTree_);for(let h=0;h<r.length;h++)Qf(r[h]);i_(n,n.transactionQueueTree_)}(n,rw(n,t),r),r}function nw(n,e){let t,r=n.transactionQueueTree_;for(t=Wt(e);null!==t&&void 0===_u(r);)r=Ap(r,t),t=Wt(e=Dn(e));return r}function rw(n,e){const t=[];return iw(n,e,t),t.sort((r,i)=>r.order-i.order),t}function iw(n,e,t){const r=_u(e);if(r)for(let i=0;i<r.length;i++)t.push(r[i]);H0(e,i=>{iw(n,i,t)})}function Np(n,e){const t=_u(e);if(t){let r=0;for(let i=0;i<t.length;i++)2!==t[i].status&&(t[r]=t[i],r++);t.length=r,Zm(e,t.length>0?t:void 0)}H0(e,r=>{Np(n,r)})}function sw(n,e){const t=xh(nw(n,e)),r=Ap(n.transactionQueueTree_,e);return function $0(n,e,t){let r=t?n:n.parent;for(;null!==r;){if(e(r))return!0;r=r.parent}}(r,i=>{ow(n,i)}),ow(n,r),Ym(r,i=>{ow(n,i)}),t}function ow(n,e){const t=_u(e);if(t){const r=[];let i=[],a=-1;for(let l=0;l<t.length;l++)3===t[l].status||(1===t[l].status?((0,k.hu)(a===l-1,"All SENT items should be at beginning of queue."),a=l,t[l].status=3,t[l].abortReason="set"):((0,k.hu)(0===t[l].status,"Unexpected transaction status in abort"),t[l].unwatcher(),i=i.concat(Cl(n.serverSyncTree_,t[l].currentWriteId,!0)),t[l].onComplete&&r.push(t[l].onComplete.bind(null,new Error("set"),!1,null))));-1===a?Zm(e,void 0):t.length=a+1,sa(n.eventQueue_,xh(e),i);for(let l=0;l<r.length;l++)Qf(r[l])}}const vb=function(n,e){const t=_P(n),r=t.namespace;return"firebase.com"===t.domain&&ta(t.host+" is no longer supported. Please use <YOUR FIREBASE>.firebaseio.com instead"),(!r||"undefined"===r)&&"localhost"!==t.domain&&ta("Cannot parse Firebase url. Please use https://<YOUR FIREBASE>.firebaseio.com"),t.secure||"undefined"!=typeof window&&window.location&&window.location.protocol&&-1!==window.location.protocol.indexOf("https:")&&as("Insecure Firebase access from a secure page. Please use https in calls to new Firebase()."),{repoInfo:new vm(t.host,t.secure,r,e,"ws"===t.scheme||"wss"===t.scheme,"",r!==t.subdomain),path:new hn(t.pathString)}},_P=function(n){let e="",t="",r="",i="",a="",l=!0,h="https",_=443;if("string"==typeof n){let w=n.indexOf("//");w>=0&&(h=n.substring(0,w-1),n=n.substring(w+2));let D=n.indexOf("/");-1===D&&(D=n.length);let S=n.indexOf("?");-1===S&&(S=n.length),e=n.substring(0,Math.min(D,S)),D<S&&(i=function mP(n){let e="";const t=n.split("/");for(let r=0;r<t.length;r++)if(t[r].length>0){let i=t[r];try{i=decodeURIComponent(i.replace(/\+/g," "))}catch(a){}e+="/"+i}return e}(n.substring(D,S)));const N=function yb(n){const e={};"?"===n.charAt(0)&&(n=n.substring(1));for(const t of n.split("&")){if(0===t.length)continue;const r=t.split("=");2===r.length?e[decodeURIComponent(r[0])]=decodeURIComponent(r[1]):as(`Invalid query segment '${t}' in query '${n}'`)}return e}(n.substring(Math.min(n.length,S)));w=e.indexOf(":"),w>=0?(l="https"===h||"wss"===h,_=parseInt(e.substring(w+1),10)):w=e.length;const L=e.slice(0,w);if("localhost"===L.toLowerCase())t="localhost";else if(L.split(".").length<=2)t=L;else{const j=e.indexOf(".");r=e.substring(0,j).toLowerCase(),t=e.substring(j+1),a=r}"ns"in N&&(a=N.ns)}return{host:e,port:_,domain:t,subdomain:r,secure:l,scheme:h,pathString:i,namespace:a}};class DA{constructor(e,t,r,i){this.eventType=e,this.eventRegistration=t,this.snapshot=r,this.prevName=i}getPath(){const e=this.snapshot.ref;return"value"===this.eventType?e._path:e.parent._path}getEventType(){return this.eventType}getEventRunner(){return this.eventRegistration.getEventRunner(this)}toString(){return this.getPath().toString()+":"+this.eventType+":"+(0,k.Pz)(this.snapshot.exportVal())}}class TA{constructor(e,t,r){this.eventRegistration=e,this.error=t,this.path=r}getPath(){return this.path}getEventType(){return"cancel"}getEventRunner(){return this.eventRegistration.getEventRunner(this)}toString(){return this.path.toString()+":cancel"}}class SA{constructor(e,t){this.snapshotCallback=e,this.cancelCallback=t}onValue(e,t){this.snapshotCallback.call(null,e,t)}onCancel(e){return(0,k.hu)(this.hasCancelCallback,"Raising a cancel event on a listener with no cancel callback"),this.cancelCallback.call(null,e)}get hasCancelCallback(){return!!this.cancelCallback}matches(e){return this.snapshotCallback===e.snapshotCallback||void 0!==this.snapshotCallback.userCallback&&this.snapshotCallback.userCallback===e.snapshotCallback.userCallback&&this.snapshotCallback.context===e.snapshotCallback.context}}class AA{constructor(e,t){this._repo=e,this._path=t}cancel(){const e=new k.BH;return fb(this._repo,this._path,e.wrapCallback(()=>{})),e.promise}remove(){So("OnDisconnect.remove",this._path);const e=new k.BH;return pb(this._repo,this._path,null,e.wrapCallback(()=>{})),e.promise}set(e){So("OnDisconnect.set",this._path),ja("OnDisconnect.set",e,this._path,!1);const t=new k.BH;return pb(this._repo,this._path,e,t.wrapCallback(()=>{})),t.promise}setWithPriority(e,t){So("OnDisconnect.setWithPriority",this._path),ja("OnDisconnect.setWithPriority",e,this._path,!1),Jm("OnDisconnect.setWithPriority",t,!1);const r=new k.BH;return function X0(n,e,t,r,i){const a=Xn(t,r);n.server_.onDisconnectPut(e.toString(),a.val(!0),(l,h)=>{"ok"===l&&yh(n.onDisconnect_,e,a),Il(0,i,l,h)})}(this._repo,this._path,e,t,r.wrapCallback(()=>{})),r.promise}update(e){So("OnDisconnect.update",this._path),ab("OnDisconnect.update",e,this._path,!1);const t=new k.BH;return function ew(n,e,t,r){if((0,k.xb)(t))return Jr("onDisconnect().update() called with empty data.  Don't do anything."),void Il(0,r,"ok",void 0);n.server_.onDisconnectMerge(e.toString(),t,(i,a)=>{"ok"===i&&Fr(t,(l,h)=>{const _=Xn(h);yh(n.onDisconnect_,Un(e,l),_)}),Il(0,r,i,a)})}(this._repo,this._path,e,t.wrapCallback(()=>{})),t.promise}}class ks{constructor(e,t,r,i){this._repo=e,this._path=t,this._queryParams=r,this._orderByCalled=i}get key(){return jt(this._path)?null:sp(this._path)}get ref(){return new Os(this._repo,this._path)}get _queryIdentifier(){const e=bI(this._queryParams),t=pm(e);return"{}"===t?"default":t}get _queryObject(){return bI(this._queryParams)}isEqual(e){if(!((e=(0,k.m9)(e))instanceof ks))return!1;const t=this._repo===e._repo,r=e0(this._path,e._path);return t&&r&&this._queryIdentifier===e._queryIdentifier}toJSON(){return this.toString()}toString(){return this._repo.toString()+function op(n){let e="";for(let t=n.pieceNum_;t<n.pieces_.length;t++)""!==n.pieces_[t]&&(e+="/"+encodeURIComponent(String(n.pieces_[t])));return e||"/"}(this._path)}}function aw(n,e){if(!0===n._orderByCalled)throw new Error(e+": You can't combine multiple orderBy calls.")}function oa(n){let e=null,t=null;if(n.hasStart()&&(e=n.getIndexStartValue()),n.hasEnd()&&(t=n.getIndexEndValue()),n.getIndex()===Va){const r="Query: When ordering by key, you may only pass one argument to startAt(), endAt(), or equalTo().",i="Query: When ordering by key, the argument passed to startAt(), startAfter(), endAt(), endBefore(), or equalTo() must be a string.";if(n.hasStart()){if(n.getIndexStartName()!==Oa)throw new Error(r);if("string"!=typeof e)throw new Error(i)}if(n.hasEnd()){if(n.getIndexEndName()!==Fa)throw new Error(r);if("string"!=typeof t)throw new Error(i)}}else if(n.getIndex()===Tn){if(null!=e&&!Rh(e)||null!=t&&!Rh(t))throw new Error("Query: When ordering by priority, the first argument passed to startAt(), startAfter() endAt(), endBefore(), or equalTo() must be a valid priority value (null, a number, or a string).")}else if((0,k.hu)(n.getIndex()instanceof mt||n.getIndex()===h0,"unknown index type."),null!=e&&"object"==typeof e||null!=t&&"object"==typeof t)throw new Error("Query: First argument passed to startAt(), startAfter(), endAt(), endBefore(), or equalTo() cannot be an object.")}function uw(n){if(n.hasStart()&&n.hasEnd()&&n.hasLimit()&&!n.hasAnchoredLimit())throw new Error("Query: Can't combine startAt(), startAfter(), endAt(), endBefore(), and limit(). Use limitToFirst() or limitToLast() instead.")}class Os extends ks{constructor(e,t){super(e,t,new km,!1)}get parent(){const e=Xv(this._path);return null===e?null:new Os(this._repo,e)}get root(){let e=this;for(;null!==e.parent;)e=e.parent;return e}}class yu{constructor(e,t,r){this._node=e,this.ref=t,this._index=r}get priority(){return this._node.getPriority().val()}get key(){return this.ref.key}get size(){return this._node.numChildren()}child(e){const t=new hn(e),r=Oh(this.ref,e);return new yu(this._node.getChild(t),r,Tn)}exists(){return!this._node.isEmpty()}exportVal(){return this._node.val(!0)}forEach(e){return!this._node.isLeafNode()&&!!this._node.forEachChild(this._index,(r,i)=>e(new yu(i,Oh(this.ref,r),Tn)))}hasChild(e){const t=new hn(e);return!this._node.getChild(t).isEmpty()}hasChildren(){return!this._node.isLeafNode()&&!this._node.isEmpty()}toJSON(){return this.exportVal()}val(){return this._node.val()}}function lw(n,e){return(n=(0,k.m9)(n))._checkNotDeleted("ref"),void 0!==e?Oh(n._root,e):n._root}function cw(n,e){(n=(0,k.m9)(n))._checkNotDeleted("refFromURL");const t=vb(e,n._repo.repoInfo_.nodeAdmin);_i("refFromURL",t);const r=t.repoInfo;return!n._repo.repoInfo_.isCustomHost()&&r.host!==n._repo.repoInfo_.host&&ta("refFromURL: Host name does not match the current database: (found "+r.host+" but expected "+n._repo.repoInfo_.host+")"),lw(n,t.path.toString())}function Oh(n,e){return null===Wt((n=(0,k.m9)(n))._path)?(t=e,t&&(t=t.replace(/^\/*\.info(\/|$)/,"/")),Rp("child","path",t,!1)):Rp("child","path",e,!1),new Os(n._repo,Un(n._path,e));var t}function s_(n,e){n=(0,k.m9)(n),So("set",n._path),ja("set",e,n._path,!1);const t=new k.BH;return J0(n._repo,n._path,e,null,t.wrapCallback(()=>{})),t.promise}function xA(n,e){ab("update",e,n._path,!1);const t=new k.BH;return function hb(n,e,t,r){Vc(n,"update",{path:e.toString(),value:t});let i=!0;const a=Lc(n),l={};if(Fr(t,(h,_)=>{i=!1,l[h]=Sp(Un(e,h),Xn(_),n.serverSyncTree_,a)}),i)Jr("update() called with empty data.  Don't do anything."),Il(0,r,"ok",void 0);else{const h=Q0(n),_=function lA(n,e,t,r){!function FI(n,e,t,r){(0,k.hu)(r>n.lastWriteId,"Stacking an older merge on top of newer ones"),n.allWrites.push({path:e,children:t,writeId:r,visible:!0}),n.visibleWrites=Um(n.visibleWrites,e,t),n.lastWriteId=r}(n.pendingWriteTree_,e,t,r);const i=An.fromObject(t);return Oc(n,new vh({fromUser:!0,fromServer:!1,queryId:null,tagged:!1},e,i))}(n.serverSyncTree_,e,l,h);Xm(n.eventQueue_,_),n.server_.merge(e.toString(),t,(w,D)=>{const S="ok"===w;S||as("update at "+e+" failed: "+w);const N=Cl(n.serverSyncTree_,h,!S),L=N.length>0?Uc(n,e):e;sa(n.eventQueue_,L,N),Il(0,r,w,D)}),Fr(t,w=>{const D=sw(n,Un(e,w));Uc(n,D)}),sa(n.eventQueue_,e,[])}}(n._repo,n._path,e,t.wrapCallback(()=>{})),t.promise}function dw(n){return function db(n,e){const t=function tb(n,e){const t=e._path;let r=null;n.syncPointTree_.foreachOnPath(t,(w,D)=>{const S=mi(w,t);r=r||Ps(D,S)});let i=n.syncPointTree_.get(t);i?r=r||Ps(i,an()):(i=new YI,n.syncPointTree_=n.syncPointTree_.set(t,i));const a=null!=r,l=a?new gu(r,!0,!1):null;return function rA(n){return Vm(n.viewCache_)}(JI(i,e,Ch(n.pendingWriteTree_,e._path),a?l.getNode():At.EMPTY_NODE,a))}(n.serverSyncTree_,e);return null!=t?Promise.resolve(t):n.server_.get(e).then(r=>{const i=Xn(r).withIndex(e._queryParams.getIndex()),a=Ep(n.serverSyncTree_,e._path,i);return K0(n.eventQueue_,e._path,a),Promise.resolve(i)},r=>(Vc(n,"get for query "+(0,k.Pz)(e)+" failed: "+r),Promise.reject(new Error(r))))}((n=(0,k.m9)(n))._repo,n).then(e=>new yu(e,new Os(n._repo,n._path),n._queryParams.getIndex()))}class o_{constructor(e){this.callbackContext=e}respondsTo(e){return"value"===e}createEvent(e,t){const r=t._queryParams.getIndex();return new DA("value",this,new yu(e.snapshotNode,new Os(t._repo,t._path),r))}getEventRunner(e){return"cancel"===e.getEventType()?()=>this.callbackContext.onCancel(e.error):()=>this.callbackContext.onValue(e.snapshot,null)}createCancelEvent(e,t){return this.callbackContext.hasCancelCallback?new TA(this,e,t):null}matches(e){return e instanceof o_&&(!e.callbackContext||!this.callbackContext||e.callbackContext.matches(this.callbackContext))}hasAnyCallback(){return null!==this.callbackContext}}class hw{constructor(e,t){this.eventType=e,this.callbackContext=t}respondsTo(e){let t="children_added"===e?"child_added":e;return t="children_removed"===t?"child_removed":t,this.eventType===t}createCancelEvent(e,t){return this.callbackContext.hasCancelCallback?new TA(this,e,t):null}createEvent(e,t){(0,k.hu)(null!=e.childName,"Child events should have a childName.");const r=Oh(new Os(t._repo,t._path),e.childName),i=t._queryParams.getIndex();return new DA(e.type,this,new yu(e.snapshotNode,r,i),e.prevName)}getEventRunner(e){return"cancel"===e.getEventType()?()=>this.callbackContext.onCancel(e.error):()=>this.callbackContext.onValue(e.snapshot,e.prevName)}matches(e){return e instanceof hw&&this.eventType===e.eventType&&(!this.callbackContext||!e.callbackContext||this.callbackContext.matches(e.callbackContext))}hasAnyCallback(){return!!this.callbackContext}}function a_(n,e,t,r,i){let a;if("object"==typeof r&&(a=void 0,i=r),"function"==typeof r&&(a=r),i&&i.onlyOnce){const _=t,w=(D,S)=>{tw(n._repo,n,h),_(D,S)};w.userCallback=t.userCallback,w.context=t.context,t=w}const l=new SA(t,a||void 0),h="value"===e?new o_(l):new hw(e,l);return function gP(n,e,t){let r;r=".info"===Wt(e._path)?k0(n.infoSyncTree_,e,t):k0(n.serverSyncTree_,e,t),K0(n.eventQueue_,e._path,r)}(n._repo,n,h),()=>tw(n._repo,n,h)}function bb(n,e,t,r){return a_(n,"value",e,t,r)}function Db(n,e,t,r){return a_(n,"child_added",e,t,r)}function Tb(n,e,t,r){return a_(n,"child_changed",e,t,r)}function Sb(n,e,t,r){return a_(n,"child_moved",e,t,r)}function RA(n,e,t,r){return a_(n,"child_removed",e,t,r)}function Ab(n,e,t){let r=null;const i=t?new SA(t):null;"value"===e?r=new o_(i):e&&(r=new hw(e,i)),tw(n._repo,n,r)}class Fs{}class xb extends Fs{constructor(e,t){super(),this._value=e,this._key=t}_apply(e){ja("endAt",this._value,e._path,!0);const t=_h(e._queryParams,this._value,this._key);if(uw(t),oa(t),e._queryParams.hasEnd())throw new Error("endAt: Starting point was already set (by another call to endAt, endBefore or equalTo).");return new ks(e._repo,e._path,t,e._orderByCalled)}}class MA extends Fs{constructor(e,t){super(),this._value=e,this._key=t}_apply(e){ja("endBefore",this._value,e._path,!1);const t=function II(n,e,t){let r,i;return n.index_===Va?("string"==typeof e&&(e=MS(e)),i=_h(n,e,t)):(r=null==t?Oa:MS(t),i=_h(n,e,r)),i.endBeforeSet_=!0,i}(e._queryParams,this._value,this._key);if(uw(t),oa(t),e._queryParams.hasEnd())throw new Error("endBefore: Starting point was already set (by another call to endAt, endBefore or equalTo).");return new ks(e._repo,e._path,t,e._orderByCalled)}}class Rb extends Fs{constructor(e,t){super(),this._value=e,this._key=t}_apply(e){ja("startAt",this._value,e._path,!0);const t=p0(e._queryParams,this._value,this._key);if(uw(t),oa(t),e._queryParams.hasStart())throw new Error("startAt: Starting point was already set (by another call to startAt, startBefore or equalTo).");return new ks(e._repo,e._path,t,e._orderByCalled)}}class pw extends Fs{constructor(e,t){super(),this._value=e,this._key=t}_apply(e){ja("startAfter",this._value,e._path,!1);const t=function OS(n,e,t){let r;if(n.index_===Va)"string"==typeof e&&(e=Wn(e)),r=p0(n,e,t);else{let i;i=null==t?Fa:Wn(t),r=p0(n,e,i)}return r.startAfterSet_=!0,r}(e._queryParams,this._value,this._key);if(uw(t),oa(t),e._queryParams.hasStart())throw new Error("startAfter: Starting point was already set (by another call to startAt, startAfter, or equalTo).");return new ks(e._repo,e._path,t,e._orderByCalled)}}class Nb extends Fs{constructor(e){super(),this._limit=e}_apply(e){if(e._queryParams.hasLimit())throw new Error("limitToFirst: Limit was already set (by another call to limitToFirst or limitToLast).");return new ks(e._repo,e._path,function cp(n,e){const t=n.copy();return t.limitSet_=!0,t.limit_=e,t.viewFrom_="l",t}(e._queryParams,this._limit),e._orderByCalled)}}class Pb extends Fs{constructor(e){super(),this._limit=e}_apply(e){if(e._queryParams.hasLimit())throw new Error("limitToLast: Limit was already set (by another call to limitToFirst or limitToLast).");return new ks(e._repo,e._path,function kS(n,e){const t=n.copy();return t.limitSet_=!0,t.limit_=e,t.viewFrom_="r",t}(e._queryParams,this._limit),e._orderByCalled)}}class kA extends Fs{constructor(e){super(),this._path=e}_apply(e){aw(e,"orderByChild");const t=new hn(this._path);if(jt(t))throw new Error("orderByChild: cannot pass in empty path. Use orderByValue() instead.");const r=new mt(t),i=dp(e._queryParams,r);return oa(i),new ks(e._repo,e._path,i,!0)}}class gw extends Fs{_apply(e){aw(e,"orderByKey");const t=dp(e._queryParams,Va);return oa(t),new ks(e._repo,e._path,t,!0)}}class FA extends Fs{_apply(e){aw(e,"orderByPriority");const t=dp(e._queryParams,Tn);return oa(t),new ks(e._repo,e._path,t,!0)}}class LA extends Fs{_apply(e){aw(e,"orderByValue");const t=dp(e._queryParams,h0);return oa(t),new ks(e._repo,e._path,t,!0)}}class VA extends Fs{constructor(e,t){super(),this._value=e,this._key=t}_apply(e){if(ja("equalTo",this._value,e._path,!1),e._queryParams.hasStart())throw new Error("equalTo: Starting point was already set (by another call to startAt/startAfter or equalTo).");if(e._queryParams.hasEnd())throw new Error("equalTo: Ending point was already set (by another call to endAt/endBefore or equalTo).");return new xb(this._value,this._key)._apply(new Rb(this._value,this._key)._apply(e))}}function Ao(n,...e){let t=(0,k.m9)(n);for(const r of e)t=r._apply(t);return t}(function sA(n){(0,k.hu)(!vp,"__referenceConstructor has already been defined"),vp=n})(Os),function pP(n){(0,k.hu)(!wp,"__referenceConstructor has already been defined"),wp=n}(Os);const Fb={};function Vb(n,e,t,r,i){let a=r||n.options.databaseURL;void 0===a&&(n.options.projectId||ta("Can't determine Firebase Database URL. Be sure to include  a Project ID when calling firebase.initializeApp()."),Jr("Using default host for project ",n.options.projectId),a=`${n.options.projectId}-default-rtdb.firebaseio.com`);let _,w,l=vb(a,i),h=l.repoInfo;"undefined"!=typeof process&&(w=process.env.FIREBASE_DATABASE_EMULATOR_HOST),w?(_=!0,a=`http://${w}?ns=${h.namespace}`,l=vb(a,i),h=l.repoInfo):_=!l.repoInfo.secure;const D=i&&_?new sh(sh.OWNER):new Xf(n.name,n.options,e);_i("Invalid Firebase Database URL",l),jt(l.path)||ta("Database URL must point to the root of a Firebase Database (not including a child path).");const S=function Ub(n,e,t,r){let i=Fb[e.name];i||(i={},Fb[e.name]=i);let a=i[n.toURLString()];return a&&ta("Database initialized multiple times. Please make sure the format of the database URL matches with each database() call."),a=new lb(n,false,t,r),i[n.toURLString()]=a,a}(h,n,D,new cP(n.name,t));return new yw(S,n)}class yw{constructor(e,t){this._repoInternal=e,this.app=t,this.type="database",this._instanceStarted=!1}get _repo(){return this._instanceStarted||(function CA(n,e,t){if(n.stats_=Gv(n.repoInfo_),n.forceRestClient_||("object"==typeof window&&window.navigator&&window.navigator.userAgent||"").search(/googlebot|google webmaster tools|bingbot|yahoo! slurp|baiduspider|yandexbot|duckduckbot/i)>=0)n.server_=new vl(n.repoInfo_,(r,i,a,l)=>{Z0(n,r,i,a,l)},n.authTokenProvider_,n.appCheckProvider_),setTimeout(()=>Y0(n,!0),0);else{if(null!=t){if("object"!=typeof t)throw new Error("Only objects are supported for option databaseAuthVariableOverride");try{(0,k.Pz)(t)}catch(r){throw new Error("Invalid authOverride provided: "+r)}}n.persistentConnection_=new Mc(n.repoInfo_,e,(r,i,a,l)=>{Z0(n,r,i,a,l)},r=>{Y0(n,r)},r=>{!function t_(n,e){Fr(e,(t,r)=>{Mp(n,t,r)})}(n,r)},n.authTokenProvider_,n.appCheckProvider_,t),n.server_=n.persistentConnection_}n.authTokenProvider_.addTokenChangeListener(r=>{n.server_.refreshAuthToken(r)}),n.appCheckProvider_.addTokenChangeListener(r=>{n.server_.refreshAppCheckToken(r.token)}),n.statsReporter_=function qC(n,e){const t=n.toString();return wm[t]||(wm[t]=e()),wm[t]}(n.repoInfo_,()=>new LS(n.stats_,n.server_)),n.infoData_=new hp,n.infoSyncTree_=new eb({startListening:(r,i,a,l)=>{let h=[];const _=n.infoData_.getNode(r._path);return _.isEmpty()||(h=Ep(n.infoSyncTree_,r._path,_),setTimeout(()=>{l("ok")},0)),h},stopListening:()=>{}}),Mp(n,"connected",!1),n.serverSyncTree_=new eb({startListening:(r,i,a,l)=>(n.server_.listen(r,a,i,(h,_)=>{const w=l(h,_);sa(n.eventQueue_,r._path,w)}),[]),stopListening:(r,i)=>{n.server_.unlisten(r,i)}})}(this._repoInternal,this.app.options.appId,this.app.options.databaseAuthVariableOverride),this._instanceStarted=!0),this._repoInternal}get _root(){return this._rootInternal||(this._rootInternal=new Os(this._repo,an())),this._rootInternal}_delete(){return null!==this._rootInternal&&(function jA(n,e){const t=Fb[e];(!t||t[n.key]!==n)&&ta(`Database ${e}(${n.repoInfo_}) has already been deleted.`),gb(n),delete t[n.key]}(this._repo,this.app.name),this._repoInternal=null,this._rootInternal=null),Promise.resolve()}_checkNotDeleted(e){null===this._rootInternal&&ta("Cannot call "+e+" on a deleted database.")}}function GA(n,e){lS(n,e)}const wP={".sv":"timestamp"};class qA{constructor(e,t){this.committed=e,this.snapshot=t}toJSON(){return{committed:this.committed,snapshot:this.snapshot.toJSON()}}}Mc.prototype.simpleListen=function(n,e){this.sendRequest("q",{p:n},e)},Mc.prototype.echo=function(n,e){this.sendRequest("echo",{d:n},e)},function WA(n){FC(gi.SDK_VERSION),(0,gi._registerComponent)(new Co.wA("database",(e,{instanceIdentifier:t})=>Vb(e.getProvider("app").getImmediate(),e.getProvider("auth-internal"),e.getProvider("app-check-internal"),t),"PUBLIC").setMultipleInstances(!0)),(0,gi.registerVersion)(kC,"0.12.7",n),(0,gi.registerVersion)(kC,"0.12.7","esm2017")}();const DP=new Io.Yd("@firebase/database-compat"),KA=function(n){DP.warn("FIREBASE WARNING: "+n)};class YA{constructor(e){this._delegate=e}cancel(e){(0,k.Dv)("OnDisconnect.cancel",0,1,arguments.length),(0,k.Wj)("OnDisconnect.cancel","onComplete",e,!0);const t=this._delegate.cancel();return e&&t.then(()=>e(null),r=>e(r)),t}remove(e){(0,k.Dv)("OnDisconnect.remove",0,1,arguments.length),(0,k.Wj)("OnDisconnect.remove","onComplete",e,!0);const t=this._delegate.remove();return e&&t.then(()=>e(null),r=>e(r)),t}set(e,t){(0,k.Dv)("OnDisconnect.set",1,2,arguments.length),(0,k.Wj)("OnDisconnect.set","onComplete",t,!0);const r=this._delegate.set(e);return t&&r.then(()=>t(null),i=>t(i)),r}setWithPriority(e,t,r){(0,k.Dv)("OnDisconnect.setWithPriority",2,3,arguments.length),(0,k.Wj)("OnDisconnect.setWithPriority","onComplete",r,!0);const i=this._delegate.setWithPriority(e,t);return r&&i.then(()=>r(null),a=>r(a)),i}update(e,t){if((0,k.Dv)("OnDisconnect.update",1,2,arguments.length),Array.isArray(e)){const i={};for(let a=0;a<e.length;++a)i[""+a]=e[a];e=i,KA("Passing an Array to firebase.database.onDisconnect().update() is deprecated. Use set() if you want to overwrite the existing data, or an Object with integer keys if you really do want to only update some of the children.")}(0,k.Wj)("OnDisconnect.update","onComplete",t,!0);const r=this._delegate.update(e);return t&&r.then(()=>t(null),i=>t(i)),r}}class QA{constructor(e,t){this.committed=e,this.snapshot=t}toJSON(){return(0,k.Dv)("TransactionResult.toJSON",0,1,arguments.length),{committed:this.committed,snapshot:this.snapshot.toJSON()}}}class vu{constructor(e,t){this._database=e,this._delegate=t}val(){return(0,k.Dv)("DataSnapshot.val",0,0,arguments.length),this._delegate.val()}exportVal(){return(0,k.Dv)("DataSnapshot.exportVal",0,0,arguments.length),this._delegate.exportVal()}toJSON(){return(0,k.Dv)("DataSnapshot.toJSON",0,1,arguments.length),this._delegate.toJSON()}exists(){return(0,k.Dv)("DataSnapshot.exists",0,0,arguments.length),this._delegate.exists()}child(e){return(0,k.Dv)("DataSnapshot.child",0,1,arguments.length),e=String(e),Rp("DataSnapshot.child","path",e,!1),new vu(this._database,this._delegate.child(e))}hasChild(e){return(0,k.Dv)("DataSnapshot.hasChild",1,1,arguments.length),Rp("DataSnapshot.hasChild","path",e,!1),this._delegate.hasChild(e)}getPriority(){return(0,k.Dv)("DataSnapshot.getPriority",0,0,arguments.length),this._delegate.priority}forEach(e){return(0,k.Dv)("DataSnapshot.forEach",1,1,arguments.length),(0,k.Wj)("DataSnapshot.forEach","action",e,!1),this._delegate.forEach(t=>e(new vu(this._database,t)))}hasChildren(){return(0,k.Dv)("DataSnapshot.hasChildren",0,0,arguments.length),this._delegate.hasChildren()}get key(){return this._delegate.key}numChildren(){return(0,k.Dv)("DataSnapshot.numChildren",0,0,arguments.length),this._delegate.size}getRef(){return(0,k.Dv)("DataSnapshot.ref",0,0,arguments.length),new ds(this._database,this._delegate.ref)}get ref(){return this.getRef()}}class qn{constructor(e,t){this.database=e,this._delegate=t}on(e,t,r,i){var a;(0,k.Dv)("Query.on",2,4,arguments.length),(0,k.Wj)("Query.on","callback",t,!1);const l=qn.getCancelAndContextArgs_("Query.on",r,i),h=(w,D)=>{t.call(l.context,new vu(this.database,w),D)};h.userCallback=t,h.context=l.context;const _=null===(a=l.cancel)||void 0===a?void 0:a.bind(l.context);switch(e){case"value":return bb(this._delegate,h,_),t;case"child_added":return Db(this._delegate,h,_),t;case"child_removed":return RA(this._delegate,h,_),t;case"child_changed":return Tb(this._delegate,h,_),t;case"child_moved":return Sb(this._delegate,h,_),t;default:throw new Error((0,k.gK)("Query.on","eventType")+'must be a valid event type = "value", "child_added", "child_removed", "child_changed", or "child_moved".')}}off(e,t,r){if((0,k.Dv)("Query.off",0,3,arguments.length),function(n,e,t){if(void 0!==e)switch(e){case"value":case"child_added":case"child_removed":case"child_changed":case"child_moved":break;default:throw new Error((0,k.gK)("Query.off","eventType")+'must be a valid event type = "value", "child_added", "child_removed", "child_changed", or "child_moved".')}}(0,e),(0,k.Wj)("Query.off","callback",t,!0),(0,k.lb)("Query.off","context",r,!0),t){const i=()=>{};i.userCallback=t,i.context=r,Ab(this._delegate,e,i)}else Ab(this._delegate,e)}get(){return dw(this._delegate).then(e=>new vu(this.database,e))}once(e,t,r,i){(0,k.Dv)("Query.once",1,4,arguments.length),(0,k.Wj)("Query.once","callback",t,!0);const a=qn.getCancelAndContextArgs_("Query.once",r,i),l=new k.BH,h=(w,D)=>{const S=new vu(this.database,w);t&&t.call(a.context,S,D),l.resolve(S)};h.userCallback=t,h.context=a.context;const _=w=>{a.cancel&&a.cancel.call(a.context,w),l.reject(w)};switch(e){case"value":bb(this._delegate,h,_,{onlyOnce:!0});break;case"child_added":Db(this._delegate,h,_,{onlyOnce:!0});break;case"child_removed":RA(this._delegate,h,_,{onlyOnce:!0});break;case"child_changed":Tb(this._delegate,h,_,{onlyOnce:!0});break;case"child_moved":Sb(this._delegate,h,_,{onlyOnce:!0});break;default:throw new Error((0,k.gK)("Query.once","eventType")+'must be a valid event type = "value", "child_added", "child_removed", "child_changed", or "child_moved".')}return l.promise}limitToFirst(e){return(0,k.Dv)("Query.limitToFirst",1,1,arguments.length),new qn(this.database,Ao(this._delegate,function PA(n){if("number"!=typeof n||Math.floor(n)!==n||n<=0)throw new Error("limitToFirst: First argument must be a positive integer.");return new Nb(n)}(e)))}limitToLast(e){return(0,k.Dv)("Query.limitToLast",1,1,arguments.length),new qn(this.database,Ao(this._delegate,function kb(n){if("number"!=typeof n||Math.floor(n)!==n||n<=0)throw new Error("limitToLast: First argument must be a positive integer.");return new Pb(n)}(e)))}orderByChild(e){return(0,k.Dv)("Query.orderByChild",1,1,arguments.length),new qn(this.database,Ao(this._delegate,function OA(n){if("$key"===n)throw new Error('orderByChild: "$key" is invalid.  Use orderByKey() instead.');if("$priority"===n)throw new Error('orderByChild: "$priority" is invalid.  Use orderByPriority() instead.');if("$value"===n)throw new Error('orderByChild: "$value" is invalid.  Use orderByValue() instead.');return Rp("orderByChild","path",n,!1),new kA(n)}(e)))}orderByKey(){return(0,k.Dv)("Query.orderByKey",0,0,arguments.length),new qn(this.database,Ao(this._delegate,function ua(){return new gw}()))}orderByPriority(){return(0,k.Dv)("Query.orderByPriority",0,0,arguments.length),new qn(this.database,Ao(this._delegate,function vP(){return new FA}()))}orderByValue(){return(0,k.Dv)("Query.orderByValue",0,0,arguments.length),new qn(this.database,Ao(this._delegate,function Ob(){return new LA}()))}startAt(e=null,t){return(0,k.Dv)("Query.startAt",0,2,arguments.length),new qn(this.database,Ao(this._delegate,function NA(n=null,e){return Nh("startAt","key",e,!0),new Rb(n,e)}(e,t)))}startAfter(e=null,t){return(0,k.Dv)("Query.startAfter",0,2,arguments.length),new qn(this.database,Ao(this._delegate,function Mb(n,e){return Nh("startAfter","key",e,!0),new pw(n,e)}(e,t)))}endAt(e=null,t){return(0,k.Dv)("Query.endAt",0,2,arguments.length),new qn(this.database,Ao(this._delegate,function aa(n,e){return Nh("endAt","key",e,!0),new xb(n,e)}(e,t)))}endBefore(e=null,t){return(0,k.Dv)("Query.endBefore",0,2,arguments.length),new qn(this.database,Ao(this._delegate,function fw(n,e){return Nh("endBefore","key",e,!0),new MA(n,e)}(e,t)))}equalTo(e,t){return(0,k.Dv)("Query.equalTo",1,2,arguments.length),new qn(this.database,Ao(this._delegate,function UA(n,e){return Nh("equalTo","key",e,!0),new VA(n,e)}(e,t)))}toString(){return(0,k.Dv)("Query.toString",0,0,arguments.length),this._delegate.toString()}toJSON(){return(0,k.Dv)("Query.toJSON",0,1,arguments.length),this._delegate.toJSON()}isEqual(e){if((0,k.Dv)("Query.isEqual",1,1,arguments.length),!(e instanceof qn))throw new Error("Query.isEqual failed: First argument must be an instance of firebase.database.Query.");return this._delegate.isEqual(e._delegate)}static getCancelAndContextArgs_(e,t,r){const i={cancel:void 0,context:void 0};if(t&&r)i.cancel=t,(0,k.Wj)(e,"cancel",i.cancel,!0),i.context=r,(0,k.lb)(e,"context",i.context,!0);else if(t)if("object"==typeof t&&null!==t)i.context=t;else{if("function"!=typeof t)throw new Error((0,k.gK)(e,"cancelOrContext")+" must either be a cancel callback or a context object.");i.cancel=t}return i}get ref(){return new ds(this.database,new Os(this._delegate._repo,this._delegate._path))}}class ds extends qn{constructor(e,t){super(e,new ks(t._repo,t._path,new km,!1)),this.database=e,this._delegate=t}getKey(){return(0,k.Dv)("Reference.key",0,0,arguments.length),this._delegate.key}child(e){return(0,k.Dv)("Reference.child",1,1,arguments.length),"number"==typeof e&&(e=String(e)),new ds(this.database,Oh(this._delegate,e))}getParent(){(0,k.Dv)("Reference.parent",0,0,arguments.length);const e=this._delegate.parent;return e?new ds(this.database,e):null}getRoot(){return(0,k.Dv)("Reference.root",0,0,arguments.length),new ds(this.database,this._delegate.root)}set(e,t){(0,k.Dv)("Reference.set",1,2,arguments.length),(0,k.Wj)("Reference.set","onComplete",t,!0);const r=s_(this._delegate,e);return t&&r.then(()=>t(null),i=>t(i)),r}update(e,t){if((0,k.Dv)("Reference.update",1,2,arguments.length),Array.isArray(e)){const i={};for(let a=0;a<e.length;++a)i[""+a]=e[a];e=i,KA("Passing an Array to Firebase.update() is deprecated. Use set() if you want to overwrite the existing data, or an Object with integer keys if you really do want to only update some of the children.")}So("Reference.update",this._delegate._path),(0,k.Wj)("Reference.update","onComplete",t,!0);const r=xA(this._delegate,e);return t&&r.then(()=>t(null),i=>t(i)),r}setWithPriority(e,t,r){(0,k.Dv)("Reference.setWithPriority",2,3,arguments.length),(0,k.Wj)("Reference.setWithPriority","onComplete",r,!0);const i=function Ib(n,e,t){if(So("setWithPriority",n._path),ja("setWithPriority",e,n._path,!1),Jm("setWithPriority",t,!1),".length"===n.key||".keys"===n.key)throw"setWithPriority failed: "+n.key+" is a read-only object.";const r=new k.BH;return J0(n._repo,n._path,e,t,r.wrapCallback(()=>{})),r.promise}(this._delegate,e,t);return r&&i.then(()=>r(null),a=>r(a)),i}remove(e){(0,k.Dv)("Reference.remove",0,1,arguments.length),(0,k.Wj)("Reference.remove","onComplete",e,!0);const t=function Cb(n){return So("remove",n._path),s_(n,null)}(this._delegate);return e&&t.then(()=>e(null),r=>e(r)),t}transaction(e,t,r){(0,k.Dv)("Reference.transaction",1,3,arguments.length),(0,k.Wj)("Reference.transaction","transactionUpdate",e,!1),(0,k.Wj)("Reference.transaction","onComplete",t,!0),function(n,e,t,r){if(void 0!==t&&"boolean"!=typeof t)throw new Error((0,k.gK)("Reference.transaction","applyLocally")+"must be a boolean.")}(0,0,r);const i=function zA(n,e,t){var r;if(n=(0,k.m9)(n),So("Reference.transaction",n._path),".length"===n.key||".keys"===n.key)throw"Reference.transaction failed: "+n.key+" is a read-only object.";const i=null===(r=null==t?void 0:t.applyLocally)||void 0===r||r,a=new k.BH,h=bb(n,()=>{});return function _b(n,e,t,r,i,a){Vc(n,"transaction on "+e);const l={path:e,update:t,onComplete:r,status:null,order:uS(),applyLocally:a,retryCount:0,unwatcher:i,abortReason:null,currentWriteId:null,currentInputSnapshot:null,currentOutputSnapshotRaw:null,currentOutputSnapshotResolved:null},h=r_(n,e,void 0);l.currentInputSnapshot=h;const _=l.update(h.val());if(void 0===_)l.unwatcher(),l.currentOutputSnapshotRaw=null,l.currentOutputSnapshotResolved=null,l.onComplete&&l.onComplete(null,!1,l.currentInputSnapshot);else{Mh("transaction failed: Data returned ",_,l.path),l.status=0;const w=Ap(n.transactionQueueTree_,e),D=_u(w)||[];let S;D.push(l),Zm(w,D),"object"==typeof _&&null!==_&&(0,k.r3)(_,".priority")?(S=(0,k.DV)(_,".priority"),(0,k.hu)(Rh(S),"Invalid priority returned by transaction. Priority must be a valid string, finite number, server value, or null.")):S=(Ip(n.serverSyncTree_,e)||At.EMPTY_NODE).getPriority().val();const N=Lc(n),L=Xn(_,S),j=B0(L,h,N);l.currentOutputSnapshotRaw=L,l.currentOutputSnapshotResolved=j,l.currentWriteId=Q0(n);const fe=N0(n.serverSyncTree_,e,j,l.currentWriteId,l.applyLocally);sa(n.eventQueue_,e,fe),i_(n,n.transactionQueueTree_)}}(n._repo,n._path,e,(_,w,D)=>{let S=null;_?a.reject(_):(S=new yu(D,new Os(n._repo,n._path),Tn),a.resolve(new qA(w,S)))},h,i),a.promise}(this._delegate,e,{applyLocally:r}).then(a=>new QA(a.committed,new vu(this.database,a.snapshot)));return t&&i.then(a=>t(null,a.committed,a.snapshot),a=>t(a,!1,null)),i}setPriority(e,t){(0,k.Dv)("Reference.setPriority",1,2,arguments.length),(0,k.Wj)("Reference.setPriority","onComplete",t,!0);const r=function yP(n,e){n=(0,k.m9)(n),So("setPriority",n._path),Jm("setPriority",e,!1);const t=new k.BH;return J0(n._repo,Un(n._path,".priority"),e,null,t.wrapCallback(()=>{})),t.promise}(this._delegate,e);return t&&r.then(()=>t(null),i=>t(i)),r}push(e,t){(0,k.Dv)("Reference.push",0,2,arguments.length),(0,k.Wj)("Reference.push","onComplete",t,!0);const r=function Eb(n,e){n=(0,k.m9)(n),So("push",n._path),ja("push",e,n._path,!0);const t=cb(n._repo),r=Nm(t),i=Oh(n,r),a=Oh(n,r);let l;return l=null!=e?s_(a,e).then(()=>a):Promise.resolve(a),i.then=l.then.bind(l),i.catch=l.then.bind(l,void 0),i}(this._delegate,e),i=r.then(l=>new ds(this.database,l));t&&i.then(()=>t(null),l=>t(l));const a=new ds(this.database,r);return a.then=i.then.bind(i),a.catch=i.catch.bind(i,void 0),a}onDisconnect(){return So("Reference.onDisconnect",this._delegate._path),new YA(new AA(this._delegate._repo,this._delegate._path))}get key(){return this.getKey()}get parent(){return this.getParent()}get root(){return this.getRoot()}}class Bc{constructor(e,t){this._delegate=e,this.app=t,this.INTERNAL={delete:()=>this._delegate._delete()}}useEmulator(e,t,r={}){!function $A(n,e,t,r={}){(n=(0,k.m9)(n))._checkNotDeleted("useEmulator"),n._instanceStarted&&ta("Cannot call useEmulator() after instance has already been initialized.");const i=n._repoInternal;let a;if(i.repoInfo_.nodeAdmin)r.mockUserToken&&ta('mockUserToken is not supported by the Admin SDK. For client access with mock users, please use the "firebase" package instead of "firebase-admin".'),a=new sh(sh.OWNER);else if(r.mockUserToken){const l="string"==typeof r.mockUserToken?r.mockUserToken:(0,k.Sg)(r.mockUserToken,n.app.options.projectId);a=new sh(l)}!function Lb(n,e,t,r){n.repoInfo_=new vm(`${e}:${t}`,!1,n.repoInfo_.namespace,n.repoInfo_.webSocketOnly,n.repoInfo_.nodeAdmin,n.repoInfo_.persistenceKey,n.repoInfo_.includeNamespaceInQueryParams),r&&(n.authTokenProvider_=r)}(i,e,t,a)}(this._delegate,e,t,r)}ref(e){if((0,k.Dv)("database.ref",0,1,arguments.length),e instanceof ds){const t=cw(this._delegate,e.toString());return new ds(this,t)}{const t=lw(this._delegate,e);return new ds(this,t)}}refFromURL(e){(0,k.Dv)("database.refFromURL",1,1,arguments.length);const r=cw(this._delegate,e);return new ds(this,r)}goOffline(){return(0,k.Dv)("database.goOffline",0,0,arguments.length),function Bb(n){(n=(0,k.m9)(n))._checkNotDeleted("goOffline"),gb(n._repo)}(this._delegate)}goOnline(){return(0,k.Dv)("database.goOnline",0,0,arguments.length),function jb(n){(n=(0,k.m9)(n))._checkNotDeleted("goOnline"),function mb(n){n.persistentConnection_&&n.persistentConnection_.resume(e_)}(n._repo)}(this._delegate)}}Bc.ServerValue={TIMESTAMP:function EP(){return wP}(),increment:n=>function Hb(n){return{".sv":{increment:n}}}(n)};var JA=Object.freeze({__proto__:null,initStandalone:function vw({app:n,url:e,version:t,customAuthImpl:r,namespace:i,nodeAdmin:a=!1}){FC(t);const l=new Co.zt("auth-internal",new Co.H0("database-standalone"));return l.setComponent(new Co.wA("auth-internal",()=>r,"PRIVATE")),{instance:new Bc(Vb(n,l,void 0,e,a),n),namespace:i}}});const ww=Bc.ServerValue;!function Ew(n){n.INTERNAL.registerComponent(new Co.wA("database-compat",(e,{instanceIdentifier:t})=>{const r=e.getProvider("app-compat").getImmediate(),i=e.getProvider("database").getImmediate({identifier:t});return new Bc(i,r)},"PUBLIC").setServiceProps({Reference:ds,Query:qn,Database:Bc,DataSnapshot:vu,enableLogging:GA,INTERNAL:JA,ServerValue:ww}).setMultipleInstances(!0)),n.registerVersion("@firebase/database-compat","0.1.7")}(cm.Z);var jc=F(5363),TP=F(6063);class SP extends pr.x{constructor(e=1/0,t=1/0,r=TP.l){super(),this._bufferSize=e,this._windowTime=t,this._timestampProvider=r,this._buffer=[],this._infiniteTimeWindow=!0,this._infiniteTimeWindow=t===1/0,this._bufferSize=Math.max(1,e),this._windowTime=Math.max(1,t)}next(e){const{isStopped:t,_buffer:r,_infiniteTimeWindow:i,_timestampProvider:a,_windowTime:l}=this;t||(r.push(e),!i&&r.push(a.now()+l)),this._trimBuffer(),super.next(e)}_subscribe(e){this._throwIfClosed(),this._trimBuffer();const t=this._innerSubscribe(e),{_infiniteTimeWindow:r,_buffer:i}=this,a=i.slice();for(let l=0;l<a.length&&!e.closed;l+=r?1:2)e.next(a[l]);return this._checkFinalizedStatuses(e),t}_trimBuffer(){const{_bufferSize:e,_timestampProvider:t,_buffer:r,_infiniteTimeWindow:i}=this,a=(i?1:2)*e;if(e<1/0&&a<r.length&&r.splice(0,r.length-a),!i){const l=t.now();let h=0;for(let _=1;_<r.length&&r[_]<=l;_+=2)h=_;h&&r.splice(0,h+1)}}}function XA(n,e,t){let r,i=!1;return n&&"object"==typeof n?({bufferSize:r=1/0,windowTime:e=1/0,refCount:i=!1,scheduler:t}=n):r=null!=n?n:1/0,(0,Ac.B)({connector:()=>new SP(r,e,t),resetOnError:!0,resetOnComplete:!1,resetOnRefCountZero:i})}function ex(n,e){return(0,nu.m)(e)?bn(()=>n,e):bn(()=>n)}var l_=F(9468);F(5867);const sx=new Map,ox={activated:!1,tokenObservers:[]},ax={initialized:!1,enabled:!1};function Xr(n){return sx.get(n)||ox}function Ha(n,e){sx.set(n,e)}function Cw(){return ax}class OP{constructor(e,t,r,i,a){if(this.operation=e,this.retryPolicy=t,this.getWaitDuration=r,this.lowerBound=i,this.upperBound=a,this.pending=null,this.nextErrorWaitInterval=i,i>a)throw new Error("Proactive refresh lower bound greater than upper bound!")}start(){this.nextErrorWaitInterval=this.lowerBound,this.process(!0).catch(()=>{})}stop(){this.pending&&(this.pending.reject("cancelled"),this.pending=null)}isRunning(){return!!this.pending}process(e){var t=this;return(0,ye.Z)(function*(){t.stop();try{t.pending=new k.BH,yield function s(n){return new Promise(e=>{setTimeout(e,n)})}(t.getNextRun(e)),t.pending.resolve(),yield t.pending.promise,t.pending=new k.BH,yield t.operation(),t.pending.resolve(),yield t.pending.promise,t.process(!0).catch(()=>{})}catch(r){t.retryPolicy(r)?t.process(!1).catch(()=>{}):t.stop()}})()}getNextRun(e){if(e)return this.nextErrorWaitInterval=this.lowerBound,this.getWaitDuration();{const t=this.nextErrorWaitInterval;return this.nextErrorWaitInterval*=2,this.nextErrorWaitInterval>this.upperBound&&(this.nextErrorWaitInterval=this.upperBound),t}}}const u=new k.LL("appCheck","AppCheck",{"already-initialized":"You have already called initializeAppCheck() for FirebaseApp {$appName} with different options. To avoid this error, call initializeAppCheck() with the same options as when it was originally called. This will return the already initialized instance.","use-before-activation":"App Check is being used before initializeAppCheck() is called for FirebaseApp {$appName}. Call initializeAppCheck() before instantiating other Firebase services.","fetch-network-error":"Fetch failed to connect to a network. Check Internet connection. Original error: {$originalErrorMessage}.","fetch-parse-error":"Fetch client could not parse response. Original error: {$originalErrorMessage}.","fetch-status-error":"Fetch server returned an HTTP error status. HTTP status: {$httpStatus}.","storage-open":"Error thrown when opening storage. Original error: {$originalErrorMessage}.","storage-get":"Error thrown when reading from storage. Original error: {$originalErrorMessage}.","storage-set":"Error thrown when writing to storage. Original error: {$originalErrorMessage}.","recaptcha-error":"ReCAPTCHA error.",throttled:"Requests throttled due to {$httpStatus} error. Attempts allowed again after {$time}"});function d(n){if(!Xr(n).activated)throw u.create("use-before-activation",{appName:n.name})}function I(n,e){return A.apply(this,arguments)}function A(){return(A=(0,ye.Z)(function*({url:n,body:e},t){const r={"Content-Type":"application/json"},i=t.getImmediate({optional:!0});if(i){const S=yield i.getHeartbeatsHeader();S&&(r["X-Firebase-Client"]=S)}const a={method:"POST",body:JSON.stringify(e),headers:r};let l,h;try{l=yield fetch(n,a)}catch(S){throw u.create("fetch-network-error",{originalErrorMessage:S.message})}if(200!==l.status)throw u.create("fetch-status-error",{httpStatus:l.status});try{h=yield l.json()}catch(S){throw u.create("fetch-parse-error",{originalErrorMessage:S.message})}const _=h.ttl.match(/^([\d.]+)(s)$/);if(!_||!_[2]||isNaN(Number(_[1])))throw u.create("fetch-parse-error",{originalErrorMessage:`ttl field (timeToLive) is not in standard Protobuf Duration format: ${h.ttl}`});const w=1e3*Number(_[1]),D=Date.now();return{token:h.attestationToken,expireTimeMillis:D+w,issuedAtTimeMillis:D}})).apply(this,arguments)}function H(n,e){const{projectId:t,appId:r,apiKey:i}=n.options;return{url:`https://content-firebaseappcheck.googleapis.com/v1beta/projects/${t}/apps/${r}:exchangeDebugToken?key=${i}`,body:{debug_token:e}}}const ke="firebase-app-check-store";let Qe=null;function be(){return Qe||(Qe=new Promise((n,e)=>{try{const t=indexedDB.open("firebase-app-check-database",1);t.onsuccess=r=>{n(r.target.result)},t.onerror=r=>{var i;e(u.create("storage-open",{originalErrorMessage:null===(i=r.target.error)||void 0===i?void 0:i.message}))},t.onupgradeneeded=r=>{0===r.oldVersion&&r.target.result.createObjectStore(ke,{keyPath:"compositeKey"})}}catch(t){e(u.create("storage-open",{originalErrorMessage:t.message}))}}),Qe)}function Pp(){return(Pp=(0,ye.Z)(function*(n,e){const r=(yield be()).transaction(ke,"readwrite"),a=r.objectStore(ke).put({compositeKey:n,value:e});return new Promise((l,h)=>{a.onsuccess=_=>{l()},r.onerror=_=>{var w;h(u.create("storage-set",{originalErrorMessage:null===(w=_.target.error)||void 0===w?void 0:w.message}))}})})).apply(this,arguments)}const Hc=new Io.Yd("@firebase/app-check");function p_(n,e){return(0,k.hl)()?function Kt(n,e){return function bl(n,e){return Pp.apply(this,arguments)}(function f_(n){return`${n.options.appId}-${n.name}`}(n),e)}(n,e).catch(t=>{Hc.warn(`Failed to write token to IndexedDB. Error: ${t}`)}):Promise.resolve()}function FP(){return Cw().enabled}function LP(){return dx.apply(this,arguments)}function dx(){return(dx=(0,ye.Z)(function*(){const n=Cw();if(n.enabled&&n.token)return n.token.promise;throw Error("\n            Can't get debug token in production mode.\n        ")})).apply(this,arguments)}const MV={error:"UNKNOWN_ERROR"};function NV(n){return k.US.encodeString(JSON.stringify(n),!1)}function Zb(n){return hx.apply(this,arguments)}function hx(){return(hx=(0,ye.Z)(function*(n,e=!1){const t=n.app;d(t);const r=Xr(t);let a,i=r.token;if(!i){const _=yield r.cachedTokenPromise;_&&Yb(_)&&(i=_)}if(!e&&i&&Yb(i))return{token:i.token};let h,l=!1;if(FP()){r.exchangeTokenPromise||(r.exchangeTokenPromise=I(H(t,yield LP()),n.heartbeatServiceProvider).then(w=>(r.exchangeTokenPromise=void 0,w)),l=!0);const _=yield r.exchangeTokenPromise;return yield p_(t,_),Ha(t,Object.assign(Object.assign({},r),{token:_})),{token:_.token}}try{r.exchangeTokenPromise||(r.exchangeTokenPromise=r.provider.getToken().then(_=>(r.exchangeTokenPromise=void 0,_)),l=!0),i=yield r.exchangeTokenPromise}catch(_){"appCheck/throttled"===_.code?Hc.warn(_.message):Hc.error(_),a=_}return i?(h={token:i.token},Ha(t,Object.assign(Object.assign({},r),{token:i})),yield p_(t,i)):h=kV(a),l&&UP(t,h),h})).apply(this,arguments)}function px(n,e){const t=Xr(n),r=t.tokenObservers.filter(i=>i.next!==e);0===r.length&&t.tokenRefresher&&t.tokenRefresher.isRunning()&&t.tokenRefresher.stop(),Ha(n,Object.assign(Object.assign({},t),{tokenObservers:r}))}function VP(n){const{app:e}=n,t=Xr(e);let r=t.tokenRefresher;r||(r=function PV(n){const{app:e}=n;return new OP((0,ye.Z)(function*(){let r;if(r=Xr(e).token?yield Zb(n,!0):yield Zb(n),r.error)throw r.error}),()=>!0,()=>{const t=Xr(e);if(t.token){let r=t.token.issuedAtTimeMillis+.5*(t.token.expireTimeMillis-t.token.issuedAtTimeMillis)+3e5;return r=Math.min(r,t.token.expireTimeMillis-3e5),Math.max(0,r-Date.now())}return 0},3e4,96e4)}(n),Ha(e,Object.assign(Object.assign({},t),{tokenRefresher:r}))),!r.isRunning()&&t.isTokenAutoRefreshEnabled&&r.start()}function UP(n,e){const t=Xr(n).tokenObservers;for(const r of t)try{"EXTERNAL"===r.type&&null!=e.error?r.error(e.error):r.next(e)}catch(i){}}function Yb(n){return n.expireTimeMillis-Date.now()>0}function kV(n){return{token:NV(MV),error:n}}class OV{constructor(e,t){this.app=e,this.heartbeatServiceProvider=t}_delete(){const{tokenObservers:e}=Xr(this.app);for(const t of e)px(this.app,t.next);return Promise.resolve()}}const zP="app-check-internal";!function ZV(){(0,gi._registerComponent)(new Co.wA("app-check",n=>function FV(n,e){return new OV(n,e)}(n.getProvider("app").getImmediate(),n.getProvider("heartbeat")),"PUBLIC").setInstantiationMode("EXPLICIT").setInstanceCreatedCallback((n,e,t)=>{n.getProvider(zP).initialize()})),(0,gi._registerComponent)(new Co.wA(zP,n=>function LV(n){return{getToken:e=>Zb(n,e),addTokenListener:e=>function fx(n,e,t,r){const{app:i}=n,a=Xr(i),l={next:t,error:r,type:e};if(Ha(i,Object.assign(Object.assign({},a),{tokenObservers:[...a.tokenObservers,l]})),a.token&&Yb(a.token)){const h=a.token;Promise.resolve().then(()=>{t({token:h.token}),VP(n)}).catch(()=>{})}a.cachedTokenPromise.then(()=>VP(n))}(n,"INTERNAL",e),removeTokenListener:e=>px(n.app,e)}}(n.getProvider("app-check").getImmediate()),"PUBLIC").setInstantiationMode("EXPLICIT")),(0,gi.registerVersion)("@firebase/app-check","0.5.5")}();class Dw{constructor(){return(0,tn.vb)("app-check")}}"undefined"!=typeof window&&window;var Jb=F(127);const vx=new m.OlP("angularfire2.auth.use-emulator"),wx=new m.OlP("angularfire2.auth.settings"),Ex=new m.OlP("angularfire2.auth.tenant-id"),Cx=new m.OlP("angularfire2.auth.langugage-code"),Ix=new m.OlP("angularfire2.auth.use-device-language"),bx=new m.OlP("angularfire.auth.persistence"),Dx=(n,e,t,r,i,a,l,h)=>(0,_r.cc)(`${n.name}.auth`,"AngularFireAuth",n.name,()=>{const _=e.runOutsideAngular(()=>n.auth());if(t&&_.useEmulator(...t),r&&(_.tenantId=r),_.languageCode=i,a&&_.useDeviceLanguage(),l)for(const[w,D]of Object.entries(l))_.settings[w]=D;return h&&_.setPersistence(h),_},[t,r,i,a,l,h]);let Xb=(()=>{class n{constructor(t,r,i,a,l,h,_,w,D,S,N,L){const j=new pr.x,fe=ct(void 0).pipe((0,jc.Q)(l.outsideAngular),bn(()=>a.runOutsideAngular(()=>Promise.resolve().then(F.bind(F,4087)))),(0,yt.U)(()=>(0,_r.on)(t,a,r)),(0,yt.U)(Me=>Dx(Me,a,h,w,D,S,_,N)),XA({bufferSize:1,refCount:!1}));if(hr(i))this.authState=this.user=this.idToken=this.idTokenResult=this.credential=ct(null);else{fe.pipe(co()).subscribe();const et=fe.pipe(bn(tt=>tt.getRedirectResult().then(Nt=>Nt,()=>null)),tn.iC,XA({bufferSize:1,refCount:!1})),We=fe.pipe(bn(tt=>new gr.y(Nt=>({unsubscribe:a.runOutsideAngular(()=>tt.onAuthStateChanged(Pt=>Nt.next(Pt),Pt=>Nt.error(Pt),()=>Nt.complete()))})))),wt=fe.pipe(bn(tt=>new gr.y(Nt=>({unsubscribe:a.runOutsideAngular(()=>tt.onIdTokenChanged(Pt=>Nt.next(Pt),Pt=>Nt.error(Pt),()=>Nt.complete()))}))));this.authState=et.pipe(ex(We),(0,l_.R)(l.outsideAngular),(0,jc.Q)(l.insideAngular)),this.user=et.pipe(ex(wt),(0,l_.R)(l.outsideAngular),(0,jc.Q)(l.insideAngular)),this.idToken=this.user.pipe(bn(tt=>tt?(0,wn.D)(tt.getIdToken()):ct(null))),this.idTokenResult=this.user.pipe(bn(tt=>tt?(0,wn.D)(tt.getIdTokenResult()):ct(null))),this.credential=(0,fl.T)(et,j,this.authState.pipe(Xi(tt=>!tt))).pipe((0,yt.U)(tt=>(null==tt?void 0:tt.user)?tt:null),(0,l_.R)(l.outsideAngular),(0,jc.Q)(l.insideAngular))}return(0,_r.pX)(this,fe,a,{spy:{apply:(Me,et,We)=>{(Me.startsWith("signIn")||Me.startsWith("createUser"))&&We.then(wt=>j.next(wt))}}})}}return n.\u0275fac=function(t){return new(t||n)(m.LFG(_r.Dh),m.LFG(_r.xv,8),m.LFG(m.Lbi),m.LFG(m.R0b),m.LFG(tn.HU),m.LFG(vx,8),m.LFG(wx,8),m.LFG(Ex,8),m.LFG(Cx,8),m.LFG(Ix,8),m.LFG(bx,8),m.LFG(Dw,8))},n.\u0275prov=m.Yz7({token:n,factory:n.\u0275fac,providedIn:"any"}),n})(),tU=(()=>{class n{constructor(){Jb.Z.registerVersion("angularfire",tn.q4.full,"auth-compat")}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=m.oAB({type:n}),n.\u0275inj=m.cJS({providers:[Xb]}),n})();function ZP(n){return null==n}function YP(n){return"function"==typeof n.set}function QP(n,e){return YP(e)?e:n.ref(e)}function JP(n,e){if(function nU(n){return"string"==typeof n}(n))return e.stringCase();if(YP(n))return e.firebaseCase();if(function rU(n){return"function"==typeof n.exportVal}(n))return e.snapshotCase();throw new Error("Expects a string, snapshot, or reference. Got: "+typeof n)}function Tw(n,e,t="on",r=hl.z){return new gr.y(i=>{let a=null;return a=n[t](e,(l,h)=>{r.schedule(()=>{i.next({snapshot:l,prevKey:h})}),"once"===t&&r.schedule(()=>i.complete())},l=>{r.schedule(()=>i.error(l))}),"on"===t?{unsubscribe(){null!=a&&n.off(e,a)}}:{unsubscribe(){}}}).pipe((0,yt.U)(i=>{const{snapshot:a,prevKey:l}=i;let h=null;return a.exists()&&(h=a.key),{type:e,payload:a,prevKey:l,key:h}}),(0,Ac.B)())}function XP(n,e){const t=n.length;for(let r=0;r<t;r++)if(n[r].payload.key===e)return r;return-1}function oU(n,e){const{payload:t,prevKey:r,key:i}=e,a=XP(n,i),l=function sU(n,e){if(ZP(e))return 0;{const t=XP(n,e);return-1===t?n.length:t+1}}(n,r);switch(e.type){case"value":if(e.payload&&e.payload.exists()){let h=null;e.payload.forEach(_=>{const w={payload:_,type:"value",prevKey:h,key:_.key};return h=_.key,n=[...n,w],!1})}return n;case"child_added":if(a>-1){const h=n[a-1];(h&&h.key||null)!==r&&(n=n.filter(_=>_.payload.key!==t.key)).splice(l,0,e)}else{if(null==r)return[e,...n];(n=n.slice()).splice(l,0,e)}return n;case"child_removed":return n.filter(h=>h.payload.key!==t.key);case"child_changed":return n.map(h=>h.payload.key===i?e:h);case"child_moved":if(a>-1){const h=n.splice(a,1)[0];return(n=n.slice()).splice(l,0,h),n}return n;default:return n}}function ek(n){return(ZP(n)||0===n.length)&&(n=["child_added","child_removed","child_changed","child_moved"]),n}function tk(n,e,t){return function iU(n,e,t){return Tw(n,"value","once",t).pipe(bn(r=>{const i=[ct(r)];return e.forEach(a=>i.push(Tw(n,a,"on",t))),(0,fl.T)(...i).pipe(or(oU,[]))}),xc())}(n,e=ek(e),t)}function nk(n,e,t){const r=(e=ek(e)).map(i=>Tw(n,i,"on",t));return(0,fl.T)(...r)}function rk(n,e){return function(r,i){return JP(r,{stringCase:()=>n.child(r)[e](i),firebaseCase:()=>r[e](i),snapshotCase:()=>r.ref[e](i)})}}function cU(n){return function(t){return t?JP(t,{stringCase:()=>n.child(t).remove(),firebaseCase:()=>t.remove(),snapshotCase:()=>t.ref.remove()}):n.remove()}}function ik(n,e){return function(){return Tw(n,"value","on",e)}}const fU=new m.OlP("angularfire2.realtimeDatabaseURL"),pU=new m.OlP("angularfire2.database.use-emulator");let sk=(()=>{class n{constructor(t,r,i,a,l,h,_,w,D,S,N,L,j,fe,Me){this.schedulers=h;const et=_,We=(0,_r.on)(t,l,r);w&&Dx(We,l,D,N,L,j,S,fe),this.database=(0,_r.cc)(`${We.name}.database.${i}`,"AngularFireDatabase",We.name,()=>{const wt=l.runOutsideAngular(()=>We.database(i||void 0));return et&&wt.useEmulator(...et),wt},[et])}list(t,r){const i=this.schedulers.ngZone.runOutsideAngular(()=>QP(this.database,t));let a=i;return r&&(a=r(i)),function dU(n,e){const t=e.schedulers.outsideAngular,r=e.schedulers.ngZone.run(()=>n.ref);return{query:n,update:rk(r,"update"),set:rk(r,"set"),push:i=>r.push(i),remove:cU(r),snapshotChanges:i=>tk(n,i,t).pipe(tn.iC),stateChanges:i=>nk(n,i,t).pipe(tn.iC),auditTrail:i=>function aU(n,e,t){return function lU(n,e,t){return function uU(n,e){return Tw(n,"value","on",e).pipe((0,yt.U)(t=>{let r;return t.payload.forEach(i=>(r=i.key,!1)),{data:t,lastKeyToLoad:r}}))}(n,t).pipe(function NC(...n){const e=(0,Mn.jO)(n);return(0,sr.e)((t,r)=>{const i=n.length,a=new Array(i);let l=n.map(()=>!1),h=!1;for(let _=0;_<i;_++)(0,Go.Xf)(n[_]).subscribe((0,In.x)(r,w=>{a[_]=w,!h&&!l[_]&&(l[_]=!0,(h=l.every(Yr.y))&&(l=null))},nh.Z));t.subscribe((0,In.x)(r,_=>{if(h){const w=[_,...a];r.next(e?e(...w):w)}}))})}(e),(0,yt.U)(([i,a])=>{const l=i.lastKeyToLoad,h=a.map(_=>_.key);return{actions:a,lastKeyToLoad:l,loadedKeys:h}}),function PC(n){return(0,sr.e)((e,t)=>{let r=!1,i=0;e.subscribe((0,In.x)(t,a=>(r||(r=!n(a,i++)))&&t.next(a)))})}(i=>-1===i.loadedKeys.indexOf(i.lastKeyToLoad)),(0,yt.U)(i=>i.actions))}(n,nk(n,e).pipe(or((i,a)=>[...i,a],[])),t)}(n,i,t).pipe(tn.iC),valueChanges:(i,a)=>tk(n,i,t).pipe((0,yt.U)(h=>h.map(_=>a&&a.idField?Object.assign(Object.assign({},_.payload.val()),{[a.idField]:_.key}):_.payload.val())),tn.iC)}}(a,this)}object(t){return function hU(n,e){return{query:n,snapshotChanges:()=>ik(n,e.schedulers.outsideAngular)().pipe(tn.iC),update:t=>n.ref.update(t),set:t=>n.ref.set(t),remove:()=>n.ref.remove(),valueChanges:()=>ik(n,e.schedulers.outsideAngular)().pipe(tn.iC,(0,yt.U)(r=>r.payload.exists()?r.payload.val():null))}}(this.schedulers.ngZone.runOutsideAngular(()=>QP(this.database,t)),this)}createPushId(){return this.schedulers.ngZone.runOutsideAngular(()=>this.database.ref()).push().key}}return n.\u0275fac=function(t){return new(t||n)(m.LFG(_r.Dh),m.LFG(_r.xv,8),m.LFG(fU,8),m.LFG(m.Lbi),m.LFG(m.R0b),m.LFG(tn.HU),m.LFG(pU,8),m.LFG(Xb,8),m.LFG(vx,8),m.LFG(wx,8),m.LFG(Ex,8),m.LFG(Cx,8),m.LFG(Ix,8),m.LFG(bx,8),m.LFG(Dw,8))},n.\u0275prov=m.Yz7({token:n,factory:n.\u0275fac,providedIn:"any"}),n})(),gU=(()=>{class n{constructor(){Jb.Z.registerVersion("angularfire",tn.q4.full,"rtdb-compat")}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=m.oAB({type:n}),n.\u0275inj=m.cJS({providers:[sk]}),n})(),ok=(()=>{class n{constructor(t){this.db=t,this.urlsRef=this.db.list("urlDataList"),this.urlRef=this.db.object("urlData")}AddUrlData(t,r){this.urlsRef.push({originalUrl:t,shortenedUrl:r})}GetUrlData(t){return this.urlRef=this.db.object("urlDataList/"+t),this.urlRef}GetUrlDataList(){return this.urlsRef}}return n.\u0275fac=function(t){return new(t||n)(m.LFG(sk))},n.\u0275prov=m.Yz7({token:n,factory:n.\u0275fac,providedIn:"root"}),n})();function mU(n,e){1&n&&(m.TgZ(0,"div"),m._uU(1,"Please provide url"),m.qZA())}function _U(n,e){1&n&&(m.TgZ(0,"div"),m._uU(1,"Please provide valid url"),m.qZA())}function yU(n,e){if(1&n&&(m.TgZ(0,"div",20),m.YNc(1,mU,2,0,"div",21),m.YNc(2,_U,2,0,"div",21),m.qZA()),2&n){const t=m.oxw(2);m.xp6(1),m.Q6J("ngIf",null==t.m.short.errors?null:t.m.short.errors.required),m.xp6(1),m.Q6J("ngIf",null==t.m.short.errors?null:t.m.short.errors.pattern)}}function vU(n,e){if(1&n){const t=m.EpF();m.TgZ(0,"div",15)(1,"form",16),m.NdJ("ngSubmit",function(){return m.CHM(t),m.oxw().shorten()}),m.TgZ(2,"div"),m._UZ(3,"input",17),m.qZA(),m.YNc(4,yU,3,2,"div",18),m.TgZ(5,"button",19),m._uU(6,"Shorten"),m.qZA()()()}if(2&n){const t=m.oxw();m.xp6(1),m.Q6J("formGroup",t.shortForm),m.xp6(3),m.Q6J("ngIf",t.m.short.touched&&t.m.short.invalid),m.xp6(1),m.Q6J("disabled",t.m.short.invalid)}}function wU(n,e){1&n&&(m.TgZ(0,"div"),m._uU(1,"Please provide url"),m.qZA())}function EU(n,e){1&n&&(m.TgZ(0,"div"),m._uU(1,"Please provide valid url"),m.qZA())}function CU(n,e){if(1&n&&(m.TgZ(0,"div",20),m.YNc(1,wU,2,0,"div",21),m.YNc(2,EU,2,0,"div",21),m.qZA()),2&n){const t=m.oxw(2);m.xp6(1),m.Q6J("ngIf",null==t.m.inflate.errors?null:t.m.inflate.errors.required),m.xp6(1),m.Q6J("ngIf",null==t.m.inflate.errors?null:t.m.inflate.errors.pattern)}}function IU(n,e){if(1&n){const t=m.EpF();m.TgZ(0,"div",15)(1,"form",16),m.NdJ("ngSubmit",function(){return m.CHM(t),m.oxw().inflate()}),m.TgZ(2,"div")(3,"p"),m._uU(4),m.qZA(),m._UZ(5,"input",22),m.qZA(),m.YNc(6,CU,3,2,"div",18),m.TgZ(7,"button",19),m._uU(8,"Inflate"),m.qZA()()()}if(2&n){const t=m.oxw();m.xp6(1),m.Q6J("formGroup",t.shortForm),m.xp6(3),m.hij("Shortened Url: ",t.shortenedUrl,""),m.xp6(2),m.Q6J("ngIf",t.m.inflate.touched&&t.m.inflate.invalid),m.xp6(1),m.Q6J("disabled",t.m.inflate.invalid)}}let bU=(()=>{class n{constructor(t,r,i){this.formBuilder=t,this.tinyUrl=r,this.firebasecrud=i,this.title="Shorten/Inflate Url",this.toshorten=!0,this.shortenedUrl="",this.originalUrl="",this.shortForm=t.group({short:["",[$g.required,$g.pattern("(https?://)?([\\da-z.-]+)\\.([a-z.]{2,6})[/\\w .-]*/?")]],inflate:["",[$g.required,$g.pattern("(https?://)?([\\da-z.-]+)\\.([a-z.]{2,6})[/\\w .-]*/?")]]})}get m(){return this.shortForm.controls}shorten(){this.tinyUrl.shorten(this.shortForm.value.short).subscribe(t=>{this.firebasecrud.AddUrlData(this.shortForm.value.short,t),this.toshorten=!1,this.shortenedUrl=t,this.shortForm.reset()})}inflate(){this.firebasecrud.GetUrlDataList().query.orderByChild("shortenedUrl").equalTo(this.shortForm.value.inflate).limitToFirst(1).on("value",t=>{null==t.val()&&window.alert("Shortened Url does not exists."),t.forEach(r=>{this.originalUrl=r.val().originalUrl,window.alert("Original Url: "+this.originalUrl)})})}}return n.\u0275fac=function(t){return new(t||n)(m.Y36(CC),m.Y36(Xd),m.Y36(ok))},n.\u0275cmp=m.Xpm({type:n,selectors:[["app-root"]],decls:20,vars:3,consts:[["role","banner",1,"toolbar"],["width","40","alt","Angular Logo","src","data:image/svg+xml;base64,PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHZpZXdCb3g9IjAgMCAyNTAgMjUwIj4KICAgIDxwYXRoIGZpbGw9IiNERDAwMzEiIGQ9Ik0xMjUgMzBMMzEuOSA2My4ybDE0LjIgMTIzLjFMMTI1IDIzMGw3OC45LTQzLjcgMTQuMi0xMjMuMXoiIC8+CiAgICA8cGF0aCBmaWxsPSIjQzMwMDJGIiBkPSJNMTI1IDMwdjIyLjItLjFWMjMwbDc4LjktNDMuNyAxNC4yLTEyMy4xTDEyNSAzMHoiIC8+CiAgICA8cGF0aCAgZmlsbD0iI0ZGRkZGRiIgZD0iTTEyNSA1Mi4xTDY2LjggMTgyLjZoMjEuN2wxMS43LTI5LjJoNDkuNGwxMS43IDI5LjJIMTgzTDEyNSA1Mi4xem0xNyA4My4zaC0zNGwxNy00MC45IDE3IDQwLjl6IiAvPgogIDwvc3ZnPg=="],[1,"spacer"],["aria-label","Angular on twitter","target","_blank","rel","noopener","href","https://twitter.com/angular","title","Twitter"],["id","twitter-logo","height","24","data-name","Logo","xmlns","http://www.w3.org/2000/svg","viewBox","0 0 400 400"],["width","400","height","400","fill","none"],["d","M153.62,301.59c94.34,0,145.94-78.16,145.94-145.94,0-2.22,0-4.43-.15-6.63A104.36,104.36,0,0,0,325,122.47a102.38,102.38,0,0,1-29.46,8.07,51.47,51.47,0,0,0,22.55-28.37,102.79,102.79,0,0,1-32.57,12.45,51.34,51.34,0,0,0-87.41,46.78A145.62,145.62,0,0,1,92.4,107.81a51.33,51.33,0,0,0,15.88,68.47A50.91,50.91,0,0,1,85,169.86c0,.21,0,.43,0,.65a51.31,51.31,0,0,0,41.15,50.28,51.21,51.21,0,0,1-23.16.88,51.35,51.35,0,0,0,47.92,35.62,102.92,102.92,0,0,1-63.7,22A104.41,104.41,0,0,1,75,278.55a145.21,145.21,0,0,0,78.62,23","fill","#fff"],["aria-label","Angular on YouTube","target","_blank","rel","noopener","href","https://youtube.com/angular","title","YouTube"],["id","youtube-logo","height","24","width","24","data-name","Logo","xmlns","http://www.w3.org/2000/svg","viewBox","0 0 24 24","fill","#fff"],["d","M0 0h24v24H0V0z","fill","none"],["d","M21.58 7.19c-.23-.86-.91-1.54-1.77-1.77C18.25 5 12 5 12 5s-6.25 0-7.81.42c-.86.23-1.54.91-1.77 1.77C2 8.75 2 12 2 12s0 3.25.42 4.81c.23.86.91 1.54 1.77 1.77C5.75 19 12 19 12 19s6.25 0 7.81-.42c.86-.23 1.54-.91 1.77-1.77C22 15.25 22 12 22 12s0-3.25-.42-4.81zM10 15V9l5.2 3-5.2 3z"],["role","main",1,"content"],[1,"title"],[1,"card-container"],["class","content",4,"ngIf"],[1,"content"],["novalidate","",3,"formGroup","ngSubmit"],["type","text","name","short","id","short","formControlName","short"],["class","alert alert-danger",4,"ngIf"],["type","submit",1,"button",3,"disabled"],[1,"alert","alert-danger"],[4,"ngIf"],["type","text","name","inflate","id","inflate","formControlName","inflate"]],template:function(t,r){1&t&&(m.TgZ(0,"div",0),m._UZ(1,"img",1),m.TgZ(2,"span"),m._uU(3,"Welcome"),m.qZA(),m._UZ(4,"div",2),m.TgZ(5,"a",3),m.O4$(),m.TgZ(6,"svg",4),m._UZ(7,"rect",5)(8,"path",6),m.qZA()(),m.kcU(),m.TgZ(9,"a",7),m.O4$(),m.TgZ(10,"svg",8),m._UZ(11,"path",9)(12,"path",10),m.qZA()()(),m.kcU(),m.TgZ(13,"div",11)(14,"h2",12),m._uU(15),m.qZA(),m.TgZ(16,"div",13),m.YNc(17,vU,7,3,"div",14),m.YNc(18,IU,9,4,"div",14),m.qZA()(),m._UZ(19,"router-outlet")),2&t&&(m.xp6(15),m.Oqu(r.title),m.xp6(2),m.Q6J("ngIf",r.toshorten),m.xp6(1),m.Q6J("ngIf",!r.toshorten))},directives:[si,cv,NT,Tc,Hg,Ky,vv,pc],styles:[""]}),n})();const ak="firebasestorage.googleapis.com",uk="storageBucket";class yr extends k.ZR{constructor(e,t){super(Tx(e),`Firebase Storage: ${t} (${Tx(e)})`),this.customData={serverResponse:null},this._baseMessage=this.message,Object.setPrototypeOf(this,yr.prototype)}_codeEquals(e){return Tx(e)===this.code}get serverResponse(){return this.customData.serverResponse}set serverResponse(e){this.customData.serverResponse=e,this.message=this.customData.serverResponse?`${this._baseMessage}\n${this.customData.serverResponse}`:this._baseMessage}}function Tx(n){return"storage/"+n}function Sx(){return new yr("unknown","An unknown error occurred, please check the error payload for server response.")}function lk(){return new yr("canceled","User canceled the upload/download.")}function ck(){return new yr("cannot-slice-blob","Cannot slice blob for upload. Please retry the upload.")}function g_(n){return new yr("invalid-argument",n)}function dk(){return new yr("app-deleted","The Firebase app was deleted.")}function hk(n){return new yr("invalid-root-operation","The operation '"+n+"' cannot be performed on a root reference, create a non-root reference using child, such as .child('file.png').")}function Sw(n,e){return new yr("invalid-format","String does not match format '"+n+"': "+e)}function Aw(n){throw new yr("internal-error","Internal error: "+n)}class hs{constructor(e,t){this.bucket=e,this.path_=t}get path(){return this.path_}get isRoot(){return 0===this.path.length}fullServerUrl(){const e=encodeURIComponent;return"/b/"+e(this.bucket)+"/o/"+e(this.path)}bucketOnlyServerUrl(){return"/b/"+encodeURIComponent(this.bucket)+"/o"}static makeFromBucketSpec(e,t){let r;try{r=hs.makeFromUrl(e,t)}catch(i){return new hs(e,"")}if(""===r.path)return r;throw function OU(n){return new yr("invalid-default-bucket","Invalid default bucket '"+n+"'.")}(e)}static makeFromUrl(e,t){let r=null;const i="([A-Za-z0-9.\\-_]+)",h=new RegExp("^gs://"+i+"(/(.*))?$","i");function w(tt){tt.path_=decodeURIComponent(tt.path)}const S=t.replace(/[.]/g,"\\."),wt=[{regex:h,indices:{bucket:1,path:3},postModify:function a(tt){"/"===tt.path.charAt(tt.path.length-1)&&(tt.path_=tt.path_.slice(0,-1))}},{regex:new RegExp(`^https?://${S}/v[A-Za-z0-9_]+/b/${i}/o(/([^?#]*).*)?$`,"i"),indices:{bucket:1,path:3},postModify:w},{regex:new RegExp(`^https?://${t===ak?"(?:storage.googleapis.com|storage.cloud.google.com)":t}/${i}/([^?#]*)`,"i"),indices:{bucket:1,path:2},postModify:w}];for(let tt=0;tt<wt.length;tt++){const Nt=wt[tt],Pt=Nt.regex.exec(e);if(Pt){let ti=Pt[Nt.indices.path];ti||(ti=""),r=new hs(Pt[Nt.indices.bucket],ti),Nt.postModify(r);break}}if(null==r)throw function kU(n){return new yr("invalid-url","Invalid URL '"+n+"'.")}(e);return r}}class UU{constructor(e){this.promise_=Promise.reject(e)}getPromise(){return this.promise_}cancel(e=!1){}}function eD(n){return"string"==typeof n||n instanceof String}function fk(n){return Ax()&&n instanceof Blob}function Ax(){return"undefined"!=typeof Blob}function xx(n,e,t,r){if(r<e)throw g_(`Invalid value for '${n}'. Expected ${e} or greater.`);if(r>t)throw g_(`Invalid value for '${n}'. Expected ${t} or less.`)}function $c(n,e,t){let r=e;return null==t&&(r=`https://${e}`),`${t}://${r}/v0${n}`}function pk(n){const e=encodeURIComponent;let t="?";for(const r in n)n.hasOwnProperty(r)&&(t=t+(e(r)+"=")+e(n[r])+"&");return t=t.slice(0,-1),t}var Fh=(()=>{return(n=Fh||(Fh={}))[n.NO_ERROR=0]="NO_ERROR",n[n.NETWORK_ERROR=1]="NETWORK_ERROR",n[n.ABORT=2]="ABORT",Fh;var n})();class WU{constructor(e,t,r,i,a,l,h,_,w,D,S){this.url_=e,this.method_=t,this.headers_=r,this.body_=i,this.successCodes_=a,this.additionalRetryCodes_=l,this.callback_=h,this.errorCallback_=_,this.timeout_=w,this.progressCallback_=D,this.connectionFactory_=S,this.pendingConnection_=null,this.backoffId_=null,this.canceled_=!1,this.appDelete_=!1,this.promise_=new Promise((N,L)=>{this.resolve_=N,this.reject_=L,this.start_()})}start_(){const t=(r,i)=>{const a=this.resolve_,l=this.reject_,h=i.connection;if(i.wasSuccessCode)try{const _=this.callback_(h,h.getResponse());!function HU(n){return void 0!==n}(_)?a():a(_)}catch(_){l(_)}else if(null!==h){const _=Sx();_.serverResponse=h.getErrorText(),l(this.errorCallback_?this.errorCallback_(h,_):_)}else l(i.canceled?this.appDelete_?dk():lk():function PU(){return new yr("retry-limit-exceeded","Max retry time for operation exceeded, please try again.")}())};this.canceled_?t(0,new tD(!1,null,!0)):this.backoffId_=function BU(n,e,t){let r=1,i=null,a=null,l=!1,h=0;function _(){return 2===h}let w=!1;function D(...Me){w||(w=!0,e.apply(null,Me))}function S(Me){i=setTimeout(()=>{i=null,n(L,_())},Me)}function N(){a&&clearTimeout(a)}function L(Me,...et){if(w)return void N();if(Me)return N(),void D.call(null,Me,...et);if(_()||l)return N(),void D.call(null,Me,...et);let wt;r<64&&(r*=2),1===h?(h=2,wt=0):wt=1e3*(r+Math.random()),S(wt)}let j=!1;function fe(Me){j||(j=!0,N(),!w&&(null!==i?(Me||(h=2),clearTimeout(i),S(0)):Me||(h=1)))}return S(0),a=setTimeout(()=>{l=!0,fe(!0)},t),fe}((r,i)=>{if(i)return void r(!1,new tD(!1,null,!0));const a=this.connectionFactory_();this.pendingConnection_=a;const l=h=>{null!==this.progressCallback_&&this.progressCallback_(h.loaded,h.lengthComputable?h.total:-1)};null!==this.progressCallback_&&a.addUploadProgressListener(l),a.send(this.url_,this.method_,this.body_,this.headers_).then(()=>{null!==this.progressCallback_&&a.removeUploadProgressListener(l),this.pendingConnection_=null;const h=a.getErrorCode()===Fh.NO_ERROR,_=a.getStatus();if(!h||this.isRetryStatusCode_(_)){const D=a.getErrorCode()===Fh.ABORT;return void r(!1,new tD(!1,null,D))}const w=-1!==this.successCodes_.indexOf(_);r(!0,new tD(w,a))})},t,this.timeout_)}getPromise(){return this.promise_}cancel(e){this.canceled_=!0,this.appDelete_=e||!1,null!==this.backoffId_&&function jU(n){n(!1)}(this.backoffId_),null!==this.pendingConnection_&&this.pendingConnection_.abort()}isRetryStatusCode_(e){const t=e>=500&&e<600,i=-1!==[408,429].indexOf(e),a=-1!==this.additionalRetryCodes_.indexOf(e);return t||i||a}}class tD{constructor(e,t,r){this.wasSuccessCode=e,this.connection=t,this.canceled=!!r}}function JU(...n){const e=function QU(){return"undefined"!=typeof BlobBuilder?BlobBuilder:"undefined"!=typeof WebKitBlobBuilder?WebKitBlobBuilder:void 0}();if(void 0!==e){const t=new e;for(let r=0;r<n.length;r++)t.append(n[r]);return t.getBlob()}if(Ax())return new Blob(n);throw new yr("unsupported-environment","This browser doesn't seem to support creating Blobs")}const la={RAW:"raw",BASE64:"base64",BASE64URL:"base64url",DATA_URL:"data_url"};class Rx{constructor(e,t){this.data=e,this.contentType=t||null}}function Mx(n,e){switch(n){case la.RAW:return new Rx(gk(e));case la.BASE64:case la.BASE64URL:return new Rx(mk(n,e));case la.DATA_URL:return new Rx(function nB(n){const e=new _k(n);return e.base64?mk(la.BASE64,e.rest):function tB(n){let e;try{e=decodeURIComponent(n)}catch(t){throw Sw(la.DATA_URL,"Malformed data URL.")}return gk(e)}(e.rest)}(e),function rB(n){return new _k(n).contentType}(e))}throw Sx()}function gk(n){const e=[];for(let t=0;t<n.length;t++){let r=n.charCodeAt(t);r<=127?e.push(r):r<=2047?e.push(192|r>>6,128|63&r):55296==(64512&r)?t<n.length-1&&56320==(64512&n.charCodeAt(t+1))?(r=65536|(1023&r)<<10|1023&n.charCodeAt(++t),e.push(240|r>>18,128|r>>12&63,128|r>>6&63,128|63&r)):e.push(239,191,189):56320==(64512&r)?e.push(239,191,189):e.push(224|r>>12,128|r>>6&63,128|63&r)}return new Uint8Array(e)}function mk(n,e){switch(n){case la.BASE64:{const i=-1!==e.indexOf("-"),a=-1!==e.indexOf("_");if(i||a)throw Sw(n,"Invalid character '"+(i?"-":"_")+"' found: is it base64url encoded?");break}case la.BASE64URL:{const i=-1!==e.indexOf("+"),a=-1!==e.indexOf("/");if(i||a)throw Sw(n,"Invalid character '"+(i?"+":"/")+"' found: is it base64 encoded?");e=e.replace(/-/g,"+").replace(/_/g,"/");break}}let t;try{t=function eB(n){return atob(n)}(e)}catch(i){throw Sw(n,"Invalid character found")}const r=new Uint8Array(t.length);for(let i=0;i<t.length;i++)r[i]=t.charCodeAt(i);return r}class _k{constructor(e){this.base64=!1,this.contentType=null;const t=e.match(/^data:([^,]+)?,/);if(null===t)throw Sw(la.DATA_URL,"Must be formatted 'data:[<mediatype>][;base64],<data>");const r=t[1]||null;null!=r&&(this.base64=function iB(n,e){return n.length>=e.length&&n.substring(n.length-e.length)===e}(r,";base64"),this.contentType=this.base64?r.substring(0,r.length-7):r),this.rest=e.substring(e.indexOf(",")+1)}}class Dl{constructor(e,t){let r=0,i="";fk(e)?(this.data_=e,r=e.size,i=e.type):e instanceof ArrayBuffer?(t?this.data_=new Uint8Array(e):(this.data_=new Uint8Array(e.byteLength),this.data_.set(new Uint8Array(e))),r=this.data_.length):e instanceof Uint8Array&&(t?this.data_=e:(this.data_=new Uint8Array(e.length),this.data_.set(e)),r=e.length),this.size_=r,this.type_=i}size(){return this.size_}type(){return this.type_}slice(e,t){if(fk(this.data_)){const i=function XU(n,e,t){return n.webkitSlice?n.webkitSlice(e,t):n.mozSlice?n.mozSlice(e,t):n.slice?n.slice(e,t):null}(this.data_,e,t);return null===i?null:new Dl(i)}{const r=new Uint8Array(this.data_.buffer,e,t-e);return new Dl(r,!0)}}static getBlob(...e){if(Ax()){const t=e.map(r=>r instanceof Dl?r.data_:r);return new Dl(JU.apply(null,t))}{const t=e.map(l=>eD(l)?Mx(la.RAW,l).data:l.data_);let r=0;t.forEach(l=>{r+=l.byteLength});const i=new Uint8Array(r);let a=0;return t.forEach(l=>{for(let h=0;h<l.length;h++)i[a++]=l[h]}),new Dl(i,!0)}}uploadData(){return this.data_}}function Nx(n){let e;try{e=JSON.parse(n)}catch(t){return null}return function GU(n){return"object"==typeof n&&!Array.isArray(n)}(e)?e:null}function yk(n){const e=n.lastIndexOf("/",n.length-2);return-1===e?n:n.slice(e+1)}function aB(n,e){return e}class Vs{constructor(e,t,r,i){this.server=e,this.local=t||e,this.writable=!!r,this.xform=i||aB}}let nD=null;function xw(){if(nD)return nD;const n=[];n.push(new Vs("bucket")),n.push(new Vs("generation")),n.push(new Vs("metageneration")),n.push(new Vs("name","fullPath",!0));const t=new Vs("name");t.xform=function e(a,l){return function uB(n){return!eD(n)||n.length<2?n:yk(n)}(l)},n.push(t);const i=new Vs("size");return i.xform=function r(a,l){return void 0!==l?Number(l):l},n.push(i),n.push(new Vs("timeCreated")),n.push(new Vs("updated")),n.push(new Vs("md5Hash",null,!0)),n.push(new Vs("cacheControl",null,!0)),n.push(new Vs("contentDisposition",null,!0)),n.push(new Vs("contentEncoding",null,!0)),n.push(new Vs("contentLanguage",null,!0)),n.push(new Vs("contentType",null,!0)),n.push(new Vs("metadata","customMetadata",!0)),nD=n,nD}function vk(n,e,t){const r=Nx(e);return null===r?null:function cB(n,e,t){const r={type:"file"},i=t.length;for(let a=0;a<i;a++){const l=t[a];r[l.local]=l.xform(r,e[l.server])}return function lB(n,e){Object.defineProperty(n,"ref",{get:function t(){const a=new hs(n.bucket,n.fullPath);return e._makeStorageReference(a)}})}(r,n),r}(n,r,t)}function Px(n,e){const t={},r=e.length;for(let i=0;i<r;i++){const a=e[i];a.writable&&(t[a.server]=n[a.local])}return JSON.stringify(t)}const wk="prefixes";class Tl{constructor(e,t,r,i){this.url=e,this.method=t,this.handler=r,this.timeout=i,this.urlParams={},this.headers={},this.body=null,this.errorHandler=null,this.progressCallback=null,this.successCodes=[200],this.additionalRetryCodes=[]}}function Sl(n){if(!n)throw Sx()}function rD(n,e){return function t(r,i){const a=vk(n,i,e);return Sl(null!==a),a}}function m_(n){return function e(t,r){let i;return i=401===t.getStatus()?t.getErrorText().includes("Firebase App Check token is invalid")?function MU(){return new yr("unauthorized-app","This app does not have permission to access Firebase Storage on this project.")}():function RU(){return new yr("unauthenticated","User is not authenticated, please authenticate using Firebase Authentication and try again.")}():402===t.getStatus()?function xU(n){return new yr("quota-exceeded","Quota for bucket '"+n+"' exceeded, please view quota on https://firebase.google.com/pricing/.")}(n.bucket):403===t.getStatus()?function NU(n){return new yr("unauthorized","User does not have permission to access '"+n+"'.")}(n.path):r,i.serverResponse=r.serverResponse,i}}function Rw(n){const e=m_(n);return function t(r,i){let a=e(r,i);return 404===r.getStatus()&&(a=function AU(n){return new yr("object-not-found","Object '"+n+"' does not exist.")}(n.path)),a.serverResponse=i.serverResponse,a}}function Ck(n,e,t){const i=$c(e.fullServerUrl(),n.host,n._protocol),l=n.maxOperationRetryTime,h=new Tl(i,"GET",rD(n,t),l);return h.errorHandler=Rw(e),h}function mB(n,e,t,r,i){const a={};a.prefix=e.isRoot?"":e.path+"/",t&&t.length>0&&(a.delimiter=t),r&&(a.pageToken=r),i&&(a.maxResults=i);const h=$c(e.bucketOnlyServerUrl(),n.host,n._protocol),w=n.maxOperationRetryTime,D=new Tl(h,"GET",function pB(n,e){return function t(r,i){const a=function fB(n,e,t){const r=Nx(t);return null===r?null:function hB(n,e,t){const r={prefixes:[],items:[],nextPageToken:t.nextPageToken};if(t[wk])for(const i of t[wk]){const a=i.replace(/\/$/,""),l=n._makeStorageReference(new hs(e,a));r.prefixes.push(l)}if(t.items)for(const i of t.items){const a=n._makeStorageReference(new hs(e,i.name));r.items.push(a)}return r}(n,e,r)}(n,e,i);return Sl(null!==a),a}}(n,e.bucket),w);return D.urlParams=a,D.errorHandler=m_(e),D}function bk(n,e,t){const r=Object.assign({},t);return r.fullPath=n.path,r.size=e.size(),r.contentType||(r.contentType=function wB(n,e){return n&&n.contentType||e&&e.type()||"application/octet-stream"}(null,e)),r}class iD{constructor(e,t,r,i){this.current=e,this.total=t,this.finalized=!!r,this.metadata=i||null}}function kx(n,e){let t=null;try{t=n.getResponseHeader("X-Goog-Upload-Status")}catch(i){Sl(!1)}return Sl(!!t&&-1!==(e||["active"]).indexOf(t)),t}const bB={STATE_CHANGED:"state_changed"},Us={RUNNING:"running",PAUSED:"paused",SUCCESS:"success",CANCELED:"canceled",ERROR:"error"};function Ox(n){switch(n){case"running":case"pausing":case"canceling":return Us.RUNNING;case"paused":return Us.PAUSED;case"success":return Us.SUCCESS;case"canceled":return Us.CANCELED;default:return Us.ERROR}}class DB{constructor(e,t,r){if(function $U(n){return"function"==typeof n}(e)||null!=t||null!=r)this.next=e,this.error=null!=t?t:void 0,this.complete=null!=r?r:void 0;else{const a=e;this.next=a.next,this.error=a.error,this.complete=a.complete}}}function __(n){return(...e)=>{Promise.resolve().then(()=>n(...e))}}class SB extends class TB{constructor(){this.sent_=!1,this.xhr_=new XMLHttpRequest,this.initXhr(),this.errorCode_=Fh.NO_ERROR,this.sendPromise_=new Promise(e=>{this.xhr_.addEventListener("abort",()=>{this.errorCode_=Fh.ABORT,e()}),this.xhr_.addEventListener("error",()=>{this.errorCode_=Fh.NETWORK_ERROR,e()}),this.xhr_.addEventListener("load",()=>{e()})})}send(e,t,r,i){if(this.sent_)throw Aw("cannot .send() more than once");if(this.sent_=!0,this.xhr_.open(t,e,!0),void 0!==i)for(const a in i)i.hasOwnProperty(a)&&this.xhr_.setRequestHeader(a,i[a].toString());return void 0!==r?this.xhr_.send(r):this.xhr_.send(),this.sendPromise_}getErrorCode(){if(!this.sent_)throw Aw("cannot .getErrorCode() before sending");return this.errorCode_}getStatus(){if(!this.sent_)throw Aw("cannot .getStatus() before sending");try{return this.xhr_.status}catch(e){return-1}}getResponse(){if(!this.sent_)throw Aw("cannot .getResponse() before sending");return this.xhr_.response}getErrorText(){if(!this.sent_)throw Aw("cannot .getErrorText() before sending");return this.xhr_.statusText}abort(){this.xhr_.abort()}getResponseHeader(e){return this.xhr_.getResponseHeader(e)}addUploadProgressListener(e){null!=this.xhr_.upload&&this.xhr_.upload.addEventListener("progress",e)}removeUploadProgressListener(e){null!=this.xhr_.upload&&this.xhr_.upload.removeEventListener("progress",e)}}{initXhr(){this.xhr_.responseType="text"}}function wu(){return new SB}class Ak{constructor(e,t,r=null){this._transferred=0,this._needToFetchStatus=!1,this._needToFetchMetadata=!1,this._observers=[],this._error=void 0,this._uploadUrl=void 0,this._request=void 0,this._chunkMultiplier=1,this._resolve=void 0,this._reject=void 0,this._ref=e,this._blob=t,this._metadata=r,this._mappings=xw(),this._resumable=this._shouldDoResumable(this._blob),this._state="running",this._errorHandler=i=>{this._request=void 0,this._chunkMultiplier=1,i._codeEquals("canceled")?(this._needToFetchStatus=!0,this.completeTransitions_()):(this._error=i,this._transition("error"))},this._metadataErrorHandler=i=>{this._request=void 0,i._codeEquals("canceled")?this.completeTransitions_():(this._error=i,this._transition("error"))},this._promise=new Promise((i,a)=>{this._resolve=i,this._reject=a,this._start()}),this._promise.then(null,()=>{})}_makeProgressCallback(){const e=this._transferred;return t=>this._updateProgress(e+t)}_shouldDoResumable(e){return e.size()>262144}_start(){"running"===this._state&&void 0===this._request&&(this._resumable?void 0===this._uploadUrl?this._createResumable():this._needToFetchStatus?this._fetchStatus():this._needToFetchMetadata?this._fetchMetadata():this._continueUpload():this._oneShotUpload())}_resolveToken(e){Promise.all([this._ref.storage._getAuthToken(),this._ref.storage._getAppCheckToken()]).then(([t,r])=>{switch(this._state){case"running":e(t,r);break;case"canceling":this._transition("canceled");break;case"pausing":this._transition("paused")}})}_createResumable(){this._resolveToken((e,t)=>{const r=function EB(n,e,t,r,i){const a=e.bucketOnlyServerUrl(),l=bk(e,r,i),h={name:l.fullPath},_=$c(a,n.host,n._protocol),D={"X-Goog-Upload-Protocol":"resumable","X-Goog-Upload-Command":"start","X-Goog-Upload-Header-Content-Length":`${r.size()}`,"X-Goog-Upload-Header-Content-Type":l.contentType,"Content-Type":"application/json; charset=utf-8"},S=Px(l,t),j=new Tl(_,"POST",function L(fe){let Me;kx(fe);try{Me=fe.getResponseHeader("X-Goog-Upload-URL")}catch(et){Sl(!1)}return Sl(eD(Me)),Me},n.maxUploadRetryTime);return j.urlParams=h,j.headers=D,j.body=S,j.errorHandler=m_(e),j}(this._ref.storage,this._ref._location,this._mappings,this._blob,this._metadata),i=this._ref.storage._makeRequest(r,wu,e,t);this._request=i,i.getPromise().then(a=>{this._request=void 0,this._uploadUrl=a,this._needToFetchStatus=!1,this.completeTransitions_()},this._errorHandler)})}_fetchStatus(){const e=this._uploadUrl;this._resolveToken((t,r)=>{const i=function CB(n,e,t,r){const _=new Tl(t,"POST",function a(w){const D=kx(w,["active","final"]);let S=null;try{S=w.getResponseHeader("X-Goog-Upload-Size-Received")}catch(L){Sl(!1)}S||Sl(!1);const N=Number(S);return Sl(!isNaN(N)),new iD(N,r.size(),"final"===D)},n.maxUploadRetryTime);return _.headers={"X-Goog-Upload-Command":"query"},_.errorHandler=m_(e),_}(this._ref.storage,this._ref._location,e,this._blob),a=this._ref.storage._makeRequest(i,wu,t,r);this._request=a,a.getPromise().then(l=>{l=l,this._request=void 0,this._updateProgress(l.current),this._needToFetchStatus=!1,l.finalized&&(this._needToFetchMetadata=!0),this.completeTransitions_()},this._errorHandler)})}_continueUpload(){const e=262144*this._chunkMultiplier,t=new iD(this._transferred,this._blob.size()),r=this._uploadUrl;this._resolveToken((i,a)=>{let l;try{l=function IB(n,e,t,r,i,a,l,h){const _=new iD(0,0);if(l?(_.current=l.current,_.total=l.total):(_.current=0,_.total=r.size()),r.size()!==_.total)throw function LU(){return new yr("server-file-wrong-size","Server recorded incorrect upload file size, please retry the upload.")}();const w=_.total-_.current;let D=w;i>0&&(D=Math.min(D,i));const S=_.current,j={"X-Goog-Upload-Command":D===w?"upload, finalize":"upload","X-Goog-Upload-Offset":`${_.current}`},fe=r.slice(S,S+D);if(null===fe)throw ck();const wt=new Tl(t,"POST",function Me(tt,Nt){const Pt=kx(tt,["active","final"]),Ro=_.current+D,ti=r.size();let Iu;return Iu="final"===Pt?rD(e,a)(tt,Nt):null,new iD(Ro,ti,"final"===Pt,Iu)},e.maxUploadRetryTime);return wt.headers=j,wt.body=fe.uploadData(),wt.progressCallback=h||null,wt.errorHandler=m_(n),wt}(this._ref._location,this._ref.storage,r,this._blob,e,this._mappings,t,this._makeProgressCallback())}catch(_){return this._error=_,void this._transition("error")}const h=this._ref.storage._makeRequest(l,wu,i,a);this._request=h,h.getPromise().then(_=>{this._increaseMultiplier(),this._request=void 0,this._updateProgress(_.current),_.finalized?(this._metadata=_.metadata,this._transition("success")):this.completeTransitions_()},this._errorHandler)})}_increaseMultiplier(){262144*this._chunkMultiplier<33554432&&(this._chunkMultiplier*=2)}_fetchMetadata(){this._resolveToken((e,t)=>{const r=Ck(this._ref.storage,this._ref._location,this._mappings),i=this._ref.storage._makeRequest(r,wu,e,t);this._request=i,i.getPromise().then(a=>{this._request=void 0,this._metadata=a,this._transition("success")},this._metadataErrorHandler)})}_oneShotUpload(){this._resolveToken((e,t)=>{const r=function Dk(n,e,t,r,i){const a=e.bucketOnlyServerUrl(),l={"X-Goog-Upload-Protocol":"multipart"},_=function h(){let wt="";for(let tt=0;tt<2;tt++)wt+=Math.random().toString().slice(2);return wt}();l["Content-Type"]="multipart/related; boundary="+_;const w=bk(e,r,i),D=Px(w,t),L=Dl.getBlob("--"+_+"\r\nContent-Type: application/json; charset=utf-8\r\n\r\n"+D+"\r\n--"+_+"\r\nContent-Type: "+w.contentType+"\r\n\r\n",r,"\r\n--"+_+"--");if(null===L)throw ck();const j={name:w.fullPath},fe=$c(a,n.host,n._protocol),et=n.maxUploadRetryTime,We=new Tl(fe,"POST",rD(n,t),et);return We.urlParams=j,We.headers=l,We.body=L.uploadData(),We.errorHandler=m_(e),We}(this._ref.storage,this._ref._location,this._mappings,this._blob,this._metadata),i=this._ref.storage._makeRequest(r,wu,e,t);this._request=i,i.getPromise().then(a=>{this._request=void 0,this._metadata=a,this._updateProgress(this._blob.size()),this._transition("success")},this._errorHandler)})}_updateProgress(e){const t=this._transferred;this._transferred=e,this._transferred!==t&&this._notifyObservers()}_transition(e){if(this._state!==e)switch(e){case"canceling":case"pausing":this._state=e,void 0!==this._request&&this._request.cancel();break;case"running":const t="paused"===this._state;this._state=e,t&&(this._notifyObservers(),this._start());break;case"paused":case"error":case"success":this._state=e,this._notifyObservers();break;case"canceled":this._error=lk(),this._state=e,this._notifyObservers()}}completeTransitions_(){switch(this._state){case"pausing":this._transition("paused");break;case"canceling":this._transition("canceled");break;case"running":this._start()}}get snapshot(){const e=Ox(this._state);return{bytesTransferred:this._transferred,totalBytes:this._blob.size(),state:e,metadata:this._metadata,task:this,ref:this._ref}}on(e,t,r,i){const a=new DB(t||void 0,r||void 0,i||void 0);return this._addObserver(a),()=>{this._removeObserver(a)}}then(e,t){return this._promise.then(e,t)}catch(e){return this.then(null,e)}_addObserver(e){this._observers.push(e),this._notifyObserver(e)}_removeObserver(e){const t=this._observers.indexOf(e);-1!==t&&this._observers.splice(t,1)}_notifyObservers(){this._finishPromise(),this._observers.slice().forEach(t=>{this._notifyObserver(t)})}_finishPromise(){if(void 0!==this._resolve){let e=!0;switch(Ox(this._state)){case Us.SUCCESS:__(this._resolve.bind(null,this.snapshot))();break;case Us.CANCELED:case Us.ERROR:__(this._reject.bind(null,this._error))();break;default:e=!1}e&&(this._resolve=void 0,this._reject=void 0)}}_notifyObserver(e){switch(Ox(this._state)){case Us.RUNNING:case Us.PAUSED:e.next&&__(e.next.bind(e,this.snapshot))();break;case Us.SUCCESS:e.complete&&__(e.complete.bind(e))();break;default:e.error&&__(e.error.bind(e,this._error))()}}resume(){const e="paused"===this._state||"pausing"===this._state;return e&&this._transition("running"),e}pause(){const e="running"===this._state;return e&&this._transition("pausing"),e}cancel(){const e="running"===this._state||"pausing"===this._state;return e&&this._transition("canceling"),e}}class Fp{constructor(e,t){this._service=e,this._location=t instanceof hs?t:hs.makeFromUrl(t,e.host)}toString(){return"gs://"+this._location.bucket+"/"+this._location.path}_newRef(e,t){return new Fp(e,t)}get root(){const e=new hs(this._location.bucket,"");return this._newRef(this._service,e)}get bucket(){return this._location.bucket}get fullPath(){return this._location.path}get name(){return yk(this._location.path)}get storage(){return this._service}get parent(){const e=function sB(n){if(0===n.length)return null;const e=n.lastIndexOf("/");return-1===e?"":n.slice(0,e)}(this._location.path);if(null===e)return null;const t=new hs(this._location.bucket,e);return new Fp(this._service,t)}_throwIfRoot(e){if(""===this._location.path)throw hk(e)}}function Rk(n,e,t){return Fx.apply(this,arguments)}function Fx(){return(Fx=(0,ye.Z)(function*(n,e,t){const i=yield Mk(n,{pageToken:t});e.prefixes.push(...i.prefixes),e.items.push(...i.items),null!=i.nextPageToken&&(yield Rk(n,e,i.nextPageToken))})).apply(this,arguments)}function Mk(n,e){null!=e&&"number"==typeof e.maxResults&&xx("options.maxResults",1,1e3,e.maxResults);const t=e||{},r=mB(n.storage,n._location,"/",t.pageToken,t.maxResults);return n.storage.makeRequestWithTokens(r,wu)}function UB(n){n._throwIfRoot("getDownloadURL");const e=function _B(n,e,t){const i=$c(e.fullServerUrl(),n.host,n._protocol),l=n.maxOperationRetryTime,h=new Tl(i,"GET",function gB(n,e){return function t(r,i){const a=vk(n,i,e);return Sl(null!==a),function dB(n,e,t,r){const i=Nx(e);if(null===i||!eD(i.downloadTokens))return null;const a=i.downloadTokens;if(0===a.length)return null;const l=encodeURIComponent;return a.split(",").map(w=>{const S=n.fullPath;return $c("/b/"+l(n.bucket)+"/o/"+l(S),t,r)+pk({alt:"media",token:w})})[0]}(a,i,n.host,n._protocol)}}(n,t),l);return h.errorHandler=Rw(e),h}(n.storage,n._location,xw());return n.storage.makeRequestWithTokens(e,wu).then(t=>{if(null===t)throw function VU(){return new yr("no-download-url","The given file does not have any download URLs.")}();return t})}function Nk(n,e){const t=function oB(n,e){const t=e.split("/").filter(r=>r.length>0).join("/");return 0===n.length?t:n+"/"+t}(n._location.path,e),r=new hs(n._location.bucket,t);return new Fp(n.storage,r)}function Pk(n,e){if(n instanceof Lx){const t=n;if(null==t._bucket)throw function FU(){return new yr("no-default-bucket","No default bucket found. Did you set the '"+uk+"' property when initializing the app?")}();const r=new Fp(t,t._bucket);return null!=e?Pk(r,e):r}return void 0!==e?Nk(n,e):n}function $B(n,e){if(e&&function jB(n){return/^[A-Za-z]+:\/\//.test(n)}(e)){if(n instanceof Lx)return function HB(n,e){return new Fp(n,e)}(n,e);throw g_("To use ref(service, url), the first argument must be a Storage instance.")}return Pk(n,e)}function kk(n,e){const t=null==e?void 0:e[uk];return null==t?null:hs.makeFromBucketSpec(t,n)}class Lx{constructor(e,t,r,i,a){this.app=e,this._authProvider=t,this._appCheckProvider=r,this._url=i,this._firebaseVersion=a,this._bucket=null,this._host=ak,this._protocol="https",this._appId=null,this._deleted=!1,this._maxOperationRetryTime=12e4,this._maxUploadRetryTime=6e5,this._requests=new Set,this._bucket=null!=i?hs.makeFromBucketSpec(i,this._host):kk(this._host,this.app.options)}get host(){return this._host}set host(e){this._host=e,this._bucket=null!=this._url?hs.makeFromBucketSpec(this._url,e):kk(e,this.app.options)}get maxUploadRetryTime(){return this._maxUploadRetryTime}set maxUploadRetryTime(e){xx("time",0,Number.POSITIVE_INFINITY,e),this._maxUploadRetryTime=e}get maxOperationRetryTime(){return this._maxOperationRetryTime}set maxOperationRetryTime(e){xx("time",0,Number.POSITIVE_INFINITY,e),this._maxOperationRetryTime=e}_getAuthToken(){var e=this;return(0,ye.Z)(function*(){if(e._overrideAuthToken)return e._overrideAuthToken;const t=e._authProvider.getImmediate({optional:!0});if(t){const r=yield t.getToken();if(null!==r)return r.accessToken}return null})()}_getAppCheckToken(){var e=this;return(0,ye.Z)(function*(){const t=e._appCheckProvider.getImmediate({optional:!0});return t?(yield t.getToken()).token:null})()}_delete(){return this._deleted||(this._deleted=!0,this._requests.forEach(e=>e.cancel()),this._requests.clear()),Promise.resolve()}_makeStorageReference(e){return new Fp(this,e)}_makeRequest(e,t,r,i){if(this._deleted)return new UU(dk());{const a=function YU(n,e,t,r,i,a){const l=pk(n.urlParams),h=n.url+l,_=Object.assign({},n.headers);return function KU(n,e){e&&(n["X-Firebase-GMPID"]=e)}(_,e),function qU(n,e){null!==e&&e.length>0&&(n.Authorization="Firebase "+e)}(_,t),function zU(n,e){n["X-Firebase-Storage-Version"]="webjs/"+(null!=e?e:"AppManager")}(_,a),function ZU(n,e){null!==e&&(n["X-Firebase-AppCheck"]=e)}(_,r),new WU(h,n.method,_,n.body,n.successCodes,n.additionalRetryCodes,n.handler,n.errorHandler,n.timeout,n.progressCallback,i)}(e,this._appId,r,i,t,this._firebaseVersion);return this._requests.add(a),a.getPromise().then(()=>this._requests.delete(a),()=>this._requests.delete(a)),a}}makeRequestWithTokens(e,t){var r=this;return(0,ye.Z)(function*(){const[i,a]=yield Promise.all([r._getAuthToken(),r._getAppCheckToken()]);return r._makeRequest(e,t,i,a).getPromise()})()}}const Ok="@firebase/storage";function Vk(n,e){return $B(n=(0,k.m9)(n),e)}function e2(n,{instanceIdentifier:e}){const t=n.getProvider("app").getImmediate(),r=n.getProvider("auth-internal"),i=n.getProvider("app-check-internal");return new Lx(t,r,i,e,gi.SDK_VERSION)}!function t2(){(0,gi._registerComponent)(new Co.wA("storage",e2,"PUBLIC").setMultipleInstances(!0)),(0,gi.registerVersion)(Ok,"0.9.4",""),(0,gi.registerVersion)(Ok,"0.9.4","esm2017")}();class sD{constructor(e,t,r){this._delegate=e,this.task=t,this.ref=r}get bytesTransferred(){return this._delegate.bytesTransferred}get metadata(){return this._delegate.metadata}get state(){return this._delegate.state}get totalBytes(){return this._delegate.totalBytes}}class Uk{constructor(e,t){this._delegate=e,this._ref=t,this.cancel=this._delegate.cancel.bind(this._delegate),this.catch=this._delegate.catch.bind(this._delegate),this.pause=this._delegate.pause.bind(this._delegate),this.resume=this._delegate.resume.bind(this._delegate)}get snapshot(){return new sD(this._delegate.snapshot,this,this._ref)}then(e,t){return this._delegate.then(r=>{if(e)return e(new sD(r,this,this._ref))},t)}on(e,t,r,i){let a;return t&&(a="function"==typeof t?l=>t(new sD(l,this,this._ref)):{next:t.next?l=>t.next(new sD(l,this,this._ref)):void 0,complete:t.complete||void 0,error:t.error||void 0}),this._delegate.on(e,a,r||void 0,i||void 0)}}class Bk{constructor(e,t){this._delegate=e,this._service=t}get prefixes(){return this._delegate.prefixes.map(e=>new Gc(e,this._service))}get items(){return this._delegate.items.map(e=>new Gc(e,this._service))}get nextPageToken(){return this._delegate.nextPageToken||null}}class Gc{constructor(e,t){this._delegate=e,this.storage=t}get name(){return this._delegate.name}get bucket(){return this._delegate.bucket}get fullPath(){return this._delegate.fullPath}toString(){return this._delegate.toString()}child(e){const t=function JB(n,e){return Nk(n,e)}(this._delegate,e);return new Gc(t,this.storage)}get root(){return new Gc(this._delegate.root,this.storage)}get parent(){const e=this._delegate.parent;return null==e?null:new Gc(e,this.storage)}put(e,t){return this._throwIfRoot("put"),new Uk(function WB(n,e,t){return function kB(n,e,t){return n._throwIfRoot("uploadBytesResumable"),new Ak(n,new Dl(e),t)}(n=(0,k.m9)(n),e,t)}(this._delegate,e,t),this)}putString(e,t=la.RAW,r){this._throwIfRoot("putString");const i=Mx(t,e),a=Object.assign({},r);return null==a.contentType&&null!=i.contentType&&(a.contentType=i.contentType),new Uk(new Ak(this._delegate,new Dl(i.data,!0),a),this)}listAll(){return function ZB(n){return function FB(n){const e={prefixes:[],items:[]};return Rk(n,e).then(()=>e)}(n=(0,k.m9)(n))}(this._delegate).then(e=>new Bk(e,this.storage))}list(e){return function KB(n,e){return Mk(n=(0,k.m9)(n),e)}(this._delegate,e||void 0).then(t=>new Bk(t,this.storage))}getMetadata(){return function qB(n){return function LB(n){n._throwIfRoot("getMetadata");const e=Ck(n.storage,n._location,xw());return n.storage.makeRequestWithTokens(e,wu)}(n=(0,k.m9)(n))}(this._delegate)}updateMetadata(e){return function zB(n,e){return function VB(n,e){n._throwIfRoot("updateMetadata");const t=function yB(n,e,t,r){const a=$c(e.fullServerUrl(),n.host,n._protocol),h=Px(t,r),w=n.maxOperationRetryTime,D=new Tl(a,"PATCH",rD(n,r),w);return D.headers={"Content-Type":"application/json; charset=utf-8"},D.body=h,D.errorHandler=Rw(e),D}(n.storage,n._location,e,xw());return n.storage.makeRequestWithTokens(t,wu)}(n=(0,k.m9)(n),e)}(this._delegate,e)}getDownloadURL(){return function YB(n){return UB(n=(0,k.m9)(n))}(this._delegate)}delete(){return this._throwIfRoot("delete"),function QB(n){return function BB(n){n._throwIfRoot("deleteObject");const e=function vB(n,e){const r=$c(e.fullServerUrl(),n.host,n._protocol),h=new Tl(r,"DELETE",function l(_,w){},n.maxOperationRetryTime);return h.successCodes=[200,204],h.errorHandler=Rw(e),h}(n.storage,n._location);return n.storage.makeRequestWithTokens(e,wu)}(n=(0,k.m9)(n))}(this._delegate)}_throwIfRoot(e){if(""===this._delegate._location.path)throw hk(e)}}class jk{constructor(e,t){this.app=e,this._delegate=t}get maxOperationRetryTime(){return this._delegate.maxOperationRetryTime}get maxUploadRetryTime(){return this._delegate.maxUploadRetryTime}ref(e){if(Hk(e))throw g_("ref() expected a child path but got a URL, use refFromURL instead.");return new Gc(Vk(this._delegate,e),this)}refFromURL(e){if(!Hk(e))throw g_("refFromURL() expected a full URL but got a child path, use ref() instead.");try{hs.makeFromUrl(e,this._delegate.host)}catch(t){throw g_("refFromUrl() expected a valid full URL but got an invalid one.")}return new Gc(Vk(this._delegate,e),this)}setMaxUploadRetryTime(e){this._delegate.maxUploadRetryTime=e}setMaxOperationRetryTime(e){this._delegate.maxOperationRetryTime=e}useEmulator(e,t,r={}){!function XB(n,e,t,r={}){!function GB(n,e,t,r={}){n.host=`${e}:${t}`,n._protocol="http";const{mockUserToken:i}=r;i&&(n._overrideAuthToken="string"==typeof i?i:(0,k.Sg)(i,n.app.options.projectId))}(n,e,t,r)}(this._delegate,e,t,r)}}function Hk(n){return/^[A-Za-z]+:\/\//.test(n)}function s2(n,{instanceIdentifier:e}){const t=n.getProvider("app-compat").getImmediate(),r=n.getProvider("storage").getImmediate({identifier:e});return new jk(t,r)}function $k(n){const e=function a2(n){return new gr.y(e=>{const t=l=>e.next(l);t(n.snapshot);const a=n.on("state_changed",t);return n.then(l=>{t(l),e.complete()},l=>{t(n.snapshot),(l=>{e.error(l)})(l)}),function(){a()}}).pipe(function DU(n,e=hl.z){return(0,sr.e)((t,r)=>{let i=null,a=null,l=null;const h=()=>{if(i){i.unsubscribe(),i=null;const w=a;a=null,r.next(w)}};function _(){const w=l+n,D=e.now();if(D<w)return i=this.schedule(void 0,w-D),void r.add(i);h()}t.subscribe((0,In.x)(r,w=>{a=w,l=e.now(),i||(i=e.schedule(_,n),r.add(i))},()=>{h(),r.complete()},void 0,()=>{a=i=null}))})}(0))}(n);return{task:n,then:n.then.bind(n),catch:n.catch.bind(n),pause:n.pause.bind(n),cancel:n.cancel.bind(n),resume:n.resume.bind(n),snapshotChanges:()=>e,percentageChanges:()=>e.pipe((0,yt.U)(t=>t.bytesTransferred/t.totalBytes*100))}}function oD(n){return{getDownloadURL:()=>ct(void 0).pipe(tn.fc,bn(()=>n.getDownloadURL()),tn.iC),getMetadata:()=>ct(void 0).pipe(tn.fc,bn(()=>n.getMetadata()),tn.iC),delete:()=>(0,wn.D)(n.delete()),child:e=>oD(n.child(e)),updateMetadata:e=>(0,wn.D)(n.updateMetadata(e)),put:(e,t)=>$k(n.put(e,t)),putString:(e,t,r)=>$k(n.putString(e,t,r)),list:e=>(0,wn.D)(n.list(e)),listAll:()=>(0,wn.D)(n.listAll())}}!function o2(n){const e={TaskState:Us,TaskEvent:bB,StringFormat:la,Storage:jk,Reference:Gc};n.INTERNAL.registerComponent(new Co.wA("storage-compat",s2,"PUBLIC").setServiceProps(e).setMultipleInstances(!0)),n.registerVersion("@firebase/storage-compat","0.1.12")}(cm.Z);const u2=new m.OlP("angularfire2.storageBucket"),l2=new m.OlP("angularfire2.storage.maxUploadRetryTime"),c2=new m.OlP("angularfire2.storage.maxOperationRetryTime"),d2=new m.OlP("angularfire2.storage.use-emulator");let h2=(()=>{class n{constructor(t,r,i,a,l,h,_,w,D,S){const N=(0,_r.on)(t,l,r);this.storage=(0,_r.cc)(`${N.name}.storage.${i}`,"AngularFireStorage",N.name,()=>{const L=l.runOutsideAngular(()=>N.storage(i||void 0)),j=D;return j&&L.useEmulator(...j),_&&L.setMaxUploadRetryTime(_),w&&L.setMaxOperationRetryTime(w),L},[_,w])}ref(t){return oD(this.storage.ref(t))}refFromURL(t){return oD(this.storage.refFromURL(t))}upload(t,r,i){return oD(this.storage.ref(t)).put(r,i)}}return n.\u0275fac=function(t){return new(t||n)(m.LFG(_r.Dh),m.LFG(_r.xv,8),m.LFG(u2,8),m.LFG(m.Lbi),m.LFG(m.R0b),m.LFG(tn.HU),m.LFG(l2,8),m.LFG(c2,8),m.LFG(d2,8),m.LFG(Dw,8))},n.\u0275prov=m.Yz7({token:n,factory:n.\u0275fac,providedIn:"any"}),n})(),f2=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=m.oAB({type:n}),n.\u0275inj=m.cJS({}),n})(),p2=(()=>{class n{constructor(){Jb.Z.registerVersion("angularfire",tn.q4.full,"gcs-compat")}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=m.oAB({type:n}),n.\u0275inj=m.cJS({providers:[h2],imports:[f2]}),n})();function Vx(){return(0,sr.e)((n,e)=>{let t,r=!1;n.subscribe((0,In.x)(e,i=>{const a=t;t=i,r&&e.next([a,i]),r=!0}))})}var rt,g2="undefined"!=typeof globalThis?globalThis:"undefined"!=typeof window?window:"undefined"!=typeof global?global:"undefined"!=typeof self?self:{},Wc={},Ux=Ux||{},Ft=g2||self;function aD(){}function Bx(n){var e=typeof n;return"array"==(e="object"!=e?e:n?Array.isArray(n)?"array":e:"null")||"object"==e&&"number"==typeof n.length}function Mw(n){var e=typeof n;return"object"==e&&null!=n||"function"==e}var jx="closure_uid_"+(1e9*Math.random()>>>0),_2=0;function y2(n,e,t){return n.call.apply(n.bind,arguments)}function v2(n,e,t){if(!n)throw Error();if(2<arguments.length){var r=Array.prototype.slice.call(arguments,2);return function(){var i=Array.prototype.slice.call(arguments);return Array.prototype.unshift.apply(i,r),n.apply(e,i)}}return function(){return n.apply(e,arguments)}}function Bi(n,e,t){return(Bi=Function.prototype.bind&&-1!=Function.prototype.bind.toString().indexOf("native code")?y2:v2).apply(null,arguments)}function uD(n,e){var t=Array.prototype.slice.call(arguments,1);return function(){var r=t.slice();return r.push.apply(r,arguments),n.apply(this,r)}}function ji(n,e){function t(){}t.prototype=e.prototype,n.Z=e.prototype,n.prototype=new t,n.prototype.constructor=n,n.Vb=function(r,i,a){for(var l=Array(arguments.length-2),h=2;h<arguments.length;h++)l[h-2]=arguments[h];return e.prototype[i].apply(r,l)}}function Lh(){this.s=this.s,this.o=this.o}var E2={};Lh.prototype.s=!1,Lh.prototype.na=function(){if(!this.s&&(this.s=!0,this.M(),0)){var n=function m2(n){return Object.prototype.hasOwnProperty.call(n,jx)&&n[jx]||(n[jx]=++_2)}(this);delete E2[n]}},Lh.prototype.M=function(){if(this.o)for(;this.o.length;)this.o.shift()()};const Gk=Array.prototype.indexOf?function(n,e){return Array.prototype.indexOf.call(n,e,void 0)}:function(n,e){if("string"==typeof n)return"string"!=typeof e||1!=e.length?-1:n.indexOf(e,0);for(let t=0;t<n.length;t++)if(t in n&&n[t]===e)return t;return-1},Wk=Array.prototype.forEach?function(n,e,t){Array.prototype.forEach.call(n,e,t)}:function(n,e,t){const r=n.length,i="string"==typeof n?n.split(""):n;for(let a=0;a<r;a++)a in i&&e.call(t,i[a],a,n)};function qk(n){return Array.prototype.concat.apply([],arguments)}function Hx(n){const e=n.length;if(0<e){const t=Array(e);for(let r=0;r<e;r++)t[r]=n[r];return t}return[]}function lD(n){return/^[\s\xa0]*$/.test(n)}var js,zk=String.prototype.trim?function(n){return n.trim()}:function(n){return/^[\s\xa0]*([\s\S]*?)[\s\xa0]*$/.exec(n)[1]};function Bs(n,e){return-1!=n.indexOf(e)}function $x(n,e){return n<e?-1:n>e?1:0}e:{var Kk=Ft.navigator;if(Kk){var Zk=Kk.userAgent;if(Zk){js=Zk;break e}}js=""}function Gx(n,e,t){for(const r in n)e.call(t,n[r],r,n)}function Yk(n){const e={};for(const t in n)e[t]=n[t];return e}var Qk="constructor hasOwnProperty isPrototypeOf propertyIsEnumerable toLocaleString toString valueOf".split(" ");function Jk(n,e){let t,r;for(let i=1;i<arguments.length;i++){for(t in r=arguments[i],r)n[t]=r[t];for(let a=0;a<Qk.length;a++)t=Qk[a],Object.prototype.hasOwnProperty.call(r,t)&&(n[t]=r[t])}}function Wx(n){return Wx[" "](n),n}Wx[" "]=aD;var cD,n,b2=Bs(js,"Opera"),y_=Bs(js,"Trident")||Bs(js,"MSIE"),Xk=Bs(js,"Edge"),qx=Xk||y_,eO=Bs(js,"Gecko")&&!(Bs(js.toLowerCase(),"webkit")&&!Bs(js,"Edge"))&&!(Bs(js,"Trident")||Bs(js,"MSIE"))&&!Bs(js,"Edge"),D2=Bs(js.toLowerCase(),"webkit")&&!Bs(js,"Edge");function tO(){var n=Ft.document;return n?n.documentMode:void 0}e:{var zx="",Kx=(n=js,eO?/rv:([^\);]+)(\)|;)/.exec(n):Xk?/Edge\/([\d\.]+)/.exec(n):y_?/\b(?:MSIE|rv)[: ]([^\);]+)(\)|;)/.exec(n):D2?/WebKit\/(\S+)/.exec(n):b2?/(?:Version)[ \/]?(\S+)/.exec(n):void 0);if(Kx&&(zx=Kx?Kx[1]:""),y_){var Zx=tO();if(null!=Zx&&Zx>parseFloat(zx)){cD=String(Zx);break e}}cD=zx}var T2={};var A2=Ft.document&&y_&&(tO()||parseInt(cD,10))||void 0,x2=function(){if(!Ft.addEventListener||!Object.defineProperty)return!1;var n=!1,e=Object.defineProperty({},"passive",{get:function(){n=!0}});try{Ft.addEventListener("test",aD,e),Ft.removeEventListener("test",aD,e)}catch(t){}return n}();function fs(n,e){this.type=n,this.g=this.target=e,this.defaultPrevented=!1}function Nw(n,e){if(fs.call(this,n?n.type:""),this.relatedTarget=this.g=this.target=null,this.button=this.screenY=this.screenX=this.clientY=this.clientX=0,this.key="",this.metaKey=this.shiftKey=this.altKey=this.ctrlKey=!1,this.state=null,this.pointerId=0,this.pointerType="",this.i=null,n){var t=this.type=n.type,r=n.changedTouches&&n.changedTouches.length?n.changedTouches[0]:null;if(this.target=n.target||n.srcElement,this.g=e,e=n.relatedTarget){if(eO){e:{try{Wx(e.nodeName);var i=!0;break e}catch(a){}i=!1}i||(e=null)}}else"mouseover"==t?e=n.fromElement:"mouseout"==t&&(e=n.toElement);this.relatedTarget=e,r?(this.clientX=void 0!==r.clientX?r.clientX:r.pageX,this.clientY=void 0!==r.clientY?r.clientY:r.pageY,this.screenX=r.screenX||0,this.screenY=r.screenY||0):(this.clientX=void 0!==n.clientX?n.clientX:n.pageX,this.clientY=void 0!==n.clientY?n.clientY:n.pageY,this.screenX=n.screenX||0,this.screenY=n.screenY||0),this.button=n.button,this.key=n.key||"",this.ctrlKey=n.ctrlKey,this.altKey=n.altKey,this.shiftKey=n.shiftKey,this.metaKey=n.metaKey,this.pointerId=n.pointerId||0,this.pointerType="string"==typeof n.pointerType?n.pointerType:R2[n.pointerType]||"",this.state=n.state,this.i=n,n.defaultPrevented&&Nw.Z.h.call(this)}}fs.prototype.h=function(){this.defaultPrevented=!0},ji(Nw,fs);var R2={2:"touch",3:"pen",4:"mouse"};Nw.prototype.h=function(){Nw.Z.h.call(this);var n=this.i;n.preventDefault?n.preventDefault():n.returnValue=!1};var Pw="closure_listenable_"+(1e6*Math.random()|0),M2=0;function N2(n,e,t,r,i){this.listener=n,this.proxy=null,this.src=e,this.type=t,this.capture=!!r,this.ia=i,this.key=++M2,this.ca=this.fa=!1}function dD(n){n.ca=!0,n.listener=null,n.proxy=null,n.src=null,n.ia=null}function hD(n){this.src=n,this.g={},this.h=0}function Qx(n,e){var t=e.type;if(t in n.g){var a,r=n.g[t],i=Gk(r,e);(a=0<=i)&&Array.prototype.splice.call(r,i,1),a&&(dD(e),0==n.g[t].length&&(delete n.g[t],n.h--))}}function Jx(n,e,t,r){for(var i=0;i<n.length;++i){var a=n[i];if(!a.ca&&a.listener==e&&a.capture==!!t&&a.ia==r)return i}return-1}hD.prototype.add=function(n,e,t,r,i){var a=n.toString();(n=this.g[a])||(n=this.g[a]=[],this.h++);var l=Jx(n,e,r,i);return-1<l?(e=n[l],t||(e.fa=!1)):((e=new N2(e,this.src,a,!!r,i)).fa=t,n.push(e)),e};var Xx="closure_lm_"+(1e6*Math.random()|0),eR={};function rO(n,e,t,r,i){if(r&&r.once)return sO(n,e,t,r,i);if(Array.isArray(e)){for(var a=0;a<e.length;a++)rO(n,e[a],t,r,i);return null}return t=iR(t),n&&n[Pw]?n.N(e,t,Mw(r)?!!r.capture:!!r,i):iO(n,e,t,!1,r,i)}function iO(n,e,t,r,i,a){if(!e)throw Error("Invalid event type");var l=Mw(i)?!!i.capture:!!i,h=nR(n);if(h||(n[Xx]=h=new hD(n)),(t=h.add(e,t,r,l,a)).proxy)return t;if(r=function P2(){var e=k2;return function n(t){return e.call(n.src,n.listener,t)}}(),t.proxy=r,r.src=n,r.listener=t,n.addEventListener)x2||(i=l),void 0===i&&(i=!1),n.addEventListener(e.toString(),r,i);else if(n.attachEvent)n.attachEvent(aO(e.toString()),r);else{if(!n.addListener||!n.removeListener)throw Error("addEventListener and attachEvent are unavailable.");n.addListener(r)}return t}function sO(n,e,t,r,i){if(Array.isArray(e)){for(var a=0;a<e.length;a++)sO(n,e[a],t,r,i);return null}return t=iR(t),n&&n[Pw]?n.O(e,t,Mw(r)?!!r.capture:!!r,i):iO(n,e,t,!0,r,i)}function oO(n,e,t,r,i){if(Array.isArray(e))for(var a=0;a<e.length;a++)oO(n,e[a],t,r,i);else r=Mw(r)?!!r.capture:!!r,t=iR(t),n&&n[Pw]?(n=n.i,(e=String(e).toString())in n.g&&-1<(t=Jx(a=n.g[e],t,r,i))&&(dD(a[t]),Array.prototype.splice.call(a,t,1),0==a.length&&(delete n.g[e],n.h--))):n&&(n=nR(n))&&(e=n.g[e.toString()],n=-1,e&&(n=Jx(e,t,r,i)),(t=-1<n?e[n]:null)&&tR(t))}function tR(n){if("number"!=typeof n&&n&&!n.ca){var e=n.src;if(e&&e[Pw])Qx(e.i,n);else{var t=n.type,r=n.proxy;e.removeEventListener?e.removeEventListener(t,r,n.capture):e.detachEvent?e.detachEvent(aO(t),r):e.addListener&&e.removeListener&&e.removeListener(r),(t=nR(e))?(Qx(t,n),0==t.h&&(t.src=null,e[Xx]=null)):dD(n)}}}function aO(n){return n in eR?eR[n]:eR[n]="on"+n}function k2(n,e){if(n.ca)n=!0;else{e=new Nw(e,this);var t=n.listener,r=n.ia||n.src;n.fa&&tR(n),n=t.call(r,e)}return n}function nR(n){return(n=n[Xx])instanceof hD?n:null}var rR="__closure_events_fn_"+(1e9*Math.random()>>>0);function iR(n){return"function"==typeof n?n:(n[rR]||(n[rR]=function(e){return n.handleEvent(e)}),n[rR])}function yi(){Lh.call(this),this.i=new hD(this),this.P=this,this.I=null}function Hi(n,e){var t,r=n.I;if(r)for(t=[];r;r=r.I)t.push(r);if(n=n.P,r=e.type||e,"string"==typeof e)e=new fs(e,n);else if(e instanceof fs)e.target=e.target||n;else{var i=e;Jk(e=new fs(r,n),i)}if(i=!0,t)for(var a=t.length-1;0<=a;a--){var l=e.g=t[a];i=fD(l,r,!0,e)&&i}if(i=fD(l=e.g=n,r,!0,e)&&i,i=fD(l,r,!1,e)&&i,t)for(a=0;a<t.length;a++)i=fD(l=e.g=t[a],r,!1,e)&&i}function fD(n,e,t,r){if(!(e=n.i.g[String(e)]))return!0;e=e.concat();for(var i=!0,a=0;a<e.length;++a){var l=e[a];if(l&&!l.ca&&l.capture==t){var h=l.listener,_=l.ia||l.src;l.fa&&Qx(n.i,l),i=!1!==h.call(_,r)&&i}}return i&&!r.defaultPrevented}ji(yi,Lh),yi.prototype[Pw]=!0,yi.prototype.removeEventListener=function(n,e,t,r){oO(this,n,e,t,r)},yi.prototype.M=function(){if(yi.Z.M.call(this),this.i){var e,n=this.i;for(e in n.g){for(var t=n.g[e],r=0;r<t.length;r++)dD(t[r]);delete n.g[e],n.h--}}this.I=null},yi.prototype.N=function(n,e,t,r){return this.i.add(String(n),e,!1,t,r)},yi.prototype.O=function(n,e,t,r){return this.i.add(String(n),e,!0,t,r)};var sR=Ft.JSON.stringify;function O2(){var n=lO;let e=null;return n.g&&(e=n.g,n.g=n.g.next,n.g||(n.h=null),e.next=null),e}var aR,uO=new class{constructor(n,e){this.i=n,this.j=e,this.h=0,this.g=null}get(){let n;return 0<this.h?(this.h--,n=this.g,this.g=n.next,n.next=null):n=this.i(),n}}(()=>new L2,n=>n.reset());class L2{constructor(){this.next=this.g=this.h=null}set(e,t){this.h=e,this.g=t,this.next=null}reset(){this.next=this.g=this.h=null}}function V2(n){Ft.setTimeout(()=>{throw n},0)}function oR(n,e){aR||function U2(){var n=Ft.Promise.resolve(void 0);aR=function(){n.then(B2)}}(),uR||(aR(),uR=!0),lO.add(n,e)}var uR=!1,lO=new class F2{constructor(){this.h=this.g=null}add(e,t){const r=uO.get();r.set(e,t),this.h?this.h.next=r:this.g=r,this.h=r}};function B2(){for(var n;n=O2();){try{n.h.call(n.g)}catch(t){V2(t)}var e=uO;e.j(n),100>e.h&&(e.h++,n.next=e.g,e.g=n)}uR=!1}function pD(n,e){yi.call(this),this.h=n||1,this.g=e||Ft,this.j=Bi(this.kb,this),this.l=Date.now()}function lR(n){n.da=!1,n.S&&(n.g.clearTimeout(n.S),n.S=null)}function cR(n,e,t){if("function"==typeof n)t&&(n=Bi(n,t));else{if(!n||"function"!=typeof n.handleEvent)throw Error("Invalid listener argument");n=Bi(n.handleEvent,n)}return 2147483647<Number(e)?-1:Ft.setTimeout(n,e||0)}function cO(n){n.g=cR(()=>{n.g=null,n.i&&(n.i=!1,cO(n))},n.j);const e=n.h;n.h=null,n.m.apply(null,e)}ji(pD,yi),(rt=pD.prototype).da=!1,rt.S=null,rt.kb=function(){if(this.da){var n=Date.now()-this.l;0<n&&n<.8*this.h?this.S=this.g.setTimeout(this.j,this.h-n):(this.S&&(this.g.clearTimeout(this.S),this.S=null),Hi(this,"tick"),this.da&&(lR(this),this.start()))}},rt.start=function(){this.da=!0,this.S||(this.S=this.g.setTimeout(this.j,this.h),this.l=Date.now())},rt.M=function(){pD.Z.M.call(this),lR(this),delete this.g};class j2 extends Lh{constructor(e,t){super(),this.m=e,this.j=t,this.h=null,this.i=!1,this.g=null}l(e){this.h=arguments,this.g?this.i=!0:cO(this)}M(){super.M(),this.g&&(Ft.clearTimeout(this.g),this.g=null,this.i=!1,this.h=null)}}function kw(n){Lh.call(this),this.h=n,this.g={}}ji(kw,Lh);var dO=[];function hO(n,e,t,r){Array.isArray(t)||(t&&(dO[0]=t.toString()),t=dO);for(var i=0;i<t.length;i++){var a=rO(e,t[i],r||n.handleEvent,!1,n.h||n);if(!a)break;n.g[a.key]=a}}function fO(n){Gx(n.g,function(e,t){this.g.hasOwnProperty(t)&&tR(e)},n),n.g={}}function gD(){this.g=!0}function v_(n,e,t,r){n.info(function(){return"XMLHTTP TEXT ("+e+"): "+function W2(n,e){if(!n.g)return e;if(!e)return null;try{var t=JSON.parse(e);if(t)for(n=0;n<t.length;n++)if(Array.isArray(t[n])){var r=t[n];if(!(2>r.length)){var i=r[1];if(Array.isArray(i)&&!(1>i.length)){var a=i[0];if("noop"!=a&&"stop"!=a&&"close"!=a)for(var l=1;l<i.length;l++)i[l]=""}}}return sR(t)}catch(h){return e}}(n,t)+(r?" "+r:"")})}kw.prototype.M=function(){kw.Z.M.call(this),fO(this)},kw.prototype.handleEvent=function(){throw Error("EventHandler.handleEvent not implemented")},gD.prototype.Aa=function(){this.g=!1},gD.prototype.info=function(){};var Lp={},pO=null;function mD(){return pO=pO||new yi}function gO(n){fs.call(this,Lp.Ma,n)}function Ow(n){const e=mD();Hi(e,new gO(e,n))}function mO(n,e){fs.call(this,Lp.STAT_EVENT,n),this.stat=e}function Hs(n){const e=mD();Hi(e,new mO(e,n))}function _O(n,e){fs.call(this,Lp.Na,n),this.size=e}function Fw(n,e){if("function"!=typeof n)throw Error("Fn must not be null and must be a function");return Ft.setTimeout(function(){n()},e)}Lp.Ma="serverreachability",ji(gO,fs),Lp.STAT_EVENT="statevent",ji(mO,fs),Lp.Na="timingevent",ji(_O,fs);var _D={NO_ERROR:0,lb:1,yb:2,xb:3,sb:4,wb:5,zb:6,Ja:7,TIMEOUT:8,Cb:9},yO={qb:"complete",Mb:"success",Ka:"error",Ja:"abort",Eb:"ready",Fb:"readystatechange",TIMEOUT:"timeout",Ab:"incrementaldata",Db:"progress",tb:"downloadprogress",Ub:"uploadprogress"};function dR(){}function wO(){}dR.prototype.h=null;var pR,Lw={OPEN:"a",pb:"b",Ka:"c",Bb:"d"};function hR(){fs.call(this,"d")}function fR(){fs.call(this,"c")}function yD(){}function Vw(n,e,t,r){this.l=n,this.j=e,this.m=t,this.X=r||1,this.V=new kw(this),this.P=q2,this.W=new pD(n=qx?125:void 0),this.H=null,this.i=!1,this.s=this.A=this.v=this.K=this.F=this.Y=this.B=null,this.D=[],this.g=null,this.C=0,this.o=this.u=null,this.N=-1,this.I=!1,this.O=0,this.L=null,this.aa=this.J=this.$=this.U=!1,this.h=new EO}function EO(){this.i=null,this.g="",this.h=!1}ji(hR,fs),ji(fR,fs),ji(yD,dR),yD.prototype.g=function(){return new XMLHttpRequest},yD.prototype.i=function(){return{}},pR=new yD;var q2=45e3,gR={},vD={};function mR(n,e,t){n.K=1,n.v=bD(qc(e)),n.s=t,n.U=!0,CO(n,null)}function CO(n,e){n.F=Date.now(),Uw(n),n.A=qc(n.v);var t=n.A,r=n.X;Array.isArray(r)||(r=[String(r)]),MO(t.h,"t",r),n.C=0,t=n.l.H,n.h=new EO,n.g=e1(n.l,t?e:null,!n.s),0<n.O&&(n.L=new j2(Bi(n.Ia,n,n.g),n.O)),hO(n.V,n.g,"readystatechange",n.gb),e=n.H?Yk(n.H):{},n.s?(n.u||(n.u="POST"),e["Content-Type"]="application/x-www-form-urlencoded",n.g.ea(n.A,n.u,n.s,e)):(n.u="GET",n.g.ea(n.A,n.u,null,e)),Ow(1),function H2(n,e,t,r,i,a){n.info(function(){if(n.g)if(a)for(var l="",h=a.split("&"),_=0;_<h.length;_++){var w=h[_].split("=");if(1<w.length){var D=w[0];w=w[1];var S=D.split("_");l=2<=S.length&&"type"==S[1]?l+(D+"=")+w+"&":l+(D+"=redacted&")}}else l=null;else l=a;return"XMLHTTP REQ ("+r+") [attempt "+i+"]: "+e+"\n"+t+"\n"+l})}(n.j,n.u,n.A,n.m,n.X,n.s)}function IO(n){return!!n.g&&"GET"==n.u&&2!=n.K&&n.l.Ba}function bO(n,e,t){let i,r=!0;for(;!n.I&&n.C<t.length;){if(i=z2(n,t),i==vD){4==e&&(n.o=4,Hs(14),r=!1),v_(n.j,n.m,null,"[Incomplete Response]");break}if(i==gR){n.o=4,Hs(15),v_(n.j,n.m,t,"[Invalid Chunk]"),r=!1;break}v_(n.j,n.m,i,null),_R(n,i)}IO(n)&&i!=vD&&i!=gR&&(n.h.g="",n.C=0),4!=e||0!=t.length||n.h.h||(n.o=1,Hs(16),r=!1),n.i=n.i&&r,r?0<t.length&&!n.aa&&(n.aa=!0,(e=n.l).g==n&&e.$&&!e.L&&(e.h.info("Great, no buffering proxy detected. Bytes received: "+t.length),AR(e),e.L=!0,Hs(11))):(v_(n.j,n.m,t,"[Invalid Chunked Response]"),Vp(n),Bw(n))}function z2(n,e){var t=n.C,r=e.indexOf("\n",t);return-1==r?vD:(t=Number(e.substring(t,r)),isNaN(t)?gR:(r+=1)+t>e.length?vD:(e=e.substr(r,t),n.C=r+t,e))}function Uw(n){n.Y=Date.now()+n.P,DO(n,n.P)}function DO(n,e){if(null!=n.B)throw Error("WatchDog timer not null");n.B=Fw(Bi(n.eb,n),e)}function wD(n){n.B&&(Ft.clearTimeout(n.B),n.B=null)}function Bw(n){0==n.l.G||n.I||YO(n.l,n)}function Vp(n){wD(n);var e=n.L;e&&"function"==typeof e.na&&e.na(),n.L=null,lR(n.W),fO(n.V),n.g&&(e=n.g,n.g=null,e.abort(),e.na())}function _R(n,e){try{var t=n.l;if(0!=t.G&&(t.g==n||wR(t.i,n)))if(t.I=n.N,!n.J&&wR(t.i,n)&&3==t.G){try{var r=t.Ca.g.parse(e)}catch(w){r=null}if(Array.isArray(r)&&3==r.length){var i=r;if(0==i[0])e:if(t.u)t.ta=i[1],0<t.ta-t.U&&37500>i[2]&&t.N&&0==t.A&&!t.v&&(t.v=Fw(Bi(t.ab,t),6e3));else{if(t.g){if(!(t.g.F+3e3<n.F))break e;RD(t),AD(t)}SR(t),Hs(18)}if(1>=kO(t.i)&&t.ka){try{t.ka()}catch(w){}t.ka=void 0}}else jp(t,11)}else if((n.J||t.g==n)&&RD(t),!lD(e))for(i=t.Ca.g.parse(e),e=0;e<i.length;e++){let w=i[e];if(t.U=w[0],w=w[1],2==t.G)if("c"==w[0]){t.J=w[1],t.la=w[2];const D=w[3];null!=D&&(t.ma=D,t.h.info("VER="+t.ma));const S=w[4];null!=S&&(t.za=S,t.h.info("SVER="+t.za));const N=w[5];null!=N&&"number"==typeof N&&0<N&&(t.K=r=1.5*N,t.h.info("backChannelRequestTimeoutMs_="+r)),r=t;const L=n.g;if(L){const j=L.g?L.g.getResponseHeader("X-Client-Wire-Protocol"):null;if(j){var a=r.i;!a.g&&(Bs(j,"spdy")||Bs(j,"quic")||Bs(j,"h2"))&&(a.j=a.l,a.g=new Set,a.h&&(ER(a,a.h),a.h=null))}if(r.D){const fe=L.g?L.g.getResponseHeader("X-HTTP-Session-Id"):null;fe&&(r.sa=fe,er(r.F,r.D,fe))}}t.G=3,t.j&&t.j.xa(),t.$&&(t.O=Date.now()-n.F,t.h.info("Handshake RTT: "+t.O+"ms"));var l=n;if((r=t).oa=XO(r,r.H?r.la:null,r.W),l.J){OO(r.i,l);var h=l,_=r.K;_&&h.setTimeout(_),h.B&&(wD(h),Uw(h)),r.g=l}else KO(r);0<t.l.length&&xD(t)}else"stop"!=w[0]&&"close"!=w[0]||jp(t,7);else 3==t.G&&("stop"==w[0]||"close"==w[0]?"stop"==w[0]?jp(t,7):DR(t):"noop"!=w[0]&&t.j&&t.j.wa(w),t.A=0)}Ow(4)}catch(w){}}function yR(n,e){if(n.forEach&&"function"==typeof n.forEach)n.forEach(e,void 0);else if(Bx(n)||"string"==typeof n)Wk(n,e,void 0);else{if(n.T&&"function"==typeof n.T)var t=n.T();else if(n.R&&"function"==typeof n.R)t=void 0;else if(Bx(n)||"string"==typeof n){t=[];for(var r=n.length,i=0;i<r;i++)t.push(i)}else for(i in t=[],r=0,n)t[r++]=i;r=function K2(n){if(n.R&&"function"==typeof n.R)return n.R();if("string"==typeof n)return n.split("");if(Bx(n)){for(var e=[],t=n.length,r=0;r<t;r++)e.push(n[r]);return e}for(r in e=[],t=0,n)e[t++]=n[r];return e}(n),i=r.length;for(var a=0;a<i;a++)e.call(void 0,r[a],t&&t[a],n)}}function w_(n,e){this.h={},this.g=[],this.i=0;var t=arguments.length;if(1<t){if(t%2)throw Error("Uneven number of arguments");for(var r=0;r<t;r+=2)this.set(arguments[r],arguments[r+1])}else if(n)if(n instanceof w_)for(t=n.T(),r=0;r<t.length;r++)this.set(t[r],n.get(t[r]));else for(r in n)this.set(r,n[r])}function vR(n){if(n.i!=n.g.length){for(var e=0,t=0;e<n.g.length;){var r=n.g[e];Up(n.h,r)&&(n.g[t++]=r),e++}n.g.length=t}if(n.i!=n.g.length){var i={};for(t=e=0;e<n.g.length;)Up(i,r=n.g[e])||(n.g[t++]=r,i[r]=1),e++;n.g.length=t}}function Up(n,e){return Object.prototype.hasOwnProperty.call(n,e)}(rt=Vw.prototype).setTimeout=function(n){this.P=n},rt.gb=function(n){n=n.target;const e=this.L;e&&3==zc(n)?e.l():this.Ia(n)},rt.Ia=function(n){try{if(n==this.g)e:{const D=zc(this.g);var e=this.g.Da();const S=this.g.ba();if(!(3>D)&&(3!=D||qx||this.g&&(this.h.h||this.g.ga()||$O(this.g)))){this.I||4!=D||7==e||Ow(8==e||0>=S?3:2),wD(this);var t=this.g.ba();this.N=t;t:if(IO(this)){var r=$O(this.g);n="";var i=r.length,a=4==zc(this.g);if(!this.h.i){if("undefined"==typeof TextDecoder){Vp(this),Bw(this);var l="";break t}this.h.i=new Ft.TextDecoder}for(e=0;e<i;e++)this.h.h=!0,n+=this.h.i.decode(r[e],{stream:a&&e==i-1});r.splice(0,i),this.h.g+=n,this.C=0,l=this.h.g}else l=this.g.ga();if(this.i=200==t,function $2(n,e,t,r,i,a,l){n.info(function(){return"XMLHTTP RESP ("+r+") [ attempt "+i+"]: "+e+"\n"+t+"\n"+a+" "+l})}(this.j,this.u,this.A,this.m,this.X,D,t),this.i){if(this.$&&!this.J){t:{if(this.g){var h,_=this.g;if((h=_.g?_.g.getResponseHeader("X-HTTP-Initial-Response"):null)&&!lD(h)){var w=h;break t}}w=null}if(!(t=w)){this.i=!1,this.o=3,Hs(12),Vp(this),Bw(this);break e}v_(this.j,this.m,t,"Initial handshake response via X-HTTP-Initial-Response"),this.J=!0,_R(this,t)}this.U?(bO(this,D,l),qx&&this.i&&3==D&&(hO(this.V,this.W,"tick",this.fb),this.W.start())):(v_(this.j,this.m,l,null),_R(this,l)),4==D&&Vp(this),this.i&&!this.I&&(4==D?YO(this.l,this):(this.i=!1,Uw(this)))}else 400==t&&0<l.indexOf("Unknown SID")?(this.o=3,Hs(12)):(this.o=0,Hs(13)),Vp(this),Bw(this)}}}catch(D){}},rt.fb=function(){if(this.g){var n=zc(this.g),e=this.g.ga();this.C<e.length&&(wD(this),bO(this,n,e),this.i&&4!=n&&Uw(this))}},rt.cancel=function(){this.I=!0,Vp(this)},rt.eb=function(){this.B=null;const n=Date.now();0<=n-this.Y?(function G2(n,e){n.info(function(){return"TIMEOUT: "+e})}(this.j,this.A),2!=this.K&&(Ow(3),Hs(17)),Vp(this),this.o=2,Bw(this)):DO(this,this.Y-n)},(rt=w_.prototype).R=function(){vR(this);for(var n=[],e=0;e<this.g.length;e++)n.push(this.h[this.g[e]]);return n},rt.T=function(){return vR(this),this.g.concat()},rt.get=function(n,e){return Up(this.h,n)?this.h[n]:e},rt.set=function(n,e){Up(this.h,n)||(this.i++,this.g.push(n)),this.h[n]=e},rt.forEach=function(n,e){for(var t=this.T(),r=0;r<t.length;r++){var i=t[r],a=this.get(i);n.call(e,a,i,this)}};var TO=/^(?:([^:/?#.]+):)?(?:\/\/(?:([^\\/?#]*)@)?([^\\/?#]*?)(?::([0-9]+))?(?=[\\/?#]|$))?([^?#]+)?(?:\?([^#]*))?(?:#([\s\S]*))?$/;function Bp(n,e){if(this.i=this.s=this.j="",this.m=null,this.o=this.l="",this.g=!1,n instanceof Bp){this.g=void 0!==e?e:n.g,ED(this,n.j),this.s=n.s,CD(this,n.i),ID(this,n.m),this.l=n.l,e=n.h;var t=new $w;t.i=e.i,e.g&&(t.g=new w_(e.g),t.h=e.h),SO(this,t),this.o=n.o}else n&&(t=String(n).match(TO))?(this.g=!!e,ED(this,t[1]||"",!0),this.s=jw(t[2]||""),CD(this,t[3]||"",!0),ID(this,t[4]),this.l=jw(t[5]||"",!0),SO(this,t[6]||"",!0),this.o=jw(t[7]||"")):(this.g=!!e,this.h=new $w(null,this.g))}function qc(n){return new Bp(n)}function ED(n,e,t){n.j=t?jw(e,!0):e,n.j&&(n.j=n.j.replace(/:$/,""))}function CD(n,e,t){n.i=t?jw(e,!0):e}function ID(n,e){if(e){if(e=Number(e),isNaN(e)||0>e)throw Error("Bad port number "+e);n.m=e}else n.m=null}function SO(n,e,t){e instanceof $w?(n.h=e,function rj(n,e){e&&!n.j&&(Vh(n),n.i=null,n.g.forEach(function(t,r){var i=r.toLowerCase();r!=i&&(xO(this,r),MO(this,i,t))},n)),n.j=e}(n.h,n.g)):(t||(e=Hw(e,tj)),n.h=new $w(e,n.g))}function er(n,e,t){n.h.set(e,t)}function bD(n){return er(n,"zx",Math.floor(2147483648*Math.random()).toString(36)+Math.abs(Math.floor(2147483648*Math.random())^Date.now()).toString(36)),n}function jw(n,e){return n?e?decodeURI(n.replace(/%25/g,"%2525")):decodeURIComponent(n):""}function Hw(n,e,t){return"string"==typeof n?(n=encodeURI(n).replace(e,J2),t&&(n=n.replace(/%25([0-9a-fA-F]{2})/g,"%$1")),n):null}function J2(n){return"%"+((n=n.charCodeAt(0))>>4&15).toString(16)+(15&n).toString(16)}Bp.prototype.toString=function(){var n=[],e=this.j;e&&n.push(Hw(e,AO,!0),":");var t=this.i;return(t||"file"==e)&&(n.push("//"),(e=this.s)&&n.push(Hw(e,AO,!0),"@"),n.push(encodeURIComponent(String(t)).replace(/%25([0-9a-fA-F]{2})/g,"%$1")),null!=(t=this.m)&&n.push(":",String(t))),(t=this.l)&&(this.i&&"/"!=t.charAt(0)&&n.push("/"),n.push(Hw(t,"/"==t.charAt(0)?ej:X2,!0))),(t=this.h.toString())&&n.push("?",t),(t=this.o)&&n.push("#",Hw(t,nj)),n.join("")};var AO=/[#\/\?@]/g,X2=/[#\?:]/g,ej=/[#\?]/g,tj=/[#\?@]/g,nj=/#/g;function $w(n,e){this.h=this.g=null,this.i=n||null,this.j=!!e}function Vh(n){n.g||(n.g=new w_,n.h=0,n.i&&function Z2(n,e){if(n){n=n.split("&");for(var t=0;t<n.length;t++){var r=n[t].indexOf("="),i=null;if(0<=r){var a=n[t].substring(0,r);i=n[t].substring(r+1)}else a=n[t];e(a,i?decodeURIComponent(i.replace(/\+/g," ")):"")}}}(n.i,function(e,t){n.add(decodeURIComponent(e.replace(/\+/g," ")),t)}))}function xO(n,e){Vh(n),e=E_(n,e),Up(n.g.h,e)&&(n.i=null,n.h-=n.g.get(e).length,Up((n=n.g).h,e)&&(delete n.h[e],n.i--,n.g.length>2*n.i&&vR(n)))}function RO(n,e){return Vh(n),e=E_(n,e),Up(n.g.h,e)}function MO(n,e,t){xO(n,e),0<t.length&&(n.i=null,n.g.set(E_(n,e),Hx(t)),n.h+=t.length)}function E_(n,e){return e=String(e),n.j&&(e=e.toLowerCase()),e}function NO(n){this.l=n||sj,n=Ft.PerformanceNavigationTiming?0<(n=Ft.performance.getEntriesByType("navigation")).length&&("hq"==n[0].nextHopProtocol||"h2"==n[0].nextHopProtocol):!!(Ft.g&&Ft.g.Ea&&Ft.g.Ea()&&Ft.g.Ea().Zb),this.j=n?this.l:1,this.g=null,1<this.j&&(this.g=new Set),this.h=null,this.i=[]}(rt=$w.prototype).add=function(n,e){Vh(this),this.i=null,n=E_(this,n);var t=this.g.get(n);return t||this.g.set(n,t=[]),t.push(e),this.h+=1,this},rt.forEach=function(n,e){Vh(this),this.g.forEach(function(t,r){Wk(t,function(i){n.call(e,i,r,this)},this)},this)},rt.T=function(){Vh(this);for(var n=this.g.R(),e=this.g.T(),t=[],r=0;r<e.length;r++)for(var i=n[r],a=0;a<i.length;a++)t.push(e[r]);return t},rt.R=function(n){Vh(this);var e=[];if("string"==typeof n)RO(this,n)&&(e=qk(e,this.g.get(E_(this,n))));else{n=this.g.R();for(var t=0;t<n.length;t++)e=qk(e,n[t])}return e},rt.set=function(n,e){return Vh(this),this.i=null,RO(this,n=E_(this,n))&&(this.h-=this.g.get(n).length),this.g.set(n,[e]),this.h+=1,this},rt.get=function(n,e){return n&&0<(n=this.R(n)).length?String(n[0]):e},rt.toString=function(){if(this.i)return this.i;if(!this.g)return"";for(var n=[],e=this.g.T(),t=0;t<e.length;t++){var r=e[t],i=encodeURIComponent(String(r));r=this.R(r);for(var a=0;a<r.length;a++){var l=i;""!==r[a]&&(l+="="+encodeURIComponent(String(r[a]))),n.push(l)}}return this.i=n.join("&")};var sj=10;function PO(n){return!!n.h||!!n.g&&n.g.size>=n.j}function kO(n){return n.h?1:n.g?n.g.size:0}function wR(n,e){return n.h?n.h==e:!!n.g&&n.g.has(e)}function ER(n,e){n.g?n.g.add(e):n.h=e}function OO(n,e){n.h&&n.h==e?n.h=null:n.g&&n.g.has(e)&&n.g.delete(e)}function FO(n){if(null!=n.h)return n.i.concat(n.h.D);if(null!=n.g&&0!==n.g.size){let e=n.i;for(const t of n.g.values())e=e.concat(t.D);return e}return Hx(n.i)}function CR(){}function oj(){this.g=new CR}function aj(n,e,t){const r=t||"";try{yR(n,function(i,a){let l=i;Mw(i)&&(l=sR(i)),e.push(r+a+"="+encodeURIComponent(l))})}catch(i){throw e.push(r+"type="+encodeURIComponent("_badmap")),i}}function DD(n,e,t,r,i){try{e.onload=null,e.onerror=null,e.onabort=null,e.ontimeout=null,i(r)}catch(a){}}function Gw(n){this.l=n.$b||null,this.j=n.ib||!1}function TD(n,e){yi.call(this),this.D=n,this.u=e,this.m=void 0,this.readyState=IR,this.status=0,this.responseType=this.responseText=this.response=this.statusText="",this.onreadystatechange=null,this.v=new Headers,this.h=null,this.C="GET",this.B="",this.g=!1,this.A=this.j=this.l=null}NO.prototype.cancel=function(){if(this.i=FO(this),this.h)this.h.cancel(),this.h=null;else if(this.g&&0!==this.g.size){for(const n of this.g.values())n.cancel();this.g.clear()}},CR.prototype.stringify=function(n){return Ft.JSON.stringify(n,void 0)},CR.prototype.parse=function(n){return Ft.JSON.parse(n,void 0)},ji(Gw,dR),Gw.prototype.g=function(){return new TD(this.l,this.j)},Gw.prototype.i=function(n){return function(){return n}}({}),ji(TD,yi);var IR=0;function LO(n){n.j.read().then(n.Sa.bind(n)).catch(n.ha.bind(n))}function Ww(n){n.readyState=4,n.l=null,n.j=null,n.A=null,qw(n)}function qw(n){n.onreadystatechange&&n.onreadystatechange.call(n)}(rt=TD.prototype).open=function(n,e){if(this.readyState!=IR)throw this.abort(),Error("Error reopening a connection");this.C=n,this.B=e,this.readyState=1,qw(this)},rt.send=function(n){if(1!=this.readyState)throw this.abort(),Error("need to call open() first. ");this.g=!0;const e={headers:this.v,method:this.C,credentials:this.m,cache:void 0};n&&(e.body=n),(this.D||Ft).fetch(new Request(this.B,e)).then(this.Va.bind(this),this.ha.bind(this))},rt.abort=function(){this.response=this.responseText="",this.v=new Headers,this.status=0,this.j&&this.j.cancel("Request was aborted."),1<=this.readyState&&this.g&&4!=this.readyState&&(this.g=!1,Ww(this)),this.readyState=IR},rt.Va=function(n){if(this.g&&(this.l=n,this.h||(this.status=this.l.status,this.statusText=this.l.statusText,this.h=n.headers,this.readyState=2,qw(this)),this.g&&(this.readyState=3,qw(this),this.g)))if("arraybuffer"===this.responseType)n.arrayBuffer().then(this.Ta.bind(this),this.ha.bind(this));else if(void 0!==Ft.ReadableStream&&"body"in n){if(this.j=n.body.getReader(),this.u){if(this.responseType)throw Error('responseType must be empty for "streamBinaryChunks" mode responses.');this.response=[]}else this.response=this.responseText="",this.A=new TextDecoder;LO(this)}else n.text().then(this.Ua.bind(this),this.ha.bind(this))},rt.Sa=function(n){if(this.g){if(this.u&&n.value)this.response.push(n.value);else if(!this.u){var e=n.value?n.value:new Uint8Array(0);(e=this.A.decode(e,{stream:!n.done}))&&(this.response=this.responseText+=e)}n.done?Ww(this):qw(this),3==this.readyState&&LO(this)}},rt.Ua=function(n){this.g&&(this.response=this.responseText=n,Ww(this))},rt.Ta=function(n){this.g&&(this.response=n,Ww(this))},rt.ha=function(){this.g&&Ww(this)},rt.setRequestHeader=function(n,e){this.v.append(n,e)},rt.getResponseHeader=function(n){return this.h&&this.h.get(n.toLowerCase())||""},rt.getAllResponseHeaders=function(){if(!this.h)return"";const n=[],e=this.h.entries();for(var t=e.next();!t.done;)n.push((t=t.value)[0]+": "+t[1]),t=e.next();return n.join("\r\n")},Object.defineProperty(TD.prototype,"withCredentials",{get:function(){return"include"===this.m},set:function(n){this.m=n?"include":"same-origin"}});var lj=Ft.JSON.parse;function Lr(n){yi.call(this),this.headers=new w_,this.u=n||null,this.h=!1,this.C=this.g=null,this.H="",this.m=0,this.j="",this.l=this.F=this.v=this.D=!1,this.B=0,this.A=null,this.J=VO,this.K=this.L=!1}ji(Lr,yi);var VO="",cj=/^https?$/i,dj=["POST","PUT"];function fj(n){return"content-type"==n.toLowerCase()}function UO(n,e){n.h=!1,n.g&&(n.l=!0,n.g.abort(),n.l=!1),n.j=e,n.m=5,BO(n),SD(n)}function BO(n){n.D||(n.D=!0,Hi(n,"complete"),Hi(n,"error"))}function jO(n){if(n.h&&void 0!==Ux&&(!n.C[1]||4!=zc(n)||2!=n.ba()))if(n.v&&4==zc(n))cR(n.Fa,0,n);else if(Hi(n,"readystatechange"),4==zc(n)){n.h=!1;try{const h=n.ba();e:switch(h){case 200:case 201:case 202:case 204:case 206:case 304:case 1223:var e=!0;break e;default:e=!1}var t;if(!(t=e)){var r;if(r=0===h){var i=String(n.H).match(TO)[1]||null;if(!i&&Ft.self&&Ft.self.location){var a=Ft.self.location.protocol;i=a.substr(0,a.length-1)}r=!cj.test(i?i.toLowerCase():"")}t=r}if(t)Hi(n,"complete"),Hi(n,"success");else{n.m=6;try{var l=2<zc(n)?n.g.statusText:""}catch(_){l=""}n.j=l+" ["+n.ba()+"]",BO(n)}}finally{SD(n)}}}function SD(n,e){if(n.g){HO(n);const t=n.g,r=n.C[0]?aD:null;n.g=null,n.C=null,e||Hi(n,"ready");try{t.onreadystatechange=r}catch(i){}}}function HO(n){n.g&&n.K&&(n.g.ontimeout=null),n.A&&(Ft.clearTimeout(n.A),n.A=null)}function zc(n){return n.g?n.g.readyState:0}function $O(n){try{if(!n.g)return null;if("response"in n.g)return n.g.response;switch(n.J){case VO:case"text":return n.g.responseText;case"arraybuffer":if("mozResponseArrayBuffer"in n.g)return n.g.mozResponseArrayBuffer}return null}catch(e){return null}}function bR(n,e,t){e:{for(r in t){var r=!1;break e}r=!0}r||(t=function pj(n){let e="";return Gx(n,function(t,r){e+=r,e+=":",e+=t,e+="\r\n"}),e}(t),"string"==typeof n?null!=t&&encodeURIComponent(String(t)):er(n,e,t))}function zw(n,e,t){return t&&t.internalChannelParams&&t.internalChannelParams[n]||e}function GO(n){this.za=0,this.l=[],this.h=new gD,this.la=this.oa=this.F=this.W=this.g=this.sa=this.D=this.aa=this.o=this.P=this.s=null,this.Za=this.V=0,this.Xa=zw("failFast",!1,n),this.N=this.v=this.u=this.m=this.j=null,this.X=!0,this.I=this.ta=this.U=-1,this.Y=this.A=this.C=0,this.Pa=zw("baseRetryDelayMs",5e3,n),this.$a=zw("retryDelaySeedMs",1e4,n),this.Ya=zw("forwardChannelMaxRetries",2,n),this.ra=zw("forwardChannelRequestTimeoutMs",2e4,n),this.qa=n&&n.xmlHttpFactory||void 0,this.Ba=n&&n.Yb||!1,this.K=void 0,this.H=n&&n.supportsCrossDomainXhr||!1,this.J="",this.i=new NO(n&&n.concurrentRequestLimit),this.Ca=new oj,this.ja=n&&n.fastHandshake||!1,this.Ra=n&&n.Wb||!1,n&&n.Aa&&this.h.Aa(),n&&n.forceLongPolling&&(this.X=!1),this.$=!this.ja&&this.X&&n&&n.detectBufferingProxy||!1,this.ka=void 0,this.O=0,this.L=!1,this.B=null,this.Wa=!n||!1!==n.Xb}function DR(n){if(WO(n),3==n.G){var e=n.V++,t=qc(n.F);er(t,"SID",n.J),er(t,"RID",e),er(t,"TYPE","terminate"),Kw(n,t),(e=new Vw(n,n.h,e,void 0)).K=2,e.v=bD(qc(t)),t=!1,Ft.navigator&&Ft.navigator.sendBeacon&&(t=Ft.navigator.sendBeacon(e.v.toString(),"")),!t&&Ft.Image&&((new Image).src=e.v,t=!0),t||(e.g=e1(e.l,null),e.g.ea(e.v)),e.F=Date.now(),Uw(e)}JO(n)}function AD(n){n.g&&(AR(n),n.g.cancel(),n.g=null)}function WO(n){AD(n),n.u&&(Ft.clearTimeout(n.u),n.u=null),RD(n),n.i.cancel(),n.m&&("number"==typeof n.m&&Ft.clearTimeout(n.m),n.m=null)}function TR(n,e){n.l.push(new class{constructor(n,e){this.h=n,this.g=e}}(n.Za++,e)),3==n.G&&xD(n)}function xD(n){PO(n.i)||n.m||(n.m=!0,oR(n.Ha,n),n.C=0)}function qO(n,e){var t;t=e?e.m:n.V++;const r=qc(n.F);er(r,"SID",n.J),er(r,"RID",t),er(r,"AID",n.U),Kw(n,r),n.o&&n.s&&bR(r,n.o,n.s),t=new Vw(n,n.h,t,n.C+1),null===n.o&&(t.H=n.s),e&&(n.l=e.D.concat(n.l)),e=zO(n,t,1e3),t.setTimeout(Math.round(.5*n.ra)+Math.round(.5*n.ra*Math.random())),ER(n.i,t),mR(t,r,e)}function Kw(n,e){n.j&&yR({},function(t,r){er(e,r,t)})}function zO(n,e,t){t=Math.min(n.l.length,t);var r=n.j?Bi(n.j.Oa,n.j,n):null;e:{var i=n.l;let a=-1;for(;;){const l=["count="+t];-1==a?0<t?(a=i[0].h,l.push("ofs="+a)):a=0:l.push("ofs="+a);let h=!0;for(let _=0;_<t;_++){let w=i[_].h;const D=i[_].g;if(w-=a,0>w)a=Math.max(0,i[_].h-100),h=!1;else try{aj(D,l,"req"+w+"_")}catch(S){r&&r(D)}}if(h){r=l.join("&");break e}}}return n=n.l.splice(0,t),e.D=n,r}function KO(n){n.g||n.u||(n.Y=1,oR(n.Ga,n),n.A=0)}function SR(n){return!(n.g||n.u||3<=n.A||(n.Y++,n.u=Fw(Bi(n.Ga,n),QO(n,n.A)),n.A++,0))}function AR(n){null!=n.B&&(Ft.clearTimeout(n.B),n.B=null)}function ZO(n){n.g=new Vw(n,n.h,"rpc",n.Y),null===n.o&&(n.g.H=n.s),n.g.O=0;var e=qc(n.oa);er(e,"RID","rpc"),er(e,"SID",n.J),er(e,"CI",n.N?"0":"1"),er(e,"AID",n.U),Kw(n,e),er(e,"TYPE","xmlhttp"),n.o&&n.s&&bR(e,n.o,n.s),n.K&&n.g.setTimeout(n.K);var t=n.g;n=n.la,t.K=1,t.v=bD(qc(e)),t.s=null,t.U=!0,CO(t,n)}function RD(n){null!=n.v&&(Ft.clearTimeout(n.v),n.v=null)}function YO(n,e){var t=null;if(n.g==e){RD(n),AR(n),n.g=null;var r=2}else{if(!wR(n.i,e))return;t=e.D,OO(n.i,e),r=1}if(n.I=e.N,0!=n.G)if(e.i)if(1==r){t=e.s?e.s.length:0,e=Date.now()-e.F;var i=n.C;Hi(r=mD(),new _O(r,t,e,i)),xD(n)}else KO(n);else if(3==(i=e.o)||0==i&&0<n.I||!(1==r&&function gj(n,e){return!(kO(n.i)>=n.i.j-(n.m?1:0)||(n.m?(n.l=e.D.concat(n.l),0):1==n.G||2==n.G||n.C>=(n.Xa?0:n.Ya)||(n.m=Fw(Bi(n.Ha,n,e),QO(n,n.C)),n.C++,0)))}(n,e)||2==r&&SR(n)))switch(t&&0<t.length&&(e=n.i,e.i=e.i.concat(t)),i){case 1:jp(n,5);break;case 4:jp(n,10);break;case 3:jp(n,6);break;default:jp(n,2)}}function QO(n,e){let t=n.Pa+Math.floor(Math.random()*n.$a);return n.j||(t*=2),t*e}function jp(n,e){if(n.h.info("Error code "+e),2==e){var t=null;n.j&&(t=null);var r=Bi(n.jb,n);t||(t=new Bp("//www.google.com/images/cleardot.gif"),Ft.location&&"http"==Ft.location.protocol||ED(t,"https"),bD(t)),function uj(n,e){const t=new gD;if(Ft.Image){const r=new Image;r.onload=uD(DD,t,r,"TestLoadImage: loaded",!0,e),r.onerror=uD(DD,t,r,"TestLoadImage: error",!1,e),r.onabort=uD(DD,t,r,"TestLoadImage: abort",!1,e),r.ontimeout=uD(DD,t,r,"TestLoadImage: timeout",!1,e),Ft.setTimeout(function(){r.ontimeout&&r.ontimeout()},1e4),r.src=n}else e(!1)}(t.toString(),r)}else Hs(2);n.G=0,n.j&&n.j.va(e),JO(n),WO(n)}function JO(n){n.G=0,n.I=-1,n.j&&((0!=FO(n.i).length||0!=n.l.length)&&(n.i.i.length=0,Hx(n.l),n.l.length=0),n.j.ua())}function XO(n,e,t){let r=function Y2(n){return n instanceof Bp?qc(n):new Bp(n,void 0)}(t);if(""!=r.i)e&&CD(r,e+"."+r.i),ID(r,r.m);else{const i=Ft.location;r=function Q2(n,e,t,r){var i=new Bp(null,void 0);return n&&ED(i,n),e&&CD(i,e),t&&ID(i,t),r&&(i.l=r),i}(i.protocol,e?e+"."+i.hostname:i.hostname,+i.port,t)}return n.aa&&Gx(n.aa,function(i,a){er(r,a,i)}),t=n.sa,(e=n.D)&&t&&er(r,e,t),er(r,"VER",n.ma),Kw(n,r),r}function e1(n,e,t){if(e&&!n.H)throw Error("Can't create secondary domain capable XhrIo object.");return(e=new Lr(t&&n.Ba&&!n.qa?new Gw({ib:!0}):n.qa)).L=n.H,e}function t1(){}function MD(){if(y_&&!(10<=Number(A2)))throw Error("Environmental error: no available transport.")}function ca(n,e){yi.call(this),this.g=new GO(e),this.l=n,this.h=e&&e.messageUrlParams||null,n=e&&e.messageHeaders||null,e&&e.clientProtocolHeaderRequired&&(n?n["X-Client-Protocol"]="webchannel":n={"X-Client-Protocol":"webchannel"}),this.g.s=n,n=e&&e.initMessageHeaders||null,e&&e.messageContentType&&(n?n["X-WebChannel-Content-Type"]=e.messageContentType:n={"X-WebChannel-Content-Type":e.messageContentType}),e&&e.ya&&(n?n["X-WebChannel-Client-Profile"]=e.ya:n={"X-WebChannel-Client-Profile":e.ya}),this.g.P=n,(n=e&&e.httpHeadersOverwriteParam)&&!lD(n)&&(this.g.o=n),this.A=e&&e.supportsCrossDomainXhr||!1,this.v=e&&e.sendRawJson||!1,(e=e&&e.httpSessionIdParam)&&!lD(e)&&(this.g.D=e,null!==(n=this.h)&&e in n&&e in(n=this.h)&&delete n[e]),this.j=new C_(this)}function n1(n){hR.call(this);var e=n.__sm__;if(e){e:{for(const t in e){n=t;break e}n=void 0}(this.i=n)&&(n=this.i,e=null!==e&&n in e?e[n]:void 0),this.data=e}else this.data=n}function r1(){fR.call(this),this.status=1}function C_(n){this.g=n}(rt=Lr.prototype).ea=function(n,e,t,r){if(this.g)throw Error("[goog.net.XhrIo] Object is active with another request="+this.H+"; newUri="+n);e=e?e.toUpperCase():"GET",this.H=n,this.j="",this.m=0,this.D=!1,this.h=!0,this.g=this.u?this.u.g():pR.g(),this.C=function vO(n){return n.h||(n.h=n.i())}(this.u?this.u:pR),this.g.onreadystatechange=Bi(this.Fa,this);try{this.F=!0,this.g.open(e,String(n),!0),this.F=!1}catch(a){return void UO(this,a)}n=t||"";const i=new w_(this.headers);r&&yR(r,function(a,l){i.set(l,a)}),r=function C2(n){e:{var e=fj;const t=n.length,r="string"==typeof n?n.split(""):n;for(let i=0;i<t;i++)if(i in r&&e.call(void 0,r[i],i,n)){e=i;break e}e=-1}return 0>e?null:"string"==typeof n?n.charAt(e):n[e]}(i.T()),t=Ft.FormData&&n instanceof Ft.FormData,!(0<=Gk(dj,e))||r||t||i.set("Content-Type","application/x-www-form-urlencoded;charset=utf-8"),i.forEach(function(a,l){this.g.setRequestHeader(l,a)},this),this.J&&(this.g.responseType=this.J),"withCredentials"in this.g&&this.g.withCredentials!==this.L&&(this.g.withCredentials=this.L);try{HO(this),0<this.B&&((this.K=function hj(n){return y_&&function S2(){return function I2(n){var e=T2;return Object.prototype.hasOwnProperty.call(e,9)?e[9]:e[9]=n(9)}(function(){let n=0;const e=zk(String(cD)).split("."),t=zk("9").split("."),r=Math.max(e.length,t.length);for(let l=0;0==n&&l<r;l++){var i=e[l]||"",a=t[l]||"";do{if(i=/(\d*)(\D*)(.*)/.exec(i)||["","","",""],a=/(\d*)(\D*)(.*)/.exec(a)||["","","",""],0==i[0].length&&0==a[0].length)break;n=$x(0==i[1].length?0:parseInt(i[1],10),0==a[1].length?0:parseInt(a[1],10))||$x(0==i[2].length,0==a[2].length)||$x(i[2],a[2]),i=i[3],a=a[3]}while(0==n)}return 0<=n})}()&&"number"==typeof n.timeout&&void 0!==n.ontimeout}(this.g))?(this.g.timeout=this.B,this.g.ontimeout=Bi(this.pa,this)):this.A=cR(this.pa,this.B,this)),this.v=!0,this.g.send(n),this.v=!1}catch(a){UO(this,a)}},rt.pa=function(){void 0!==Ux&&this.g&&(this.j="Timed out after "+this.B+"ms, aborting",this.m=8,Hi(this,"timeout"),this.abort(8))},rt.abort=function(n){this.g&&this.h&&(this.h=!1,this.l=!0,this.g.abort(),this.l=!1,this.m=n||7,Hi(this,"complete"),Hi(this,"abort"),SD(this))},rt.M=function(){this.g&&(this.h&&(this.h=!1,this.l=!0,this.g.abort(),this.l=!1),SD(this,!0)),Lr.Z.M.call(this)},rt.Fa=function(){this.s||(this.F||this.v||this.l?jO(this):this.cb())},rt.cb=function(){jO(this)},rt.ba=function(){try{return 2<zc(this)?this.g.status:-1}catch(n){return-1}},rt.ga=function(){try{return this.g?this.g.responseText:""}catch(n){return""}},rt.Qa=function(n){if(this.g){var e=this.g.responseText;return n&&0==e.indexOf(n)&&(e=e.substring(n.length)),lj(e)}},rt.Da=function(){return this.m},rt.La=function(){return"string"==typeof this.j?this.j:String(this.j)},(rt=GO.prototype).ma=8,rt.G=1,rt.hb=function(n){try{this.h.info("Origin Trials invoked: "+n)}catch(e){}},rt.Ha=function(n){if(this.m)if(this.m=null,1==this.G){if(!n){this.V=Math.floor(1e5*Math.random()),n=this.V++;const i=new Vw(this,this.h,n,void 0);let a=this.s;if(this.P&&(a?(a=Yk(a),Jk(a,this.P)):a=this.P),null===this.o&&(i.H=a),this.ja)e:{for(var e=0,t=0;t<this.l.length;t++){var r=this.l[t];if(void 0===(r="__data__"in r.g&&"string"==typeof(r=r.g.__data__)?r.length:void 0))break;if(4096<(e+=r)){e=t;break e}if(4096===e||t===this.l.length-1){e=t+1;break e}}e=1e3}else e=1e3;e=zO(this,i,e),er(t=qc(this.F),"RID",n),er(t,"CVER",22),this.D&&er(t,"X-HTTP-Session-Id",this.D),Kw(this,t),this.o&&a&&bR(t,this.o,a),ER(this.i,i),this.Ra&&er(t,"TYPE","init"),this.ja?(er(t,"$req",e),er(t,"SID","null"),i.$=!0,mR(i,t,null)):mR(i,t,e),this.G=2}}else 3==this.G&&(n?qO(this,n):0==this.l.length||PO(this.i)||qO(this))},rt.Ga=function(){if(this.u=null,ZO(this),this.$&&!(this.L||null==this.g||0>=this.O)){var n=2*this.O;this.h.info("BP detection timer enabled: "+n),this.B=Fw(Bi(this.bb,this),n)}},rt.bb=function(){this.B&&(this.B=null,this.h.info("BP detection timeout reached."),this.h.info("Buffering proxy detected and switch to long-polling!"),this.N=!1,this.L=!0,Hs(10),AD(this),ZO(this))},rt.ab=function(){null!=this.v&&(this.v=null,AD(this),SR(this),Hs(19))},rt.jb=function(n){n?(this.h.info("Successfully pinged google.com"),Hs(2)):(this.h.info("Failed to ping google.com"),Hs(1))},(rt=t1.prototype).xa=function(){},rt.wa=function(){},rt.va=function(){},rt.ua=function(){},rt.Oa=function(){},MD.prototype.g=function(n,e){return new ca(n,e)},ji(ca,yi),ca.prototype.m=function(){this.g.j=this.j,this.A&&(this.g.H=!0);var n=this.g,e=this.l,t=this.h||void 0;n.Wa&&(n.h.info("Origin Trials enabled."),oR(Bi(n.hb,n,e))),Hs(0),n.W=e,n.aa=t||{},n.N=n.X,n.F=XO(n,null,n.W),xD(n)},ca.prototype.close=function(){DR(this.g)},ca.prototype.u=function(n){if("string"==typeof n){var e={};e.__data__=n,TR(this.g,e)}else this.v?((e={}).__data__=sR(n),TR(this.g,e)):TR(this.g,n)},ca.prototype.M=function(){this.g.j=null,delete this.j,DR(this.g),delete this.g,ca.Z.M.call(this)},ji(n1,hR),ji(r1,fR),ji(C_,t1),C_.prototype.xa=function(){Hi(this.g,"a")},C_.prototype.wa=function(n){Hi(this.g,new n1(n))},C_.prototype.va=function(n){Hi(this.g,new r1(n))},C_.prototype.ua=function(){Hi(this.g,"b")},MD.prototype.createWebChannel=MD.prototype.g,ca.prototype.send=ca.prototype.u,ca.prototype.open=ca.prototype.m,ca.prototype.close=ca.prototype.close,_D.NO_ERROR=0,_D.TIMEOUT=8,_D.HTTP_ERROR=6,yO.COMPLETE="complete",wO.EventType=Lw,Lw.OPEN="a",Lw.CLOSE="b",Lw.ERROR="c",Lw.MESSAGE="d",yi.prototype.listen=yi.prototype.N,Lr.prototype.listenOnce=Lr.prototype.O,Lr.prototype.getLastError=Lr.prototype.La,Lr.prototype.getLastErrorCode=Lr.prototype.Da,Lr.prototype.getStatus=Lr.prototype.ba,Lr.prototype.getResponseJson=Lr.prototype.Qa,Lr.prototype.getResponseText=Lr.prototype.ga,Lr.prototype.send=Lr.prototype.ea;var mj=Wc.createWebChannelTransport=function(){return new MD},_j=Wc.getStatEventTarget=function(){return mD()},xR=Wc.ErrorCode=_D,yj=Wc.EventType=yO,vj=Wc.Event=Lp,i1=Wc.Stat={rb:0,ub:1,vb:2,Ob:3,Tb:4,Qb:5,Rb:6,Pb:7,Nb:8,Sb:9,PROXY:10,NOPROXY:11,Lb:12,Hb:13,Ib:14,Gb:15,Jb:16,Kb:17,nb:18,mb:19,ob:20},wj=Wc.FetchXmlHttpFactory=Gw,ND=Wc.WebChannel=wO,Ej=Wc.XhrIo=Lr;const s1="@firebase/firestore";class $i{constructor(e){this.uid=e}isAuthenticated(){return null!=this.uid}toKey(){return this.isAuthenticated()?"uid:"+this.uid:"anonymous-user"}isEqual(e){return e.uid===this.uid}}$i.UNAUTHENTICATED=new $i(null),$i.GOOGLE_CREDENTIALS=new $i("google-credentials-uid"),$i.FIRST_PARTY=new $i("first-party-uid"),$i.MOCK_USER=new $i("mock-user");let I_="9.6.10";const Uh=new Io.Yd("@firebase/firestore");function RR(){return Uh.logLevel}function Le(n,...e){if(Uh.logLevel<=Io.in.DEBUG){const t=e.map(MR);Uh.debug(`Firestore (${I_}): ${n}`,...t)}}function Vr(n,...e){if(Uh.logLevel<=Io.in.ERROR){const t=e.map(MR);Uh.error(`Firestore (${I_}): ${n}`,...t)}}function Zw(n,...e){if(Uh.logLevel<=Io.in.WARN){const t=e.map(MR);Uh.warn(`Firestore (${I_}): ${n}`,...t)}}function MR(n){if("string"==typeof n)return n;try{return JSON.stringify(n)}catch(t){return n}}function st(n="Unexpected state"){const e=`FIRESTORE (${I_}) INTERNAL ASSERTION FAILED: `+n;throw Vr(e),new Error(e)}function xt(n,e){n||st()}function ze(n,e){return n}const de={OK:"ok",CANCELLED:"cancelled",UNKNOWN:"unknown",INVALID_ARGUMENT:"invalid-argument",DEADLINE_EXCEEDED:"deadline-exceeded",NOT_FOUND:"not-found",ALREADY_EXISTS:"already-exists",PERMISSION_DENIED:"permission-denied",UNAUTHENTICATED:"unauthenticated",RESOURCE_EXHAUSTED:"resource-exhausted",FAILED_PRECONDITION:"failed-precondition",ABORTED:"aborted",OUT_OF_RANGE:"out-of-range",UNIMPLEMENTED:"unimplemented",INTERNAL:"internal",UNAVAILABLE:"unavailable",DATA_LOSS:"data-loss"};class Ne extends k.ZR{constructor(e,t){super(e,t),this.code=e,this.message=t,this.toString=()=>`${this.name}: [code=${this.code}]: ${this.message}`}}class vi{constructor(){this.promise=new Promise((e,t)=>{this.resolve=e,this.reject=t})}}class o1{constructor(e,t){this.user=t,this.type="OAuth",this.headers=new Map,this.headers.set("Authorization",`Bearer ${e}`)}}class bj{getToken(){return Promise.resolve(null)}invalidateToken(){}start(e,t){e.enqueueRetryable(()=>t($i.UNAUTHENTICATED))}shutdown(){}}class Dj{constructor(e){this.token=e,this.changeListener=null}getToken(){return Promise.resolve(this.token)}invalidateToken(){}start(e,t){this.changeListener=t,e.enqueueRetryable(()=>t(this.token.user))}shutdown(){this.changeListener=null}}class Tj{constructor(e){this.t=e,this.currentUser=$i.UNAUTHENTICATED,this.i=0,this.forceRefresh=!1,this.auth=null}start(e,t){var r=this;let i=this.i;const a=w=>this.i!==i?(i=this.i,t(w)):Promise.resolve();let l=new vi;this.o=()=>{this.i++,this.currentUser=this.u(),l.resolve(),l=new vi,e.enqueueRetryable(()=>a(this.currentUser))};const h=()=>{const w=l;e.enqueueRetryable((0,ye.Z)(function*(){yield w.promise,yield a(r.currentUser)}))},_=w=>{Le("FirebaseAuthCredentialsProvider","Auth detected"),this.auth=w,this.auth.addAuthTokenListener(this.o),h()};this.t.onInit(w=>_(w)),setTimeout(()=>{if(!this.auth){const w=this.t.getImmediate({optional:!0});w?_(w):(Le("FirebaseAuthCredentialsProvider","Auth not yet detected"),l.resolve(),l=new vi)}},0),h()}getToken(){const e=this.i,t=this.forceRefresh;return this.forceRefresh=!1,this.auth?this.auth.getToken(t).then(r=>this.i!==e?(Le("FirebaseAuthCredentialsProvider","getToken aborted due to token change."),this.getToken()):r?(xt("string"==typeof r.accessToken),new o1(r.accessToken,this.currentUser)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.auth&&this.auth.removeAuthTokenListener(this.o)}u(){const e=this.auth&&this.auth.getUid();return xt(null===e||"string"==typeof e),new $i(e)}}class Sj{constructor(e,t,r){this.type="FirstParty",this.user=$i.FIRST_PARTY,this.headers=new Map,this.headers.set("X-Goog-AuthUser",t);const i=e.auth.getAuthHeaderValueForFirstParty([]);i&&this.headers.set("Authorization",i),r&&this.headers.set("X-Goog-Iam-Authorization-Token",r)}}class Aj{constructor(e,t,r){this.h=e,this.l=t,this.m=r}getToken(){return Promise.resolve(new Sj(this.h,this.l,this.m))}start(e,t){e.enqueueRetryable(()=>t($i.FIRST_PARTY))}shutdown(){}invalidateToken(){}}class a1{constructor(e){this.value=e,this.type="AppCheck",this.headers=new Map,e&&e.length>0&&this.headers.set("x-firebase-appcheck",this.value)}}class xj{constructor(e){this.g=e,this.forceRefresh=!1,this.appCheck=null,this.p=null}start(e,t){const r=a=>{null!=a.error&&Le("FirebaseAppCheckTokenProvider",`Error getting App Check token; using placeholder token instead. Error: ${a.error.message}`);const l=a.token!==this.p;return this.p=a.token,Le("FirebaseAppCheckTokenProvider",`Received ${l?"new":"existing"} token.`),l?t(a.token):Promise.resolve()};this.o=a=>{e.enqueueRetryable(()=>r(a))};const i=a=>{Le("FirebaseAppCheckTokenProvider","AppCheck detected"),this.appCheck=a,this.appCheck.addTokenListener(this.o)};this.g.onInit(a=>i(a)),setTimeout(()=>{if(!this.appCheck){const a=this.g.getImmediate({optional:!0});a?i(a):Le("FirebaseAppCheckTokenProvider","AppCheck not yet detected")}},0)}getToken(){const e=this.forceRefresh;return this.forceRefresh=!1,this.appCheck?this.appCheck.getToken(e).then(t=>t?(xt("string"==typeof t.token),this.p=t.token,new a1(t.token)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.appCheck&&this.appCheck.removeTokenListener(this.o)}}class da{constructor(e,t){this.previousValue=e,t&&(t.sequenceNumberHandler=r=>this.I(r),this.T=r=>t.writeSequenceNumber(r))}I(e){return this.previousValue=Math.max(e,this.previousValue),this.previousValue}next(){const e=++this.previousValue;return this.T&&this.T(e),e}}function Rj(n){const e="undefined"!=typeof self&&(self.crypto||self.msCrypto),t=new Uint8Array(n);if(e&&"function"==typeof e.getRandomValues)e.getRandomValues(t);else for(let r=0;r<n;r++)t[r]=Math.floor(256*Math.random());return t}da.A=-1;class u1{static R(){const e="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",t=Math.floor(256/e.length)*e.length;let r="";for(;r.length<20;){const i=Rj(40);for(let a=0;a<i.length;++a)r.length<20&&i[a]<t&&(r+=e.charAt(i[a]%e.length))}return r}}function Yt(n,e){return n<e?-1:n>e?1:0}function b_(n,e,t){return n.length===e.length&&n.every((r,i)=>t(r,e[i]))}function l1(n){return n+"\0"}class Rr{constructor(e,t){if(this.seconds=e,this.nanoseconds=t,t<0)throw new Ne(de.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+t);if(t>=1e9)throw new Ne(de.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+t);if(e<-62135596800)throw new Ne(de.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e);if(e>=253402300800)throw new Ne(de.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e)}static now(){return Rr.fromMillis(Date.now())}static fromDate(e){return Rr.fromMillis(e.getTime())}static fromMillis(e){const t=Math.floor(e/1e3),r=Math.floor(1e6*(e-1e3*t));return new Rr(t,r)}toDate(){return new Date(this.toMillis())}toMillis(){return 1e3*this.seconds+this.nanoseconds/1e6}_compareTo(e){return this.seconds===e.seconds?Yt(this.nanoseconds,e.nanoseconds):Yt(this.seconds,e.seconds)}isEqual(e){return e.seconds===this.seconds&&e.nanoseconds===this.nanoseconds}toString(){return"Timestamp(seconds="+this.seconds+", nanoseconds="+this.nanoseconds+")"}toJSON(){return{seconds:this.seconds,nanoseconds:this.nanoseconds}}valueOf(){return String(this.seconds- -62135596800).padStart(12,"0")+"."+String(this.nanoseconds).padStart(9,"0")}}class Dt{constructor(e){this.timestamp=e}static fromTimestamp(e){return new Dt(e)}static min(){return new Dt(new Rr(0,0))}static max(){return new Dt(new Rr(253402300799,999999999))}compareTo(e){return this.timestamp._compareTo(e.timestamp)}isEqual(e){return this.timestamp.isEqual(e.timestamp)}toMicroseconds(){return 1e6*this.timestamp.seconds+this.timestamp.nanoseconds/1e3}toString(){return"SnapshotVersion("+this.timestamp.toString()+")"}toTimestamp(){return this.timestamp}}function c1(n){let e=0;for(const t in n)Object.prototype.hasOwnProperty.call(n,t)&&e++;return e}function Hp(n,e){for(const t in n)Object.prototype.hasOwnProperty.call(n,t)&&e(t,n[t])}function d1(n){for(const e in n)if(Object.prototype.hasOwnProperty.call(n,e))return!1;return!0}class Yw{constructor(e,t,r){void 0===t?t=0:t>e.length&&st(),void 0===r?r=e.length-t:r>e.length-t&&st(),this.segments=e,this.offset=t,this.len=r}get length(){return this.len}isEqual(e){return 0===Yw.comparator(this,e)}child(e){const t=this.segments.slice(this.offset,this.limit());return e instanceof Yw?e.forEach(r=>{t.push(r)}):t.push(e),this.construct(t)}limit(){return this.offset+this.length}popFirst(e){return this.construct(this.segments,this.offset+(e=void 0===e?1:e),this.length-e)}popLast(){return this.construct(this.segments,this.offset,this.length-1)}firstSegment(){return this.segments[this.offset]}lastSegment(){return this.get(this.length-1)}get(e){return this.segments[this.offset+e]}isEmpty(){return 0===this.length}isPrefixOf(e){if(e.length<this.length)return!1;for(let t=0;t<this.length;t++)if(this.get(t)!==e.get(t))return!1;return!0}isImmediateParentOf(e){if(this.length+1!==e.length)return!1;for(let t=0;t<this.length;t++)if(this.get(t)!==e.get(t))return!1;return!0}forEach(e){for(let t=this.offset,r=this.limit();t<r;t++)e(this.segments[t])}toArray(){return this.segments.slice(this.offset,this.limit())}static comparator(e,t){const r=Math.min(e.length,t.length);for(let i=0;i<r;i++){const a=e.get(i),l=t.get(i);if(a<l)return-1;if(a>l)return 1}return e.length<t.length?-1:e.length>t.length?1:0}}class un extends Yw{construct(e,t,r){return new un(e,t,r)}canonicalString(){return this.toArray().join("/")}toString(){return this.canonicalString()}static fromString(...e){const t=[];for(const r of e){if(r.indexOf("//")>=0)throw new Ne(de.INVALID_ARGUMENT,`Invalid segment (${r}). Paths must not contain // in them.`);t.push(...r.split("/").filter(i=>i.length>0))}return new un(t)}static emptyPath(){return new un([])}}const Mj=/^[_a-zA-Z][_a-zA-Z0-9]*$/;class wi extends Yw{construct(e,t,r){return new wi(e,t,r)}static isValidIdentifier(e){return Mj.test(e)}canonicalString(){return this.toArray().map(e=>(e=e.replace(/\\/g,"\\\\").replace(/`/g,"\\`"),wi.isValidIdentifier(e)||(e="`"+e+"`"),e)).join(".")}toString(){return this.canonicalString()}isKeyField(){return 1===this.length&&"__name__"===this.get(0)}static keyField(){return new wi(["__name__"])}static fromServerFormat(e){const t=[];let r="",i=0;const a=()=>{if(0===r.length)throw new Ne(de.INVALID_ARGUMENT,`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`);t.push(r),r=""};let l=!1;for(;i<e.length;){const h=e[i];if("\\"===h){if(i+1===e.length)throw new Ne(de.INVALID_ARGUMENT,"Path has trailing escape character: "+e);const _=e[i+1];if("\\"!==_&&"."!==_&&"`"!==_)throw new Ne(de.INVALID_ARGUMENT,"Path has invalid escape sequence: "+e);r+=_,i+=2}else"`"===h?(l=!l,i++):"."!==h||l?(r+=h,i++):(a(),i++)}if(a(),l)throw new Ne(de.INVALID_ARGUMENT,"Unterminated ` in path: "+e);return new wi(t)}static emptyPath(){return new wi([])}}class D_{constructor(e){this.fields=e,e.sort(wi.comparator)}covers(e){for(const t of this.fields)if(t.isPrefixOf(e))return!0;return!1}isEqual(e){return b_(this.fields,e.fields,(t,r)=>t.isEqual(r))}}class ei{constructor(e){this.binaryString=e}static fromBase64String(e){const t=atob(e);return new ei(t)}static fromUint8Array(e){const t=function(r){let i="";for(let a=0;a<r.length;++a)i+=String.fromCharCode(r[a]);return i}(e);return new ei(t)}[Symbol.iterator](){let e=0;return{next:()=>e<this.binaryString.length?{value:this.binaryString.charCodeAt(e++),done:!1}:{value:void 0,done:!0}}}toBase64(){return btoa(this.binaryString)}toUint8Array(){return function(e){const t=new Uint8Array(e.length);for(let r=0;r<e.length;r++)t[r]=e.charCodeAt(r);return t}(this.binaryString)}approximateByteSize(){return 2*this.binaryString.length}compareTo(e){return Yt(this.binaryString,e.binaryString)}isEqual(e){return this.binaryString===e.binaryString}}ei.EMPTY_BYTE_STRING=new ei("");const Pj=new RegExp(/^\d{4}-\d\d-\d\dT\d\d:\d\d:\d\d(?:\.(\d+))?Z$/);function Bh(n){if(xt(!!n),"string"==typeof n){let e=0;const t=Pj.exec(n);if(xt(!!t),t[1]){let i=t[1];i=(i+"000000000").substr(0,9),e=Number(i)}const r=new Date(n);return{seconds:Math.floor(r.getTime()/1e3),nanos:e}}return{seconds:vr(n.seconds),nanos:vr(n.nanos)}}function vr(n){return"number"==typeof n?n:"string"==typeof n?Number(n):0}function $p(n){return"string"==typeof n?ei.fromBase64String(n):ei.fromUint8Array(n)}function NR(n){var e,t;return"server_timestamp"===(null===(t=((null===(e=null==n?void 0:n.mapValue)||void 0===e?void 0:e.fields)||{}).__type__)||void 0===t?void 0:t.stringValue)}function h1(n){const e=n.mapValue.fields.__previous_value__;return NR(e)?h1(e):e}function Qw(n){const e=Bh(n.mapValue.fields.__local_write_time__.timestampValue);return new Rr(e.seconds,e.nanos)}class kj{constructor(e,t,r,i,a,l,h,_){this.databaseId=e,this.appId=t,this.persistenceKey=r,this.host=i,this.ssl=a,this.forceLongPolling=l,this.autoDetectLongPolling=h,this.useFetchStreams=_}}class Kc{constructor(e,t){this.projectId=e,this.database=t||"(default)"}static empty(){return new Kc("","")}get isDefaultDatabase(){return"(default)"===this.database}isEqual(e){return e instanceof Kc&&e.projectId===this.projectId&&e.database===this.database}}function Gp(n){return null==n}function Jw(n){return 0===n&&1/n==-1/0}function f1(n){return"number"==typeof n&&Number.isInteger(n)&&!Jw(n)&&n<=Number.MAX_SAFE_INTEGER&&n>=Number.MIN_SAFE_INTEGER}class Ge{constructor(e){this.path=e}static fromPath(e){return new Ge(un.fromString(e))}static fromName(e){return new Ge(un.fromString(e).popFirst(5))}static empty(){return new Ge(un.emptyPath())}get collectionGroup(){return this.path.popLast().lastSegment()}hasCollectionId(e){return this.path.length>=2&&this.path.get(this.path.length-2)===e}getCollectionGroup(){return this.path.get(this.path.length-2)}getCollectionPath(){return this.path.popLast()}isEqual(e){return null!==e&&0===un.comparator(this.path,e.path)}toString(){return this.path.toString()}static comparator(e,t){return un.comparator(e.path,t.path)}static isDocumentKey(e){return e.length%2==0}static fromSegments(e){return new Ge(new un(e.slice()))}}const p1={mapValue:{fields:{__type__:{stringValue:"__max__"}}}},g1={nullValue:"NULL_VALUE"};function Wp(n){return"nullValue"in n?0:"booleanValue"in n?1:"integerValue"in n||"doubleValue"in n?2:"timestampValue"in n?3:"stringValue"in n?5:"bytesValue"in n?6:"referenceValue"in n?7:"geoPointValue"in n?8:"arrayValue"in n?9:"mapValue"in n?NR(n)?4:v1(n)?9:10:st()}function Al(n,e){if(n===e)return!0;const t=Wp(n);if(t!==Wp(e))return!1;switch(t){case 0:case 9007199254740991:return!0;case 1:return n.booleanValue===e.booleanValue;case 4:return Qw(n).isEqual(Qw(e));case 3:return function(r,i){if("string"==typeof r.timestampValue&&"string"==typeof i.timestampValue&&r.timestampValue.length===i.timestampValue.length)return r.timestampValue===i.timestampValue;const a=Bh(r.timestampValue),l=Bh(i.timestampValue);return a.seconds===l.seconds&&a.nanos===l.nanos}(n,e);case 5:return n.stringValue===e.stringValue;case 6:return i=e,$p(n.bytesValue).isEqual($p(i.bytesValue));case 7:return n.referenceValue===e.referenceValue;case 8:return function(r,i){return vr(r.geoPointValue.latitude)===vr(i.geoPointValue.latitude)&&vr(r.geoPointValue.longitude)===vr(i.geoPointValue.longitude)}(n,e);case 2:return function(r,i){if("integerValue"in r&&"integerValue"in i)return vr(r.integerValue)===vr(i.integerValue);if("doubleValue"in r&&"doubleValue"in i){const a=vr(r.doubleValue),l=vr(i.doubleValue);return a===l?Jw(a)===Jw(l):isNaN(a)&&isNaN(l)}return!1}(n,e);case 9:return b_(n.arrayValue.values||[],e.arrayValue.values||[],Al);case 10:return function(r,i){const a=r.mapValue.fields||{},l=i.mapValue.fields||{};if(c1(a)!==c1(l))return!1;for(const h in a)if(a.hasOwnProperty(h)&&(void 0===l[h]||!Al(a[h],l[h])))return!1;return!0}(n,e);default:return st()}var i}function Xw(n,e){return void 0!==(n.values||[]).find(t=>Al(t,e))}function jh(n,e){if(n===e)return 0;const t=Wp(n),r=Wp(e);if(t!==r)return Yt(t,r);switch(t){case 0:case 9007199254740991:return 0;case 1:return Yt(n.booleanValue,e.booleanValue);case 2:return function(i,a){const l=vr(i.integerValue||i.doubleValue),h=vr(a.integerValue||a.doubleValue);return l<h?-1:l>h?1:l===h?0:isNaN(l)?isNaN(h)?0:-1:1}(n,e);case 3:return m1(n.timestampValue,e.timestampValue);case 4:return m1(Qw(n),Qw(e));case 5:return Yt(n.stringValue,e.stringValue);case 6:return function(i,a){const l=$p(i),h=$p(a);return l.compareTo(h)}(n.bytesValue,e.bytesValue);case 7:return function(i,a){const l=i.split("/"),h=a.split("/");for(let _=0;_<l.length&&_<h.length;_++){const w=Yt(l[_],h[_]);if(0!==w)return w}return Yt(l.length,h.length)}(n.referenceValue,e.referenceValue);case 8:return function(i,a){const l=Yt(vr(i.latitude),vr(a.latitude));return 0!==l?l:Yt(vr(i.longitude),vr(a.longitude))}(n.geoPointValue,e.geoPointValue);case 9:return function(i,a){const l=i.values||[],h=a.values||[];for(let _=0;_<l.length&&_<h.length;++_){const w=jh(l[_],h[_]);if(w)return w}return Yt(l.length,h.length)}(n.arrayValue,e.arrayValue);case 10:return function(i,a){const l=i.fields||{},h=Object.keys(l),_=a.fields||{},w=Object.keys(_);h.sort(),w.sort();for(let D=0;D<h.length&&D<w.length;++D){const S=Yt(h[D],w[D]);if(0!==S)return S;const N=jh(l[h[D]],_[w[D]]);if(0!==N)return N}return Yt(h.length,w.length)}(n.mapValue,e.mapValue);default:throw st()}}function m1(n,e){if("string"==typeof n&&"string"==typeof e&&n.length===e.length)return Yt(n,e);const t=Bh(n),r=Bh(e),i=Yt(t.seconds,r.seconds);return 0!==i?i:Yt(t.nanos,r.nanos)}function T_(n){return PR(n)}function PR(n){return"nullValue"in n?"null":"booleanValue"in n?""+n.booleanValue:"integerValue"in n?""+n.integerValue:"doubleValue"in n?""+n.doubleValue:"timestampValue"in n?function(r){const i=Bh(r);return`time(${i.seconds},${i.nanos})`}(n.timestampValue):"stringValue"in n?n.stringValue:"bytesValue"in n?$p(n.bytesValue).toBase64():"referenceValue"in n?Ge.fromName(n.referenceValue).toString():"geoPointValue"in n?`geo(${(e=n.geoPointValue).latitude},${e.longitude})`:"arrayValue"in n?function(r){let i="[",a=!0;for(const l of r.values||[])a?a=!1:i+=",",i+=PR(l);return i+"]"}(n.arrayValue):"mapValue"in n?function(r){const i=Object.keys(r.fields||{}).sort();let a="{",l=!0;for(const h of i)l?l=!1:a+=",",a+=`${h}:${PR(r.fields[h])}`;return a+"}"}(n.mapValue):st();var e}function S_(n,e){return{referenceValue:`projects/${n.projectId}/databases/${n.database}/documents/${e.path.canonicalString()}`}}function kR(n){return!!n&&"integerValue"in n}function eE(n){return!!n&&"arrayValue"in n}function _1(n){return!!n&&"nullValue"in n}function y1(n){return!!n&&"doubleValue"in n&&isNaN(Number(n.doubleValue))}function PD(n){return!!n&&"mapValue"in n}function tE(n){if(n.geoPointValue)return{geoPointValue:Object.assign({},n.geoPointValue)};if(n.timestampValue&&"object"==typeof n.timestampValue)return{timestampValue:Object.assign({},n.timestampValue)};if(n.mapValue){const e={mapValue:{fields:{}}};return Hp(n.mapValue.fields,(t,r)=>e.mapValue.fields[t]=tE(r)),e}if(n.arrayValue){const e={arrayValue:{values:[]}};for(let t=0;t<(n.arrayValue.values||[]).length;++t)e.arrayValue.values[t]=tE(n.arrayValue.values[t]);return e}return Object.assign({},n)}function v1(n){return"__max__"===(((n.mapValue||{}).fields||{}).__type__||{}).stringValue}function w1(n,e){return void 0===n?e:void 0===e||jh(n,e)>0?n:e}function E1(n,e){return void 0===n?e:void 0===e||jh(n,e)<0?n:e}class ps{constructor(e){this.value=e}static empty(){return new ps({mapValue:{}})}field(e){if(e.isEmpty())return this.value;{let t=this.value;for(let r=0;r<e.length-1;++r)if(t=(t.mapValue.fields||{})[e.get(r)],!PD(t))return null;return t=(t.mapValue.fields||{})[e.lastSegment()],t||null}}set(e,t){this.getFieldsMap(e.popLast())[e.lastSegment()]=tE(t)}setAll(e){let t=wi.emptyPath(),r={},i=[];e.forEach((l,h)=>{if(!t.isImmediateParentOf(h)){const _=this.getFieldsMap(t);this.applyChanges(_,r,i),r={},i=[],t=h.popLast()}l?r[h.lastSegment()]=tE(l):i.push(h.lastSegment())});const a=this.getFieldsMap(t);this.applyChanges(a,r,i)}delete(e){const t=this.field(e.popLast());PD(t)&&t.mapValue.fields&&delete t.mapValue.fields[e.lastSegment()]}isEqual(e){return Al(this.value,e.value)}getFieldsMap(e){let t=this.value;t.mapValue.fields||(t.mapValue={fields:{}});for(let r=0;r<e.length;++r){let i=t.mapValue.fields[e.get(r)];PD(i)&&i.mapValue.fields||(i={mapValue:{fields:{}}},t.mapValue.fields[e.get(r)]=i),t=i}return t.mapValue.fields}applyChanges(e,t,r){Hp(t,(i,a)=>e[i]=a);for(const i of r)delete e[i]}clone(){return new ps(tE(this.value))}}function C1(n){const e=[];return Hp(n.fields,(t,r)=>{const i=new wi([t]);if(PD(r)){const a=C1(r.mapValue).fields;if(0===a.length)e.push(i);else for(const l of a)e.push(i.child(l))}else e.push(i)}),new D_(e)}class zn{constructor(e,t,r,i,a,l){this.key=e,this.documentType=t,this.version=r,this.readTime=i,this.data=a,this.documentState=l}static newInvalidDocument(e){return new zn(e,0,Dt.min(),Dt.min(),ps.empty(),0)}static newFoundDocument(e,t,r){return new zn(e,1,t,Dt.min(),r,0)}static newNoDocument(e,t){return new zn(e,2,t,Dt.min(),ps.empty(),0)}static newUnknownDocument(e,t){return new zn(e,3,t,Dt.min(),ps.empty(),2)}convertToFoundDocument(e,t){return this.version=e,this.documentType=1,this.data=t,this.documentState=0,this}convertToNoDocument(e){return this.version=e,this.documentType=2,this.data=ps.empty(),this.documentState=0,this}convertToUnknownDocument(e){return this.version=e,this.documentType=3,this.data=ps.empty(),this.documentState=2,this}setHasCommittedMutations(){return this.documentState=2,this}setHasLocalMutations(){return this.documentState=1,this}setReadTime(e){return this.readTime=e,this}get hasLocalMutations(){return 1===this.documentState}get hasCommittedMutations(){return 2===this.documentState}get hasPendingWrites(){return this.hasLocalMutations||this.hasCommittedMutations}isValidDocument(){return 0!==this.documentType}isFoundDocument(){return 1===this.documentType}isNoDocument(){return 2===this.documentType}isUnknownDocument(){return 3===this.documentType}isEqual(e){return e instanceof zn&&this.key.isEqual(e.key)&&this.version.isEqual(e.version)&&this.documentType===e.documentType&&this.documentState===e.documentState&&this.data.isEqual(e.data)}mutableCopy(){return new zn(this.key,this.documentType,this.version,this.readTime,this.data.clone(),this.documentState)}toString(){return`Document(${this.key}, ${this.version}, ${JSON.stringify(this.data.value)}, {documentType: ${this.documentType}}), {documentState: ${this.documentState}})`}}class kD{constructor(e,t,r,i){this.indexId=e,this.collectionGroup=t,this.fields=r,this.indexState=i}}function OR(n){return n.fields.find(e=>2===e.kind)}function A_(n){return n.fields.filter(e=>2!==e.kind)}kD.UNKNOWN_ID=-1;class OD{constructor(e,t){this.fieldPath=e,this.kind=t}}class nE{constructor(e,t){this.sequenceNumber=e,this.offset=t}static empty(){return new nE(0,Zc.min())}}function I1(n,e){const t=n.toTimestamp().seconds,r=n.toTimestamp().nanoseconds+1,i=Dt.fromTimestamp(1e9===r?new Rr(t+1,0):new Rr(t,r));return new Zc(i,Ge.empty(),e)}function Oj(n){return new Zc(n.readTime,n.key,-1)}class Zc{constructor(e,t,r){this.readTime=e,this.documentKey=t,this.largestBatchId=r}static min(){return new Zc(Dt.min(),Ge.empty(),-1)}static max(){return new Zc(Dt.max(),Ge.empty(),-1)}}function Fj(n,e){let t=n.readTime.compareTo(e.readTime);return 0!==t?t:(t=Ge.comparator(n.documentKey,e.documentKey),0!==t?t:Yt(n.largestBatchId,e.largestBatchId))}class Lj{constructor(e,t=null,r=[],i=[],a=null,l=null,h=null){this.path=e,this.collectionGroup=t,this.orderBy=r,this.filters=i,this.limit=a,this.startAt=l,this.endAt=h,this.P=null}}function b1(n,e=null,t=[],r=[],i=null,a=null,l=null){return new Lj(n,e,t,r,i,a,l)}function qp(n){const e=ze(n);if(null===e.P){let t=e.path.canonicalString();null!==e.collectionGroup&&(t+="|cg:"+e.collectionGroup),t+="|f:",t+=e.filters.map(r=>{return(i=r).field.canonicalString()+i.op.toString()+T_(i.value);var i}).join(","),t+="|ob:",t+=e.orderBy.map(r=>{return(i=r).field.canonicalString()+i.dir;var i}).join(","),Gp(e.limit)||(t+="|l:",t+=e.limit),e.startAt&&(t+="|lb:",t+=e.startAt.inclusive?"b:":"a:",t+=e.startAt.position.map(r=>T_(r)).join(",")),e.endAt&&(t+="|ub:",t+=e.endAt.inclusive?"a:":"b:",t+=e.endAt.position.map(r=>T_(r)).join(",")),e.P=t}return e.P}function rE(n,e){if(n.limit!==e.limit||n.orderBy.length!==e.orderBy.length)return!1;for(let i=0;i<n.orderBy.length;i++)if(!qj(n.orderBy[i],e.orderBy[i]))return!1;if(n.filters.length!==e.filters.length)return!1;for(let i=0;i<n.filters.length;i++)if((t=n.filters[i]).op!==(r=e.filters[i]).op||!t.field.isEqual(r.field)||!Al(t.value,r.value))return!1;var t,r;return n.collectionGroup===e.collectionGroup&&!!n.path.isEqual(e.path)&&!!S1(n.startAt,e.startAt)&&S1(n.endAt,e.endAt)}function FD(n){return Ge.isDocumentKey(n.path)&&null===n.collectionGroup&&0===n.filters.length}function LD(n,e){return n.filters.filter(t=>t instanceof Gi&&t.field.isEqual(e))}class Gi extends class{}{constructor(e,t,r){super(),this.field=e,this.op=t,this.value=r}static create(e,t,r){return e.isKeyField()?"in"===t||"not-in"===t?this.V(e,t,r):new Uj(e,t,r):"array-contains"===t?new Hj(e,r):"in"===t?new $j(e,r):"not-in"===t?new Gj(e,r):"array-contains-any"===t?new Wj(e,r):new Gi(e,t,r)}static V(e,t,r){return"in"===t?new Bj(e,r):new jj(e,r)}matches(e){const t=e.data.field(this.field);return"!="===this.op?null!==t&&this.v(jh(t,this.value)):null!==t&&Wp(this.value)===Wp(t)&&this.v(jh(t,this.value))}v(e){switch(this.op){case"<":return e<0;case"<=":return e<=0;case"==":return 0===e;case"!=":return 0!==e;case">":return e>0;case">=":return e>=0;default:return st()}}S(){return["<","<=",">",">=","!=","not-in"].indexOf(this.op)>=0}}class Uj extends Gi{constructor(e,t,r){super(e,t,r),this.key=Ge.fromName(r.referenceValue)}matches(e){const t=Ge.comparator(e.key,this.key);return this.v(t)}}class Bj extends Gi{constructor(e,t){super(e,"in",t),this.keys=D1(0,t)}matches(e){return this.keys.some(t=>t.isEqual(e.key))}}class jj extends Gi{constructor(e,t){super(e,"not-in",t),this.keys=D1(0,t)}matches(e){return!this.keys.some(t=>t.isEqual(e.key))}}function D1(n,e){var t;return((null===(t=e.arrayValue)||void 0===t?void 0:t.values)||[]).map(r=>Ge.fromName(r.referenceValue))}class Hj extends Gi{constructor(e,t){super(e,"array-contains",t)}matches(e){const t=e.data.field(this.field);return eE(t)&&Xw(t.arrayValue,this.value)}}class $j extends Gi{constructor(e,t){super(e,"in",t)}matches(e){const t=e.data.field(this.field);return null!==t&&Xw(this.value.arrayValue,t)}}class Gj extends Gi{constructor(e,t){super(e,"not-in",t)}matches(e){if(Xw(this.value.arrayValue,{nullValue:"NULL_VALUE"}))return!1;const t=e.data.field(this.field);return null!==t&&!Xw(this.value.arrayValue,t)}}class Wj extends Gi{constructor(e,t){super(e,"array-contains-any",t)}matches(e){const t=e.data.field(this.field);return!(!eE(t)||!t.arrayValue.values)&&t.arrayValue.values.some(r=>Xw(this.value.arrayValue,r))}}class Hh{constructor(e,t){this.position=e,this.inclusive=t}}class x_{constructor(e,t="asc"){this.field=e,this.dir=t}}function qj(n,e){return n.dir===e.dir&&n.field.isEqual(e.field)}function T1(n,e,t){let r=0;for(let i=0;i<n.position.length;i++){const a=e[i],l=n.position[i];if(r=a.field.isKeyField()?Ge.comparator(Ge.fromName(l.referenceValue),t.key):jh(l,t.data.field(a.field)),"desc"===a.dir&&(r*=-1),0!==r)break}return r}function S1(n,e){if(null===n)return null===e;if(null===e||n.inclusive!==e.inclusive||n.position.length!==e.position.length)return!1;for(let t=0;t<n.position.length;t++)if(!Al(n.position[t],e.position[t]))return!1;return!0}class Yc{constructor(e,t=null,r=[],i=[],a=null,l="F",h=null,_=null){this.path=e,this.collectionGroup=t,this.explicitOrderBy=r,this.filters=i,this.limit=a,this.limitType=l,this.startAt=h,this.endAt=_,this.D=null,this.C=null}}function A1(n,e,t,r,i,a,l,h){return new Yc(n,e,t,r,i,a,l,h)}function R_(n){return new Yc(n)}function VD(n){return!Gp(n.limit)&&"F"===n.limitType}function UD(n){return!Gp(n.limit)&&"L"===n.limitType}function FR(n){return n.explicitOrderBy.length>0?n.explicitOrderBy[0].field:null}function LR(n){for(const e of n.filters)if(e.S())return e.field;return null}function VR(n){return null!==n.collectionGroup}function M_(n){const e=ze(n);if(null===e.D){e.D=[];const t=LR(e),r=FR(e);if(null!==t&&null===r)t.isKeyField()||e.D.push(new x_(t)),e.D.push(new x_(wi.keyField(),"asc"));else{let i=!1;for(const a of e.explicitOrderBy)e.D.push(a),a.field.isKeyField()&&(i=!0);if(!i){const a=e.explicitOrderBy.length>0?e.explicitOrderBy[e.explicitOrderBy.length-1].dir:"asc";e.D.push(new x_(wi.keyField(),a))}}}return e.D}function $a(n){const e=ze(n);if(!e.C)if("F"===e.limitType)e.C=b1(e.path,e.collectionGroup,M_(e),e.filters,e.limit,e.startAt,e.endAt);else{const t=[];for(const a of M_(e))t.push(new x_(a.field,"desc"===a.dir?"asc":"desc"));const r=e.endAt?new Hh(e.endAt.position,!e.endAt.inclusive):null,i=e.startAt?new Hh(e.startAt.position,!e.startAt.inclusive):null;e.C=b1(e.path,e.collectionGroup,t,e.filters,e.limit,r,i)}return e.C}function x1(n,e,t){return new Yc(n.path,n.collectionGroup,n.explicitOrderBy.slice(),n.filters.slice(),e,t,n.startAt,n.endAt)}function iE(n,e){return rE($a(n),$a(e))&&n.limitType===e.limitType}function R1(n){return`${qp($a(n))}|lt:${n.limitType}`}function UR(n){return`Query(target=${function Vj(n){let e=n.path.canonicalString();return null!==n.collectionGroup&&(e+=" collectionGroup="+n.collectionGroup),n.filters.length>0&&(e+=`, filters: [${n.filters.map(t=>{return`${(r=t).field.canonicalString()} ${r.op} ${T_(r.value)}`;var r}).join(", ")}]`),Gp(n.limit)||(e+=", limit: "+n.limit),n.orderBy.length>0&&(e+=`, orderBy: [${n.orderBy.map(t=>{return`${(r=t).field.canonicalString()} (${r.dir})`;var r}).join(", ")}]`),n.startAt&&(e+=", startAt: ",e+=n.startAt.inclusive?"b:":"a:",e+=n.startAt.position.map(t=>T_(t)).join(",")),n.endAt&&(e+=", endAt: ",e+=n.endAt.inclusive?"a:":"b:",e+=n.endAt.position.map(t=>T_(t)).join(",")),`Target(${e})`}($a(n))}; limitType=${n.limitType})`}function BR(n,e){return e.isFoundDocument()&&function(t,r){const i=r.key.path;return null!==t.collectionGroup?r.key.hasCollectionId(t.collectionGroup)&&t.path.isPrefixOf(i):Ge.isDocumentKey(t.path)?t.path.isEqual(i):t.path.isImmediateParentOf(i)}(n,e)&&function(t,r){for(const i of t.explicitOrderBy)if(!i.field.isKeyField()&&null===r.data.field(i.field))return!1;return!0}(n,e)&&function(t,r){for(const i of t.filters)if(!i.matches(r))return!1;return!0}(n,e)&&(r=e,!((t=n).startAt&&!function(i,a,l){const h=T1(i,a,l);return i.inclusive?h<=0:h<0}(t.startAt,M_(t),r)||t.endAt&&!function(i,a,l){const h=T1(i,a,l);return i.inclusive?h>=0:h>0}(t.endAt,M_(t),r)));var t,r}function M1(n){return n.collectionGroup||(n.path.length%2==1?n.path.lastSegment():n.path.get(n.path.length-2))}function N1(n){return(e,t)=>{let r=!1;for(const i of M_(n)){const a=zj(i,e,t);if(0!==a)return a;r=r||i.field.isKeyField()}return 0}}function zj(n,e,t){const r=n.field.isKeyField()?Ge.comparator(e.key,t.key):function(i,a,l){const h=a.data.field(i),_=l.data.field(i);return null!==h&&null!==_?jh(h,_):st()}(n.field,e,t);switch(n.dir){case"asc":return r;case"desc":return-1*r;default:return st()}}function P1(n,e){if(n.N){if(isNaN(e))return{doubleValue:"NaN"};if(e===1/0)return{doubleValue:"Infinity"};if(e===-1/0)return{doubleValue:"-Infinity"}}return{doubleValue:Jw(e)?"-0":e}}function k1(n){return{integerValue:""+n}}function O1(n,e){return f1(e)?k1(e):P1(n,e)}class BD{constructor(){this._=void 0}}function Kj(n,e,t){return n instanceof N_?function(r,i){const a={fields:{__type__:{stringValue:"server_timestamp"},__local_write_time__:{timestampValue:{seconds:r.seconds,nanos:r.nanoseconds}}}};return i&&(a.fields.__previous_value__=i),{mapValue:a}}(t,e):n instanceof zp?L1(n,e):n instanceof Kp?V1(n,e):function(r,i){const a=F1(r,i),l=U1(a)+U1(r.k);return kR(a)&&kR(r.k)?k1(l):P1(r.M,l)}(n,e)}function Zj(n,e,t){return n instanceof zp?L1(n,e):n instanceof Kp?V1(n,e):t}function F1(n,e){return n instanceof P_?kR(t=e)||(r=t)&&"doubleValue"in r?e:{integerValue:0}:null;var r,t}class N_ extends BD{}class zp extends BD{constructor(e){super(),this.elements=e}}function L1(n,e){const t=B1(e);for(const r of n.elements)t.some(i=>Al(i,r))||t.push(r);return{arrayValue:{values:t}}}class Kp extends BD{constructor(e){super(),this.elements=e}}function V1(n,e){let t=B1(e);for(const r of n.elements)t=t.filter(i=>!Al(i,r));return{arrayValue:{values:t}}}class P_ extends BD{constructor(e,t){super(),this.M=e,this.k=t}}function U1(n){return vr(n.integerValue||n.doubleValue)}function B1(n){return eE(n)&&n.arrayValue.values?n.arrayValue.values.slice():[]}class sE{constructor(e,t){this.field=e,this.transform=t}}class Qj{constructor(e,t){this.version=e,this.transformResults=t}}class Ur{constructor(e,t){this.updateTime=e,this.exists=t}static none(){return new Ur}static exists(e){return new Ur(void 0,e)}static updateTime(e){return new Ur(e)}get isNone(){return void 0===this.updateTime&&void 0===this.exists}isEqual(e){return this.exists===e.exists&&(this.updateTime?!!e.updateTime&&this.updateTime.isEqual(e.updateTime):!e.updateTime)}}function jD(n,e){return void 0!==n.updateTime?e.isFoundDocument()&&e.version.isEqual(n.updateTime):void 0===n.exists||n.exists===e.isFoundDocument()}class HD{}function Jj(n,e,t){n instanceof oE?function(r,i,a){const l=r.value.clone(),h=G1(r.fieldTransforms,i,a.transformResults);l.setAll(h),i.convertToFoundDocument(a.version,l).setHasCommittedMutations()}(n,e,t):n instanceof Zp?function(r,i,a){if(!jD(r.precondition,i))return void i.convertToUnknownDocument(a.version);const l=G1(r.fieldTransforms,i,a.transformResults),h=i.data;h.setAll($1(r)),h.setAll(l),i.convertToFoundDocument(a.version,h).setHasCommittedMutations()}(n,e,t):e.convertToNoDocument(t.version).setHasCommittedMutations()}function jR(n,e,t){var i;n instanceof oE?function(r,i,a){if(!jD(r.precondition,i))return;const l=r.value.clone(),h=W1(r.fieldTransforms,a,i);l.setAll(h),i.convertToFoundDocument(H1(i),l).setHasLocalMutations()}(n,e,t):n instanceof Zp?function(r,i,a){if(!jD(r.precondition,i))return;const l=W1(r.fieldTransforms,a,i),h=i.data;h.setAll($1(r)),h.setAll(l),i.convertToFoundDocument(H1(i),h).setHasLocalMutations()}(n,e,t):jD(n.precondition,i=e)&&i.convertToNoDocument(Dt.min())}function Xj(n,e){let t=null;for(const r of n.fieldTransforms){const i=e.data.field(r.field),a=F1(r.transform,i||null);null!=a&&(null==t&&(t=ps.empty()),t.set(r.field,a))}return t||null}function j1(n,e){return n.type===e.type&&!!n.key.isEqual(e.key)&&!!n.precondition.isEqual(e.precondition)&&(r=e.fieldTransforms,!!(void 0===(t=n.fieldTransforms)&&void 0===r||t&&r&&b_(t,r,(i,a)=>function Yj(n,e){return n.field.isEqual(e.field)&&(r=e.transform,(t=n.transform)instanceof zp&&r instanceof zp||t instanceof Kp&&r instanceof Kp?b_(t.elements,r.elements,Al):t instanceof P_&&r instanceof P_?Al(t.k,r.k):t instanceof N_&&r instanceof N_);var t,r}(i,a))))&&(0===n.type?n.value.isEqual(e.value):1!==n.type||n.data.isEqual(e.data)&&n.fieldMask.isEqual(e.fieldMask));var t,r}function H1(n){return n.isFoundDocument()?n.version:Dt.min()}class oE extends HD{constructor(e,t,r,i=[]){super(),this.key=e,this.value=t,this.precondition=r,this.fieldTransforms=i,this.type=0}}class Zp extends HD{constructor(e,t,r,i,a=[]){super(),this.key=e,this.data=t,this.fieldMask=r,this.precondition=i,this.fieldTransforms=a,this.type=1}}function $1(n){const e=new Map;return n.fieldMask.fields.forEach(t=>{if(!t.isEmpty()){const r=n.data.field(t);e.set(t,r)}}),e}function G1(n,e,t){const r=new Map;xt(n.length===t.length);for(let i=0;i<t.length;i++){const a=n[i],l=a.transform,h=e.data.field(a.field);r.set(a.field,Zj(l,h,t[i]))}return r}function W1(n,e,t){const r=new Map;for(const i of n){const a=i.transform,l=t.data.field(i.field);r.set(i.field,Kj(a,l,e))}return r}class aE extends HD{constructor(e,t){super(),this.key=e,this.precondition=t,this.type=2,this.fieldTransforms=[]}}class HR extends HD{constructor(e,t){super(),this.key=e,this.precondition=t,this.type=3,this.fieldTransforms=[]}}class eH{constructor(e){this.count=e}}var Br,ln;function q1(n){switch(n){default:return st();case de.CANCELLED:case de.UNKNOWN:case de.DEADLINE_EXCEEDED:case de.RESOURCE_EXHAUSTED:case de.INTERNAL:case de.UNAVAILABLE:case de.UNAUTHENTICATED:return!1;case de.INVALID_ARGUMENT:case de.NOT_FOUND:case de.ALREADY_EXISTS:case de.PERMISSION_DENIED:case de.FAILED_PRECONDITION:case de.ABORTED:case de.OUT_OF_RANGE:case de.UNIMPLEMENTED:case de.DATA_LOSS:return!0}}function z1(n){if(void 0===n)return Vr("GRPC error has no .code"),de.UNKNOWN;switch(n){case Br.OK:return de.OK;case Br.CANCELLED:return de.CANCELLED;case Br.UNKNOWN:return de.UNKNOWN;case Br.DEADLINE_EXCEEDED:return de.DEADLINE_EXCEEDED;case Br.RESOURCE_EXHAUSTED:return de.RESOURCE_EXHAUSTED;case Br.INTERNAL:return de.INTERNAL;case Br.UNAVAILABLE:return de.UNAVAILABLE;case Br.UNAUTHENTICATED:return de.UNAUTHENTICATED;case Br.INVALID_ARGUMENT:return de.INVALID_ARGUMENT;case Br.NOT_FOUND:return de.NOT_FOUND;case Br.ALREADY_EXISTS:return de.ALREADY_EXISTS;case Br.PERMISSION_DENIED:return de.PERMISSION_DENIED;case Br.FAILED_PRECONDITION:return de.FAILED_PRECONDITION;case Br.ABORTED:return de.ABORTED;case Br.OUT_OF_RANGE:return de.OUT_OF_RANGE;case Br.UNIMPLEMENTED:return de.UNIMPLEMENTED;case Br.DATA_LOSS:return de.DATA_LOSS;default:return st()}}(ln=Br||(Br={}))[ln.OK=0]="OK",ln[ln.CANCELLED=1]="CANCELLED",ln[ln.UNKNOWN=2]="UNKNOWN",ln[ln.INVALID_ARGUMENT=3]="INVALID_ARGUMENT",ln[ln.DEADLINE_EXCEEDED=4]="DEADLINE_EXCEEDED",ln[ln.NOT_FOUND=5]="NOT_FOUND",ln[ln.ALREADY_EXISTS=6]="ALREADY_EXISTS",ln[ln.PERMISSION_DENIED=7]="PERMISSION_DENIED",ln[ln.UNAUTHENTICATED=16]="UNAUTHENTICATED",ln[ln.RESOURCE_EXHAUSTED=8]="RESOURCE_EXHAUSTED",ln[ln.FAILED_PRECONDITION=9]="FAILED_PRECONDITION",ln[ln.ABORTED=10]="ABORTED",ln[ln.OUT_OF_RANGE=11]="OUT_OF_RANGE",ln[ln.UNIMPLEMENTED=12]="UNIMPLEMENTED",ln[ln.INTERNAL=13]="INTERNAL",ln[ln.UNAVAILABLE=14]="UNAVAILABLE",ln[ln.DATA_LOSS=15]="DATA_LOSS";class $h{constructor(e,t){this.mapKeyFn=e,this.equalsFn=t,this.inner={},this.innerSize=0}get(e){const t=this.mapKeyFn(e),r=this.inner[t];if(void 0!==r)for(const[i,a]of r)if(this.equalsFn(i,e))return a}has(e){return void 0!==this.get(e)}set(e,t){const r=this.mapKeyFn(e),i=this.inner[r];if(void 0===i)return this.inner[r]=[[e,t]],void this.innerSize++;for(let a=0;a<i.length;a++)if(this.equalsFn(i[a][0],e))return void(i[a]=[e,t]);i.push([e,t]),this.innerSize++}delete(e){const t=this.mapKeyFn(e),r=this.inner[t];if(void 0===r)return!1;for(let i=0;i<r.length;i++)if(this.equalsFn(r[i][0],e))return 1===r.length?delete this.inner[t]:r.splice(i,1),this.innerSize--,!0;return!1}forEach(e){Hp(this.inner,(t,r)=>{for(const[i,a]of r)e(i,a)})}isEmpty(){return d1(this.inner)}size(){return this.innerSize}}class Mr{constructor(e,t){this.comparator=e,this.root=t||Wi.EMPTY}insert(e,t){return new Mr(this.comparator,this.root.insert(e,t,this.comparator).copy(null,null,Wi.BLACK,null,null))}remove(e){return new Mr(this.comparator,this.root.remove(e,this.comparator).copy(null,null,Wi.BLACK,null,null))}get(e){let t=this.root;for(;!t.isEmpty();){const r=this.comparator(e,t.key);if(0===r)return t.value;r<0?t=t.left:r>0&&(t=t.right)}return null}indexOf(e){let t=0,r=this.root;for(;!r.isEmpty();){const i=this.comparator(e,r.key);if(0===i)return t+r.left.size;i<0?r=r.left:(t+=r.left.size+1,r=r.right)}return-1}isEmpty(){return this.root.isEmpty()}get size(){return this.root.size}minKey(){return this.root.minKey()}maxKey(){return this.root.maxKey()}inorderTraversal(e){return this.root.inorderTraversal(e)}forEach(e){this.inorderTraversal((t,r)=>(e(t,r),!1))}toString(){const e=[];return this.inorderTraversal((t,r)=>(e.push(`${t}:${r}`),!1)),`{${e.join(", ")}}`}reverseTraversal(e){return this.root.reverseTraversal(e)}getIterator(){return new $D(this.root,null,this.comparator,!1)}getIteratorFrom(e){return new $D(this.root,e,this.comparator,!1)}getReverseIterator(){return new $D(this.root,null,this.comparator,!0)}getReverseIteratorFrom(e){return new $D(this.root,e,this.comparator,!0)}}class $D{constructor(e,t,r,i){this.isReverse=i,this.nodeStack=[];let a=1;for(;!e.isEmpty();)if(a=t?r(e.key,t):1,t&&i&&(a*=-1),a<0)e=this.isReverse?e.left:e.right;else{if(0===a){this.nodeStack.push(e);break}this.nodeStack.push(e),e=this.isReverse?e.right:e.left}}getNext(){let e=this.nodeStack.pop();const t={key:e.key,value:e.value};if(this.isReverse)for(e=e.left;!e.isEmpty();)this.nodeStack.push(e),e=e.right;else for(e=e.right;!e.isEmpty();)this.nodeStack.push(e),e=e.left;return t}hasNext(){return this.nodeStack.length>0}peek(){if(0===this.nodeStack.length)return null;const e=this.nodeStack[this.nodeStack.length-1];return{key:e.key,value:e.value}}}class Wi{constructor(e,t,r,i,a){this.key=e,this.value=t,this.color=null!=r?r:Wi.RED,this.left=null!=i?i:Wi.EMPTY,this.right=null!=a?a:Wi.EMPTY,this.size=this.left.size+1+this.right.size}copy(e,t,r,i,a){return new Wi(null!=e?e:this.key,null!=t?t:this.value,null!=r?r:this.color,null!=i?i:this.left,null!=a?a:this.right)}isEmpty(){return!1}inorderTraversal(e){return this.left.inorderTraversal(e)||e(this.key,this.value)||this.right.inorderTraversal(e)}reverseTraversal(e){return this.right.reverseTraversal(e)||e(this.key,this.value)||this.left.reverseTraversal(e)}min(){return this.left.isEmpty()?this:this.left.min()}minKey(){return this.min().key}maxKey(){return this.right.isEmpty()?this.key:this.right.maxKey()}insert(e,t,r){let i=this;const a=r(e,i.key);return i=a<0?i.copy(null,null,null,i.left.insert(e,t,r),null):0===a?i.copy(null,t,null,null,null):i.copy(null,null,null,null,i.right.insert(e,t,r)),i.fixUp()}removeMin(){if(this.left.isEmpty())return Wi.EMPTY;let e=this;return e.left.isRed()||e.left.left.isRed()||(e=e.moveRedLeft()),e=e.copy(null,null,null,e.left.removeMin(),null),e.fixUp()}remove(e,t){let r,i=this;if(t(e,i.key)<0)i.left.isEmpty()||i.left.isRed()||i.left.left.isRed()||(i=i.moveRedLeft()),i=i.copy(null,null,null,i.left.remove(e,t),null);else{if(i.left.isRed()&&(i=i.rotateRight()),i.right.isEmpty()||i.right.isRed()||i.right.left.isRed()||(i=i.moveRedRight()),0===t(e,i.key)){if(i.right.isEmpty())return Wi.EMPTY;r=i.right.min(),i=i.copy(r.key,r.value,null,null,i.right.removeMin())}i=i.copy(null,null,null,null,i.right.remove(e,t))}return i.fixUp()}isRed(){return this.color}fixUp(){let e=this;return e.right.isRed()&&!e.left.isRed()&&(e=e.rotateLeft()),e.left.isRed()&&e.left.left.isRed()&&(e=e.rotateRight()),e.left.isRed()&&e.right.isRed()&&(e=e.colorFlip()),e}moveRedLeft(){let e=this.colorFlip();return e.right.left.isRed()&&(e=e.copy(null,null,null,null,e.right.rotateRight()),e=e.rotateLeft(),e=e.colorFlip()),e}moveRedRight(){let e=this.colorFlip();return e.left.left.isRed()&&(e=e.rotateRight(),e=e.colorFlip()),e}rotateLeft(){const e=this.copy(null,null,Wi.RED,null,this.right.left);return this.right.copy(null,null,this.color,e,null)}rotateRight(){const e=this.copy(null,null,Wi.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,e)}colorFlip(){const e=this.left.copy(null,null,!this.left.color,null,null),t=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,e,t)}checkMaxDepth(){const e=this.check();return Math.pow(2,e)<=this.size+1}check(){if(this.isRed()&&this.left.isRed()||this.right.isRed())throw st();const e=this.left.check();if(e!==this.right.check())throw st();return e+(this.isRed()?0:1)}}Wi.EMPTY=null,Wi.RED=!0,Wi.BLACK=!1,Wi.EMPTY=new class{constructor(){this.size=0}get key(){throw st()}get value(){throw st()}get color(){throw st()}get left(){throw st()}get right(){throw st()}copy(n,e,t,r,i){return this}insert(n,e,t){return new Wi(n,e)}remove(n,e){return this}isEmpty(){return!0}inorderTraversal(n){return!1}reverseTraversal(n){return!1}minKey(){return null}maxKey(){return null}isRed(){return!1}checkMaxDepth(){return!0}check(){return 0}};class Kn{constructor(e){this.comparator=e,this.data=new Mr(this.comparator)}has(e){return null!==this.data.get(e)}first(){return this.data.minKey()}last(){return this.data.maxKey()}get size(){return this.data.size}indexOf(e){return this.data.indexOf(e)}forEach(e){this.data.inorderTraversal((t,r)=>(e(t),!1))}forEachInRange(e,t){const r=this.data.getIteratorFrom(e[0]);for(;r.hasNext();){const i=r.getNext();if(this.comparator(i.key,e[1])>=0)return;t(i.key)}}forEachWhile(e,t){let r;for(r=void 0!==t?this.data.getIteratorFrom(t):this.data.getIterator();r.hasNext();)if(!e(r.getNext().key))return}firstAfterOrEqual(e){const t=this.data.getIteratorFrom(e);return t.hasNext()?t.getNext().key:null}getIterator(){return new K1(this.data.getIterator())}getIteratorFrom(e){return new K1(this.data.getIteratorFrom(e))}add(e){return this.copy(this.data.remove(e).insert(e,!0))}delete(e){return this.has(e)?this.copy(this.data.remove(e)):this}isEmpty(){return this.data.isEmpty()}unionWith(e){let t=this;return t.size<e.size&&(t=e,e=this),e.forEach(r=>{t=t.add(r)}),t}isEqual(e){if(!(e instanceof Kn)||this.size!==e.size)return!1;const t=this.data.getIterator(),r=e.data.getIterator();for(;t.hasNext();){const i=t.getNext().key,a=r.getNext().key;if(0!==this.comparator(i,a))return!1}return!0}toArray(){const e=[];return this.forEach(t=>{e.push(t)}),e}toString(){const e=[];return this.forEach(t=>e.push(t)),"SortedSet("+e.toString()+")"}copy(e){const t=new Kn(this.comparator);return t.data=e,t}}class K1{constructor(e){this.iter=e}getNext(){return this.iter.getNext().key}hasNext(){return this.iter.hasNext()}}function k_(n){return n.hasNext()?n.getNext():void 0}const tH=new Mr(Ge.comparator);function Ga(){return tH}const nH=new Mr(Ge.comparator);function $R(){return nH}function uE(){return new $h(n=>n.toString(),(n,e)=>n.isEqual(e))}const rH=new Mr(Ge.comparator),iH=new Kn(Ge.comparator);function En(...n){let e=iH;for(const t of n)e=e.add(t);return e}const sH=new Kn(Yt);function GD(){return sH}class lE{constructor(e,t,r,i,a){this.snapshotVersion=e,this.targetChanges=t,this.targetMismatches=r,this.documentUpdates=i,this.resolvedLimboDocuments=a}static createSynthesizedRemoteEventForCurrentChange(e,t){const r=new Map;return r.set(e,cE.createSynthesizedTargetChangeForCurrentChange(e,t)),new lE(Dt.min(),r,GD(),Ga(),En())}}class cE{constructor(e,t,r,i,a){this.resumeToken=e,this.current=t,this.addedDocuments=r,this.modifiedDocuments=i,this.removedDocuments=a}static createSynthesizedTargetChangeForCurrentChange(e,t){return new cE(ei.EMPTY_BYTE_STRING,t,En(),En(),En())}}class WD{constructor(e,t,r,i){this.O=e,this.removedTargetIds=t,this.key=r,this.F=i}}class Z1{constructor(e,t){this.targetId=e,this.$=t}}class Y1{constructor(e,t,r=ei.EMPTY_BYTE_STRING,i=null){this.state=e,this.targetIds=t,this.resumeToken=r,this.cause=i}}class Q1{constructor(){this.B=0,this.L=X1(),this.U=ei.EMPTY_BYTE_STRING,this.q=!1,this.G=!0}get current(){return this.q}get resumeToken(){return this.U}get K(){return 0!==this.B}get j(){return this.G}W(e){e.approximateByteSize()>0&&(this.G=!0,this.U=e)}H(){let e=En(),t=En(),r=En();return this.L.forEach((i,a)=>{switch(a){case 0:e=e.add(i);break;case 2:t=t.add(i);break;case 1:r=r.add(i);break;default:st()}}),new cE(this.U,this.q,e,t,r)}J(){this.G=!1,this.L=X1()}Y(e,t){this.G=!0,this.L=this.L.insert(e,t)}X(e){this.G=!0,this.L=this.L.remove(e)}Z(){this.B+=1}tt(){this.B-=1}et(){this.G=!0,this.q=!0}}class oH{constructor(e){this.nt=e,this.st=new Map,this.it=Ga(),this.rt=J1(),this.ot=new Kn(Yt)}ut(e){for(const t of e.O)e.F&&e.F.isFoundDocument()?this.at(t,e.F):this.ct(t,e.key,e.F);for(const t of e.removedTargetIds)this.ct(t,e.key,e.F)}ht(e){this.forEachTarget(e,t=>{const r=this.lt(t);switch(e.state){case 0:this.ft(t)&&r.W(e.resumeToken);break;case 1:r.tt(),r.K||r.J(),r.W(e.resumeToken);break;case 2:r.tt(),r.K||this.removeTarget(t);break;case 3:this.ft(t)&&(r.et(),r.W(e.resumeToken));break;case 4:this.ft(t)&&(this.dt(t),r.W(e.resumeToken));break;default:st()}})}forEachTarget(e,t){e.targetIds.length>0?e.targetIds.forEach(t):this.st.forEach((r,i)=>{this.ft(i)&&t(i)})}_t(e){const t=e.targetId,r=e.$.count,i=this.wt(t);if(i){const a=i.target;if(FD(a))if(0===r){const l=new Ge(a.path);this.ct(t,l,zn.newNoDocument(l,Dt.min()))}else xt(1===r);else this.gt(t)!==r&&(this.dt(t),this.ot=this.ot.add(t))}}yt(e){const t=new Map;this.st.forEach((a,l)=>{const h=this.wt(l);if(h){if(a.current&&FD(h.target)){const _=new Ge(h.target.path);null!==this.it.get(_)||this.It(l,_)||this.ct(l,_,zn.newNoDocument(_,e))}a.j&&(t.set(l,a.H()),a.J())}});let r=En();this.rt.forEach((a,l)=>{let h=!0;l.forEachWhile(_=>{const w=this.wt(_);return!w||2===w.purpose||(h=!1,!1)}),h&&(r=r.add(a))}),this.it.forEach((a,l)=>l.setReadTime(e));const i=new lE(e,t,this.ot,this.it,r);return this.it=Ga(),this.rt=J1(),this.ot=new Kn(Yt),i}at(e,t){if(!this.ft(e))return;const r=this.It(e,t.key)?2:0;this.lt(e).Y(t.key,r),this.it=this.it.insert(t.key,t),this.rt=this.rt.insert(t.key,this.Tt(t.key).add(e))}ct(e,t,r){if(!this.ft(e))return;const i=this.lt(e);this.It(e,t)?i.Y(t,1):i.X(t),this.rt=this.rt.insert(t,this.Tt(t).delete(e)),r&&(this.it=this.it.insert(t,r))}removeTarget(e){this.st.delete(e)}gt(e){const t=this.lt(e).H();return this.nt.getRemoteKeysForTarget(e).size+t.addedDocuments.size-t.removedDocuments.size}Z(e){this.lt(e).Z()}lt(e){let t=this.st.get(e);return t||(t=new Q1,this.st.set(e,t)),t}Tt(e){let t=this.rt.get(e);return t||(t=new Kn(Yt),this.rt=this.rt.insert(e,t)),t}ft(e){const t=null!==this.wt(e);return t||Le("WatchChangeAggregator","Detected inactive target",e),t}wt(e){const t=this.st.get(e);return t&&t.K?null:this.nt.Et(e)}dt(e){this.st.set(e,new Q1),this.nt.getRemoteKeysForTarget(e).forEach(t=>{this.ct(e,t,null)})}It(e,t){return this.nt.getRemoteKeysForTarget(e).has(t)}}function J1(){return new Mr(Ge.comparator)}function X1(){return new Mr(Ge.comparator)}const aH={asc:"ASCENDING",desc:"DESCENDING"},uH={"<":"LESS_THAN","<=":"LESS_THAN_OR_EQUAL",">":"GREATER_THAN",">=":"GREATER_THAN_OR_EQUAL","==":"EQUAL","!=":"NOT_EQUAL","array-contains":"ARRAY_CONTAINS",in:"IN","not-in":"NOT_IN","array-contains-any":"ARRAY_CONTAINS_ANY"};class lH{constructor(e,t){this.databaseId=e,this.N=t}}function dE(n,e){return n.N?`${new Date(1e3*e.seconds).toISOString().replace(/\.\d*/,"").replace("Z","")}.${("000000000"+e.nanoseconds).slice(-9)}Z`:{seconds:""+e.seconds,nanos:e.nanoseconds}}function eF(n,e){return n.N?e.toBase64():e.toUint8Array()}function cH(n,e){return dE(n,e.toTimestamp())}function Ei(n){return xt(!!n),Dt.fromTimestamp(function(e){const t=Bh(e);return new Rr(t.seconds,t.nanos)}(n))}function GR(n,e){return(t=n,new un(["projects",t.projectId,"databases",t.database])).child("documents").child(e).canonicalString();var t}function tF(n){const e=un.fromString(n);return xt(cF(e)),e}function hE(n,e){return GR(n.databaseId,e.path)}function xl(n,e){const t=tF(e);if(t.get(1)!==n.databaseId.projectId)throw new Ne(de.INVALID_ARGUMENT,"Tried to deserialize key from different project: "+t.get(1)+" vs "+n.databaseId.projectId);if(t.get(3)!==n.databaseId.database)throw new Ne(de.INVALID_ARGUMENT,"Tried to deserialize key from different database: "+t.get(3)+" vs "+n.databaseId.database);return new Ge(rF(t))}function WR(n,e){return GR(n.databaseId,e)}function nF(n){const e=tF(n);return 4===e.length?un.emptyPath():rF(e)}function fE(n){return new un(["projects",n.databaseId.projectId,"databases",n.databaseId.database]).canonicalString()}function rF(n){return xt(n.length>4&&"documents"===n.get(4)),n.popFirst(5)}function iF(n,e,t){return{name:hE(n,e),fields:t.value.mapValue.fields}}function sF(n,e,t){const r=xl(n,e.name),i=Ei(e.updateTime),a=new ps({mapValue:{fields:e.fields}}),l=zn.newFoundDocument(r,i,a);return t&&l.setHasCommittedMutations(),t?l.setHasCommittedMutations():l}function pE(n,e){let t;if(e instanceof oE)t={update:iF(n,e.key,e.value)};else if(e instanceof aE)t={delete:hE(n,e.key)};else if(e instanceof Zp)t={update:iF(n,e.key,e.data),updateMask:vH(e.fieldMask)};else{if(!(e instanceof HR))return st();t={verify:hE(n,e.key)}}return e.fieldTransforms.length>0&&(t.updateTransforms=e.fieldTransforms.map(r=>function(i,a){const l=a.transform;if(l instanceof N_)return{fieldPath:a.field.canonicalString(),setToServerValue:"REQUEST_TIME"};if(l instanceof zp)return{fieldPath:a.field.canonicalString(),appendMissingElements:{values:l.elements}};if(l instanceof Kp)return{fieldPath:a.field.canonicalString(),removeAllFromArray:{values:l.elements}};if(l instanceof P_)return{fieldPath:a.field.canonicalString(),increment:l.k};throw st()}(0,r))),e.precondition.isNone||(t.currentDocument=void 0!==(i=e.precondition).updateTime?{updateTime:cH(n,i.updateTime)}:void 0!==i.exists?{exists:i.exists}:st()),t;var i}function qR(n,e){const t=e.currentDocument?void 0!==(i=e.currentDocument).updateTime?Ur.updateTime(Ei(i.updateTime)):void 0!==i.exists?Ur.exists(i.exists):Ur.none():Ur.none(),r=e.updateTransforms?e.updateTransforms.map(i=>function(a,l){let h=null;"setToServerValue"in l?(xt("REQUEST_TIME"===l.setToServerValue),h=new N_):"appendMissingElements"in l?h=new zp(l.appendMissingElements.values||[]):"removeAllFromArray"in l?h=new Kp(l.removeAllFromArray.values||[]):"increment"in l?h=new P_(a,l.increment):st();const _=wi.fromServerFormat(l.fieldPath);return new sE(_,h)}(n,i)):[];var i;if(e.update){const i=xl(n,e.update.name),a=new ps({mapValue:{fields:e.update.fields}});if(e.updateMask){const l=new D_((e.updateMask.fieldPaths||[]).map(w=>wi.fromServerFormat(w)));return new Zp(i,a,l,t,r)}return new oE(i,a,t,r)}if(e.delete){const i=xl(n,e.delete);return new aE(i,t)}if(e.verify){const i=xl(n,e.verify);return new HR(i,t)}return st()}function oF(n,e){return{documents:[WR(n,e.path)]}}function aF(n,e){const t={structuredQuery:{}},r=e.path;null!==e.collectionGroup?(t.parent=WR(n,r),t.structuredQuery.from=[{collectionId:e.collectionGroup,allDescendants:!0}]):(t.parent=WR(n,r.popLast()),t.structuredQuery.from=[{collectionId:r.lastSegment()}]);const i=function(_){if(0===_.length)return;const w=_.map(D=>function(S){if("=="===S.op){if(y1(S.value))return{unaryFilter:{field:O_(S.field),op:"IS_NAN"}};if(_1(S.value))return{unaryFilter:{field:O_(S.field),op:"IS_NULL"}}}else if("!="===S.op){if(y1(S.value))return{unaryFilter:{field:O_(S.field),op:"IS_NOT_NAN"}};if(_1(S.value))return{unaryFilter:{field:O_(S.field),op:"IS_NOT_NULL"}}}return{fieldFilter:{field:O_(S.field),op:mH(S.op),value:S.value}}}(D));return 1===w.length?w[0]:{compositeFilter:{op:"AND",filters:w}}}(e.filters);i&&(t.structuredQuery.where=i);const a=function(_){if(0!==_.length)return _.map(w=>{return{field:O_((D=w).field),direction:gH(D.dir)};var D})}(e.orderBy);a&&(t.structuredQuery.orderBy=a);const l=(w=e.limit,n.N||Gp(w)?w:{value:w});var w,h,_;return null!==l&&(t.structuredQuery.limit=l),e.startAt&&(t.structuredQuery.startAt={before:(h=e.startAt).inclusive,values:h.position}),e.endAt&&(t.structuredQuery.endAt={before:!(_=e.endAt).inclusive,values:_.position}),t}function uF(n){let e=nF(n.parent);const t=n.structuredQuery,r=t.from?t.from.length:0;let i=null;if(r>0){xt(1===r);const D=t.from[0];D.allDescendants?i=D.collectionId:e=e.child(D.collectionId)}let a=[];t.where&&(a=lF(t.where));let l=[];t.orderBy&&(l=t.orderBy.map(D=>{return new x_(F_((S=D).field),function(N){switch(N){case"ASCENDING":return"asc";case"DESCENDING":return"desc";default:return}}(S.direction));var S}));let h=null;t.limit&&(h=function(D){let S;return S="object"==typeof D?D.value:D,Gp(S)?null:S}(t.limit));let _=null;var D;t.startAt&&(_=new Hh((D=t.startAt).values||[],!!D.before));let w=null;return t.endAt&&(w=function(D){return new Hh(D.values||[],!D.before)}(t.endAt)),A1(e,i,l,a,h,"F",_,w)}function lF(n){return n?void 0!==n.unaryFilter?[yH(n)]:void 0!==n.fieldFilter?[_H(n)]:void 0!==n.compositeFilter?n.compositeFilter.filters.map(e=>lF(e)).reduce((e,t)=>e.concat(t)):st():[]}function gH(n){return aH[n]}function mH(n){return uH[n]}function O_(n){return{fieldPath:n.canonicalString()}}function F_(n){return wi.fromServerFormat(n.fieldPath)}function _H(n){return Gi.create(F_(n.fieldFilter.field),function(e){switch(e){case"EQUAL":return"==";case"NOT_EQUAL":return"!=";case"GREATER_THAN":return">";case"GREATER_THAN_OR_EQUAL":return">=";case"LESS_THAN":return"<";case"LESS_THAN_OR_EQUAL":return"<=";case"ARRAY_CONTAINS":return"array-contains";case"IN":return"in";case"NOT_IN":return"not-in";case"ARRAY_CONTAINS_ANY":return"array-contains-any";default:return st()}}(n.fieldFilter.op),n.fieldFilter.value)}function yH(n){switch(n.unaryFilter.op){case"IS_NAN":const e=F_(n.unaryFilter.field);return Gi.create(e,"==",{doubleValue:NaN});case"IS_NULL":const t=F_(n.unaryFilter.field);return Gi.create(t,"==",{nullValue:"NULL_VALUE"});case"IS_NOT_NAN":const r=F_(n.unaryFilter.field);return Gi.create(r,"!=",{doubleValue:NaN});case"IS_NOT_NULL":const i=F_(n.unaryFilter.field);return Gi.create(i,"!=",{nullValue:"NULL_VALUE"});default:return st()}}function vH(n){const e=[];return n.fields.forEach(t=>e.push(t.canonicalString())),{fieldPaths:e}}function cF(n){return n.length>=4&&"projects"===n.get(0)&&"databases"===n.get(2)}function Ci(n){let e="";for(let t=0;t<n.length;t++)e.length>0&&(e=dF(e)),e=wH(n.get(t),e);return dF(e)}function wH(n,e){let t=e;const r=n.length;for(let i=0;i<r;i++){const a=n.charAt(i);switch(a){case"\0":t+="\x01\x10";break;case"\x01":t+="\x01\x11";break;default:t+=a}}return t}function dF(n){return n+"\x01\x01"}function Eu(n){const e=n.length;if(xt(e>=2),2===e)return xt("\x01"===n.charAt(0)&&"\x01"===n.charAt(1)),un.emptyPath();const t=e-2,r=[];let i="";for(let a=0;a<e;){const l=n.indexOf("\x01",a);switch((l<0||l>t)&&st(),n.charAt(l+1)){case"\x01":const h=n.substring(a,l);let _;0===i.length?_=h:(i+=h,_=i,i=""),r.push(_);break;case"\x10":i+=n.substring(a,l),i+="\0";break;case"\x11":i+=n.substring(a,l+1);break;default:st()}a=l+2}return new un(r)}const hF=["userId","batchId"];function qD(n,e){return[n,Ci(e)]}function fF(n,e,t){return[n,Ci(e),t]}const EH={},CH=["prefixPath","collectionGroup","readTime","documentId"],IH=["prefixPath","collectionGroup","documentId"],bH=["collectionGroup","readTime","prefixPath","documentId"],DH=["canonicalId","targetId"],TH=["targetId","path"],SH=["path","targetId"],AH=["collectionId","parent"],xH=["indexId","uid"],RH=["uid","sequenceNumber"],MH=["indexId","uid","arrayValue","directionalValue","documentKey"],NH=["indexId","uid","documentKey"],PH=["userId","collectionPath","documentId"],kH=["userId","collectionPath","largestBatchId"],OH=["userId","collectionGroup","largestBatchId"],pF=["mutationQueues","mutations","documentMutations","remoteDocuments","targets","owner","targetGlobal","targetDocuments","clientMetadata","remoteDocumentGlobal","collectionParents","bundles","namedQueries"],FH=[...pF,"documentOverlays"],gF=["mutationQueues","mutations","documentMutations","remoteDocumentsV14","targets","owner","targetGlobal","targetDocuments","clientMetadata","remoteDocumentGlobal","collectionParents","bundles","namedQueries","documentOverlays"],LH=[...gF,"indexConfiguration","indexState","indexEntries"],mF="The current tab is not in the required state to perform this operation. It might be necessary to refresh the browser tab.";class _F{constructor(){this.onCommittedListeners=[]}addOnCommittedListener(e){this.onCommittedListeners.push(e)}raiseOnCommittedEvent(){this.onCommittedListeners.forEach(e=>e())}}class ge{constructor(e){this.nextCallback=null,this.catchCallback=null,this.result=void 0,this.error=void 0,this.isDone=!1,this.callbackAttached=!1,e(t=>{this.isDone=!0,this.result=t,this.nextCallback&&this.nextCallback(t)},t=>{this.isDone=!0,this.error=t,this.catchCallback&&this.catchCallback(t)})}catch(e){return this.next(void 0,e)}next(e,t){return this.callbackAttached&&st(),this.callbackAttached=!0,this.isDone?this.error?this.wrapFailure(t,this.error):this.wrapSuccess(e,this.result):new ge((r,i)=>{this.nextCallback=a=>{this.wrapSuccess(e,a).next(r,i)},this.catchCallback=a=>{this.wrapFailure(t,a).next(r,i)}})}toPromise(){return new Promise((e,t)=>{this.next(e,t)})}wrapUserFunction(e){try{const t=e();return t instanceof ge?t:ge.resolve(t)}catch(t){return ge.reject(t)}}wrapSuccess(e,t){return e?this.wrapUserFunction(()=>e(t)):ge.resolve(t)}wrapFailure(e,t){return e?this.wrapUserFunction(()=>e(t)):ge.reject(t)}static resolve(e){return new ge((t,r)=>{t(e)})}static reject(e){return new ge((t,r)=>{r(e)})}static waitFor(e){return new ge((t,r)=>{let i=0,a=0,l=!1;e.forEach(h=>{++i,h.next(()=>{++a,l&&a===i&&t()},_=>r(_))}),l=!0,a===i&&t()})}static or(e){let t=ge.resolve(!1);for(const r of e)t=t.next(i=>i?ge.resolve(i):r());return t}static forEach(e,t){const r=[];return e.forEach((i,a)=>{r.push(t.call(this,i,a))}),this.waitFor(r)}}class zD{constructor(e,t){this.action=e,this.transaction=t,this.aborted=!1,this.At=new vi,this.transaction.oncomplete=()=>{this.At.resolve()},this.transaction.onabort=()=>{t.error?this.At.reject(new gE(e,t.error)):this.At.resolve()},this.transaction.onerror=r=>{const i=zR(r.target.error);this.At.reject(new gE(e,i))}}static open(e,t,r,i){try{return new zD(t,e.transaction(i,r))}catch(a){throw new gE(t,a)}}get Rt(){return this.At.promise}abort(e){e&&this.At.reject(e),this.aborted||(Le("SimpleDb","Aborting transaction:",e?e.message:"Client-initiated abort"),this.aborted=!0,this.transaction.abort())}bt(){const e=this.transaction;this.aborted||"function"!=typeof e.commit||e.commit()}store(e){const t=this.transaction.objectStore(e);return new UH(t)}}class Cu{constructor(e,t,r){this.name=e,this.version=t,this.Pt=r,12.2===Cu.Vt((0,k.z$)())&&Vr("Firestore persistence suffers from a bug in iOS 12.2 Safari that may cause your app to stop working. See https://stackoverflow.com/q/56496296/110915 for details and a potential workaround.")}static delete(e){return Le("SimpleDb","Removing database:",e),Qp(window.indexedDB.deleteDatabase(e)).toPromise()}static vt(){if(!(0,k.hl)())return!1;if(Cu.St())return!0;const e=(0,k.z$)(),t=Cu.Vt(e),r=0<t&&t<10,i=Cu.Dt(e),a=0<i&&i<4.5;return!(e.indexOf("MSIE ")>0||e.indexOf("Trident/")>0||e.indexOf("Edge/")>0||r||a)}static St(){var e;return"undefined"!=typeof process&&"YES"===(null===(e=process.env)||void 0===e?void 0:e.Ct)}static xt(e,t){return e.store(t)}static Vt(e){const t=e.match(/i(?:phone|pad|pod) os ([\d_]+)/i),r=t?t[1].split("_").slice(0,2).join("."):"-1";return Number(r)}static Dt(e){const t=e.match(/Android ([\d.]+)/i),r=t?t[1].split(".").slice(0,2).join("."):"-1";return Number(r)}Nt(e){var t=this;return(0,ye.Z)(function*(){return t.db||(Le("SimpleDb","Opening database:",t.name),t.db=yield new Promise((r,i)=>{const a=indexedDB.open(t.name,t.version);a.onsuccess=l=>{r(l.target.result)},a.onblocked=()=>{i(new gE(e,"Cannot upgrade IndexedDB schema while another tab is open. Close all tabs that access Firestore and reload this page to proceed."))},a.onerror=l=>{const h=l.target.error;i("VersionError"===h.name?new Ne(de.FAILED_PRECONDITION,"A newer version of the Firestore SDK was previously used and so the persisted data is not compatible with the version of the SDK you are now using. The SDK will operate with persistence disabled. If you need persistence, please re-upgrade to a newer version of the SDK or else clear the persisted IndexedDB data for your app to start fresh."):"InvalidStateError"===h.name?new Ne(de.FAILED_PRECONDITION,"Unable to open an IndexedDB connection. This could be due to running in a private browsing session on a browser whose private browsing sessions do not support IndexedDB: "+h):new gE(e,h))},a.onupgradeneeded=l=>{Le("SimpleDb",'Database "'+t.name+'" requires upgrade from version:',l.oldVersion),t.Pt.kt(l.target.result,a.transaction,l.oldVersion,t.version).next(()=>{Le("SimpleDb","Database upgrade to version "+t.version+" complete")})}})),t.Mt&&(t.db.onversionchange=r=>t.Mt(r)),t.db})()}Ot(e){this.Mt=e,this.db&&(this.db.onversionchange=t=>e(t))}runTransaction(e,t,r,i){var a=this;return(0,ye.Z)(function*(){const l="readonly"===t;let h=0;for(;;){++h;try{a.db=yield a.Nt(e);const _=zD.open(a.db,e,l?"readonly":"readwrite",r),w=i(_).next(D=>(_.bt(),D)).catch(D=>(_.abort(D),ge.reject(D))).toPromise();return w.catch(()=>{}),yield _.Rt,w}catch(_){const w="FirebaseError"!==_.name&&h<3;if(Le("SimpleDb","Transaction failed with error:",_.message,"Retrying:",w),a.close(),!w)return Promise.reject(_)}}})()}close(){this.db&&this.db.close(),this.db=void 0}}class VH{constructor(e){this.Ft=e,this.$t=!1,this.Bt=null}get isDone(){return this.$t}get Lt(){return this.Bt}set cursor(e){this.Ft=e}done(){this.$t=!0}Ut(e){this.Bt=e}delete(){return Qp(this.Ft.delete())}}class gE extends Ne{constructor(e,t){super(de.UNAVAILABLE,`IndexedDB transaction '${e}' failed: ${t}`),this.name="IndexedDbTransactionError"}}function Yp(n){return"IndexedDbTransactionError"===n.name}class UH{constructor(e){this.store=e}put(e,t){let r;return void 0!==t?(Le("SimpleDb","PUT",this.store.name,e,t),r=this.store.put(t,e)):(Le("SimpleDb","PUT",this.store.name,"<auto-key>",e),r=this.store.put(e)),Qp(r)}add(e){return Le("SimpleDb","ADD",this.store.name,e,e),Qp(this.store.add(e))}get(e){return Qp(this.store.get(e)).next(t=>(void 0===t&&(t=null),Le("SimpleDb","GET",this.store.name,e,t),t))}delete(e){return Le("SimpleDb","DELETE",this.store.name,e),Qp(this.store.delete(e))}count(){return Le("SimpleDb","COUNT",this.store.name),Qp(this.store.count())}qt(e,t){const r=this.options(e,t);if(r.index||"function"!=typeof this.store.getAll){const i=this.cursor(r),a=[];return this.Gt(i,(l,h)=>{a.push(h)}).next(()=>a)}{const i=this.store.getAll(r.range);return new ge((a,l)=>{i.onerror=h=>{l(h.target.error)},i.onsuccess=h=>{a(h.target.result)}})}}Kt(e,t){const r=this.store.getAll(e,null===t?void 0:t);return new ge((i,a)=>{r.onerror=l=>{a(l.target.error)},r.onsuccess=l=>{i(l.target.result)}})}Qt(e,t){Le("SimpleDb","DELETE ALL",this.store.name);const r=this.options(e,t);r.jt=!1;const i=this.cursor(r);return this.Gt(i,(a,l,h)=>h.delete())}Wt(e,t){let r;t?r=e:(r={},t=e);const i=this.cursor(r);return this.Gt(i,t)}zt(e){const t=this.cursor({});return new ge((r,i)=>{t.onerror=a=>{const l=zR(a.target.error);i(l)},t.onsuccess=a=>{const l=a.target.result;l?e(l.primaryKey,l.value).next(h=>{h?l.continue():r()}):r()}})}Gt(e,t){const r=[];return new ge((i,a)=>{e.onerror=l=>{a(l.target.error)},e.onsuccess=l=>{const h=l.target.result;if(!h)return void i();const _=new VH(h),w=t(h.primaryKey,h.value,_);if(w instanceof ge){const D=w.catch(S=>(_.done(),ge.reject(S)));r.push(D)}_.isDone?i():null===_.Lt?h.continue():h.continue(_.Lt)}}).next(()=>ge.waitFor(r))}options(e,t){let r;return void 0!==e&&("string"==typeof e?r=e:t=e),{index:r,range:t}}cursor(e){let t="next";if(e.reverse&&(t="prev"),e.index){const r=this.store.index(e.index);return e.jt?r.openKeyCursor(e.range,t):r.openCursor(e.range,t)}return this.store.openCursor(e.range,t)}}function Qp(n){return new ge((e,t)=>{n.onsuccess=r=>{e(r.target.result)},n.onerror=r=>{const i=zR(r.target.error);t(i)}})}let yF=!1;function zR(n){const e=Cu.Vt((0,k.z$)());if(e>=12.2&&e<13){const t="An internal error was encountered in the Indexed Database server";if(n.message.indexOf(t)>=0){const r=new Ne("internal",`IOS_INDEXEDDB_BUG1: IndexedDb has thrown '${t}'. This is likely due to an unavoidable bug in iOS. See https://stackoverflow.com/q/56496296/110915 for details and a potential workaround.`);return yF||(yF=!0,setTimeout(()=>{throw r},0)),r}}return n}class vF extends _F{constructor(e,t){super(),this.Ht=e,this.currentSequenceNumber=t}}function Ii(n,e){const t=ze(n);return Cu.xt(t.Ht,e)}class KR{constructor(e,t,r,i){this.batchId=e,this.localWriteTime=t,this.baseMutations=r,this.mutations=i}applyToRemoteDocument(e,t){const r=t.mutationResults;for(let i=0;i<this.mutations.length;i++){const a=this.mutations[i];a.key.isEqual(e.key)&&Jj(a,e,r[i])}}applyToLocalView(e){for(const t of this.baseMutations)t.key.isEqual(e.key)&&jR(t,e,this.localWriteTime);for(const t of this.mutations)t.key.isEqual(e.key)&&jR(t,e,this.localWriteTime)}applyToLocalDocumentSet(e){this.mutations.forEach(t=>{const r=e.get(t.key),i=r;this.applyToLocalView(i),r.isValidDocument()||i.convertToNoDocument(Dt.min())})}keys(){return this.mutations.reduce((e,t)=>e.add(t.key),En())}isEqual(e){return this.batchId===e.batchId&&b_(this.mutations,e.mutations,(t,r)=>j1(t,r))&&b_(this.baseMutations,e.baseMutations,(t,r)=>j1(t,r))}}class ZR{constructor(e,t,r,i){this.batch=e,this.commitVersion=t,this.mutationResults=r,this.docVersions=i}static from(e,t,r){xt(e.mutations.length===r.length);let i=rH;const a=e.mutations;for(let l=0;l<a.length;l++)i=i.insert(a[l].key,r[l].version);return new ZR(e,t,r,i)}}class YR{constructor(e,t){this.largestBatchId=e,this.mutation=t}getKey(){return this.mutation.key}isEqual(e){return null!==e&&this.mutation===e.mutation}toString(){return`Overlay{\n      largestBatchId: ${this.largestBatchId},\n      mutation: ${this.mutation.toString()}\n    }`}}class Gh{constructor(e,t,r,i,a=Dt.min(),l=Dt.min(),h=ei.EMPTY_BYTE_STRING){this.target=e,this.targetId=t,this.purpose=r,this.sequenceNumber=i,this.snapshotVersion=a,this.lastLimboFreeSnapshotVersion=l,this.resumeToken=h}withSequenceNumber(e){return new Gh(this.target,this.targetId,this.purpose,e,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken)}withResumeToken(e,t){return new Gh(this.target,this.targetId,this.purpose,this.sequenceNumber,t,this.lastLimboFreeSnapshotVersion,e)}withLastLimboFreeSnapshotVersion(e){return new Gh(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,e,this.resumeToken)}}class wF{constructor(e){this.Jt=e}}function EF(n,e){const t=e.key,r={prefixPath:t.getCollectionPath().popLast().toArray(),collectionGroup:t.collectionGroup,documentId:t.path.lastSegment(),readTime:KD(e.readTime),hasCommittedMutations:e.hasCommittedMutations};if(e.isFoundDocument())r.document={name:hE(i=n.Jt,(a=e).key),fields:a.data.value.mapValue.fields,updateTime:dE(i,a.version.toTimestamp())};else if(e.isNoDocument())r.noDocument={path:t.path.toArray(),readTime:Jp(e.version)};else{if(!e.isUnknownDocument())return st();r.unknownDocument={path:t.path.toArray(),version:Jp(e.version)}}var i,a;return r}function KD(n){const e=n.toTimestamp();return[e.seconds,e.nanoseconds]}function Jp(n){const e=n.toTimestamp();return{seconds:e.seconds,nanoseconds:e.nanoseconds}}function Xp(n){const e=new Rr(n.seconds,n.nanoseconds);return Dt.fromTimestamp(e)}function L_(n,e){const t=(e.baseMutations||[]).map(a=>qR(n.Jt,a));for(let a=0;a<e.mutations.length-1;++a){const l=e.mutations[a];a+1<e.mutations.length&&void 0!==e.mutations[a+1].transform&&(l.updateTransforms=e.mutations[a+1].transform.fieldTransforms,e.mutations.splice(a+1,1),++a)}const r=e.mutations.map(a=>qR(n.Jt,a)),i=Rr.fromMillis(e.localWriteTimeMs);return new KR(e.batchId,i,t,r)}function mE(n){const e=Xp(n.readTime),t=void 0!==n.lastLimboFreeSnapshotVersion?Xp(n.lastLimboFreeSnapshotVersion):Dt.min();let r;var i;return void 0!==n.query.documents?(xt(1===(i=n.query).documents.length),r=$a(R_(nF(i.documents[0])))):r=$a(uF(n.query)),new Gh(r,n.targetId,0,n.lastListenSequenceNumber,e,t,ei.fromBase64String(n.resumeToken))}function CF(n,e){const t=Jp(e.snapshotVersion),r=Jp(e.lastLimboFreeSnapshotVersion);let i;i=FD(e.target)?oF(n.Jt,e.target):aF(n.Jt,e.target);const a=e.resumeToken.toBase64();return{targetId:e.targetId,canonicalId:qp(e.target),readTime:t,resumeToken:a,lastListenSequenceNumber:e.sequenceNumber,lastLimboFreeSnapshotVersion:r,query:i}}function QR(n){const e=uF({parent:n.parent,structuredQuery:n.structuredQuery});return"LAST"===n.limitType?x1(e,e.limit,"L"):e}function JR(n,e){return new YR(e.largestBatchId,qR(n.Jt,e.overlayMutation))}function IF(n,e){const t=e.path.lastSegment();return[n,Ci(e.path.popLast()),t]}class jH{getBundleMetadata(e,t){return bF(e).get(t).next(r=>{if(r)return{id:(i=r).bundleId,createTime:Xp(i.createTime),version:i.version};var i})}saveBundleMetadata(e,t){return bF(e).put({bundleId:(r=t).id,createTime:Jp(Ei(r.createTime)),version:r.version});var r}getNamedQuery(e,t){return DF(e).get(t).next(r=>{if(r)return{name:(i=r).name,query:QR(i.bundledQuery),readTime:Xp(i.readTime)};var i})}saveNamedQuery(e,t){return DF(e).put({name:(r=t).name,readTime:Jp(Ei(r.readTime)),bundledQuery:r.bundledQuery});var r}}function bF(n){return Ii(n,"bundles")}function DF(n){return Ii(n,"namedQueries")}class XR{constructor(e,t){this.M=e,this.userId=t}static Yt(e,t){return new XR(e,t.uid||"")}getOverlay(e,t){return _E(e).get(IF(this.userId,t)).next(r=>r?JR(this.M,r):null)}saveOverlays(e,t,r){const i=[];return r.forEach((a,l)=>{const h=new YR(t,l);i.push(this.Xt(e,h))}),ge.waitFor(i)}removeOverlaysForBatchId(e,t,r){const i=new Set;t.forEach(l=>i.add(Ci(l.getCollectionPath())));const a=[];return i.forEach(l=>{const h=IDBKeyRange.bound([this.userId,l,r],[this.userId,l,r+1],!1,!0);a.push(_E(e).Qt("collectionPathOverlayIndex",h))}),ge.waitFor(a)}getOverlaysForCollection(e,t,r){const i=uE(),a=Ci(t),l=IDBKeyRange.bound([this.userId,a,r],[this.userId,a,Number.POSITIVE_INFINITY],!0);return _E(e).qt("collectionPathOverlayIndex",l).next(h=>{for(const _ of h){const w=JR(this.M,_);i.set(w.getKey(),w)}return i})}getOverlaysForCollectionGroup(e,t,r,i){const a=uE();let l;const h=IDBKeyRange.bound([this.userId,t,r],[this.userId,t,Number.POSITIVE_INFINITY],!0);return _E(e).Wt({index:"collectionGroupOverlayIndex",range:h},(_,w,D)=>{const S=JR(this.M,w);a.size()<i||S.largestBatchId===l?(a.set(S.getKey(),S),l=S.largestBatchId):D.done()}).next(()=>a)}Xt(e,t){return _E(e).put(function(r,i,a){const[l,h,_]=IF(i,a.mutation.key);return{userId:i,collectionPath:h,documentId:_,collectionGroup:a.mutation.key.getCollectionGroup(),largestBatchId:a.largestBatchId,overlayMutation:pE(r.Jt,a.mutation)}}(this.M,this.userId,t))}}function _E(n){return Ii(n,"documentOverlays")}class V_{constructor(){}Zt(e,t){this.te(e,t),t.ee()}te(e,t){if("nullValue"in e)this.ne(t,5);else if("booleanValue"in e)this.ne(t,10),t.se(e.booleanValue?1:0);else if("integerValue"in e)this.ne(t,15),t.se(vr(e.integerValue));else if("doubleValue"in e){const r=vr(e.doubleValue);isNaN(r)?this.ne(t,13):(this.ne(t,15),Jw(r)?t.se(0):t.se(r))}else if("timestampValue"in e){const r=e.timestampValue;this.ne(t,20),"string"==typeof r?t.ie(r):(t.ie(`${r.seconds||""}`),t.se(r.nanos||0))}else if("stringValue"in e)this.re(e.stringValue,t),this.oe(t);else if("bytesValue"in e)this.ne(t,30),t.ue($p(e.bytesValue)),this.oe(t);else if("referenceValue"in e)this.ae(e.referenceValue,t);else if("geoPointValue"in e){const r=e.geoPointValue;this.ne(t,45),t.se(r.latitude||0),t.se(r.longitude||0)}else"mapValue"in e?v1(e)?this.ne(t,Number.MAX_SAFE_INTEGER):(this.ce(e.mapValue,t),this.oe(t)):"arrayValue"in e?(this.he(e.arrayValue,t),this.oe(t)):st()}re(e,t){this.ne(t,25),this.le(e,t)}le(e,t){t.ie(e)}ce(e,t){const r=e.fields||{};this.ne(t,55);for(const i of Object.keys(r))this.re(i,t),this.te(r[i],t)}he(e,t){const r=e.values||[];this.ne(t,50);for(const i of r)this.te(i,t)}ae(e,t){this.ne(t,37),Ge.fromName(e).path.forEach(r=>{this.ne(t,60),this.le(r,t)})}ne(e,t){e.se(t)}oe(e){e.se(2)}}function HH(n){if(0===n)return 8;let e=0;return n>>4==0&&(e+=4,n<<=4),n>>6==0&&(e+=2,n<<=2),n>>7==0&&(e+=1),e}function TF(n){const e=64-function(t){let r=0;for(let i=0;i<8;++i){const a=HH(255&t[i]);if(r+=a,8!==a)break}return r}(n);return Math.ceil(e/8)}V_.fe=new V_;class $H{constructor(){this.buffer=new Uint8Array(1024),this.position=0}de(e){const t=e[Symbol.iterator]();let r=t.next();for(;!r.done;)this._e(r.value),r=t.next();this.we()}me(e){const t=e[Symbol.iterator]();let r=t.next();for(;!r.done;)this.ge(r.value),r=t.next();this.ye()}pe(e){for(const t of e){const r=t.charCodeAt(0);if(r<128)this._e(r);else if(r<2048)this._e(960|r>>>6),this._e(128|63&r);else if(t<"\ud800"||"\udbff"<t)this._e(480|r>>>12),this._e(128|63&r>>>6),this._e(128|63&r);else{const i=t.codePointAt(0);this._e(240|i>>>18),this._e(128|63&i>>>12),this._e(128|63&i>>>6),this._e(128|63&i)}}this.we()}Ie(e){for(const t of e){const r=t.charCodeAt(0);if(r<128)this.ge(r);else if(r<2048)this.ge(960|r>>>6),this.ge(128|63&r);else if(t<"\ud800"||"\udbff"<t)this.ge(480|r>>>12),this.ge(128|63&r>>>6),this.ge(128|63&r);else{const i=t.codePointAt(0);this.ge(240|i>>>18),this.ge(128|63&i>>>12),this.ge(128|63&i>>>6),this.ge(128|63&i)}}this.ye()}Te(e){const t=this.Ee(e),r=TF(t);this.Ae(1+r),this.buffer[this.position++]=255&r;for(let i=t.length-r;i<t.length;++i)this.buffer[this.position++]=255&t[i]}Re(e){const t=this.Ee(e),r=TF(t);this.Ae(1+r),this.buffer[this.position++]=~(255&r);for(let i=t.length-r;i<t.length;++i)this.buffer[this.position++]=~(255&t[i])}be(){this.Pe(255),this.Pe(255)}Ve(){this.ve(255),this.ve(255)}reset(){this.position=0}seed(e){this.Ae(e.length),this.buffer.set(e,this.position),this.position+=e.length}Se(){return this.buffer.slice(0,this.position)}Ee(e){const t=function(i){const a=new DataView(new ArrayBuffer(8));return a.setFloat64(0,i,!1),new Uint8Array(a.buffer)}(e),r=0!=(128&t[0]);t[0]^=r?255:128;for(let i=1;i<t.length;++i)t[i]^=r?255:0;return t}_e(e){const t=255&e;0===t?(this.Pe(0),this.Pe(255)):255===t?(this.Pe(255),this.Pe(0)):this.Pe(t)}ge(e){const t=255&e;0===t?(this.ve(0),this.ve(255)):255===t?(this.ve(255),this.ve(0)):this.ve(e)}we(){this.Pe(0),this.Pe(1)}ye(){this.ve(0),this.ve(1)}Pe(e){this.Ae(1),this.buffer[this.position++]=e}ve(e){this.Ae(1),this.buffer[this.position++]=~e}Ae(e){const t=e+this.position;if(t<=this.buffer.length)return;let r=2*this.buffer.length;r<t&&(r=t);const i=new Uint8Array(r);i.set(this.buffer),this.buffer=i}}class GH{constructor(e){this.De=e}ue(e){this.De.de(e)}ie(e){this.De.pe(e)}se(e){this.De.Te(e)}ee(){this.De.be()}}class WH{constructor(e){this.De=e}ue(e){this.De.me(e)}ie(e){this.De.Ie(e)}se(e){this.De.Re(e)}ee(){this.De.Ve()}}class ZD{constructor(){this.De=new $H,this.Ce=new GH(this.De),this.xe=new WH(this.De)}seed(e){this.De.seed(e)}Ne(e){return 0===e?this.Ce:this.xe}Se(){return this.De.Se()}reset(){this.De.reset()}}class Wh{constructor(e,t,r,i){this.indexId=e,this.documentKey=t,this.arrayValue=r,this.directionalValue=i}ke(){const e=this.directionalValue.length,t=0===e||255===this.directionalValue[e-1]?e+1:e,r=new Uint8Array(t);return r.set(this.directionalValue,0),t!==e?r.set([0],this.directionalValue.length):++r[r.length-1],new Wh(this.indexId,this.documentKey,this.arrayValue,r)}}function eg(n,e){let t=n.indexId-e.indexId;return 0!==t?t:(t=SF(n.arrayValue,e.arrayValue),0!==t?t:(t=SF(n.directionalValue,e.directionalValue),0!==t?t:Ge.comparator(n.documentKey,e.documentKey)))}function SF(n,e){for(let t=0;t<n.length&&t<e.length;++t){const r=n[t]-e[t];if(0!==r)return r}return n.length-e.length}class qH{constructor(e){this.collectionId=null!=e.collectionGroup?e.collectionGroup:e.path.lastSegment(),this.Me=e.orderBy,this.Oe=[];for(const t of e.filters){const r=t;r.S()?this.Fe=r:this.Oe.push(r)}}$e(e){const t=OR(e);if(void 0!==t&&!this.Be(t))return!1;const r=A_(e);let i=0,a=0;for(;i<r.length&&this.Be(r[i]);++i);if(i===r.length)return!0;if(void 0!==this.Fe){const l=r[i];if(!this.Le(this.Fe,l)||!this.Ue(this.Me[a++],l))return!1;++i}for(;i<r.length;++i){const l=r[i];if(a>=this.Me.length||!this.Ue(this.Me[a++],l))return!1}return!0}Be(e){for(const t of this.Oe)if(this.Le(t,e))return!0;return!1}Le(e,t){return!(void 0===e||!e.field.isEqual(t.fieldPath))&&2===t.kind==("array-contains"===e.op||"array-contains-any"===e.op)}Ue(e,t){return!!e.field.isEqual(t.fieldPath)&&(0===t.kind&&"asc"===e.dir||1===t.kind&&"desc"===e.dir)}}class zH{constructor(){this.qe=new eM}addToCollectionParentIndex(e,t){return this.qe.add(t),ge.resolve()}getCollectionParents(e,t){return ge.resolve(this.qe.getEntries(t))}addFieldIndex(e,t){return ge.resolve()}deleteFieldIndex(e,t){return ge.resolve()}getDocumentsMatchingTarget(e,t){return ge.resolve(null)}getFieldIndex(e,t){return ge.resolve(null)}getFieldIndexes(e,t){return ge.resolve([])}getNextCollectionGroupToUpdate(e){return ge.resolve(null)}updateCollectionGroup(e,t,r){return ge.resolve()}updateIndexEntries(e,t){return ge.resolve()}}class eM{constructor(){this.index={}}add(e){const t=e.lastSegment(),r=e.popLast(),i=this.index[t]||new Kn(un.comparator),a=!i.has(r);return this.index[t]=i.add(r),a}has(e){const t=e.lastSegment(),r=e.popLast(),i=this.index[t];return i&&i.has(r)}getEntries(e){return(this.index[e]||new Kn(un.comparator)).toArray()}}const YD=new Uint8Array(0);class KH{constructor(e){this.user=e,this.Ge=new eM,this.Ke=new $h(t=>qp(t),(t,r)=>rE(t,r)),this.uid=e.uid||""}addToCollectionParentIndex(e,t){if(!this.Ge.has(t)){const r=t.lastSegment(),i=t.popLast();e.addOnCommittedListener(()=>{this.Ge.add(t)});const a={collectionId:r,parent:Ci(i)};return AF(e).put(a)}return ge.resolve()}getCollectionParents(e,t){const r=[],i=IDBKeyRange.bound([t,""],[l1(t),""],!1,!0);return AF(e).qt(i).next(a=>{for(const l of a){if(l.collectionId!==t)break;r.push(Eu(l.parent))}return r})}addFieldIndex(e,t){const r=QD(e),i={indexId:(a=t).indexId,collectionGroup:a.collectionGroup,fields:a.fields.map(l=>[l.fieldPath.canonicalString(),l.kind])};var a;return delete i.indexId,r.add(i).next()}deleteFieldIndex(e,t){const r=QD(e),i=JD(e),a=yE(e);return r.delete(t.indexId).next(()=>i.delete(IDBKeyRange.bound([t.indexId],[t.indexId+1],!1,!0))).next(()=>a.delete(IDBKeyRange.bound([t.indexId],[t.indexId+1],!1,!0)))}getDocumentsMatchingTarget(e,t){const r=yE(e);let i=!0;const a=new Map;return ge.forEach(this.Qe(t),l=>this.getFieldIndex(e,l).next(h=>{i&&(i=!!h),a.set(l,h)})).next(()=>{if(i){let l=En();return ge.forEach(a,(h,_)=>{var w;Le("IndexedDbIndexManager",`Using index ${w=h,`id=${w.indexId}|cg=${w.collectionGroup}|f=${w.fields.map(We=>`${We.fieldPath}:${We.kind}`).join(",")}`} to execute ${qp(t)}`);const D=function(We,wt){const tt=OR(wt);if(void 0===tt)return null;for(const Nt of LD(We,tt.fieldPath))switch(Nt.op){case"array-contains-any":return Nt.value.arrayValue.values||[];case"array-contains":return[Nt.value]}return null}(_,h),S=function(We,wt){const tt=new Map;for(const Nt of A_(wt))for(const Pt of LD(We,Nt.fieldPath))switch(Pt.op){case"==":case"in":tt.set(Nt.fieldPath.canonicalString(),Pt.value);break;case"not-in":case"!=":return tt.set(Nt.fieldPath.canonicalString(),Pt.value),Array.from(tt.values())}return null}(_,h),N=function(We,wt){const tt=[];let Nt=!0;for(const Ro of A_(wt)){let ti,Iu=!0;for(const ni of LD(We,Ro.fieldPath)){let ar,X_=!0;switch(ni.op){case"<":case"<=":ar="nullValue"in(Pt=ni.value)?g1:"booleanValue"in Pt?{booleanValue:!1}:"integerValue"in Pt||"doubleValue"in Pt?{doubleValue:NaN}:"timestampValue"in Pt?{timestampValue:{seconds:Number.MIN_SAFE_INTEGER}}:"stringValue"in Pt?{stringValue:""}:"bytesValue"in Pt?{bytesValue:""}:"referenceValue"in Pt?S_(Kc.empty(),Ge.empty()):"geoPointValue"in Pt?{geoPointValue:{latitude:-90,longitude:-180}}:"arrayValue"in Pt?{arrayValue:{}}:"mapValue"in Pt?{mapValue:{}}:st();break;case"==":case"in":case">=":ar=ni.value;break;case">":ar=ni.value,X_=!1;break;case"!=":case"not-in":ar=g1}w1(ti,ar)===ar&&(ti=ar,Iu=X_)}if(null!==We.startAt)for(let ni=0;ni<We.orderBy.length;++ni)if(We.orderBy[ni].field.isEqual(Ro.fieldPath)){const ar=We.startAt.position[ni];w1(ti,ar)===ar&&(ti=ar,Iu=We.startAt.inclusive);break}if(void 0===ti)return null;tt.push(ti),Nt&&(Nt=Iu)}var Pt;return new Hh(tt,Nt)}(_,h),L=function(We,wt){const tt=[];let Nt=!0;for(const Ro of A_(wt)){let ti,Iu=!0;for(const ni of LD(We,Ro.fieldPath)){let ar,X_=!0;switch(ni.op){case">=":case">":ar="nullValue"in(Pt=ni.value)?{booleanValue:!1}:"booleanValue"in Pt?{doubleValue:NaN}:"integerValue"in Pt||"doubleValue"in Pt?{timestampValue:{seconds:Number.MIN_SAFE_INTEGER}}:"timestampValue"in Pt?{stringValue:""}:"stringValue"in Pt?{bytesValue:""}:"bytesValue"in Pt?S_(Kc.empty(),Ge.empty()):"referenceValue"in Pt?{geoPointValue:{latitude:-90,longitude:-180}}:"geoPointValue"in Pt?{arrayValue:{}}:"arrayValue"in Pt?{mapValue:{}}:"mapValue"in Pt?p1:st(),X_=!1;break;case"==":case"in":case"<=":ar=ni.value;break;case"<":ar=ni.value,X_=!1;break;case"!=":case"not-in":ar=p1}E1(ti,ar)===ar&&(ti=ar,Iu=X_)}if(null!==We.endAt)for(let ni=0;ni<We.orderBy.length;++ni)if(We.orderBy[ni].field.isEqual(Ro.fieldPath)){const ar=We.endAt.position[ni];E1(ti,ar)===ar&&(ti=ar,Iu=We.endAt.inclusive);break}if(void 0===ti)return null;tt.push(ti),Nt&&(Nt=Iu)}var Pt;return new Hh(tt,Nt)}(_,h),j=this.je(h,_,N),fe=this.je(h,_,L),Me=this.We(h,_,S),et=this.ze(h.indexId,D,j,!!N&&N.inclusive,fe,!!L&&L.inclusive,Me);return ge.forEach(et,We=>r.Kt(We,t.limit).next(wt=>{wt.forEach(tt=>{l=l.add(new Ge(Eu(tt.documentKey)))})}))}).next(()=>l)}return ge.resolve(null)})}Qe(e){let t=this.Ke.get(e);return t||(t=[e],this.Ke.set(e,t),t)}ze(e,t,r,i,a,l,h){const _=(null!=t?t.length:1)*Math.max(null!=r?r.length:1,null!=a?a.length:1),w=_/(null!=t?t.length:1),D=[];for(let S=0;S<_;++S){const N=t?this.He(t[S/w]):YD,L=r?this.Je(e,N,r[S%w],i):this.Ye(e),j=a?this.Xe(e,N,a[S%w],l):this.Ye(e+1);D.push(...this.createRange(L,j,h.map(fe=>this.Je(e,N,fe,!0))))}return D}Je(e,t,r,i){const a=new Wh(e,Ge.empty(),t,r);return i?a:a.ke()}Xe(e,t,r,i){const a=new Wh(e,Ge.empty(),t,r);return i?a.ke():a}Ye(e){return new Wh(e,Ge.empty(),YD,YD)}getFieldIndex(e,t){const r=new qH(t),i=null!=t.collectionGroup?t.collectionGroup:t.path.lastSegment();return this.getFieldIndexes(e,i).next(a=>{const l=a.filter(h=>r.$e(h));return l.sort((h,_)=>_.fields.length-h.fields.length),l.length>0?l[0]:null})}Ze(e,t){const r=new ZD;for(const i of A_(e)){const a=t.data.field(i.fieldPath);if(null==a)return null;const l=r.Ne(i.kind);V_.fe.Zt(a,l)}return r.Se()}He(e){const t=new ZD;return V_.fe.Zt(e,t.Ne(0)),t.Se()}We(e,t,r){if(null===r)return[];let i=[];i.push(new ZD);let a=0;for(const l of A_(e)){const h=r[a++];for(const _ of i)if(this.tn(t,l.fieldPath)&&eE(h))i=this.en(i,l,h);else{const w=_.Ne(l.kind);V_.fe.Zt(h,w)}}return this.nn(i)}je(e,t,r){return null==r?null:this.We(e,t,r.position)}nn(e){const t=[];for(let r=0;r<e.length;++r)t[r]=e[r].Se();return t}en(e,t,r){const i=[...e],a=[];for(const l of r.arrayValue.values||[])for(const h of i){const _=new ZD;_.seed(h.Se()),V_.fe.Zt(l,_.Ne(t.kind)),a.push(_)}return a}tn(e,t){return!!e.filters.find(r=>r instanceof Gi&&r.field.isEqual(t)&&("in"===r.op||"not-in"===r.op))}getFieldIndexes(e,t){const r=QD(e),i=JD(e);return(t?r.qt("collectionGroupIndex",IDBKeyRange.bound(t,t)):r.qt()).next(a=>{const l=[];return ge.forEach(a,h=>i.get([h.indexId,this.uid]).next(_=>{l.push(function(w,D){const S=D?new nE(D.sequenceNumber,new Zc(Xp(D.readTime),new Ge(Eu(D.documentKey)),D.largestBatchId)):nE.empty(),N=w.fields.map(([L,j])=>new OD(wi.fromServerFormat(L),j));return new kD(w.indexId,w.collectionGroup,N,S)}(h,_))})).next(()=>l)})}getNextCollectionGroupToUpdate(e){return this.getFieldIndexes(e).next(t=>0===t.length?null:(t.sort((r,i)=>{const a=r.indexState.sequenceNumber-i.indexState.sequenceNumber;return 0!==a?a:Yt(r.collectionGroup,i.collectionGroup)}),t[0].collectionGroup))}updateCollectionGroup(e,t,r){const i=QD(e),a=JD(e);return this.sn(e).next(l=>i.qt("collectionGroupIndex",IDBKeyRange.bound(t,t)).next(h=>ge.forEach(h,_=>{return a.put({indexId:_.indexId,uid:this.user.uid||"",sequenceNumber:l,readTime:Jp((N=r).readTime),documentKey:Ci(N.documentKey.path),largestBatchId:N.largestBatchId});var N})))}updateIndexEntries(e,t){const r=new Map;return ge.forEach(t,(i,a)=>{const l=r.get(i.collectionGroup);return(l?ge.resolve(l):this.getFieldIndexes(e,i.collectionGroup)).next(h=>(r.set(i.collectionGroup,h),ge.forEach(h,_=>this.rn(e,i,_).next(w=>{const D=this.on(a,_);return w.isEqual(D)?ge.resolve():this.un(e,a,w,D)}))))})}an(e,t,r){return yE(e).put({indexId:r.indexId,uid:this.uid,arrayValue:r.arrayValue,directionalValue:r.directionalValue,documentKey:Ci(t.key.path)})}cn(e,t,r){return yE(e).delete([r.indexId,this.uid,r.arrayValue,r.directionalValue,Ci(t.key.path)])}rn(e,t,r){const i=yE(e);let a=new Kn(eg);return i.Wt({index:"documentKeyIndex",range:IDBKeyRange.only([r.indexId,this.uid,Ci(t.path)])},(l,h)=>{a=a.add(new Wh(r.indexId,t,h.arrayValue,h.directionalValue))}).next(()=>a)}on(e,t){let r=new Kn(eg);const i=this.Ze(t,e);if(null==i)return r;const a=OR(t);if(null!=a){const l=e.data.field(a.fieldPath);if(eE(l))for(const h of l.arrayValue.values||[])r=r.add(new Wh(t.indexId,e.key,this.He(h),i))}else r=r.add(new Wh(t.indexId,e.key,YD,i));return r}un(e,t,r,i){Le("IndexedDbIndexManager","Updating index entries for document '%s'",t.key);const a=[];return function(l,h,_,w,D){const S=l.getIterator(),N=h.getIterator();let L=k_(S),j=k_(N);for(;L||j;){let fe=!1,Me=!1;if(L&&j){const et=_(L,j);et<0?Me=!0:et>0&&(fe=!0)}else null!=L?Me=!0:fe=!0;fe?(w(j),j=k_(N)):Me?(D(L),L=k_(S)):(L=k_(S),j=k_(N))}}(r,i,eg,l=>{a.push(this.an(e,t,l))},l=>{a.push(this.cn(e,t,l))}),ge.waitFor(a)}sn(e){let t=1;return JD(e).Wt({index:"sequenceNumberIndex",reverse:!0,range:IDBKeyRange.upperBound([this.uid,Number.MAX_SAFE_INTEGER])},(r,i,a)=>{a.done(),t=i.sequenceNumber+1}).next(()=>t)}createRange(e,t,r){r=r.sort((l,h)=>eg(l,h)).filter((l,h,_)=>!h||0!==eg(l,_[h-1]));const i=[];i.push(e);for(const l of r){const h=eg(l,e),_=eg(l,t);if(0===h)i[0]=e.ke();else if(h>0&&_<0)i.push(l),i.push(l.ke());else if(_>0)break}i.push(t);const a=[];for(let l=0;l<i.length;l+=2)a.push(IDBKeyRange.bound([i[l].indexId,this.uid,i[l].arrayValue,i[l].directionalValue,""],[i[l+1].indexId,this.uid,i[l+1].arrayValue,i[l+1].directionalValue,""]));return a}}function AF(n){return Ii(n,"collectionParents")}function yE(n){return Ii(n,"indexEntries")}function QD(n){return Ii(n,"indexConfiguration")}function JD(n){return Ii(n,"indexState")}const xF={didRun:!1,sequenceNumbersCollected:0,targetsRemoved:0,documentsRemoved:0};class xo{constructor(e,t,r){this.cacheSizeCollectionThreshold=e,this.percentileToCollect=t,this.maximumSequenceNumbersToCollect=r}static withCacheSize(e){return new xo(e,xo.DEFAULT_COLLECTION_PERCENTILE,xo.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT)}}function RF(n,e,t){const r=n.store("mutations"),i=n.store("documentMutations"),a=[],l=IDBKeyRange.only(t.batchId);let h=0;const _=r.Wt({range:l},(D,S,N)=>(h++,N.delete()));a.push(_.next(()=>{xt(1===h)}));const w=[];for(const D of t.mutations){const S=fF(e,D.key.path,t.batchId);a.push(i.delete(S)),w.push(D.key)}return ge.waitFor(a).next(()=>w)}function XD(n){if(!n)return 0;let e;if(n.document)e=n.document;else if(n.unknownDocument)e=n.unknownDocument;else{if(!n.noDocument)throw st();e=n.noDocument}return JSON.stringify(e).length}xo.DEFAULT_COLLECTION_PERCENTILE=10,xo.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT=1e3,xo.DEFAULT=new xo(41943040,xo.DEFAULT_COLLECTION_PERCENTILE,xo.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT),xo.DISABLED=new xo(-1,0,0);class tM{constructor(e,t,r,i){this.userId=e,this.M=t,this.indexManager=r,this.referenceDelegate=i,this.hn={}}static Yt(e,t,r,i){xt(""!==e.uid);const a=e.isAuthenticated()?e.uid:"";return new tM(a,t,r,i)}checkEmpty(e){let t=!0;const r=IDBKeyRange.bound([this.userId,Number.NEGATIVE_INFINITY],[this.userId,Number.POSITIVE_INFINITY]);return qh(e).Wt({index:"userMutationsIndex",range:r},(i,a,l)=>{t=!1,l.done()}).next(()=>t)}addMutationBatch(e,t,r,i){const a=U_(e),l=qh(e);return l.add({}).next(h=>{xt("number"==typeof h);const _=new KR(h,t,r,i),w=function(N,L,j){const fe=j.baseMutations.map(et=>pE(N.Jt,et)),Me=j.mutations.map(et=>pE(N.Jt,et));return{userId:L,batchId:j.batchId,localWriteTimeMs:j.localWriteTime.toMillis(),baseMutations:fe,mutations:Me}}(this.M,this.userId,_),D=[];let S=new Kn((N,L)=>Yt(N.canonicalString(),L.canonicalString()));for(const N of i){const L=fF(this.userId,N.key.path,h);S=S.add(N.key.path.popLast()),D.push(l.put(w)),D.push(a.put(L,EH))}return S.forEach(N=>{D.push(this.indexManager.addToCollectionParentIndex(e,N))}),e.addOnCommittedListener(()=>{this.hn[h]=_.keys()}),ge.waitFor(D).next(()=>_)})}lookupMutationBatch(e,t){return qh(e).get(t).next(r=>r?(xt(r.userId===this.userId),L_(this.M,r)):null)}ln(e,t){return this.hn[t]?ge.resolve(this.hn[t]):this.lookupMutationBatch(e,t).next(r=>{if(r){const i=r.keys();return this.hn[t]=i,i}return null})}getNextMutationBatchAfterBatchId(e,t){const r=t+1,i=IDBKeyRange.lowerBound([this.userId,r]);let a=null;return qh(e).Wt({index:"userMutationsIndex",range:i},(l,h,_)=>{h.userId===this.userId&&(xt(h.batchId>=r),a=L_(this.M,h)),_.done()}).next(()=>a)}getHighestUnacknowledgedBatchId(e){const t=IDBKeyRange.upperBound([this.userId,Number.POSITIVE_INFINITY]);let r=-1;return qh(e).Wt({index:"userMutationsIndex",range:t,reverse:!0},(i,a,l)=>{r=a.batchId,l.done()}).next(()=>r)}getAllMutationBatches(e){const t=IDBKeyRange.bound([this.userId,-1],[this.userId,Number.POSITIVE_INFINITY]);return qh(e).qt("userMutationsIndex",t).next(r=>r.map(i=>L_(this.M,i)))}getAllMutationBatchesAffectingDocumentKey(e,t){const r=qD(this.userId,t.path),i=IDBKeyRange.lowerBound(r),a=[];return U_(e).Wt({range:i},(l,h,_)=>{const[w,D,S]=l,N=Eu(D);if(w===this.userId&&t.path.isEqual(N))return qh(e).get(S).next(L=>{if(!L)throw st();xt(L.userId===this.userId),a.push(L_(this.M,L))});_.done()}).next(()=>a)}getAllMutationBatchesAffectingDocumentKeys(e,t){let r=new Kn(Yt);const i=[];return t.forEach(a=>{const l=qD(this.userId,a.path),h=IDBKeyRange.lowerBound(l),_=U_(e).Wt({range:h},(w,D,S)=>{const[N,L,j]=w,fe=Eu(L);N===this.userId&&a.path.isEqual(fe)?r=r.add(j):S.done()});i.push(_)}),ge.waitFor(i).next(()=>this.fn(e,r))}getAllMutationBatchesAffectingQuery(e,t){const r=t.path,i=r.length+1,a=qD(this.userId,r),l=IDBKeyRange.lowerBound(a);let h=new Kn(Yt);return U_(e).Wt({range:l},(_,w,D)=>{const[S,N,L]=_,j=Eu(N);S===this.userId&&r.isPrefixOf(j)?j.length===i&&(h=h.add(L)):D.done()}).next(()=>this.fn(e,h))}fn(e,t){const r=[],i=[];return t.forEach(a=>{i.push(qh(e).get(a).next(l=>{if(null===l)throw st();xt(l.userId===this.userId),r.push(L_(this.M,l))}))}),ge.waitFor(i).next(()=>r)}removeMutationBatch(e,t){return RF(e.Ht,this.userId,t).next(r=>(e.addOnCommittedListener(()=>{this.dn(t.batchId)}),ge.forEach(r,i=>this.referenceDelegate.markPotentiallyOrphaned(e,i))))}dn(e){delete this.hn[e]}performConsistencyCheck(e){return this.checkEmpty(e).next(t=>{if(!t)return ge.resolve();const r=IDBKeyRange.lowerBound([this.userId]),i=[];return U_(e).Wt({range:r},(a,l,h)=>{if(a[0]===this.userId){const _=Eu(a[1]);i.push(_)}else h.done()}).next(()=>{xt(0===i.length)})})}containsKey(e,t){return MF(e,this.userId,t)}_n(e){return NF(e).get(this.userId).next(t=>t||{userId:this.userId,lastAcknowledgedBatchId:-1,lastStreamToken:""})}}function MF(n,e,t){const r=qD(e,t.path),i=r[1],a=IDBKeyRange.lowerBound(r);let l=!1;return U_(n).Wt({range:a,jt:!0},(h,_,w)=>{const[D,S,N]=h;D===e&&S===i&&(l=!0),w.done()}).next(()=>l)}function qh(n){return Ii(n,"mutations")}function U_(n){return Ii(n,"documentMutations")}function NF(n){return Ii(n,"mutationQueues")}class tg{constructor(e){this.wn=e}next(){return this.wn+=2,this.wn}static mn(){return new tg(0)}static gn(){return new tg(-1)}}class ZH{constructor(e,t){this.referenceDelegate=e,this.M=t}allocateTargetId(e){return this.yn(e).next(t=>{const r=new tg(t.highestTargetId);return t.highestTargetId=r.next(),this.pn(e,t).next(()=>t.highestTargetId)})}getLastRemoteSnapshotVersion(e){return this.yn(e).next(t=>Dt.fromTimestamp(new Rr(t.lastRemoteSnapshotVersion.seconds,t.lastRemoteSnapshotVersion.nanoseconds)))}getHighestSequenceNumber(e){return this.yn(e).next(t=>t.highestListenSequenceNumber)}setTargetsMetadata(e,t,r){return this.yn(e).next(i=>(i.highestListenSequenceNumber=t,r&&(i.lastRemoteSnapshotVersion=r.toTimestamp()),t>i.highestListenSequenceNumber&&(i.highestListenSequenceNumber=t),this.pn(e,i)))}addTargetData(e,t){return this.In(e,t).next(()=>this.yn(e).next(r=>(r.targetCount+=1,this.Tn(t,r),this.pn(e,r))))}updateTargetData(e,t){return this.In(e,t)}removeTargetData(e,t){return this.removeMatchingKeysForTargetId(e,t.targetId).next(()=>B_(e).delete(t.targetId)).next(()=>this.yn(e)).next(r=>(xt(r.targetCount>0),r.targetCount-=1,this.pn(e,r)))}removeTargets(e,t,r){let i=0;const a=[];return B_(e).Wt((l,h)=>{const _=mE(h);_.sequenceNumber<=t&&null===r.get(_.targetId)&&(i++,a.push(this.removeTargetData(e,_)))}).next(()=>ge.waitFor(a)).next(()=>i)}forEachTarget(e,t){return B_(e).Wt((r,i)=>{const a=mE(i);t(a)})}yn(e){return PF(e).get("targetGlobalKey").next(t=>(xt(null!==t),t))}pn(e,t){return PF(e).put("targetGlobalKey",t)}In(e,t){return B_(e).put(CF(this.M,t))}Tn(e,t){let r=!1;return e.targetId>t.highestTargetId&&(t.highestTargetId=e.targetId,r=!0),e.sequenceNumber>t.highestListenSequenceNumber&&(t.highestListenSequenceNumber=e.sequenceNumber,r=!0),r}getTargetCount(e){return this.yn(e).next(t=>t.targetCount)}getTargetData(e,t){const r=qp(t),i=IDBKeyRange.bound([r,Number.NEGATIVE_INFINITY],[r,Number.POSITIVE_INFINITY]);let a=null;return B_(e).Wt({range:i,index:"queryTargetsIndex"},(l,h,_)=>{const w=mE(h);rE(t,w.target)&&(a=w,_.done())}).next(()=>a)}addMatchingKeys(e,t,r){const i=[],a=zh(e);return t.forEach(l=>{const h=Ci(l.path);i.push(a.put({targetId:r,path:h})),i.push(this.referenceDelegate.addReference(e,r,l))}),ge.waitFor(i)}removeMatchingKeys(e,t,r){const i=zh(e);return ge.forEach(t,a=>{const l=Ci(a.path);return ge.waitFor([i.delete([r,l]),this.referenceDelegate.removeReference(e,r,a)])})}removeMatchingKeysForTargetId(e,t){const r=zh(e),i=IDBKeyRange.bound([t],[t+1],!1,!0);return r.delete(i)}getMatchingKeysForTargetId(e,t){const r=IDBKeyRange.bound([t],[t+1],!1,!0),i=zh(e);let a=En();return i.Wt({range:r,jt:!0},(l,h,_)=>{const w=Eu(l[1]),D=new Ge(w);a=a.add(D)}).next(()=>a)}containsKey(e,t){const r=Ci(t.path),i=IDBKeyRange.bound([r],[l1(r)],!1,!0);let a=0;return zh(e).Wt({index:"documentTargetsIndex",jt:!0,range:i},([l,h],_,w)=>{0!==l&&(a++,w.done())}).next(()=>a>0)}Et(e,t){return B_(e).get(t).next(r=>r?mE(r):null)}}function B_(n){return Ii(n,"targets")}function PF(n){return Ii(n,"targetGlobal")}function zh(n){return Ii(n,"targetDocuments")}function ng(n){return nM.apply(this,arguments)}function nM(){return nM=(0,ye.Z)(function*(n){if(n.code!==de.FAILED_PRECONDITION||n.message!==mF)throw n;Le("LocalStore","Unexpectedly lost primary lease")}),nM.apply(this,arguments)}function kF([n,e],[t,r]){const i=Yt(n,t);return 0===i?Yt(e,r):i}class YH{constructor(e){this.En=e,this.buffer=new Kn(kF),this.An=0}Rn(){return++this.An}bn(e){const t=[e,this.Rn()];if(this.buffer.size<this.En)this.buffer=this.buffer.add(t);else{const r=this.buffer.last();kF(t,r)<0&&(this.buffer=this.buffer.delete(r).add(t))}}get maxValue(){return this.buffer.last()[0]}}class QH{constructor(e,t){this.garbageCollector=e,this.asyncQueue=t,this.Pn=!1,this.Vn=null}start(e){-1!==this.garbageCollector.params.cacheSizeCollectionThreshold&&this.vn(e)}stop(){this.Vn&&(this.Vn.cancel(),this.Vn=null)}get started(){return null!==this.Vn}vn(e){var t=this;const r=this.Pn?3e5:6e4;Le("LruGarbageCollector",`Garbage collection scheduled in ${r}ms`),this.Vn=this.asyncQueue.enqueueAfterDelay("lru_garbage_collection",r,(0,ye.Z)(function*(){t.Vn=null,t.Pn=!0;try{yield e.collectGarbage(t.garbageCollector)}catch(i){Yp(i)?Le("LruGarbageCollector","Ignoring IndexedDB error during garbage collection: ",i):yield ng(i)}yield t.vn(e)}))}}class JH{constructor(e,t){this.Sn=e,this.params=t}calculateTargetCount(e,t){return this.Sn.Dn(e).next(r=>Math.floor(t/100*r))}nthSequenceNumber(e,t){if(0===t)return ge.resolve(da.A);const r=new YH(t);return this.Sn.forEachTarget(e,i=>r.bn(i.sequenceNumber)).next(()=>this.Sn.Cn(e,i=>r.bn(i))).next(()=>r.maxValue)}removeTargets(e,t,r){return this.Sn.removeTargets(e,t,r)}removeOrphanedDocuments(e,t){return this.Sn.removeOrphanedDocuments(e,t)}collect(e,t){return-1===this.params.cacheSizeCollectionThreshold?(Le("LruGarbageCollector","Garbage collection skipped; disabled"),ge.resolve(xF)):this.getCacheSize(e).next(r=>r<this.params.cacheSizeCollectionThreshold?(Le("LruGarbageCollector",`Garbage collection skipped; Cache size ${r} is lower than threshold ${this.params.cacheSizeCollectionThreshold}`),xF):this.xn(e,t))}getCacheSize(e){return this.Sn.getCacheSize(e)}xn(e,t){let r,i,a,l,h,_,w;const D=Date.now();return this.calculateTargetCount(e,this.params.percentileToCollect).next(S=>(S>this.params.maximumSequenceNumbersToCollect?(Le("LruGarbageCollector",`Capping sequence numbers to collect down to the maximum of ${this.params.maximumSequenceNumbersToCollect} from ${S}`),i=this.params.maximumSequenceNumbersToCollect):i=S,l=Date.now(),this.nthSequenceNumber(e,i))).next(S=>(r=S,h=Date.now(),this.removeTargets(e,r,t))).next(S=>(a=S,_=Date.now(),this.removeOrphanedDocuments(e,r))).next(S=>(w=Date.now(),RR()<=Io.in.DEBUG&&Le("LruGarbageCollector",`LRU Garbage Collection\n\tCounted targets in ${l-D}ms\n\tDetermined least recently used ${i} in `+(h-l)+`ms\n\tRemoved ${a} targets in `+(_-h)+`ms\n\tRemoved ${S} documents in `+(w-_)+`ms\nTotal Duration: ${w-D}ms`),ge.resolve({didRun:!0,sequenceNumbersCollected:i,targetsRemoved:a,documentsRemoved:S})))}}class XH{constructor(e,t){this.db=e,this.garbageCollector=new JH(this,t)}Dn(e){const t=this.Nn(e);return this.db.getTargetCache().getTargetCount(e).next(r=>t.next(i=>r+i))}Nn(e){let t=0;return this.Cn(e,r=>{t++}).next(()=>t)}forEachTarget(e,t){return this.db.getTargetCache().forEachTarget(e,t)}Cn(e,t){return this.kn(e,(r,i)=>t(i))}addReference(e,t,r){return eT(e,r)}removeReference(e,t,r){return eT(e,r)}removeTargets(e,t,r){return this.db.getTargetCache().removeTargets(e,t,r)}markPotentiallyOrphaned(e,t){return eT(e,t)}Mn(e,t){return function(r,i){let a=!1;return NF(r).zt(l=>MF(r,l,i).next(h=>(h&&(a=!0),ge.resolve(!h)))).next(()=>a)}(e,t)}removeOrphanedDocuments(e,t){const r=this.db.getRemoteDocumentCache().newChangeBuffer(),i=[];let a=0;return this.kn(e,(l,h)=>{if(h<=t){const _=this.Mn(e,l).next(w=>{if(!w)return a++,r.getEntry(e,l).next(()=>(r.removeEntry(l,Dt.min()),zh(e).delete([0,Ci(l.path)])))});i.push(_)}}).next(()=>ge.waitFor(i)).next(()=>r.apply(e)).next(()=>a)}removeTarget(e,t){const r=t.withSequenceNumber(e.currentSequenceNumber);return this.db.getTargetCache().updateTargetData(e,r)}updateLimboDocument(e,t){return eT(e,t)}kn(e,t){const r=zh(e);let i,a=da.A;return r.Wt({index:"documentTargetsIndex"},([l,h],{path:_,sequenceNumber:w})=>{0===l?(a!==da.A&&t(new Ge(Eu(i)),a),a=w,i=_):a=da.A}).next(()=>{a!==da.A&&t(new Ge(Eu(i)),a)})}getCacheSize(e){return this.db.getRemoteDocumentCache().getSize(e)}}function eT(n,e){return zh(n).put((r=n.currentSequenceNumber,{targetId:0,path:Ci(e.path),sequenceNumber:r}));var r}class OF{constructor(){this.changes=new $h(e=>e.toString(),(e,t)=>e.isEqual(t)),this.changesApplied=!1}addEntry(e){this.assertNotApplied(),this.changes.set(e.key,e)}removeEntry(e,t){this.assertNotApplied(),this.changes.set(e,zn.newInvalidDocument(e).setReadTime(t))}getEntry(e,t){this.assertNotApplied();const r=this.changes.get(t);return void 0!==r?ge.resolve(r):this.getFromCache(e,t)}getEntries(e,t){return this.getAllFromCache(e,t)}apply(e){return this.assertNotApplied(),this.changesApplied=!0,this.applyChanges(e)}assertNotApplied(){}}class e${constructor(e){this.M=e}setIndexManager(e){this.indexManager=e}addEntry(e,t,r){return rg(e).put(r)}removeEntry(e,t,r){return rg(e).delete(function(i,a){const l=i.path.toArray();return[l.slice(0,l.length-2),l[l.length-2],KD(a),l[l.length-1]]}(t,r))}updateMetadata(e,t){return this.getMetadata(e).next(r=>(r.byteSize+=t,this.On(e,r)))}getEntry(e,t){let r=zn.newInvalidDocument(t);return rg(e).Wt({index:"documentKeyIndex",range:IDBKeyRange.only(vE(t))},(i,a)=>{r=this.Fn(t,a)}).next(()=>r)}$n(e,t){let r={size:0,document:zn.newInvalidDocument(t)};return rg(e).Wt({index:"documentKeyIndex",range:IDBKeyRange.only(vE(t))},(i,a)=>{r={document:this.Fn(t,a),size:XD(a)}}).next(()=>r)}getEntries(e,t){let r=Ga();return this.Bn(e,t,(i,a)=>{const l=this.Fn(i,a);r=r.insert(i,l)}).next(()=>r)}Ln(e,t){let r=Ga(),i=new Mr(Ge.comparator);return this.Bn(e,t,(a,l)=>{const h=this.Fn(a,l);r=r.insert(a,h),i=i.insert(a,XD(l))}).next(()=>({documents:r,Un:i}))}Bn(e,t,r){if(t.isEmpty())return ge.resolve();let i=new Kn(VF);t.forEach(_=>i=i.add(_));const a=IDBKeyRange.bound(vE(i.first()),vE(i.last())),l=i.getIterator();let h=l.getNext();return rg(e).Wt({index:"documentKeyIndex",range:a},(_,w,D)=>{const S=Ge.fromSegments([...w.prefixPath,w.collectionGroup,w.documentId]);for(;h&&VF(h,S)<0;)r(h,null),h=l.getNext();h&&h.isEqual(S)&&(r(h,w),h=l.hasNext()?l.getNext():null),h?D.Ut(vE(h)):D.done()}).next(()=>{for(;h;)r(h,null),h=l.hasNext()?l.getNext():null})}getAllFromCollection(e,t,r){const i=[t.popLast().toArray(),t.lastSegment(),KD(r.readTime),r.documentKey.path.isEmpty()?"":r.documentKey.path.lastSegment()],a=[t.popLast().toArray(),t.lastSegment(),[Number.MAX_SAFE_INTEGER,Number.MAX_SAFE_INTEGER],""];return rg(e).qt(IDBKeyRange.bound(i,a,!0)).next(l=>{let h=Ga();for(const _ of l){const w=this.Fn(Ge.fromSegments(_.prefixPath.concat(_.collectionGroup,_.documentId)),_);h=h.insert(w.key,w)}return h})}getAllFromCollectionGroup(e,t,r,i){let a=Ga();const l=LF(t,r),h=LF(t,Zc.max());return rg(e).Wt({index:"collectionGroupIndex",range:IDBKeyRange.bound(l,h,!0)},(_,w,D)=>{const S=this.Fn(Ge.fromSegments(w.prefixPath.concat(w.collectionGroup,w.documentId)),w);a=a.insert(S.key,S),a.size===i&&D.done()}).next(()=>a)}newChangeBuffer(e){return new t$(this,!!e&&e.trackRemovals)}getSize(e){return this.getMetadata(e).next(t=>t.byteSize)}getMetadata(e){return FF(e).get("remoteDocumentGlobalKey").next(t=>(xt(!!t),t))}On(e,t){return FF(e).put("remoteDocumentGlobalKey",t)}Fn(e,t){if(t){const r=function BH(n,e){let t;if(e.document)t=sF(n.Jt,e.document,!!e.hasCommittedMutations);else if(e.noDocument){const r=Ge.fromSegments(e.noDocument.path),i=Xp(e.noDocument.readTime);t=zn.newNoDocument(r,i),e.hasCommittedMutations&&t.setHasCommittedMutations()}else{if(!e.unknownDocument)return st();{const r=Ge.fromSegments(e.unknownDocument.path),i=Xp(e.unknownDocument.version);t=zn.newUnknownDocument(r,i)}}return e.readTime&&t.setReadTime(function(r){const i=new Rr(r[0],r[1]);return Dt.fromTimestamp(i)}(e.readTime)),t}(this.M,t);if(!r.isNoDocument()||!r.version.isEqual(Dt.min()))return r}return zn.newInvalidDocument(e)}}class t$ extends OF{constructor(e,t){super(),this.qn=e,this.trackRemovals=t,this.Gn=new $h(r=>r.toString(),(r,i)=>r.isEqual(i))}applyChanges(e){const t=[];let r=0,i=new Kn((a,l)=>Yt(a.canonicalString(),l.canonicalString()));return this.changes.forEach((a,l)=>{const h=this.Gn.get(a);if(t.push(this.qn.removeEntry(e,a,h.readTime)),l.isValidDocument()){const _=EF(this.qn.M,l);i=i.add(a.path.popLast()),r+=XD(_)-h.size,t.push(this.qn.addEntry(e,a,_))}else if(r-=h.size,this.trackRemovals){const _=EF(this.qn.M,l.convertToNoDocument(Dt.min()));t.push(this.qn.addEntry(e,a,_))}}),i.forEach(a=>{t.push(this.qn.indexManager.addToCollectionParentIndex(e,a))}),t.push(this.qn.updateMetadata(e,r)),ge.waitFor(t)}getFromCache(e,t){return this.qn.$n(e,t).next(r=>(this.Gn.set(t,{size:r.size,readTime:r.document.readTime}),r.document))}getAllFromCache(e,t){return this.qn.Ln(e,t).next(({documents:r,Un:i})=>(i.forEach((a,l)=>{this.Gn.set(a,{size:l,readTime:r.get(a).readTime})}),r))}}function FF(n){return Ii(n,"remoteDocumentGlobal")}function rg(n){return Ii(n,"remoteDocumentsV14")}function vE(n){const e=n.path.toArray();return[e.slice(0,e.length-2),e[e.length-2],e[e.length-1]]}function LF(n,e){const t=e.documentKey.path.toArray();return[n,KD(e.readTime),t.slice(0,t.length-2),t.length>0?t[t.length-1]:""]}function VF(n,e){const t=n.path.length-e.path.length;return 0!==t?t:Ge.comparator(n,e)}class n${constructor(e){this.M=e}kt(e,t,r,i){const a=new zD("createOrUpgrade",t);var h;r<1&&i>=1&&(e.createObjectStore("owner"),(h=e).createObjectStore("mutationQueues",{keyPath:"userId"}),h.createObjectStore("mutations",{keyPath:"batchId",autoIncrement:!0}).createIndex("userMutationsIndex",hF,{unique:!0}),h.createObjectStore("documentMutations"),UF(e),function(h){h.createObjectStore("remoteDocuments")}(e));let l=ge.resolve();return r<3&&i>=3&&(0!==r&&(function(h){h.deleteObjectStore("targetDocuments"),h.deleteObjectStore("targets"),h.deleteObjectStore("targetGlobal")}(e),UF(e)),l=l.next(()=>function(h){const _=h.store("targetGlobal"),w={highestTargetId:0,highestListenSequenceNumber:0,lastRemoteSnapshotVersion:Dt.min().toTimestamp(),targetCount:0};return _.put("targetGlobalKey",w)}(a))),r<4&&i>=4&&(0!==r&&(l=l.next(()=>function(h,_){return _.store("mutations").qt().next(w=>{h.deleteObjectStore("mutations"),h.createObjectStore("mutations",{keyPath:"batchId",autoIncrement:!0}).createIndex("userMutationsIndex",hF,{unique:!0});const D=_.store("mutations"),S=w.map(N=>D.put(N));return ge.waitFor(S)})}(e,a))),l=l.next(()=>{!function(h){h.createObjectStore("clientMetadata",{keyPath:"clientId"})}(e)})),r<5&&i>=5&&(l=l.next(()=>this.Kn(a))),r<6&&i>=6&&(l=l.next(()=>(function(h){h.createObjectStore("remoteDocumentGlobal")}(e),this.Qn(a)))),r<7&&i>=7&&(l=l.next(()=>this.jn(a))),r<8&&i>=8&&(l=l.next(()=>this.Wn(e,a))),r<9&&i>=9&&(l=l.next(()=>{!function(h){h.objectStoreNames.contains("remoteDocumentChanges")&&h.deleteObjectStore("remoteDocumentChanges")}(e)})),r<10&&i>=10&&(l=l.next(()=>this.zn(a))),r<11&&i>=11&&(l=l.next(()=>{(function(h){h.createObjectStore("bundles",{keyPath:"bundleId"})})(e),function(h){h.createObjectStore("namedQueries",{keyPath:"name"})}(e)})),r<12&&i>=12&&(l=l.next(()=>{!function(h){const _=h.createObjectStore("documentOverlays",{keyPath:PH});_.createIndex("collectionPathOverlayIndex",kH,{unique:!1}),_.createIndex("collectionGroupOverlayIndex",OH,{unique:!1})}(e)})),r<13&&i>=13&&(l=l.next(()=>function(h){const _=h.createObjectStore("remoteDocumentsV14",{keyPath:CH});_.createIndex("documentKeyIndex",IH),_.createIndex("collectionGroupIndex",bH)}(e)).next(()=>this.Hn(e,a)).next(()=>e.deleteObjectStore("remoteDocuments"))),r<14&&i>=14&&(l=l.next(()=>{!function(h){h.createObjectStore("indexConfiguration",{keyPath:"indexId",autoIncrement:!0}).createIndex("collectionGroupIndex","collectionGroup",{unique:!1}),h.createObjectStore("indexState",{keyPath:xH}).createIndex("sequenceNumberIndex",RH,{unique:!1}),h.createObjectStore("indexEntries",{keyPath:MH}).createIndex("documentKeyIndex",NH,{unique:!1})}(e)})),l}Qn(e){let t=0;return e.store("remoteDocuments").Wt((r,i)=>{t+=XD(i)}).next(()=>{const r={byteSize:t};return e.store("remoteDocumentGlobal").put("remoteDocumentGlobalKey",r)})}Kn(e){const t=e.store("mutationQueues"),r=e.store("mutations");return t.qt().next(i=>ge.forEach(i,a=>{const l=IDBKeyRange.bound([a.userId,-1],[a.userId,a.lastAcknowledgedBatchId]);return r.qt("userMutationsIndex",l).next(h=>ge.forEach(h,_=>{xt(_.userId===a.userId);const w=L_(this.M,_);return RF(e,a.userId,w).next(()=>{})}))}))}jn(e){const t=e.store("targetDocuments"),r=e.store("remoteDocuments");return e.store("targetGlobal").get("targetGlobalKey").next(i=>{const a=[];return r.Wt((l,h)=>{const _=new un(l),w=[0,Ci(_)];a.push(t.get(w).next(D=>D?ge.resolve():t.put({targetId:0,path:Ci(_),sequenceNumber:i.highestListenSequenceNumber})))}).next(()=>ge.waitFor(a))})}Wn(e,t){e.createObjectStore("collectionParents",{keyPath:AH});const r=t.store("collectionParents"),i=new eM,a=l=>{if(i.add(l)){const h=l.lastSegment(),_=l.popLast();return r.put({collectionId:h,parent:Ci(_)})}};return t.store("remoteDocuments").Wt({jt:!0},(l,h)=>{const _=new un(l);return a(_.popLast())}).next(()=>t.store("documentMutations").Wt({jt:!0},([l,h,_],w)=>{const D=Eu(h);return a(D.popLast())}))}zn(e){const t=e.store("targets");return t.Wt((r,i)=>{const a=mE(i),l=CF(this.M,a);return t.put(l)})}Hn(e,t){const r=t.store("remoteDocuments"),i=[];return r.Wt((a,l)=>{const h=t.store("remoteDocumentsV14"),_=(w=l,w.document?new Ge(un.fromString(w.document.name).popFirst(5)):w.noDocument?Ge.fromSegments(w.noDocument.path):w.unknownDocument?Ge.fromSegments(w.unknownDocument.path):st()).path.toArray();var w;const D={prefixPath:_.slice(0,_.length-2),collectionGroup:_[_.length-2],documentId:_[_.length-1],readTime:l.readTime||[0,0],unknownDocument:l.unknownDocument,noDocument:l.noDocument,document:l.document,hasCommittedMutations:!!l.hasCommittedMutations};i.push(h.put(D))}).next(()=>ge.waitFor(i))}}function UF(n){n.createObjectStore("targetDocuments",{keyPath:TH}).createIndex("documentTargetsIndex",SH,{unique:!0}),n.createObjectStore("targets",{keyPath:"targetId"}).createIndex("queryTargetsIndex",DH,{unique:!0}),n.createObjectStore("targetGlobal")}const rM="Failed to obtain exclusive access to the persistence layer. To allow shared access, multi-tab synchronization has to be enabled in all tabs. If you are using `experimentalForceOwningTab:true`, make sure that only one tab has persistence enabled at any given time.";class iM{constructor(e,t,r,i,a,l,h,_,w,D,S=13){if(this.allowTabSynchronization=e,this.persistenceKey=t,this.clientId=r,this.Jn=a,this.window=l,this.document=h,this.Yn=w,this.Xn=D,this.Zn=S,this.ts=null,this.es=!1,this.isPrimary=!1,this.networkEnabled=!0,this.ns=null,this.inForeground=!1,this.ss=null,this.rs=null,this.os=Number.NEGATIVE_INFINITY,this.us=N=>Promise.resolve(),!iM.vt())throw new Ne(de.UNIMPLEMENTED,"This platform is either missing IndexedDB or is known to have an incomplete implementation. Offline persistence has been disabled.");this.referenceDelegate=new XH(this,i),this.cs=t+"main",this.M=new wF(_),this.hs=new Cu(this.cs,this.Zn,new n$(this.M)),this.ls=new ZH(this.referenceDelegate,this.M),this.fs=new e$(this.M),this.ds=new jH,this.window&&this.window.localStorage?this._s=this.window.localStorage:(this._s=null,!1===D&&Vr("IndexedDbPersistence","LocalStorage is unavailable. As a result, persistence may not work reliably. In particular enablePersistence() could fail immediately after refreshing the page."))}start(){return this.ws().then(()=>{if(!this.isPrimary&&!this.allowTabSynchronization)throw new Ne(de.FAILED_PRECONDITION,rM);return this.gs(),this.ys(),this.ps(),this.runTransaction("getHighestListenSequenceNumber","readonly",e=>this.ls.getHighestSequenceNumber(e))}).then(e=>{this.ts=new da(e,this.Yn)}).then(()=>{this.es=!0}).catch(e=>(this.hs&&this.hs.close(),Promise.reject(e)))}Is(e){var t=this;return this.us=function(){var r=(0,ye.Z)(function*(i){if(t.started)return e(i)});return function(i){return r.apply(this,arguments)}}(),e(this.isPrimary)}setDatabaseDeletedListener(e){this.hs.Ot(function(){var t=(0,ye.Z)(function*(r){null===r.newVersion&&(yield e())});return function(r){return t.apply(this,arguments)}}())}setNetworkEnabled(e){var t=this;this.networkEnabled!==e&&(this.networkEnabled=e,this.Jn.enqueueAndForget((0,ye.Z)(function*(){t.started&&(yield t.ws())})))}ws(){return this.runTransaction("updateClientMetadataAndTryBecomePrimary","readwrite",e=>tT(e).put({clientId:this.clientId,updateTimeMs:Date.now(),networkEnabled:this.networkEnabled,inForeground:this.inForeground}).next(()=>{if(this.isPrimary)return this.Ts(e).next(t=>{t||(this.isPrimary=!1,this.Jn.enqueueRetryable(()=>this.us(!1)))})}).next(()=>this.Es(e)).next(t=>this.isPrimary&&!t?this.As(e).next(()=>!1):!!t&&this.Rs(e).next(()=>!0))).catch(e=>{if(Yp(e))return Le("IndexedDbPersistence","Failed to extend owner lease: ",e),this.isPrimary;if(!this.allowTabSynchronization)throw e;return Le("IndexedDbPersistence","Releasing owner lease after error during lease refresh",e),!1}).then(e=>{this.isPrimary!==e&&this.Jn.enqueueRetryable(()=>this.us(e)),this.isPrimary=e})}Ts(e){return wE(e).get("owner").next(t=>ge.resolve(this.bs(t)))}Ps(e){return tT(e).delete(this.clientId)}Vs(){var e=this;return(0,ye.Z)(function*(){if(e.isPrimary&&!e.vs(e.os,18e5)){e.os=Date.now();const t=yield e.runTransaction("maybeGarbageCollectMultiClientState","readwrite-primary",r=>{const i=Ii(r,"clientMetadata");return i.qt().next(a=>{const l=e.Ss(a,18e5),h=a.filter(_=>-1===l.indexOf(_));return ge.forEach(h,_=>i.delete(_.clientId)).next(()=>h)})}).catch(()=>[]);if(e._s)for(const r of t)e._s.removeItem(e.Ds(r.clientId))}})()}ps(){this.rs=this.Jn.enqueueAfterDelay("client_metadata_refresh",4e3,()=>this.ws().then(()=>this.Vs()).then(()=>this.ps()))}bs(e){return!!e&&e.ownerId===this.clientId}Es(e){return this.Xn?ge.resolve(!0):wE(e).get("owner").next(t=>{if(null!==t&&this.vs(t.leaseTimestampMs,5e3)&&!this.Cs(t.ownerId)){if(this.bs(t)&&this.networkEnabled)return!0;if(!this.bs(t)){if(!t.allowTabSynchronization)throw new Ne(de.FAILED_PRECONDITION,rM);return!1}}return!(!this.networkEnabled||!this.inForeground)||tT(e).qt().next(r=>void 0===this.Ss(r,5e3).find(i=>{if(this.clientId!==i.clientId){const l=!this.inForeground&&i.inForeground,h=this.networkEnabled===i.networkEnabled;if(!this.networkEnabled&&i.networkEnabled||l&&h)return!0}return!1}))}).next(t=>(this.isPrimary!==t&&Le("IndexedDbPersistence",`Client ${t?"is":"is not"} eligible for a primary lease.`),t))}shutdown(){var e=this;return(0,ye.Z)(function*(){e.es=!1,e.xs(),e.rs&&(e.rs.cancel(),e.rs=null),e.Ns(),e.ks(),yield e.hs.runTransaction("shutdown","readwrite",["owner","clientMetadata"],t=>{const r=new vF(t,da.A);return e.As(r).next(()=>e.Ps(r))}),e.hs.close(),e.Ms()})()}Ss(e,t){return e.filter(r=>this.vs(r.updateTimeMs,t)&&!this.Cs(r.clientId))}Os(){return this.runTransaction("getActiveClients","readonly",e=>tT(e).qt().next(t=>this.Ss(t,18e5).map(r=>r.clientId)))}get started(){return this.es}getMutationQueue(e,t){return tM.Yt(e,this.M,t,this.referenceDelegate)}getTargetCache(){return this.ls}getRemoteDocumentCache(){return this.fs}getIndexManager(e){return new KH(e)}getDocumentOverlayCache(e){return XR.Yt(this.M,e)}getBundleCache(){return this.ds}runTransaction(e,t,r){Le("IndexedDbPersistence","Starting transaction:",e);const i="readonly"===t?"readonly":"readwrite",a=14===(l=this.Zn)?LH:13===l?gF:12===l?FH:11===l?pF:void st();var l;let h;return this.hs.runTransaction(e,i,a,_=>(h=new vF(_,this.ts?this.ts.next():da.A),"readwrite-primary"===t?this.Ts(h).next(w=>!!w||this.Es(h)).next(w=>{if(!w)throw Vr(`Failed to obtain primary lease for action '${e}'.`),this.isPrimary=!1,this.Jn.enqueueRetryable(()=>this.us(!1)),new Ne(de.FAILED_PRECONDITION,mF);return r(h)}).next(w=>this.Rs(h).next(()=>w)):this.Fs(h).next(()=>r(h)))).then(_=>(h.raiseOnCommittedEvent(),_))}Fs(e){return wE(e).get("owner").next(t=>{if(null!==t&&this.vs(t.leaseTimestampMs,5e3)&&!this.Cs(t.ownerId)&&!this.bs(t)&&!(this.Xn||this.allowTabSynchronization&&t.allowTabSynchronization))throw new Ne(de.FAILED_PRECONDITION,rM)})}Rs(e){const t={ownerId:this.clientId,allowTabSynchronization:this.allowTabSynchronization,leaseTimestampMs:Date.now()};return wE(e).put("owner",t)}static vt(){return Cu.vt()}As(e){const t=wE(e);return t.get("owner").next(r=>this.bs(r)?(Le("IndexedDbPersistence","Releasing primary lease."),t.delete("owner")):ge.resolve())}vs(e,t){const r=Date.now();return!(e<r-t||e>r&&(Vr(`Detected an update time that is in the future: ${e} > ${r}`),1))}gs(){null!==this.document&&"function"==typeof this.document.addEventListener&&(this.ss=()=>{this.Jn.enqueueAndForget(()=>(this.inForeground="visible"===this.document.visibilityState,this.ws()))},this.document.addEventListener("visibilitychange",this.ss),this.inForeground="visible"===this.document.visibilityState)}Ns(){this.ss&&(this.document.removeEventListener("visibilitychange",this.ss),this.ss=null)}ys(){var e;"function"==typeof(null===(e=this.window)||void 0===e?void 0:e.addEventListener)&&(this.ns=()=>{this.xs(),(0,k.G6)()&&navigator.appVersion.match(/Version\/1[45]/)&&this.Jn.enterRestrictedMode(!0),this.Jn.enqueueAndForget(()=>this.shutdown())},this.window.addEventListener("pagehide",this.ns))}ks(){this.ns&&(this.window.removeEventListener("pagehide",this.ns),this.ns=null)}Cs(e){var t;try{const r=null!==(null===(t=this._s)||void 0===t?void 0:t.getItem(this.Ds(e)));return Le("IndexedDbPersistence",`Client '${e}' ${r?"is":"is not"} zombied in LocalStorage`),r}catch(r){return Vr("IndexedDbPersistence","Failed to get zombied client id.",r),!1}}xs(){if(this._s)try{this._s.setItem(this.Ds(this.clientId),String(Date.now()))}catch(e){Vr("Failed to set zombie client id.",e)}}Ms(){if(this._s)try{this._s.removeItem(this.Ds(this.clientId))}catch(e){}}Ds(e){return`firestore_zombie_${this.persistenceKey}_${e}`}}function wE(n){return Ii(n,"owner")}function tT(n){return Ii(n,"clientMetadata")}function sM(n,e){let t=n.projectId;return n.isDefaultDatabase||(t+="."+n.database),"firestore/"+e+"/"+t+"/"}class r${constructor(e,t,r){this.fs=e,this.$s=t,this.indexManager=r}Bs(e,t){return this.$s.getAllMutationBatchesAffectingDocumentKey(e,t).next(r=>this.Ls(e,t,r))}Ls(e,t,r){return this.fs.getEntry(e,t).next(i=>{for(const a of r)a.applyToLocalView(i);return i})}Us(e,t){e.forEach((r,i)=>{for(const a of t)a.applyToLocalView(i)})}qs(e,t){return this.fs.getEntries(e,t).next(r=>this.Gs(e,r).next(()=>r))}Gs(e,t){return this.$s.getAllMutationBatchesAffectingDocumentKeys(e,t).next(r=>this.Us(t,r))}Ks(e,t,r){return Ge.isDocumentKey((i=t).path)&&null===i.collectionGroup&&0===i.filters.length?this.Qs(e,t.path):VR(t)?this.js(e,t,r):this.Ws(e,t,r);var i}Qs(e,t){return this.Bs(e,new Ge(t)).next(r=>{let i=$R();return r.isFoundDocument()&&(i=i.insert(r.key,r)),i})}js(e,t,r){const i=t.collectionGroup;let a=$R();return this.indexManager.getCollectionParents(e,i).next(l=>ge.forEach(l,h=>{const _=(w=t,D=h.child(i),new Yc(D,null,w.explicitOrderBy.slice(),w.filters.slice(),w.limit,w.limitType,w.startAt,w.endAt));var w,D;return this.Ws(e,_,r).next(w=>{w.forEach((D,S)=>{a=a.insert(D,S)})})}).next(()=>a))}Ws(e,t,r){let i;return this.fs.getAllFromCollection(e,t.path,r).next(a=>(i=a,this.$s.getAllMutationBatchesAffectingQuery(e,t))).next(a=>{for(const l of a)for(const h of l.mutations){const _=h.key;let w=i.get(_);null==w&&(w=zn.newInvalidDocument(_),i=i.insert(_,w)),jR(h,w,l.localWriteTime),w.isFoundDocument()||(i=i.remove(_))}}).next(()=>(i.forEach((a,l)=>{BR(t,l)||(i=i.remove(a))}),i))}}class oM{constructor(e,t,r,i){this.targetId=e,this.fromCache=t,this.zs=r,this.Hs=i}static Js(e,t){let r=En(),i=En();for(const a of t.docChanges)switch(a.type){case 0:r=r.add(a.doc.key);break;case 1:i=i.add(a.doc.key)}return new oM(e,t.fromCache,r,i)}}class BF{Ys(e){this.Xs=e}Ks(e,t,r,i){return 0===(a=t).filters.length&&null===a.limit&&null==a.startAt&&null==a.endAt&&(0===a.explicitOrderBy.length||1===a.explicitOrderBy.length&&a.explicitOrderBy[0].field.isKeyField())||r.isEqual(Dt.min())?this.Zs(e,t):this.Xs.qs(e,i).next(a=>{const l=this.ti(t,a);return(VD(t)||UD(t))&&this.ei(t.limitType,l,i,r)?this.Zs(e,t):(RR()<=Io.in.DEBUG&&Le("QueryEngine","Re-using previous result from %s to execute query: %s",r.toString(),UR(t)),this.Xs.Ks(e,t,I1(r,-1)).next(h=>(l.forEach(_=>{h=h.insert(_.key,_)}),h)))});var a}ti(e,t){let r=new Kn(N1(e));return t.forEach((i,a)=>{BR(e,a)&&(r=r.add(a))}),r}ei(e,t,r,i){if(r.size!==t.size)return!0;const a="F"===e?t.last():t.first();return!!a&&(a.hasPendingWrites||a.version.compareTo(i)>0)}Zs(e,t){return RR()<=Io.in.DEBUG&&Le("QueryEngine","Using full collection scan to execute query:",UR(t)),this.Xs.Ks(e,t,Zc.min())}}class i${constructor(e,t,r,i){this.persistence=e,this.ni=t,this.M=i,this.si=new Mr(Yt),this.ii=new $h(a=>qp(a),rE),this.ri=new Map,this.oi=e.getRemoteDocumentCache(),this.ls=e.getTargetCache(),this.ds=e.getBundleCache(),this.ui(r)}ui(e){this.indexManager=this.persistence.getIndexManager(e),this.$s=this.persistence.getMutationQueue(e,this.indexManager),this.ai=new r$(this.oi,this.$s,this.indexManager),this.oi.setIndexManager(this.indexManager),this.ni.Ys(this.ai)}collectGarbage(e){return this.persistence.runTransaction("Collect garbage","readwrite-primary",t=>e.collect(t,this.si))}}function jF(n,e,t,r){return new i$(n,e,t,r)}function HF(n,e){return aM.apply(this,arguments)}function aM(){return aM=(0,ye.Z)(function*(n,e){const t=ze(n);return yield t.persistence.runTransaction("Handle user change","readonly",r=>{let i;return t.$s.getAllMutationBatches(r).next(a=>(i=a,t.ui(e),t.$s.getAllMutationBatches(r))).next(a=>{const l=[],h=[];let _=En();for(const w of i){l.push(w.batchId);for(const D of w.mutations)_=_.add(D.key)}for(const w of a){h.push(w.batchId);for(const D of w.mutations)_=_.add(D.key)}return t.ai.qs(r,_).next(w=>({ci:w,removedBatchIds:l,addedBatchIds:h}))})})}),aM.apply(this,arguments)}function s$(n,e){const t=ze(n);return t.persistence.runTransaction("Acknowledge batch","readwrite-primary",r=>{const i=e.batch.keys(),a=t.oi.newChangeBuffer({trackRemovals:!0});return function(l,h,_,w){const D=_.batch,S=D.keys();let N=ge.resolve();return S.forEach(L=>{N=N.next(()=>w.getEntry(h,L)).next(j=>{const fe=_.docVersions.get(L);xt(null!==fe),j.version.compareTo(fe)<0&&(D.applyToRemoteDocument(j,_),j.isValidDocument()&&(j.setReadTime(_.commitVersion),w.addEntry(j)))})}),N.next(()=>l.$s.removeMutationBatch(h,D))}(t,r,e,a).next(()=>a.apply(r)).next(()=>t.$s.performConsistencyCheck(r)).next(()=>t.ai.qs(r,i))})}function $F(n){const e=ze(n);return e.persistence.runTransaction("Get last remote snapshot version","readonly",t=>e.ls.getLastRemoteSnapshotVersion(t))}function o$(n,e){const t=ze(n),r=e.snapshotVersion;let i=t.si;return t.persistence.runTransaction("Apply remote event","readwrite-primary",a=>{const l=t.oi.newChangeBuffer({trackRemovals:!0});i=t.si;const h=[];e.targetChanges.forEach((w,D)=>{const S=i.get(D);if(!S)return;h.push(t.ls.removeMatchingKeys(a,w.removedDocuments,D).next(()=>t.ls.addMatchingKeys(a,w.addedDocuments,D)));let N=S.withSequenceNumber(a.currentSequenceNumber);var L,j,fe;e.targetMismatches.has(D)?N=N.withResumeToken(ei.EMPTY_BYTE_STRING,Dt.min()).withLastLimboFreeSnapshotVersion(Dt.min()):w.resumeToken.approximateByteSize()>0&&(N=N.withResumeToken(w.resumeToken,r)),i=i.insert(D,N),j=N,fe=w,(0===(L=S).resumeToken.approximateByteSize()||j.snapshotVersion.toMicroseconds()-L.snapshotVersion.toMicroseconds()>=3e8||fe.addedDocuments.size+fe.modifiedDocuments.size+fe.removedDocuments.size>0)&&h.push(t.ls.updateTargetData(a,N))});let _=Ga();if(e.documentUpdates.forEach(w=>{e.resolvedLimboDocuments.has(w)&&h.push(t.persistence.referenceDelegate.updateLimboDocument(a,w))}),h.push(GF(a,l,e.documentUpdates).next(w=>{_=w})),!r.isEqual(Dt.min())){const w=t.ls.getLastRemoteSnapshotVersion(a).next(D=>t.ls.setTargetsMetadata(a,a.currentSequenceNumber,r));h.push(w)}return ge.waitFor(h).next(()=>l.apply(a)).next(()=>t.ai.Gs(a,_)).next(()=>_)}).then(a=>(t.si=i,a))}function GF(n,e,t){let r=En();return t.forEach(i=>r=r.add(i)),e.getEntries(n,r).next(i=>{let a=Ga();return t.forEach((l,h)=>{const _=i.get(l);h.isNoDocument()&&h.version.isEqual(Dt.min())?(e.removeEntry(l,h.readTime),a=a.insert(l,h)):!_.isValidDocument()||h.version.compareTo(_.version)>0||0===h.version.compareTo(_.version)&&_.hasPendingWrites?(e.addEntry(h),a=a.insert(l,h)):Le("LocalStore","Ignoring outdated watch update for ",l,". Current version:",_.version," Watch version:",h.version)}),a})}function a$(n,e){const t=ze(n);return t.persistence.runTransaction("Get next mutation batch","readonly",r=>(void 0===e&&(e=-1),t.$s.getNextMutationBatchAfterBatchId(r,e)))}function j_(n,e){const t=ze(n);return t.persistence.runTransaction("Allocate target","readwrite",r=>{let i;return t.ls.getTargetData(r,e).next(a=>a?(i=a,ge.resolve(i)):t.ls.allocateTargetId(r).next(l=>(i=new Gh(e,l,0,r.currentSequenceNumber),t.ls.addTargetData(r,i).next(()=>i))))}).then(r=>{const i=t.si.get(r.targetId);return(null===i||r.snapshotVersion.compareTo(i.snapshotVersion)>0)&&(t.si=t.si.insert(r.targetId,r),t.ii.set(e,r.targetId)),r})}function H_(n,e,t){return uM.apply(this,arguments)}function uM(){return uM=(0,ye.Z)(function*(n,e,t){const r=ze(n),i=r.si.get(e),a=t?"readwrite":"readwrite-primary";try{t||(yield r.persistence.runTransaction("Release target",a,l=>r.persistence.referenceDelegate.removeTarget(l,i)))}catch(l){if(!Yp(l))throw l;Le("LocalStore",`Failed to update sequence numbers for target ${e}: ${l}`)}r.si=r.si.remove(e),r.ii.delete(i.target)}),uM.apply(this,arguments)}function nT(n,e,t){const r=ze(n);let i=Dt.min(),a=En();return r.persistence.runTransaction("Execute query","readonly",l=>function(h,_,w){const D=ze(h),S=D.ii.get(w);return void 0!==S?ge.resolve(D.si.get(S)):D.ls.getTargetData(_,w)}(r,l,$a(e)).next(h=>{if(h)return i=h.lastLimboFreeSnapshotVersion,r.ls.getMatchingKeysForTargetId(l,h.targetId).next(_=>{a=_})}).next(()=>r.ni.Ks(l,e,t?i:Dt.min(),t?a:En())).next(h=>(zF(r,M1(e),h),{documents:h,hi:a})))}function WF(n,e){const t=ze(n),r=ze(t.ls),i=t.si.get(e);return i?Promise.resolve(i.target):t.persistence.runTransaction("Get target data","readonly",a=>r.Et(a,e).next(l=>l?l.target:null))}function qF(n,e){const t=ze(n),r=t.ri.get(e)||Dt.min();return t.persistence.runTransaction("Get new document changes","readonly",i=>t.oi.getAllFromCollectionGroup(i,e,I1(r,-1),Number.MAX_SAFE_INTEGER)).then(i=>(zF(t,e,i),i))}function zF(n,e,t){let r=Dt.min();t.forEach((i,a)=>{a.readTime.compareTo(r)>0&&(r=a.readTime)}),n.ri.set(e,r)}function lM(){return lM=(0,ye.Z)(function*(n,e,t,r){const i=ze(n);let a=En(),l=Ga();for(const w of t){const D=e.li(w.metadata.name);w.document&&(a=a.add(D));const S=e.fi(w);S.setReadTime(e.di(w.metadata.readTime)),l=l.insert(D,S)}const h=i.oi.newChangeBuffer({trackRemovals:!0}),_=yield j_(i,(w=r,$a(R_(un.fromString(`__bundle__/docs/${w}`)))));var w;return i.persistence.runTransaction("Apply bundle documents","readwrite",w=>GF(w,h,l).next(D=>(h.apply(w),D)).next(D=>i.ls.removeMatchingKeysForTargetId(w,_.targetId).next(()=>i.ls.addMatchingKeys(w,a,_.targetId)).next(()=>i.ai.Gs(w,D)).next(()=>D)))}),lM.apply(this,arguments)}function l$(n,e){return cM.apply(this,arguments)}function cM(){return cM=(0,ye.Z)(function*(n,e,t=En()){const r=yield j_(n,$a(QR(e.bundledQuery))),i=ze(n);return i.persistence.runTransaction("Save named query","readwrite",a=>{const l=Ei(e.readTime);if(r.snapshotVersion.compareTo(l)>=0)return i.ds.saveNamedQuery(a,e);const h=r.withResumeToken(ei.EMPTY_BYTE_STRING,l);return i.si=i.si.insert(h.targetId,h),i.ls.updateTargetData(a,h).next(()=>i.ls.removeMatchingKeysForTargetId(a,r.targetId)).next(()=>i.ls.addMatchingKeys(a,t,r.targetId)).next(()=>i.ds.saveNamedQuery(a,e))})}),cM.apply(this,arguments)}class c${constructor(e){this.M=e,this._i=new Map,this.wi=new Map}getBundleMetadata(e,t){return ge.resolve(this._i.get(t))}saveBundleMetadata(e,t){var r;return this._i.set(t.id,{id:(r=t).id,version:r.version,createTime:Ei(r.createTime)}),ge.resolve()}getNamedQuery(e,t){return ge.resolve(this.wi.get(t))}saveNamedQuery(e,t){return this.wi.set(t.name,{name:(r=t).name,query:QR(r.bundledQuery),readTime:Ei(r.readTime)}),ge.resolve();var r}}class d${constructor(){this.overlays=new Mr(Ge.comparator),this.mi=new Map}getOverlay(e,t){return ge.resolve(this.overlays.get(t))}saveOverlays(e,t,r){return r.forEach((i,a)=>{this.Xt(e,t,a)}),ge.resolve()}removeOverlaysForBatchId(e,t,r){const i=this.mi.get(r);return void 0!==i&&(i.forEach(a=>this.overlays=this.overlays.remove(a)),this.mi.delete(r)),ge.resolve()}getOverlaysForCollection(e,t,r){const i=uE(),a=t.length+1,l=new Ge(t.child("")),h=this.overlays.getIteratorFrom(l);for(;h.hasNext();){const _=h.getNext().value,w=_.getKey();if(!t.isPrefixOf(w.path))break;w.path.length===a&&_.largestBatchId>r&&i.set(_.getKey(),_)}return ge.resolve(i)}getOverlaysForCollectionGroup(e,t,r,i){let a=new Mr((w,D)=>w-D);const l=this.overlays.getIterator();for(;l.hasNext();){const w=l.getNext().value;if(w.getKey().getCollectionGroup()===t&&w.largestBatchId>r){let D=a.get(w.largestBatchId);null===D&&(D=uE(),a=a.insert(w.largestBatchId,D)),D.set(w.getKey(),w)}}const h=uE(),_=a.getIterator();for(;_.hasNext()&&(_.getNext().value.forEach((w,D)=>h.set(w,D)),!(h.size()>=i)););return ge.resolve(h)}Xt(e,t,r){if(null===r)return;const i=this.overlays.get(r.key);if(null!==i){const l=this.mi.get(i.largestBatchId).delete(r.key);this.mi.set(i.largestBatchId,l)}this.overlays=this.overlays.insert(r.key,new YR(t,r));let a=this.mi.get(t);void 0===a&&(a=En(),this.mi.set(t,a)),this.mi.set(t,a.add(r.key))}}class dM{constructor(){this.gi=new Kn(bi.yi),this.pi=new Kn(bi.Ii)}isEmpty(){return this.gi.isEmpty()}addReference(e,t){const r=new bi(e,t);this.gi=this.gi.add(r),this.pi=this.pi.add(r)}Ti(e,t){e.forEach(r=>this.addReference(r,t))}removeReference(e,t){this.Ei(new bi(e,t))}Ai(e,t){e.forEach(r=>this.removeReference(r,t))}Ri(e){const t=new Ge(new un([])),r=new bi(t,e),i=new bi(t,e+1),a=[];return this.pi.forEachInRange([r,i],l=>{this.Ei(l),a.push(l.key)}),a}bi(){this.gi.forEach(e=>this.Ei(e))}Ei(e){this.gi=this.gi.delete(e),this.pi=this.pi.delete(e)}Pi(e){const t=new Ge(new un([])),r=new bi(t,e),i=new bi(t,e+1);let a=En();return this.pi.forEachInRange([r,i],l=>{a=a.add(l.key)}),a}containsKey(e){const t=new bi(e,0),r=this.gi.firstAfterOrEqual(t);return null!==r&&e.isEqual(r.key)}}class bi{constructor(e,t){this.key=e,this.Vi=t}static yi(e,t){return Ge.comparator(e.key,t.key)||Yt(e.Vi,t.Vi)}static Ii(e,t){return Yt(e.Vi,t.Vi)||Ge.comparator(e.key,t.key)}}class h${constructor(e,t){this.indexManager=e,this.referenceDelegate=t,this.$s=[],this.vi=1,this.Si=new Kn(bi.yi)}checkEmpty(e){return ge.resolve(0===this.$s.length)}addMutationBatch(e,t,r,i){const a=this.vi;this.vi++;const l=new KR(a,t,r,i);this.$s.push(l);for(const h of i)this.Si=this.Si.add(new bi(h.key,a)),this.indexManager.addToCollectionParentIndex(e,h.key.path.popLast());return ge.resolve(l)}lookupMutationBatch(e,t){return ge.resolve(this.Di(t))}getNextMutationBatchAfterBatchId(e,t){const i=this.Ci(t+1),a=i<0?0:i;return ge.resolve(this.$s.length>a?this.$s[a]:null)}getHighestUnacknowledgedBatchId(){return ge.resolve(0===this.$s.length?-1:this.vi-1)}getAllMutationBatches(e){return ge.resolve(this.$s.slice())}getAllMutationBatchesAffectingDocumentKey(e,t){const r=new bi(t,0),i=new bi(t,Number.POSITIVE_INFINITY),a=[];return this.Si.forEachInRange([r,i],l=>{const h=this.Di(l.Vi);a.push(h)}),ge.resolve(a)}getAllMutationBatchesAffectingDocumentKeys(e,t){let r=new Kn(Yt);return t.forEach(i=>{const a=new bi(i,0),l=new bi(i,Number.POSITIVE_INFINITY);this.Si.forEachInRange([a,l],h=>{r=r.add(h.Vi)})}),ge.resolve(this.xi(r))}getAllMutationBatchesAffectingQuery(e,t){const r=t.path,i=r.length+1;let a=r;Ge.isDocumentKey(a)||(a=a.child(""));const l=new bi(new Ge(a),0);let h=new Kn(Yt);return this.Si.forEachWhile(_=>{const w=_.key.path;return!!r.isPrefixOf(w)&&(w.length===i&&(h=h.add(_.Vi)),!0)},l),ge.resolve(this.xi(h))}xi(e){const t=[];return e.forEach(r=>{const i=this.Di(r);null!==i&&t.push(i)}),t}removeMutationBatch(e,t){xt(0===this.Ni(t.batchId,"removed")),this.$s.shift();let r=this.Si;return ge.forEach(t.mutations,i=>{const a=new bi(i.key,t.batchId);return r=r.delete(a),this.referenceDelegate.markPotentiallyOrphaned(e,i.key)}).next(()=>{this.Si=r})}dn(e){}containsKey(e,t){const r=new bi(t,0),i=this.Si.firstAfterOrEqual(r);return ge.resolve(t.isEqual(i&&i.key))}performConsistencyCheck(e){return ge.resolve()}Ni(e,t){return this.Ci(e)}Ci(e){return 0===this.$s.length?0:e-this.$s[0].batchId}Di(e){const t=this.Ci(e);return t<0||t>=this.$s.length?null:this.$s[t]}}class f${constructor(e){this.ki=e,this.docs=new Mr(Ge.comparator),this.size=0}setIndexManager(e){this.indexManager=e}addEntry(e,t){const r=t.key,i=this.docs.get(r),a=i?i.size:0,l=this.ki(t);return this.docs=this.docs.insert(r,{document:t.mutableCopy(),size:l}),this.size+=l-a,this.indexManager.addToCollectionParentIndex(e,r.path.popLast())}removeEntry(e){const t=this.docs.get(e);t&&(this.docs=this.docs.remove(e),this.size-=t.size)}getEntry(e,t){const r=this.docs.get(t);return ge.resolve(r?r.document.mutableCopy():zn.newInvalidDocument(t))}getEntries(e,t){let r=Ga();return t.forEach(i=>{const a=this.docs.get(i);r=r.insert(i,a?a.document.mutableCopy():zn.newInvalidDocument(i))}),ge.resolve(r)}getAllFromCollection(e,t,r){let i=Ga();const a=new Ge(t.child("")),l=this.docs.getIteratorFrom(a);for(;l.hasNext();){const{key:h,value:{document:_}}=l.getNext();if(!t.isPrefixOf(h.path))break;h.path.length>t.length+1||Fj(Oj(_),r)<=0||(i=i.insert(_.key,_.mutableCopy()))}return ge.resolve(i)}getAllFromCollectionGroup(e,t,r,i){st()}Mi(e,t){return ge.forEach(this.docs,r=>t(r))}newChangeBuffer(e){return new p$(this)}getSize(e){return ge.resolve(this.size)}}class p$ extends OF{constructor(e){super(),this.qn=e}applyChanges(e){const t=[];return this.changes.forEach((r,i)=>{i.isValidDocument()?t.push(this.qn.addEntry(e,i)):this.qn.removeEntry(r)}),ge.waitFor(t)}getFromCache(e,t){return this.qn.getEntry(e,t)}getAllFromCache(e,t){return this.qn.getEntries(e,t)}}class g${constructor(e){this.persistence=e,this.Oi=new $h(t=>qp(t),rE),this.lastRemoteSnapshotVersion=Dt.min(),this.highestTargetId=0,this.Fi=0,this.$i=new dM,this.targetCount=0,this.Bi=tg.mn()}forEachTarget(e,t){return this.Oi.forEach((r,i)=>t(i)),ge.resolve()}getLastRemoteSnapshotVersion(e){return ge.resolve(this.lastRemoteSnapshotVersion)}getHighestSequenceNumber(e){return ge.resolve(this.Fi)}allocateTargetId(e){return this.highestTargetId=this.Bi.next(),ge.resolve(this.highestTargetId)}setTargetsMetadata(e,t,r){return r&&(this.lastRemoteSnapshotVersion=r),t>this.Fi&&(this.Fi=t),ge.resolve()}In(e){this.Oi.set(e.target,e);const t=e.targetId;t>this.highestTargetId&&(this.Bi=new tg(t),this.highestTargetId=t),e.sequenceNumber>this.Fi&&(this.Fi=e.sequenceNumber)}addTargetData(e,t){return this.In(t),this.targetCount+=1,ge.resolve()}updateTargetData(e,t){return this.In(t),ge.resolve()}removeTargetData(e,t){return this.Oi.delete(t.target),this.$i.Ri(t.targetId),this.targetCount-=1,ge.resolve()}removeTargets(e,t,r){let i=0;const a=[];return this.Oi.forEach((l,h)=>{h.sequenceNumber<=t&&null===r.get(h.targetId)&&(this.Oi.delete(l),a.push(this.removeMatchingKeysForTargetId(e,h.targetId)),i++)}),ge.waitFor(a).next(()=>i)}getTargetCount(e){return ge.resolve(this.targetCount)}getTargetData(e,t){const r=this.Oi.get(t)||null;return ge.resolve(r)}addMatchingKeys(e,t,r){return this.$i.Ti(t,r),ge.resolve()}removeMatchingKeys(e,t,r){this.$i.Ai(t,r);const i=this.persistence.referenceDelegate,a=[];return i&&t.forEach(l=>{a.push(i.markPotentiallyOrphaned(e,l))}),ge.waitFor(a)}removeMatchingKeysForTargetId(e,t){return this.$i.Ri(t),ge.resolve()}getMatchingKeysForTargetId(e,t){const r=this.$i.Pi(t);return ge.resolve(r)}containsKey(e,t){return ge.resolve(this.$i.containsKey(t))}}class m${constructor(e,t){this.Li={},this.overlays={},this.ts=new da(0),this.es=!1,this.es=!0,this.referenceDelegate=e(this),this.ls=new g$(this),this.indexManager=new zH,this.fs=new f$(r=>this.referenceDelegate.Ui(r)),this.M=new wF(t),this.ds=new c$(this.M)}start(){return Promise.resolve()}shutdown(){return this.es=!1,Promise.resolve()}get started(){return this.es}setDatabaseDeletedListener(){}setNetworkEnabled(){}getIndexManager(e){return this.indexManager}getDocumentOverlayCache(e){let t=this.overlays[e.toKey()];return t||(t=new d$,this.overlays[e.toKey()]=t),t}getMutationQueue(e,t){let r=this.Li[e.toKey()];return r||(r=new h$(t,this.referenceDelegate),this.Li[e.toKey()]=r),r}getTargetCache(){return this.ls}getRemoteDocumentCache(){return this.fs}getBundleCache(){return this.ds}runTransaction(e,t,r){Le("MemoryPersistence","Starting transaction:",e);const i=new _$(this.ts.next());return this.referenceDelegate.qi(),r(i).next(a=>this.referenceDelegate.Gi(i).next(()=>a)).toPromise().then(a=>(i.raiseOnCommittedEvent(),a))}Ki(e,t){return ge.or(Object.values(this.Li).map(r=>()=>r.containsKey(e,t)))}}class _$ extends _F{constructor(e){super(),this.currentSequenceNumber=e}}class hM{constructor(e){this.persistence=e,this.Qi=new dM,this.ji=null}static Wi(e){return new hM(e)}get zi(){if(this.ji)return this.ji;throw st()}addReference(e,t,r){return this.Qi.addReference(r,t),this.zi.delete(r.toString()),ge.resolve()}removeReference(e,t,r){return this.Qi.removeReference(r,t),this.zi.add(r.toString()),ge.resolve()}markPotentiallyOrphaned(e,t){return this.zi.add(t.toString()),ge.resolve()}removeTarget(e,t){this.Qi.Ri(t.targetId).forEach(i=>this.zi.add(i.toString()));const r=this.persistence.getTargetCache();return r.getMatchingKeysForTargetId(e,t.targetId).next(i=>{i.forEach(a=>this.zi.add(a.toString()))}).next(()=>r.removeTargetData(e,t))}qi(){this.ji=new Set}Gi(e){const t=this.persistence.getRemoteDocumentCache().newChangeBuffer();return ge.forEach(this.zi,r=>{const i=Ge.fromPath(r);return this.Hi(e,i).next(a=>{a||t.removeEntry(i,Dt.min())})}).next(()=>(this.ji=null,t.apply(e)))}updateLimboDocument(e,t){return this.Hi(e,t).next(r=>{r?this.zi.delete(t.toString()):this.zi.add(t.toString())})}Ui(e){return 0}Hi(e,t){return ge.or([()=>ge.resolve(this.Qi.containsKey(t)),()=>this.persistence.getTargetCache().containsKey(e,t),()=>this.persistence.Ki(e,t)])}}function KF(n,e){return`firestore_clients_${n}_${e}`}function ZF(n,e,t){let r=`firestore_mutations_${n}_${t}`;return e.isAuthenticated()&&(r+=`_${e.uid}`),r}function fM(n,e){return`firestore_targets_${n}_${e}`}class rT{constructor(e,t,r,i){this.user=e,this.batchId=t,this.state=r,this.error=i}static Ji(e,t,r){const i=JSON.parse(r);let a,l="object"==typeof i&&-1!==["pending","acknowledged","rejected"].indexOf(i.state)&&(void 0===i.error||"object"==typeof i.error);return l&&i.error&&(l="string"==typeof i.error.message&&"string"==typeof i.error.code,l&&(a=new Ne(i.error.code,i.error.message))),l?new rT(e,t,i.state,a):(Vr("SharedClientState",`Failed to parse mutation state for ID '${t}': ${r}`),null)}Yi(){const e={state:this.state,updateTimeMs:Date.now()};return this.error&&(e.error={code:this.error.code,message:this.error.message}),JSON.stringify(e)}}class EE{constructor(e,t,r){this.targetId=e,this.state=t,this.error=r}static Ji(e,t){const r=JSON.parse(t);let i,a="object"==typeof r&&-1!==["not-current","current","rejected"].indexOf(r.state)&&(void 0===r.error||"object"==typeof r.error);return a&&r.error&&(a="string"==typeof r.error.message&&"string"==typeof r.error.code,a&&(i=new Ne(r.error.code,r.error.message))),a?new EE(e,r.state,i):(Vr("SharedClientState",`Failed to parse target state for ID '${e}': ${t}`),null)}Yi(){const e={state:this.state,updateTimeMs:Date.now()};return this.error&&(e.error={code:this.error.code,message:this.error.message}),JSON.stringify(e)}}class iT{constructor(e,t){this.clientId=e,this.activeTargetIds=t}static Ji(e,t){const r=JSON.parse(t);let i="object"==typeof r&&r.activeTargetIds instanceof Array,a=GD();for(let l=0;i&&l<r.activeTargetIds.length;++l)i=f1(r.activeTargetIds[l]),a=a.add(r.activeTargetIds[l]);return i?new iT(e,a):(Vr("SharedClientState",`Failed to parse client data for instance '${e}': ${t}`),null)}}class pM{constructor(e,t){this.clientId=e,this.onlineState=t}static Ji(e){const t=JSON.parse(e);return"object"==typeof t&&-1!==["Unknown","Online","Offline"].indexOf(t.onlineState)&&"string"==typeof t.clientId?new pM(t.clientId,t.onlineState):(Vr("SharedClientState",`Failed to parse online state: ${e}`),null)}}class gM{constructor(){this.activeTargetIds=GD()}Xi(e){this.activeTargetIds=this.activeTargetIds.add(e)}Zi(e){this.activeTargetIds=this.activeTargetIds.delete(e)}Yi(){const e={activeTargetIds:this.activeTargetIds.toArray(),updateTimeMs:Date.now()};return JSON.stringify(e)}}class mM{constructor(e,t,r,i,a){this.window=e,this.Jn=t,this.persistenceKey=r,this.tr=i,this.syncEngine=null,this.onlineStateHandler=null,this.sequenceNumberHandler=null,this.er=this.nr.bind(this),this.sr=new Mr(Yt),this.started=!1,this.ir=[];const l=r.replace(/[.*+?^${}()|[\]\\]/g,"\\$&");this.storage=this.window.localStorage,this.currentUser=a,this.rr=KF(this.persistenceKey,this.tr),this.ur=`firestore_sequence_number_${this.persistenceKey}`,this.sr=this.sr.insert(this.tr,new gM),this.ar=new RegExp(`^firestore_clients_${l}_([^_]*)$`),this.cr=new RegExp(`^firestore_mutations_${l}_(\\d+)(?:_(.*))?$`),this.hr=new RegExp(`^firestore_targets_${l}_(\\d+)$`),this.lr=`firestore_online_state_${this.persistenceKey}`,this.dr=function(h){return`firestore_bundle_loaded_v2_${h}`}(this.persistenceKey),this.window.addEventListener("storage",this.er)}static vt(e){return!(!e||!e.localStorage)}start(){var e=this;return(0,ye.Z)(function*(){const t=yield e.syncEngine.Os();for(const i of t){if(i===e.tr)continue;const a=e.getItem(KF(e.persistenceKey,i));if(a){const l=iT.Ji(i,a);l&&(e.sr=e.sr.insert(l.clientId,l))}}e._r();const r=e.storage.getItem(e.lr);if(r){const i=e.wr(r);i&&e.mr(i)}for(const i of e.ir)e.nr(i);e.ir=[],e.window.addEventListener("pagehide",()=>e.shutdown()),e.started=!0})()}writeSequenceNumber(e){this.setItem(this.ur,JSON.stringify(e))}getAllActiveQueryTargets(){return this.gr(this.sr)}isActiveQueryTarget(e){let t=!1;return this.sr.forEach((r,i)=>{i.activeTargetIds.has(e)&&(t=!0)}),t}addPendingMutation(e){this.yr(e,"pending")}updateMutationState(e,t,r){this.yr(e,t,r),this.pr(e)}addLocalQueryTarget(e){let t="not-current";if(this.isActiveQueryTarget(e)){const r=this.storage.getItem(fM(this.persistenceKey,e));if(r){const i=EE.Ji(e,r);i&&(t=i.state)}}return this.Ir.Xi(e),this._r(),t}removeLocalQueryTarget(e){this.Ir.Zi(e),this._r()}isLocalQueryTarget(e){return this.Ir.activeTargetIds.has(e)}clearQueryState(e){this.removeItem(fM(this.persistenceKey,e))}updateQueryState(e,t,r){this.Tr(e,t,r)}handleUserChange(e,t,r){t.forEach(i=>{this.pr(i)}),this.currentUser=e,r.forEach(i=>{this.addPendingMutation(i)})}setOnlineState(e){this.Er(e)}notifyBundleLoaded(e){this.Ar(e)}shutdown(){this.started&&(this.window.removeEventListener("storage",this.er),this.removeItem(this.rr),this.started=!1)}getItem(e){const t=this.storage.getItem(e);return Le("SharedClientState","READ",e,t),t}setItem(e,t){Le("SharedClientState","SET",e,t),this.storage.setItem(e,t)}removeItem(e){Le("SharedClientState","REMOVE",e),this.storage.removeItem(e)}nr(e){var t=this;const r=e;if(r.storageArea===this.storage){if(Le("SharedClientState","EVENT",r.key,r.newValue),r.key===this.rr)return void Vr("Received WebStorage notification for local change. Another client might have garbage-collected our state");this.Jn.enqueueRetryable((0,ye.Z)(function*(){if(t.started){if(null!==r.key)if(t.ar.test(r.key)){if(null==r.newValue){const i=t.Rr(r.key);return t.br(i,null)}{const i=t.Pr(r.key,r.newValue);if(i)return t.br(i.clientId,i)}}else if(t.cr.test(r.key)){if(null!==r.newValue){const i=t.Vr(r.key,r.newValue);if(i)return t.vr(i)}}else if(t.hr.test(r.key)){if(null!==r.newValue){const i=t.Sr(r.key,r.newValue);if(i)return t.Dr(i)}}else if(r.key===t.lr){if(null!==r.newValue){const i=t.wr(r.newValue);if(i)return t.mr(i)}}else if(r.key===t.ur){const i=function(a){let l=da.A;if(null!=a)try{const h=JSON.parse(a);xt("number"==typeof h),l=h}catch(h){Vr("SharedClientState","Failed to read sequence number from WebStorage",h)}return l}(r.newValue);i!==da.A&&t.sequenceNumberHandler(i)}else if(r.key===t.dr){const i=t.Cr(r.newValue);yield Promise.all(i.map(a=>t.syncEngine.Nr(a)))}}else t.ir.push(r)}))}}get Ir(){return this.sr.get(this.tr)}_r(){this.setItem(this.rr,this.Ir.Yi())}yr(e,t,r){const i=new rT(this.currentUser,e,t,r),a=ZF(this.persistenceKey,this.currentUser,e);this.setItem(a,i.Yi())}pr(e){const t=ZF(this.persistenceKey,this.currentUser,e);this.removeItem(t)}Er(e){this.storage.setItem(this.lr,JSON.stringify({clientId:this.tr,onlineState:e}))}Tr(e,t,r){const i=fM(this.persistenceKey,e),a=new EE(e,t,r);this.setItem(i,a.Yi())}Ar(e){const t=JSON.stringify(Array.from(e));this.setItem(this.dr,t)}Rr(e){const t=this.ar.exec(e);return t?t[1]:null}Pr(e,t){const r=this.Rr(e);return iT.Ji(r,t)}Vr(e,t){const r=this.cr.exec(e),i=Number(r[1]);return rT.Ji(new $i(void 0!==r[2]?r[2]:null),i,t)}Sr(e,t){const r=this.hr.exec(e),i=Number(r[1]);return EE.Ji(i,t)}wr(e){return pM.Ji(e)}Cr(e){return JSON.parse(e)}vr(e){var t=this;return(0,ye.Z)(function*(){if(e.user.uid===t.currentUser.uid)return t.syncEngine.kr(e.batchId,e.state,e.error);Le("SharedClientState",`Ignoring mutation for non-active user ${e.user.uid}`)})()}Dr(e){return this.syncEngine.Mr(e.targetId,e.state,e.error)}br(e,t){const r=t?this.sr.insert(e,t):this.sr.remove(e),i=this.gr(this.sr),a=this.gr(r),l=[],h=[];return a.forEach(_=>{i.has(_)||l.push(_)}),i.forEach(_=>{a.has(_)||h.push(_)}),this.syncEngine.Or(l,h).then(()=>{this.sr=r})}mr(e){this.sr.get(e.clientId)&&this.onlineStateHandler(e.onlineState)}gr(e){let t=GD();return e.forEach((r,i)=>{t=t.unionWith(i.activeTargetIds)}),t}}class YF{constructor(){this.Fr=new gM,this.$r={},this.onlineStateHandler=null,this.sequenceNumberHandler=null}addPendingMutation(e){}updateMutationState(e,t,r){}addLocalQueryTarget(e){return this.Fr.Xi(e),this.$r[e]||"not-current"}updateQueryState(e,t,r){this.$r[e]=t}removeLocalQueryTarget(e){this.Fr.Zi(e)}isLocalQueryTarget(e){return this.Fr.activeTargetIds.has(e)}clearQueryState(e){delete this.$r[e]}getAllActiveQueryTargets(){return this.Fr.activeTargetIds}isActiveQueryTarget(e){return this.Fr.activeTargetIds.has(e)}start(){return this.Fr=new gM,Promise.resolve()}handleUserChange(e,t,r){}setOnlineState(e){}shutdown(){}writeSequenceNumber(e){}notifyBundleLoaded(e){}}class y${Br(e){}shutdown(){}}class QF{constructor(){this.Lr=()=>this.Ur(),this.qr=()=>this.Gr(),this.Kr=[],this.Qr()}Br(e){this.Kr.push(e)}shutdown(){window.removeEventListener("online",this.Lr),window.removeEventListener("offline",this.qr)}Qr(){window.addEventListener("online",this.Lr),window.addEventListener("offline",this.qr)}Ur(){Le("ConnectivityMonitor","Network connectivity changed: AVAILABLE");for(const e of this.Kr)e(0)}Gr(){Le("ConnectivityMonitor","Network connectivity changed: UNAVAILABLE");for(const e of this.Kr)e(1)}static vt(){return"undefined"!=typeof window&&void 0!==window.addEventListener&&void 0!==window.removeEventListener}}const v$={BatchGetDocuments:"batchGet",Commit:"commit",RunQuery:"runQuery"};class w${constructor(e){this.jr=e.jr,this.Wr=e.Wr}zr(e){this.Hr=e}Jr(e){this.Yr=e}onMessage(e){this.Xr=e}close(){this.Wr()}send(e){this.jr(e)}Zr(){this.Hr()}eo(e){this.Yr(e)}no(e){this.Xr(e)}}class E$ extends class{constructor(e){this.databaseInfo=e,this.databaseId=e.databaseId,this.so=(e.ssl?"https":"http")+"://"+e.host,this.io="projects/"+this.databaseId.projectId+"/databases/"+this.databaseId.database+"/documents"}ro(e,t,r,i,a){const l=this.oo(e,t);Le("RestConnection","Sending: ",l,r);const h={};return this.uo(h,i,a),this.ao(e,l,h,r).then(_=>(Le("RestConnection","Received: ",_),_),_=>{throw Zw("RestConnection",`${e} failed with error: `,_,"url: ",l,"request:",r),_})}co(e,t,r,i,a){return this.ro(e,t,r,i,a)}uo(e,t,r){e["X-Goog-Api-Client"]="gl-js/ fire/"+I_,e["Content-Type"]="text/plain",this.databaseInfo.appId&&(e["X-Firebase-GMPID"]=this.databaseInfo.appId),t&&t.headers.forEach((i,a)=>e[a]=i),r&&r.headers.forEach((i,a)=>e[a]=i)}oo(e,t){return`${this.so}/v1/${t}:${v$[e]}`}}{constructor(e){super(e),this.forceLongPolling=e.forceLongPolling,this.autoDetectLongPolling=e.autoDetectLongPolling,this.useFetchStreams=e.useFetchStreams}ao(e,t,r,i){return new Promise((a,l)=>{const h=new Ej;h.listenOnce(yj.COMPLETE,()=>{try{switch(h.getLastErrorCode()){case xR.NO_ERROR:const w=h.getResponseJson();Le("Connection","XHR received:",JSON.stringify(w)),a(w);break;case xR.TIMEOUT:Le("Connection",'RPC "'+e+'" timed out'),l(new Ne(de.DEADLINE_EXCEEDED,"Request time out"));break;case xR.HTTP_ERROR:const D=h.getStatus();if(Le("Connection",'RPC "'+e+'" failed with status:',D,"response text:",h.getResponseText()),D>0){const S=h.getResponseJson().error;if(S&&S.status&&S.message){const N=function(L){const j=L.toLowerCase().replace(/_/g,"-");return Object.values(de).indexOf(j)>=0?j:de.UNKNOWN}(S.status);l(new Ne(N,S.message))}else l(new Ne(de.UNKNOWN,"Server responded with status "+h.getStatus()))}else l(new Ne(de.UNAVAILABLE,"Connection failed."));break;default:st()}}finally{Le("Connection",'RPC "'+e+'" completed.')}});const _=JSON.stringify(i);h.send(t,"POST",_,r,15)})}ho(e,t,r){const i=[this.so,"/","google.firestore.v1.Firestore","/",e,"/channel"],a=mj(),l=_j(),h={httpSessionIdParam:"gsessionid",initMessageHeaders:{},messageUrlParams:{database:`projects/${this.databaseId.projectId}/databases/${this.databaseId.database}`},sendRawJson:!0,supportsCrossDomainXhr:!0,internalChannelParams:{forwardChannelRequestTimeoutMs:6e5},forceLongPolling:this.forceLongPolling,detectBufferingProxy:this.autoDetectLongPolling};this.useFetchStreams&&(h.xmlHttpFactory=new wj({})),this.uo(h.initMessageHeaders,t,r),(0,k.uI)()||(0,k.b$)()||(0,k.d)()||(0,k.w1)()||(0,k.Mn)()||(0,k.ru)()||(h.httpHeadersOverwriteParam="$httpHeaders");const _=i.join("");Le("Connection","Creating WebChannel: "+_,h);const w=a.createWebChannel(_,h);let D=!1,S=!1;const N=new w$({jr:j=>{S?Le("Connection","Not sending because WebChannel is closed:",j):(D||(Le("Connection","Opening WebChannel transport."),w.open(),D=!0),Le("Connection","WebChannel sending:",j),w.send(j))},Wr:()=>w.close()}),L=(j,fe,Me)=>{j.listen(fe,et=>{try{Me(et)}catch(We){setTimeout(()=>{throw We},0)}})};return L(w,ND.EventType.OPEN,()=>{S||Le("Connection","WebChannel transport opened.")}),L(w,ND.EventType.CLOSE,()=>{S||(S=!0,Le("Connection","WebChannel transport closed"),N.eo())}),L(w,ND.EventType.ERROR,j=>{S||(S=!0,Zw("Connection","WebChannel transport errored:",j),N.eo(new Ne(de.UNAVAILABLE,"The operation could not be completed")))}),L(w,ND.EventType.MESSAGE,j=>{var fe;if(!S){const Me=j.data[0];xt(!!Me);const et=Me,We=et.error||(null===(fe=et[0])||void 0===fe?void 0:fe.error);if(We){Le("Connection","WebChannel received error:",We);const wt=We.status;let tt=function(Pt){const Ro=Br[Pt];if(void 0!==Ro)return z1(Ro)}(wt),Nt=We.message;void 0===tt&&(tt=de.INTERNAL,Nt="Unknown error status: "+wt+" with message "+We.message),S=!0,N.eo(new Ne(tt,Nt)),w.close()}else Le("Connection","WebChannel received:",Me),N.no(Me)}}),L(l,vj.STAT_EVENT,j=>{j.stat===i1.PROXY?Le("Connection","Detected buffering proxy"):j.stat===i1.NOPROXY&&Le("Connection","Detected no buffering proxy")}),setTimeout(()=>{N.Zr()},0),N}}function JF(){return"undefined"!=typeof window?window:null}function sT(){return"undefined"!=typeof document?document:null}function CE(n){return new lH(n,!0)}class _M{constructor(e,t,r=1e3,i=1.5,a=6e4){this.Jn=e,this.timerId=t,this.lo=r,this.fo=i,this._o=a,this.wo=0,this.mo=null,this.yo=Date.now(),this.reset()}reset(){this.wo=0}po(){this.wo=this._o}Io(e){this.cancel();const t=Math.floor(this.wo+this.To()),r=Math.max(0,Date.now()-this.yo),i=Math.max(0,t-r);i>0&&Le("ExponentialBackoff",`Backing off for ${i} ms (base delay: ${this.wo} ms, delay with jitter: ${t} ms, last attempt: ${r} ms ago)`),this.mo=this.Jn.enqueueAfterDelay(this.timerId,i,()=>(this.yo=Date.now(),e())),this.wo*=this.fo,this.wo<this.lo&&(this.wo=this.lo),this.wo>this._o&&(this.wo=this._o)}Eo(){null!==this.mo&&(this.mo.skipDelay(),this.mo=null)}cancel(){null!==this.mo&&(this.mo.cancel(),this.mo=null)}To(){return(Math.random()-.5)*this.wo}}class XF{constructor(e,t,r,i,a,l,h,_){this.Jn=e,this.Ao=r,this.Ro=i,this.bo=a,this.authCredentialsProvider=l,this.appCheckCredentialsProvider=h,this.listener=_,this.state=0,this.Po=0,this.Vo=null,this.vo=null,this.stream=null,this.So=new _M(e,t)}Do(){return 1===this.state||5===this.state||this.Co()}Co(){return 2===this.state||3===this.state}start(){4!==this.state?this.auth():this.xo()}stop(){var e=this;return(0,ye.Z)(function*(){e.Do()&&(yield e.close(0))})()}No(){this.state=0,this.So.reset()}ko(){this.Co()&&null===this.Vo&&(this.Vo=this.Jn.enqueueAfterDelay(this.Ao,6e4,()=>this.Mo()))}Oo(e){this.Fo(),this.stream.send(e)}Mo(){var e=this;return(0,ye.Z)(function*(){if(e.Co())return e.close(0)})()}Fo(){this.Vo&&(this.Vo.cancel(),this.Vo=null)}$o(){this.vo&&(this.vo.cancel(),this.vo=null)}close(e,t){var r=this;return(0,ye.Z)(function*(){r.Fo(),r.$o(),r.So.cancel(),r.Po++,4!==e?r.So.reset():t&&t.code===de.RESOURCE_EXHAUSTED?(Vr(t.toString()),Vr("Using maximum backoff delay to prevent overloading the backend."),r.So.po()):t&&t.code===de.UNAUTHENTICATED&&3!==r.state&&(r.authCredentialsProvider.invalidateToken(),r.appCheckCredentialsProvider.invalidateToken()),null!==r.stream&&(r.Bo(),r.stream.close(),r.stream=null),r.state=e,yield r.listener.Jr(t)})()}Bo(){}auth(){this.state=1;const e=this.Lo(this.Po),t=this.Po;Promise.all([this.authCredentialsProvider.getToken(),this.appCheckCredentialsProvider.getToken()]).then(([r,i])=>{this.Po===t&&this.Uo(r,i)},r=>{e(()=>{const i=new Ne(de.UNKNOWN,"Fetching auth token failed: "+r.message);return this.qo(i)})})}Uo(e,t){const r=this.Lo(this.Po);this.stream=this.Go(e,t),this.stream.zr(()=>{r(()=>(this.state=2,this.vo=this.Jn.enqueueAfterDelay(this.Ro,1e4,()=>(this.Co()&&(this.state=3),Promise.resolve())),this.listener.zr()))}),this.stream.Jr(i=>{r(()=>this.qo(i))}),this.stream.onMessage(i=>{r(()=>this.onMessage(i))})}xo(){var e=this;this.state=5,this.So.Io((0,ye.Z)(function*(){e.state=0,e.start()}))}qo(e){return Le("PersistentStream",`close with error: ${e}`),this.stream=null,this.close(4,e)}Lo(e){return t=>{this.Jn.enqueueAndForget(()=>this.Po===e?t():(Le("PersistentStream","stream callback skipped by getCloseGuardedDispatcher."),Promise.resolve()))}}}class C$ extends XF{constructor(e,t,r,i,a,l){super(e,"listen_stream_connection_backoff","listen_stream_idle","health_check_timeout",t,r,i,l),this.M=a}Go(e,t){return this.bo.ho("Listen",e,t)}onMessage(e){this.So.reset();const t=function hH(n,e){let t;if("targetChange"in e){const r="NO_CHANGE"===(_=e.targetChange.targetChangeType||"NO_CHANGE")?0:"ADD"===_?1:"REMOVE"===_?2:"CURRENT"===_?3:"RESET"===_?4:st(),i=e.targetChange.targetIds||[],a=function(_,w){return _.N?(xt(void 0===w||"string"==typeof w),ei.fromBase64String(w||"")):(xt(void 0===w||w instanceof Uint8Array),ei.fromUint8Array(w||new Uint8Array))}(n,e.targetChange.resumeToken),l=e.targetChange.cause,h=l&&function(_){const w=void 0===_.code?de.UNKNOWN:z1(_.code);return new Ne(w,_.message||"")}(l);t=new Y1(r,i,a,h||null)}else if("documentChange"in e){const r=e.documentChange,i=xl(n,r.document.name),a=Ei(r.document.updateTime),l=new ps({mapValue:{fields:r.document.fields}}),h=zn.newFoundDocument(i,a,l);t=new WD(r.targetIds||[],r.removedTargetIds||[],h.key,h)}else if("documentDelete"in e){const r=e.documentDelete,i=xl(n,r.document),a=r.readTime?Ei(r.readTime):Dt.min(),l=zn.newNoDocument(i,a);t=new WD([],r.removedTargetIds||[],l.key,l)}else if("documentRemove"in e){const r=e.documentRemove,i=xl(n,r.document);t=new WD([],r.removedTargetIds||[],i,null)}else{if(!("filter"in e))return st();{const r=e.filter,a=new eH(r.count||0);t=new Z1(r.targetId,a)}}var _;return t}(this.M,e),r=function(i){if(!("targetChange"in i))return Dt.min();const a=i.targetChange;return a.targetIds&&a.targetIds.length?Dt.min():a.readTime?Ei(a.readTime):Dt.min()}(e);return this.listener.Ko(t,r)}Qo(e){const t={};t.database=fE(this.M),t.addTarget=function(i,a){let l;const h=a.target;return l=FD(h)?{documents:oF(i,h)}:{query:aF(i,h)},l.targetId=a.targetId,a.resumeToken.approximateByteSize()>0?l.resumeToken=eF(i,a.resumeToken):a.snapshotVersion.compareTo(Dt.min())>0&&(l.readTime=dE(i,a.snapshotVersion.toTimestamp())),l}(this.M,e);const r=function pH(n,e){const t=function(r,i){switch(i){case 0:return null;case 1:return"existence-filter-mismatch";case 2:return"limbo-document";default:return st()}}(0,e.purpose);return null==t?null:{"goog-listen-tags":t}}(0,e);r&&(t.labels=r),this.Oo(t)}jo(e){const t={};t.database=fE(this.M),t.removeTarget=e,this.Oo(t)}}class I$ extends XF{constructor(e,t,r,i,a,l){super(e,"write_stream_connection_backoff","write_stream_idle","health_check_timeout",t,r,i,l),this.M=a,this.Wo=!1}get zo(){return this.Wo}start(){this.Wo=!1,this.lastStreamToken=void 0,super.start()}Bo(){this.Wo&&this.Ho([])}Go(e,t){return this.bo.ho("Write",e,t)}onMessage(e){if(xt(!!e.streamToken),this.lastStreamToken=e.streamToken,this.Wo){this.So.reset();const t=function fH(n,e){return n&&n.length>0?(xt(void 0!==e),n.map(t=>function(r,i){let a=Ei(r.updateTime?r.updateTime:i);return a.isEqual(Dt.min())&&(a=Ei(i)),new Qj(a,r.transformResults||[])}(t,e))):[]}(e.writeResults,e.commitTime),r=Ei(e.commitTime);return this.listener.Jo(r,t)}return xt(!e.writeResults||0===e.writeResults.length),this.Wo=!0,this.listener.Yo()}Xo(){const e={};e.database=fE(this.M),this.Oo(e)}Ho(e){const t={streamToken:this.lastStreamToken,writes:e.map(r=>pE(this.M,r))};this.Oo(t)}}class b$ extends class{}{constructor(e,t,r,i){super(),this.authCredentials=e,this.appCheckCredentials=t,this.bo=r,this.M=i,this.Zo=!1}tu(){if(this.Zo)throw new Ne(de.FAILED_PRECONDITION,"The client has already been terminated.")}ro(e,t,r){return this.tu(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(([i,a])=>this.bo.ro(e,t,r,i,a)).catch(i=>{throw"FirebaseError"===i.name?(i.code===de.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),i):new Ne(de.UNKNOWN,i.toString())})}co(e,t,r){return this.tu(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(([i,a])=>this.bo.co(e,t,r,i,a)).catch(i=>{throw"FirebaseError"===i.name?(i.code===de.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),i):new Ne(de.UNKNOWN,i.toString())})}terminate(){this.Zo=!0}}class D${constructor(e,t){this.asyncQueue=e,this.onlineStateHandler=t,this.state="Unknown",this.eu=0,this.nu=null,this.su=!0}iu(){0===this.eu&&(this.ru("Unknown"),this.nu=this.asyncQueue.enqueueAfterDelay("online_state_timeout",1e4,()=>(this.nu=null,this.ou("Backend didn't respond within 10 seconds."),this.ru("Offline"),Promise.resolve())))}uu(e){"Online"===this.state?this.ru("Unknown"):(this.eu++,this.eu>=1&&(this.au(),this.ou(`Connection failed 1 times. Most recent error: ${e.toString()}`),this.ru("Offline")))}set(e){this.au(),this.eu=0,"Online"===e&&(this.su=!1),this.ru(e)}ru(e){e!==this.state&&(this.state=e,this.onlineStateHandler(e))}ou(e){const t=`Could not reach Cloud Firestore backend. ${e}\nThis typically indicates that your device does not have a healthy Internet connection at the moment. The client will operate in offline mode until it is able to successfully connect to the backend.`;this.su?(Vr(t),this.su=!1):Le("OnlineStateTracker",t)}au(){null!==this.nu&&(this.nu.cancel(),this.nu=null)}}class T${constructor(e,t,r,i,a){var l=this;this.localStore=e,this.datastore=t,this.asyncQueue=r,this.remoteSyncer={},this.cu=[],this.hu=new Map,this.lu=new Set,this.fu=[],this.du=a,this.du.Br(h=>{r.enqueueAndForget((0,ye.Z)(function*(){var _;Kh(l)&&(Le("RemoteStore","Restarting streams for network reachability change."),yield(_=(0,ye.Z)(function*(w){const D=ze(w);D.lu.add(4),yield $_(D),D._u.set("Unknown"),D.lu.delete(4),yield IE(D)}),function(w){return _.apply(this,arguments)})(l))}))}),this._u=new D$(r,i)}}function IE(n){return yM.apply(this,arguments)}function yM(){return yM=(0,ye.Z)(function*(n){if(Kh(n))for(const e of n.fu)yield e(!0)}),yM.apply(this,arguments)}function $_(n){return vM.apply(this,arguments)}function vM(){return vM=(0,ye.Z)(function*(n){for(const e of n.fu)yield e(!1)}),vM.apply(this,arguments)}function oT(n,e){const t=ze(n);t.hu.has(e.targetId)||(t.hu.set(e.targetId,e),CM(t)?EM(t):W_(t).Co()&&wM(t,e))}function bE(n,e){const t=ze(n),r=W_(t);t.hu.delete(e),r.Co()&&eL(t,e),0===t.hu.size&&(r.Co()?r.ko():Kh(t)&&t._u.set("Unknown"))}function wM(n,e){n.wu.Z(e.targetId),W_(n).Qo(e)}function eL(n,e){n.wu.Z(e),W_(n).jo(e)}function EM(n){n.wu=new oH({getRemoteKeysForTarget:e=>n.remoteSyncer.getRemoteKeysForTarget(e),Et:e=>n.hu.get(e)||null}),W_(n).start(),n._u.iu()}function CM(n){return Kh(n)&&!W_(n).Do()&&n.hu.size>0}function Kh(n){return 0===ze(n).lu.size}function tL(n){n.wu=void 0}function S$(n){return IM.apply(this,arguments)}function IM(){return IM=(0,ye.Z)(function*(n){n.hu.forEach((e,t)=>{wM(n,e)})}),IM.apply(this,arguments)}function A$(n,e){return bM.apply(this,arguments)}function bM(){return bM=(0,ye.Z)(function*(n,e){tL(n),CM(n)?(n._u.uu(e),EM(n)):n._u.set("Unknown")}),bM.apply(this,arguments)}function x$(n,e,t){return DM.apply(this,arguments)}function DM(){return DM=(0,ye.Z)(function*(n,e,t){if(n._u.set("Online"),e instanceof Y1&&2===e.state&&e.cause)try{yield(r=(0,ye.Z)(function*(i,a){const l=a.cause;for(const h of a.targetIds)i.hu.has(h)&&(yield i.remoteSyncer.rejectListen(h,l),i.hu.delete(h),i.wu.removeTarget(h))}),function(i,a){return r.apply(this,arguments)})(n,e)}catch(r){Le("RemoteStore","Failed to remove targets %s: %s ",e.targetIds.join(","),r),yield aT(n,r)}else if(e instanceof WD?n.wu.ut(e):e instanceof Z1?n.wu._t(e):n.wu.ht(e),!t.isEqual(Dt.min()))try{const r=yield $F(n.localStore);t.compareTo(r)>=0&&(yield function(i,a){const l=i.wu.yt(a);return l.targetChanges.forEach((h,_)=>{if(h.resumeToken.approximateByteSize()>0){const w=i.hu.get(_);w&&i.hu.set(_,w.withResumeToken(h.resumeToken,a))}}),l.targetMismatches.forEach(h=>{const _=i.hu.get(h);if(!_)return;i.hu.set(h,_.withResumeToken(ei.EMPTY_BYTE_STRING,_.snapshotVersion)),eL(i,h);const w=new Gh(_.target,h,1,_.sequenceNumber);wM(i,w)}),i.remoteSyncer.applyRemoteEvent(l)}(n,t))}catch(r){Le("RemoteStore","Failed to raise snapshot:",r),yield aT(n,r)}var r}),DM.apply(this,arguments)}function aT(n,e,t){return TM.apply(this,arguments)}function TM(){return TM=(0,ye.Z)(function*(n,e,t){if(!Yp(e))throw e;n.lu.add(1),yield $_(n),n._u.set("Offline"),t||(t=()=>$F(n.localStore)),n.asyncQueue.enqueueRetryable((0,ye.Z)(function*(){Le("RemoteStore","Retrying IndexedDB access"),yield t(),n.lu.delete(1),yield IE(n)}))}),TM.apply(this,arguments)}function nL(n,e){return e().catch(t=>aT(n,t,e))}function G_(n){return SM.apply(this,arguments)}function SM(){return SM=(0,ye.Z)(function*(n){const e=ze(n),t=Zh(e);let r=e.cu.length>0?e.cu[e.cu.length-1].batchId:-1;for(;R$(e);)try{const i=yield a$(e.localStore,r);if(null===i){0===e.cu.length&&t.ko();break}r=i.batchId,M$(e,i)}catch(i){yield aT(e,i)}rL(e)&&iL(e)}),SM.apply(this,arguments)}function R$(n){return Kh(n)&&n.cu.length<10}function M$(n,e){n.cu.push(e);const t=Zh(n);t.Co()&&t.zo&&t.Ho(e.mutations)}function rL(n){return Kh(n)&&!Zh(n).Do()&&n.cu.length>0}function iL(n){Zh(n).start()}function N$(n){return AM.apply(this,arguments)}function AM(){return AM=(0,ye.Z)(function*(n){Zh(n).Xo()}),AM.apply(this,arguments)}function P$(n){return xM.apply(this,arguments)}function xM(){return xM=(0,ye.Z)(function*(n){const e=Zh(n);for(const t of n.cu)e.Ho(t.mutations)}),xM.apply(this,arguments)}function k$(n,e,t){return RM.apply(this,arguments)}function RM(){return RM=(0,ye.Z)(function*(n,e,t){const r=n.cu.shift(),i=ZR.from(r,e,t);yield nL(n,()=>n.remoteSyncer.applySuccessfulWrite(i)),yield G_(n)}),RM.apply(this,arguments)}function O$(n,e){return MM.apply(this,arguments)}function MM(){return MM=(0,ye.Z)(function*(n,e){var t;e&&Zh(n).zo&&(yield(t=(0,ye.Z)(function*(r,i){if(q1(a=i.code)&&a!==de.ABORTED){const l=r.cu.shift();Zh(r).No(),yield nL(r,()=>r.remoteSyncer.rejectFailedWrite(l.batchId,i)),yield G_(r)}var a}),function(r,i){return t.apply(this,arguments)})(n,e)),rL(n)&&iL(n)}),MM.apply(this,arguments)}function sL(n,e){return NM.apply(this,arguments)}function NM(){return NM=(0,ye.Z)(function*(n,e){const t=ze(n);t.asyncQueue.verifyOperationInProgress(),Le("RemoteStore","RemoteStore received new credentials");const r=Kh(t);t.lu.add(3),yield $_(t),r&&t._u.set("Unknown"),yield t.remoteSyncer.handleCredentialChange(e),t.lu.delete(3),yield IE(t)}),NM.apply(this,arguments)}function PM(n,e){return kM.apply(this,arguments)}function kM(){return kM=(0,ye.Z)(function*(n,e){const t=ze(n);e?(t.lu.delete(2),yield IE(t)):e||(t.lu.add(2),yield $_(t),t._u.set("Unknown"))}),kM.apply(this,arguments)}function W_(n){return n.mu||(n.mu=function(e,t,r){const i=ze(e);return i.tu(),new C$(t,i.bo,i.authCredentials,i.appCheckCredentials,i.M,r)}(n.datastore,n.asyncQueue,{zr:S$.bind(null,n),Jr:A$.bind(null,n),Ko:x$.bind(null,n)}),n.fu.push(function(){var e=(0,ye.Z)(function*(t){t?(n.mu.No(),CM(n)?EM(n):n._u.set("Unknown")):(yield n.mu.stop(),tL(n))});return function(t){return e.apply(this,arguments)}}())),n.mu}function Zh(n){return n.gu||(n.gu=function(e,t,r){const i=ze(e);return i.tu(),new I$(t,i.bo,i.authCredentials,i.appCheckCredentials,i.M,r)}(n.datastore,n.asyncQueue,{zr:N$.bind(null,n),Jr:O$.bind(null,n),Yo:P$.bind(null,n),Jo:k$.bind(null,n)}),n.fu.push(function(){var e=(0,ye.Z)(function*(t){t?(n.gu.No(),yield G_(n)):(yield n.gu.stop(),n.cu.length>0&&(Le("RemoteStore",`Stopping write stream with ${n.cu.length} pending writes`),n.cu=[]))});return function(t){return e.apply(this,arguments)}}())),n.gu}class OM{constructor(e,t,r,i,a){this.asyncQueue=e,this.timerId=t,this.targetTimeMs=r,this.op=i,this.removalCallback=a,this.deferred=new vi,this.then=this.deferred.promise.then.bind(this.deferred.promise),this.deferred.promise.catch(l=>{})}static createAndSchedule(e,t,r,i,a){const l=Date.now()+r,h=new OM(e,t,l,i,a);return h.start(r),h}start(e){this.timerHandle=setTimeout(()=>this.handleDelayElapsed(),e)}skipDelay(){return this.handleDelayElapsed()}cancel(e){null!==this.timerHandle&&(this.clearTimeout(),this.deferred.reject(new Ne(de.CANCELLED,"Operation cancelled"+(e?": "+e:""))))}handleDelayElapsed(){this.asyncQueue.enqueueAndForget(()=>null!==this.timerHandle?(this.clearTimeout(),this.op().then(e=>this.deferred.resolve(e))):Promise.resolve())}clearTimeout(){null!==this.timerHandle&&(this.removalCallback(this),clearTimeout(this.timerHandle),this.timerHandle=null)}}function q_(n,e){if(Vr("AsyncQueue",`${e}: ${n}`),Yp(n))return new Ne(de.UNAVAILABLE,`${e}: ${n}`);throw n}class z_{constructor(e){this.comparator=e?(t,r)=>e(t,r)||Ge.comparator(t.key,r.key):(t,r)=>Ge.comparator(t.key,r.key),this.keyedMap=$R(),this.sortedSet=new Mr(this.comparator)}static emptySet(e){return new z_(e.comparator)}has(e){return null!=this.keyedMap.get(e)}get(e){return this.keyedMap.get(e)}first(){return this.sortedSet.minKey()}last(){return this.sortedSet.maxKey()}isEmpty(){return this.sortedSet.isEmpty()}indexOf(e){const t=this.keyedMap.get(e);return t?this.sortedSet.indexOf(t):-1}get size(){return this.sortedSet.size}forEach(e){this.sortedSet.inorderTraversal((t,r)=>(e(t),!1))}add(e){const t=this.delete(e.key);return t.copy(t.keyedMap.insert(e.key,e),t.sortedSet.insert(e,null))}delete(e){const t=this.get(e);return t?this.copy(this.keyedMap.remove(e),this.sortedSet.remove(t)):this}isEqual(e){if(!(e instanceof z_)||this.size!==e.size)return!1;const t=this.sortedSet.getIterator(),r=e.sortedSet.getIterator();for(;t.hasNext();){const i=t.getNext().key,a=r.getNext().key;if(!i.isEqual(a))return!1}return!0}toString(){const e=[];return this.forEach(t=>{e.push(t.toString())}),0===e.length?"DocumentSet ()":"DocumentSet (\n  "+e.join("  \n")+"\n)"}copy(e,t){const r=new z_;return r.comparator=this.comparator,r.keyedMap=e,r.sortedSet=t,r}}class oL{constructor(){this.yu=new Mr(Ge.comparator)}track(e){const t=e.doc.key,r=this.yu.get(t);r?0!==e.type&&3===r.type?this.yu=this.yu.insert(t,e):3===e.type&&1!==r.type?this.yu=this.yu.insert(t,{type:r.type,doc:e.doc}):2===e.type&&2===r.type?this.yu=this.yu.insert(t,{type:2,doc:e.doc}):2===e.type&&0===r.type?this.yu=this.yu.insert(t,{type:0,doc:e.doc}):1===e.type&&0===r.type?this.yu=this.yu.remove(t):1===e.type&&2===r.type?this.yu=this.yu.insert(t,{type:1,doc:r.doc}):0===e.type&&1===r.type?this.yu=this.yu.insert(t,{type:2,doc:e.doc}):st():this.yu=this.yu.insert(t,e)}pu(){const e=[];return this.yu.inorderTraversal((t,r)=>{e.push(r)}),e}}class K_{constructor(e,t,r,i,a,l,h,_){this.query=e,this.docs=t,this.oldDocs=r,this.docChanges=i,this.mutatedKeys=a,this.fromCache=l,this.syncStateChanged=h,this.excludesMetadataChanges=_}static fromInitialDocuments(e,t,r,i){const a=[];return t.forEach(l=>{a.push({type:0,doc:l})}),new K_(e,t,z_.emptySet(t),a,r,i,!0,!1)}get hasPendingWrites(){return!this.mutatedKeys.isEmpty()}isEqual(e){if(!(this.fromCache===e.fromCache&&this.syncStateChanged===e.syncStateChanged&&this.mutatedKeys.isEqual(e.mutatedKeys)&&iE(this.query,e.query)&&this.docs.isEqual(e.docs)&&this.oldDocs.isEqual(e.oldDocs)))return!1;const t=this.docChanges,r=e.docChanges;if(t.length!==r.length)return!1;for(let i=0;i<t.length;i++)if(t[i].type!==r[i].type||!t[i].doc.isEqual(r[i].doc))return!1;return!0}}class F${constructor(){this.Iu=void 0,this.listeners=[]}}class L${constructor(){this.queries=new $h(e=>R1(e),iE),this.onlineState="Unknown",this.Tu=new Set}}function FM(n,e){return LM.apply(this,arguments)}function LM(){return LM=(0,ye.Z)(function*(n,e){const t=ze(n),r=e.query;let i=!1,a=t.queries.get(r);if(a||(i=!0,a=new F$),i)try{a.Iu=yield t.onListen(r)}catch(l){const h=q_(l,`Initialization of query '${UR(e.query)}' failed`);return void e.onError(h)}t.queries.set(r,a),a.listeners.push(e),e.Eu(t.onlineState),a.Iu&&e.Au(a.Iu)&&BM(t)}),LM.apply(this,arguments)}function VM(n,e){return UM.apply(this,arguments)}function UM(){return UM=(0,ye.Z)(function*(n,e){const t=ze(n),r=e.query;let i=!1;const a=t.queries.get(r);if(a){const l=a.listeners.indexOf(e);l>=0&&(a.listeners.splice(l,1),i=0===a.listeners.length)}if(i)return t.queries.delete(r),t.onUnlisten(r)}),UM.apply(this,arguments)}function V$(n,e){const t=ze(n);let r=!1;for(const i of e){const l=t.queries.get(i.query);if(l){for(const h of l.listeners)h.Au(i)&&(r=!0);l.Iu=i}}r&&BM(t)}function U$(n,e,t){const r=ze(n),i=r.queries.get(e);if(i)for(const a of i.listeners)a.onError(t);r.queries.delete(e)}function BM(n){n.Tu.forEach(e=>{e.next()})}class jM{constructor(e,t,r){this.query=e,this.Ru=t,this.bu=!1,this.Pu=null,this.onlineState="Unknown",this.options=r||{}}Au(e){if(!this.options.includeMetadataChanges){const r=[];for(const i of e.docChanges)3!==i.type&&r.push(i);e=new K_(e.query,e.docs,e.oldDocs,r,e.mutatedKeys,e.fromCache,e.syncStateChanged,!0)}let t=!1;return this.bu?this.Vu(e)&&(this.Ru.next(e),t=!0):this.vu(e,this.onlineState)&&(this.Su(e),t=!0),this.Pu=e,t}onError(e){this.Ru.error(e)}Eu(e){this.onlineState=e;let t=!1;return this.Pu&&!this.bu&&this.vu(this.Pu,e)&&(this.Su(this.Pu),t=!0),t}vu(e,t){return!e.fromCache||!(this.options.Du&&"Offline"!==t||e.docs.isEmpty()&&"Offline"!==t)}Vu(e){return e.docChanges.length>0||!!(e.syncStateChanged||this.Pu&&this.Pu.hasPendingWrites!==e.hasPendingWrites)&&!0===this.options.includeMetadataChanges}Su(e){e=K_.fromInitialDocuments(e.query,e.docs,e.mutatedKeys,e.fromCache),this.bu=!0,this.Ru.next(e)}}class B${constructor(e,t){this.payload=e,this.byteLength=t}Cu(){return"metadata"in this.payload}}class aL{constructor(e){this.M=e}li(e){return xl(this.M,e)}fi(e){return e.metadata.exists?sF(this.M,e.document,!1):zn.newNoDocument(this.li(e.metadata.name),this.di(e.metadata.readTime))}di(e){return Ei(e)}}class j${constructor(e,t,r){this.xu=e,this.localStore=t,this.M=r,this.queries=[],this.documents=[],this.collectionGroups=new Set,this.progress=uL(e)}Nu(e){this.progress.bytesLoaded+=e.byteLength;let t=this.progress.documentsLoaded;if(e.payload.namedQuery)this.queries.push(e.payload.namedQuery);else if(e.payload.documentMetadata){this.documents.push({metadata:e.payload.documentMetadata}),e.payload.documentMetadata.exists||++t;const r=un.fromString(e.payload.documentMetadata.name);this.collectionGroups.add(r.get(r.length-2))}else e.payload.document&&(this.documents[this.documents.length-1].document=e.payload.document,++t);return t!==this.progress.documentsLoaded?(this.progress.documentsLoaded=t,Object.assign({},this.progress)):null}ku(e){const t=new Map,r=new aL(this.M);for(const i of e)if(i.metadata.queries){const a=r.li(i.metadata.name);for(const l of i.metadata.queries){const h=(t.get(l)||En()).add(a);t.set(l,h)}}return t}complete(){var e=this;return(0,ye.Z)(function*(){const t=yield function u$(n,e,t,r){return lM.apply(this,arguments)}(e.localStore,new aL(e.M),e.documents,e.xu.id),r=e.ku(e.documents);for(const i of e.queries)yield l$(e.localStore,i,r.get(i.name));return e.progress.taskState="Success",{progress:e.progress,Mu:e.collectionGroups,Ou:t}})()}}function uL(n){return{taskState:"Running",documentsLoaded:0,bytesLoaded:0,totalDocuments:n.totalDocuments,totalBytes:n.totalBytes}}class lL{constructor(e){this.key=e}}class cL{constructor(e){this.key=e}}class dL{constructor(e,t){this.query=e,this.Fu=t,this.$u=null,this.current=!1,this.Bu=En(),this.mutatedKeys=En(),this.Lu=N1(e),this.Uu=new z_(this.Lu)}get qu(){return this.Fu}Gu(e,t){const r=t?t.Ku:new oL,i=t?t.Uu:this.Uu;let a=t?t.mutatedKeys:this.mutatedKeys,l=i,h=!1;const _=VD(this.query)&&i.size===this.query.limit?i.last():null,w=UD(this.query)&&i.size===this.query.limit?i.first():null;if(e.inorderTraversal((D,S)=>{const N=i.get(D),L=BR(this.query,S)?S:null,j=!!N&&this.mutatedKeys.has(N.key),fe=!!L&&(L.hasLocalMutations||this.mutatedKeys.has(L.key)&&L.hasCommittedMutations);let Me=!1;N&&L?N.data.isEqual(L.data)?j!==fe&&(r.track({type:3,doc:L}),Me=!0):this.Qu(N,L)||(r.track({type:2,doc:L}),Me=!0,(_&&this.Lu(L,_)>0||w&&this.Lu(L,w)<0)&&(h=!0)):!N&&L?(r.track({type:0,doc:L}),Me=!0):N&&!L&&(r.track({type:1,doc:N}),Me=!0,(_||w)&&(h=!0)),Me&&(L?(l=l.add(L),a=fe?a.add(D):a.delete(D)):(l=l.delete(D),a=a.delete(D)))}),VD(this.query)||UD(this.query))for(;l.size>this.query.limit;){const D=VD(this.query)?l.last():l.first();l=l.delete(D.key),a=a.delete(D.key),r.track({type:1,doc:D})}return{Uu:l,Ku:r,ei:h,mutatedKeys:a}}Qu(e,t){return e.hasLocalMutations&&t.hasCommittedMutations&&!t.hasLocalMutations}applyChanges(e,t,r){const i=this.Uu;this.Uu=e.Uu,this.mutatedKeys=e.mutatedKeys;const a=e.Ku.pu();a.sort((w,D)=>function(S,N){const L=j=>{switch(j){case 0:return 1;case 2:case 3:return 2;case 1:return 0;default:return st()}};return L(S)-L(N)}(w.type,D.type)||this.Lu(w.doc,D.doc)),this.ju(r);const l=t?this.Wu():[],h=0===this.Bu.size&&this.current?1:0,_=h!==this.$u;return this.$u=h,0!==a.length||_?{snapshot:new K_(this.query,e.Uu,i,a,e.mutatedKeys,0===h,_,!1),zu:l}:{zu:l}}Eu(e){return this.current&&"Offline"===e?(this.current=!1,this.applyChanges({Uu:this.Uu,Ku:new oL,mutatedKeys:this.mutatedKeys,ei:!1},!1)):{zu:[]}}Hu(e){return!this.Fu.has(e)&&!!this.Uu.has(e)&&!this.Uu.get(e).hasLocalMutations}ju(e){e&&(e.addedDocuments.forEach(t=>this.Fu=this.Fu.add(t)),e.modifiedDocuments.forEach(t=>{}),e.removedDocuments.forEach(t=>this.Fu=this.Fu.delete(t)),this.current=e.current)}Wu(){if(!this.current)return[];const e=this.Bu;this.Bu=En(),this.Uu.forEach(r=>{this.Hu(r.key)&&(this.Bu=this.Bu.add(r.key))});const t=[];return e.forEach(r=>{this.Bu.has(r)||t.push(new cL(r))}),this.Bu.forEach(r=>{e.has(r)||t.push(new lL(r))}),t}Ju(e){this.Fu=e.hi,this.Bu=En();const t=this.Gu(e.documents);return this.applyChanges(t,!0)}Yu(){return K_.fromInitialDocuments(this.query,this.Uu,this.mutatedKeys,0===this.$u)}}class H${constructor(e,t,r){this.query=e,this.targetId=t,this.view=r}}class $${constructor(e){this.key=e,this.Xu=!1}}class G${constructor(e,t,r,i,a,l){this.localStore=e,this.remoteStore=t,this.eventManager=r,this.sharedClientState=i,this.currentUser=a,this.maxConcurrentLimboResolutions=l,this.Zu={},this.ta=new $h(h=>R1(h),iE),this.ea=new Map,this.na=new Set,this.sa=new Mr(Ge.comparator),this.ia=new Map,this.ra=new dM,this.oa={},this.ua=new Map,this.aa=tg.gn(),this.onlineState="Unknown",this.ca=void 0}get isPrimaryClient(){return!0===this.ca}}function W$(n,e){return HM.apply(this,arguments)}function HM(){return HM=(0,ye.Z)(function*(n,e){const t=dN(n);let r,i;const a=t.ta.get(e);if(a)r=a.targetId,t.sharedClientState.addLocalQueryTarget(r),i=a.view.Yu();else{const l=yield j_(t.localStore,$a(e));t.isPrimaryClient&&oT(t.remoteStore,l);const h=t.sharedClientState.addLocalQueryTarget(l.targetId);r=l.targetId,i=yield $M(t,e,r,"current"===h)}return i}),HM.apply(this,arguments)}function $M(n,e,t,r){return GM.apply(this,arguments)}function GM(){return GM=(0,ye.Z)(function*(n,e,t,r){n.ha=(D,S,N)=>{return(L=(0,ye.Z)(function*(j,fe,Me,et){let We=fe.view.Gu(Me);We.ei&&(We=yield nT(j.localStore,fe.query,!1).then(({documents:Nt})=>fe.view.Gu(Nt,We)));const wt=et&&et.targetChanges.get(fe.targetId),tt=fe.view.applyChanges(We,j.isPrimaryClient,wt);return eN(j,fe.targetId,tt.zu),tt.snapshot}),function(j,fe,Me,et){return L.apply(this,arguments)})(n,D,S,N);var L};const i=yield nT(n.localStore,e,!0),a=new dL(e,i.hi),l=a.Gu(i.documents),h=cE.createSynthesizedTargetChangeForCurrentChange(t,r&&"Offline"!==n.onlineState),_=a.applyChanges(l,n.isPrimaryClient,h);eN(n,t,_.zu);const w=new H$(e,t,a);return n.ta.set(e,w),n.ea.has(t)?n.ea.get(t).push(e):n.ea.set(t,[e]),_.snapshot}),GM.apply(this,arguments)}function q$(n,e){return WM.apply(this,arguments)}function WM(){return WM=(0,ye.Z)(function*(n,e){const t=ze(n),r=t.ta.get(e),i=t.ea.get(r.targetId);if(i.length>1)return t.ea.set(r.targetId,i.filter(a=>!iE(a,e))),void t.ta.delete(e);t.isPrimaryClient?(t.sharedClientState.removeLocalQueryTarget(r.targetId),t.sharedClientState.isActiveQueryTarget(r.targetId)||(yield H_(t.localStore,r.targetId,!1).then(()=>{t.sharedClientState.clearQueryState(r.targetId),bE(t.remoteStore,r.targetId),Z_(t,r.targetId)}).catch(ng))):(Z_(t,r.targetId),yield H_(t.localStore,r.targetId,!0))}),WM.apply(this,arguments)}function qM(){return qM=(0,ye.Z)(function*(n,e,t){const r=hN(n);try{const i=yield function(a,l){const h=ze(a),_=Rr.now(),w=l.reduce((S,N)=>S.add(N.key),En());let D;return h.persistence.runTransaction("Locally write mutations","readwrite",S=>h.ai.qs(S,w).next(N=>{D=N;const L=[];for(const j of l){const fe=Xj(j,D.get(j.key));null!=fe&&L.push(new Zp(j.key,fe,C1(fe.value.mapValue),Ur.exists(!0)))}return h.$s.addMutationBatch(S,_,L,l)})).then(S=>(S.applyToLocalDocumentSet(D),{batchId:S.batchId,changes:D}))}(r.localStore,e);r.sharedClientState.addPendingMutation(i.batchId),function(a,l,h){let _=a.oa[a.currentUser.toKey()];_||(_=new Mr(Yt)),_=_.insert(l,h),a.oa[a.currentUser.toKey()]=_}(r,i.batchId,t),yield Qc(r,i.changes),yield G_(r.remoteStore)}catch(i){const a=q_(i,"Failed to persist write");t.reject(a)}}),qM.apply(this,arguments)}function hL(n,e){return zM.apply(this,arguments)}function zM(){return zM=(0,ye.Z)(function*(n,e){const t=ze(n);try{const r=yield o$(t.localStore,e);e.targetChanges.forEach((i,a)=>{const l=t.ia.get(a);l&&(xt(i.addedDocuments.size+i.modifiedDocuments.size+i.removedDocuments.size<=1),i.addedDocuments.size>0?l.Xu=!0:i.modifiedDocuments.size>0?xt(l.Xu):i.removedDocuments.size>0&&(xt(l.Xu),l.Xu=!1))}),yield Qc(t,r,e)}catch(r){yield ng(r)}}),zM.apply(this,arguments)}function fL(n,e,t){const r=ze(n);if(r.isPrimaryClient&&0===t||!r.isPrimaryClient&&1===t){const i=[];r.ta.forEach((a,l)=>{const h=l.view.Eu(e);h.snapshot&&i.push(h.snapshot)}),function(a,l){const h=ze(a);h.onlineState=l;let _=!1;h.queries.forEach((w,D)=>{for(const S of D.listeners)S.Eu(l)&&(_=!0)}),_&&BM(h)}(r.eventManager,e),i.length&&r.Zu.Ko(i),r.onlineState=e,r.isPrimaryClient&&r.sharedClientState.setOnlineState(e)}}function K$(n,e,t){return KM.apply(this,arguments)}function KM(){return KM=(0,ye.Z)(function*(n,e,t){const r=ze(n);r.sharedClientState.updateQueryState(e,"rejected",t);const i=r.ia.get(e),a=i&&i.key;if(a){let l=new Mr(Ge.comparator);l=l.insert(a,zn.newNoDocument(a,Dt.min()));const h=En().add(a),_=new lE(Dt.min(),new Map,new Kn(Yt),l,h);yield hL(r,_),r.sa=r.sa.remove(a),r.ia.delete(e),tN(r)}else yield H_(r.localStore,e,!1).then(()=>Z_(r,e,t)).catch(ng)}),KM.apply(this,arguments)}function Z$(n,e){return ZM.apply(this,arguments)}function ZM(){return ZM=(0,ye.Z)(function*(n,e){const t=ze(n),r=e.batch.batchId;try{const i=yield s$(t.localStore,e);XM(t,r,null),JM(t,r),t.sharedClientState.updateMutationState(r,"acknowledged"),yield Qc(t,i)}catch(i){yield ng(i)}}),ZM.apply(this,arguments)}function Y$(n,e,t){return YM.apply(this,arguments)}function YM(){return YM=(0,ye.Z)(function*(n,e,t){const r=ze(n);try{const i=yield function(a,l){const h=ze(a);return h.persistence.runTransaction("Reject batch","readwrite-primary",_=>{let w;return h.$s.lookupMutationBatch(_,l).next(D=>(xt(null!==D),w=D.keys(),h.$s.removeMutationBatch(_,D))).next(()=>h.$s.performConsistencyCheck(_)).next(()=>h.ai.qs(_,w))})}(r.localStore,e);XM(r,e,t),JM(r,e),r.sharedClientState.updateMutationState(e,"rejected",t),yield Qc(r,i)}catch(i){yield ng(i)}}),YM.apply(this,arguments)}function QM(){return QM=(0,ye.Z)(function*(n,e){const t=ze(n);Kh(t.remoteStore)||Le("SyncEngine","The network is disabled. The task returned by 'awaitPendingWrites()' will not complete until the network is enabled.");try{const r=yield function(a){const l=ze(a);return l.persistence.runTransaction("Get highest unacknowledged batch id","readonly",h=>l.$s.getHighestUnacknowledgedBatchId(h))}(t.localStore);if(-1===r)return void e.resolve();const i=t.ua.get(r)||[];i.push(e),t.ua.set(r,i)}catch(r){const i=q_(r,"Initialization of waitForPendingWrites() operation failed");e.reject(i)}}),QM.apply(this,arguments)}function JM(n,e){(n.ua.get(e)||[]).forEach(t=>{t.resolve()}),n.ua.delete(e)}function XM(n,e,t){const r=ze(n);let i=r.oa[r.currentUser.toKey()];if(i){const a=i.get(e);a&&(t?a.reject(t):a.resolve(),i=i.remove(e)),r.oa[r.currentUser.toKey()]=i}}function Z_(n,e,t=null){n.sharedClientState.removeLocalQueryTarget(e);for(const r of n.ea.get(e))n.ta.delete(r),t&&n.Zu.la(r,t);n.ea.delete(e),n.isPrimaryClient&&n.ra.Ri(e).forEach(r=>{n.ra.containsKey(r)||pL(n,r)})}function pL(n,e){n.na.delete(e.path.canonicalString());const t=n.sa.get(e);null!==t&&(bE(n.remoteStore,t),n.sa=n.sa.remove(e),n.ia.delete(t),tN(n))}function eN(n,e,t){for(const r of t)r instanceof lL?(n.ra.addReference(r.key,e),J$(n,r)):r instanceof cL?(Le("SyncEngine","Document no longer in limbo: "+r.key),n.ra.removeReference(r.key,e),n.ra.containsKey(r.key)||pL(n,r.key)):st()}function J$(n,e){const t=e.key,r=t.path.canonicalString();n.sa.get(t)||n.na.has(r)||(Le("SyncEngine","New document in limbo: "+t),n.na.add(r),tN(n))}function tN(n){for(;n.na.size>0&&n.sa.size<n.maxConcurrentLimboResolutions;){const e=n.na.values().next().value;n.na.delete(e);const t=new Ge(un.fromString(e)),r=n.aa.next();n.ia.set(r,new $$(t)),n.sa=n.sa.insert(t,r),oT(n.remoteStore,new Gh($a(R_(t.path)),r,2,da.A))}}function Qc(n,e,t){return nN.apply(this,arguments)}function nN(){return nN=(0,ye.Z)(function*(n,e,t){const r=ze(n),i=[],a=[],l=[];var h;r.ta.isEmpty()||(r.ta.forEach((h,_)=>{l.push(r.ha(_,e,t).then(w=>{if(w){r.isPrimaryClient&&r.sharedClientState.updateQueryState(_.targetId,w.fromCache?"not-current":"current"),i.push(w);const D=oM.Js(_.targetId,w);a.push(D)}}))}),yield Promise.all(l),r.Zu.Ko(i),yield(h=(0,ye.Z)(function*(_,w){const D=ze(_);try{yield D.persistence.runTransaction("notifyLocalViewChanges","readwrite",S=>ge.forEach(w,N=>ge.forEach(N.zs,L=>D.persistence.referenceDelegate.addReference(S,N.targetId,L)).next(()=>ge.forEach(N.Hs,L=>D.persistence.referenceDelegate.removeReference(S,N.targetId,L)))))}catch(S){if(!Yp(S))throw S;Le("LocalStore","Failed to update sequence numbers: "+S)}for(const S of w){const N=S.targetId;if(!S.fromCache){const L=D.si.get(N),fe=L.withLastLimboFreeSnapshotVersion(L.snapshotVersion);D.si=D.si.insert(N,fe)}}}),function(_,w){return h.apply(this,arguments)})(r.localStore,a))}),nN.apply(this,arguments)}function X$(n,e){return rN.apply(this,arguments)}function rN(){return rN=(0,ye.Z)(function*(n,e){const t=ze(n);if(!t.currentUser.isEqual(e)){Le("SyncEngine","User change. New user:",e.toKey());const r=yield HF(t.localStore,e);t.currentUser=e,(i=t).ua.forEach(l=>{l.forEach(h=>{h.reject(new Ne(de.CANCELLED,"'waitForPendingWrites' promise is rejected due to a user change."))})}),i.ua.clear(),t.sharedClientState.handleUserChange(e,r.removedBatchIds,r.addedBatchIds),yield Qc(t,r.ci)}var i}),rN.apply(this,arguments)}function eG(n,e){const t=ze(n),r=t.ia.get(e);if(r&&r.Xu)return En().add(r.key);{let i=En();const a=t.ea.get(e);if(!a)return i;for(const l of a){const h=t.ta.get(l);i=i.unionWith(h.view.qu)}return i}}function tG(n,e){return iN.apply(this,arguments)}function iN(){return iN=(0,ye.Z)(function*(n,e){const t=ze(n),r=yield nT(t.localStore,e.query,!0),i=e.view.Ju(r);return t.isPrimaryClient&&eN(t,e.targetId,i.zu),i}),iN.apply(this,arguments)}function nG(n,e){return sN.apply(this,arguments)}function sN(){return sN=(0,ye.Z)(function*(n,e){const t=ze(n);return qF(t.localStore,e).then(r=>Qc(t,r))}),sN.apply(this,arguments)}function rG(n,e,t,r){return oN.apply(this,arguments)}function oN(){return oN=(0,ye.Z)(function*(n,e,t,r){const i=ze(n),a=yield function(l,h){const _=ze(l),w=ze(_.$s);return _.persistence.runTransaction("Lookup mutation documents","readonly",D=>w.ln(D,h).next(S=>S?_.ai.qs(D,S):ge.resolve(null)))}(i.localStore,e);var h;null!==a?("pending"===t?yield G_(i.remoteStore):"acknowledged"===t||"rejected"===t?(XM(i,e,r||null),JM(i,e),h=e,ze(ze(i.localStore).$s).dn(h)):st(),yield Qc(i,a)):Le("SyncEngine","Cannot apply mutation batch with id: "+e)}),oN.apply(this,arguments)}function aN(){return aN=(0,ye.Z)(function*(n,e){const t=ze(n);if(dN(t),hN(t),!0===e&&!0!==t.ca){const r=t.sharedClientState.getAllActiveQueryTargets(),i=yield gL(t,r.toArray());t.ca=!0,yield PM(t.remoteStore,!0);for(const a of i)oT(t.remoteStore,a)}else if(!1===e&&!1!==t.ca){const r=[];let i=Promise.resolve();t.ea.forEach((a,l)=>{t.sharedClientState.isLocalQueryTarget(l)?r.push(l):i=i.then(()=>(Z_(t,l),H_(t.localStore,l,!0))),bE(t.remoteStore,l)}),yield i,yield gL(t,r),function(a){const l=ze(a);l.ia.forEach((h,_)=>{bE(l.remoteStore,_)}),l.ra.bi(),l.ia=new Map,l.sa=new Mr(Ge.comparator)}(t),t.ca=!1,yield PM(t.remoteStore,!1)}}),aN.apply(this,arguments)}function gL(n,e,t){return uN.apply(this,arguments)}function uN(){return uN=(0,ye.Z)(function*(n,e,t){const r=ze(n),i=[],a=[];for(const l of e){let h;const _=r.ea.get(l);if(_&&0!==_.length){h=yield j_(r.localStore,$a(_[0]));for(const w of _){const D=r.ta.get(w),S=yield tG(r,D);S.snapshot&&a.push(S.snapshot)}}else{const w=yield WF(r.localStore,l);h=yield j_(r.localStore,w),yield $M(r,mL(w),l,!1)}i.push(h)}return r.Zu.Ko(a),i}),uN.apply(this,arguments)}function mL(n){return A1(n.path,n.collectionGroup,n.orderBy,n.filters,n.limit,"F",n.startAt,n.endAt)}function sG(n){const e=ze(n);return ze(ze(e.localStore).persistence).Os()}function oG(n,e,t,r){return lN.apply(this,arguments)}function lN(){return lN=(0,ye.Z)(function*(n,e,t,r){const i=ze(n);if(i.ca)return void Le("SyncEngine","Ignoring unexpected query state notification.");const a=i.ea.get(e);if(a&&a.length>0)switch(t){case"current":case"not-current":{const l=yield qF(i.localStore,M1(a[0])),h=lE.createSynthesizedRemoteEventForCurrentChange(e,"current"===t);yield Qc(i,l,h);break}case"rejected":yield H_(i.localStore,e,!0),Z_(i,e,r);break;default:st()}}),lN.apply(this,arguments)}function aG(n,e,t){return cN.apply(this,arguments)}function cN(){return cN=(0,ye.Z)(function*(n,e,t){const r=dN(n);if(r.ca){for(const i of e){if(r.ea.has(i)){Le("SyncEngine","Adding an already active target "+i);continue}const a=yield WF(r.localStore,i),l=yield j_(r.localStore,a);yield $M(r,mL(a),l.targetId,!1),oT(r.remoteStore,l)}for(const i of t)r.ea.has(i)&&(yield H_(r.localStore,i,!1).then(()=>{bE(r.remoteStore,i),Z_(r,i)}).catch(ng))}}),cN.apply(this,arguments)}function dN(n){const e=ze(n);return e.remoteStore.remoteSyncer.applyRemoteEvent=hL.bind(null,e),e.remoteStore.remoteSyncer.getRemoteKeysForTarget=eG.bind(null,e),e.remoteStore.remoteSyncer.rejectListen=K$.bind(null,e),e.Zu.Ko=V$.bind(null,e.eventManager),e.Zu.la=U$.bind(null,e.eventManager),e}function hN(n){const e=ze(n);return e.remoteStore.remoteSyncer.applySuccessfulWrite=Z$.bind(null,e),e.remoteStore.remoteSyncer.rejectFailedWrite=Y$.bind(null,e),e}class _L{constructor(){this.synchronizeTabs=!1}initialize(e){var t=this;return(0,ye.Z)(function*(){t.M=CE(e.databaseInfo.databaseId),t.sharedClientState=t.da(e),t.persistence=t._a(e),yield t.persistence.start(),t.gcScheduler=t.wa(e),t.localStore=t.ma(e)})()}wa(e){return null}ma(e){return jF(this.persistence,new BF,e.initialUser,this.M)}_a(e){return new m$(hM.Wi,this.M)}da(e){return new YF}terminate(){var e=this;return(0,ye.Z)(function*(){e.gcScheduler&&e.gcScheduler.stop(),yield e.sharedClientState.shutdown(),yield e.persistence.shutdown()})()}}class yL extends _L{constructor(e,t,r){super(),this.ga=e,this.cacheSizeBytes=t,this.forceOwnership=r,this.synchronizeTabs=!1}initialize(e){var t=()=>super.initialize,r=this;return(0,ye.Z)(function*(){yield t().call(r,e),yield r.ga.initialize(r,e),yield hN(r.ga.syncEngine),yield G_(r.ga.remoteStore),yield r.persistence.Is(()=>(r.gcScheduler&&!r.gcScheduler.started&&r.gcScheduler.start(r.localStore),Promise.resolve()))})()}ma(e){return jF(this.persistence,new BF,e.initialUser,this.M)}wa(e){return new QH(this.persistence.referenceDelegate.garbageCollector,e.asyncQueue)}_a(e){const t=sM(e.databaseInfo.databaseId,e.databaseInfo.persistenceKey),r=void 0!==this.cacheSizeBytes?xo.withCacheSize(this.cacheSizeBytes):xo.DEFAULT;return new iM(this.synchronizeTabs,t,e.clientId,r,e.asyncQueue,JF(),sT(),this.M,this.sharedClientState,!!this.forceOwnership)}da(e){return new YF}}class lG extends yL{constructor(e,t){super(e,t,!1),this.ga=e,this.cacheSizeBytes=t,this.synchronizeTabs=!0}initialize(e){var t=()=>super.initialize,r=this;return(0,ye.Z)(function*(){yield t().call(r,e);const i=r.ga.syncEngine;r.sharedClientState instanceof mM&&(r.sharedClientState.syncEngine={kr:rG.bind(null,i),Mr:oG.bind(null,i),Or:aG.bind(null,i),Os:sG.bind(null,i),Nr:nG.bind(null,i)},yield r.sharedClientState.start()),yield r.persistence.Is(function(){var a=(0,ye.Z)(function*(l){yield function iG(n,e){return aN.apply(this,arguments)}(r.ga.syncEngine,l),r.gcScheduler&&(l&&!r.gcScheduler.started?r.gcScheduler.start(r.localStore):l||r.gcScheduler.stop())});return function(l){return a.apply(this,arguments)}}())})()}da(e){const t=JF();if(!mM.vt(t))throw new Ne(de.UNIMPLEMENTED,"IndexedDB persistence is only available on platforms that support LocalStorage.");const r=sM(e.databaseInfo.databaseId,e.databaseInfo.persistenceKey);return new mM(t,e.asyncQueue,r,e.clientId,e.initialUser)}}class fN{initialize(e,t){var r=this;return(0,ye.Z)(function*(){r.localStore||(r.localStore=e.localStore,r.sharedClientState=e.sharedClientState,r.datastore=r.createDatastore(t),r.remoteStore=r.createRemoteStore(t),r.eventManager=r.createEventManager(t),r.syncEngine=r.createSyncEngine(t,!e.synchronizeTabs),r.sharedClientState.onlineStateHandler=i=>fL(r.syncEngine,i,1),r.remoteStore.remoteSyncer.handleCredentialChange=X$.bind(null,r.syncEngine),yield PM(r.remoteStore,r.syncEngine.isPrimaryClient))})()}createEventManager(e){return new L$}createDatastore(e){const t=CE(e.databaseInfo.databaseId),r=new E$(e.databaseInfo);return new b$(e.authCredentials,e.appCheckCredentials,r,t)}createRemoteStore(e){return t=this.localStore,r=this.datastore,i=e.asyncQueue,a=h=>fL(this.syncEngine,h,0),l=QF.vt()?new QF:new y$,new T$(t,r,i,a,l);var t,r,i,a,l}createSyncEngine(e,t){return function(r,i,a,l,h,_,w){const D=new G$(r,i,a,l,h,_);return w&&(D.ca=!0),D}(this.localStore,this.remoteStore,this.eventManager,this.sharedClientState,e.initialUser,e.maxConcurrentLimboResolutions,t)}terminate(){return(e=(0,ye.Z)(function*(t){const r=ze(t);Le("RemoteStore","RemoteStore shutting down."),r.lu.add(5),yield $_(r),r.du.shutdown(),r._u.set("Unknown")}),function(t){return e.apply(this,arguments)})(this.remoteStore);var e}}function vL(n,e=10240){let t=0;return{read:()=>(0,ye.Z)(function*(){if(t<n.byteLength){const r={value:n.slice(t,t+e),done:!1};return t+=e,r}return{done:!0}})(),cancel:()=>(0,ye.Z)(function*(){})(),releaseLock(){},closed:Promise.reject("unimplemented")}}class uT{constructor(e){this.observer=e,this.muted=!1}next(e){this.observer.next&&this.ya(this.observer.next,e)}error(e){this.observer.error?this.ya(this.observer.error,e):console.error("Uncaught Error in snapshot listener:",e)}pa(){this.muted=!0}ya(e,t){this.muted||setTimeout(()=>{this.muted||e(t)},0)}}class cG{constructor(e,t){this.Ia=e,this.M=t,this.metadata=new vi,this.buffer=new Uint8Array,this.Ta=new TextDecoder("utf-8"),this.Ea().then(r=>{r&&r.Cu()?this.metadata.resolve(r.payload.metadata):this.metadata.reject(new Error(`The first element of the bundle is not a metadata, it is\n             ${JSON.stringify(null==r?void 0:r.payload)}`))},r=>this.metadata.reject(r))}close(){return this.Ia.cancel()}getMetadata(){var e=this;return(0,ye.Z)(function*(){return e.metadata.promise})()}fa(){var e=this;return(0,ye.Z)(function*(){return yield e.getMetadata(),e.Ea()})()}Ea(){var e=this;return(0,ye.Z)(function*(){const t=yield e.Aa();if(null===t)return null;const r=e.Ta.decode(t),i=Number(r);isNaN(i)&&e.Ra(`length string (${r}) is not valid number`);const a=yield e.ba(i);return new B$(JSON.parse(a),t.length+i)})()}Pa(){return this.buffer.findIndex(e=>e==="{".charCodeAt(0))}Aa(){var e=this;return(0,ye.Z)(function*(){for(;e.Pa()<0&&!(yield e.Va()););if(0===e.buffer.length)return null;const t=e.Pa();t<0&&e.Ra("Reached the end of bundle when a length string is expected.");const r=e.buffer.slice(0,t);return e.buffer=e.buffer.slice(t),r})()}ba(e){var t=this;return(0,ye.Z)(function*(){for(;t.buffer.length<e;)(yield t.Va())&&t.Ra("Reached the end of bundle when more is expected.");const r=t.Ta.decode(t.buffer.slice(0,e));return t.buffer=t.buffer.slice(e),r})()}Ra(e){throw this.Ia.cancel(),new Error(`Invalid bundle format: ${e}`)}Va(){var e=this;return(0,ye.Z)(function*(){const t=yield e.Ia.read();if(!t.done){const r=new Uint8Array(e.buffer.length+t.value.length);r.set(e.buffer),r.set(t.value,e.buffer.length),e.buffer=r}return t.done})()}}class dG{constructor(e){this.datastore=e,this.readVersions=new Map,this.mutations=[],this.committed=!1,this.lastWriteError=null,this.writtenDocs=new Set}lookup(e){var t=this;return(0,ye.Z)(function*(){if(t.ensureCommitNotCalled(),t.mutations.length>0)throw new Ne(de.INVALID_ARGUMENT,"Firestore transactions require all reads to be executed before all writes.");const r=yield(i=(0,ye.Z)(function*(a,l){const h=ze(a),_=fE(h.M)+"/documents",w={documents:l.map(L=>hE(h.M,L))},D=yield h.co("BatchGetDocuments",_,w),S=new Map;D.forEach(L=>{const j=function dH(n,e){return"found"in e?function(t,r){xt(!!r.found);const i=xl(t,r.found.name),a=Ei(r.found.updateTime),l=new ps({mapValue:{fields:r.found.fields}});return zn.newFoundDocument(i,a,l)}(n,e):"missing"in e?function(t,r){xt(!!r.missing),xt(!!r.readTime);const i=xl(t,r.missing),a=Ei(r.readTime);return zn.newNoDocument(i,a)}(n,e):st()}(h.M,L);S.set(j.key.toString(),j)});const N=[];return l.forEach(L=>{const j=S.get(L.toString());xt(!!j),N.push(j)}),N}),function(a,l){return i.apply(this,arguments)})(t.datastore,e);var i;return r.forEach(i=>t.recordVersion(i)),r})()}set(e,t){this.write(t.toMutation(e,this.precondition(e))),this.writtenDocs.add(e.toString())}update(e,t){try{this.write(t.toMutation(e,this.preconditionForUpdate(e)))}catch(r){this.lastWriteError=r}this.writtenDocs.add(e.toString())}delete(e){this.write(new aE(e,this.precondition(e))),this.writtenDocs.add(e.toString())}commit(){var e=this;return(0,ye.Z)(function*(){if(e.ensureCommitNotCalled(),e.lastWriteError)throw e.lastWriteError;const t=e.readVersions;var r;e.mutations.forEach(r=>{t.delete(r.key.toString())}),t.forEach((r,i)=>{const a=Ge.fromPath(i);e.mutations.push(new HR(a,e.precondition(a)))}),yield(r=(0,ye.Z)(function*(i,a){const l=ze(i),h=fE(l.M)+"/documents",_={writes:a.map(w=>pE(l.M,w))};yield l.ro("Commit",h,_)}),function(i,a){return r.apply(this,arguments)})(e.datastore,e.mutations),e.committed=!0})()}recordVersion(e){let t;if(e.isFoundDocument())t=e.version;else{if(!e.isNoDocument())throw st();t=Dt.min()}const r=this.readVersions.get(e.key.toString());if(r){if(!t.isEqual(r))throw new Ne(de.ABORTED,"Document version changed between two reads.")}else this.readVersions.set(e.key.toString(),t)}precondition(e){const t=this.readVersions.get(e.toString());return!this.writtenDocs.has(e.toString())&&t?Ur.updateTime(t):Ur.none()}preconditionForUpdate(e){const t=this.readVersions.get(e.toString());if(!this.writtenDocs.has(e.toString())&&t){if(t.isEqual(Dt.min()))throw new Ne(de.INVALID_ARGUMENT,"Can't update a document that doesn't exist.");return Ur.updateTime(t)}return Ur.exists(!0)}write(e){this.ensureCommitNotCalled(),this.mutations.push(e)}ensureCommitNotCalled(){}}class hG{constructor(e,t,r,i){this.asyncQueue=e,this.datastore=t,this.updateFunction=r,this.deferred=i,this.va=5,this.So=new _M(this.asyncQueue,"transaction_retry")}run(){this.va-=1,this.Sa()}Sa(){var e=this;this.So.Io((0,ye.Z)(function*(){const t=new dG(e.datastore),r=e.Da(t);r&&r.then(i=>{e.asyncQueue.enqueueAndForget(()=>t.commit().then(()=>{e.deferred.resolve(i)}).catch(a=>{e.Ca(a)}))}).catch(i=>{e.Ca(i)})}))}Da(e){try{const t=this.updateFunction(e);return!Gp(t)&&t.catch&&t.then?t:(this.deferred.reject(Error("Transaction callback must return a Promise")),null)}catch(t){return this.deferred.reject(t),null}}Ca(e){this.va>0&&this.xa(e)?(this.va-=1,this.asyncQueue.enqueueAndForget(()=>(this.Sa(),Promise.resolve()))):this.deferred.reject(e)}xa(e){if("FirebaseError"===e.name){const t=e.code;return"aborted"===t||"failed-precondition"===t||!q1(t)}return!1}}class fG{constructor(e,t,r,i){var a=this;this.authCredentials=e,this.appCheckCredentials=t,this.asyncQueue=r,this.databaseInfo=i,this.user=$i.UNAUTHENTICATED,this.clientId=u1.R(),this.authCredentialListener=()=>Promise.resolve(),this.appCheckCredentialListener=()=>Promise.resolve(),this.authCredentials.start(r,function(){var l=(0,ye.Z)(function*(h){Le("FirestoreClient","Received user=",h.uid),yield a.authCredentialListener(h),a.user=h});return function(h){return l.apply(this,arguments)}}()),this.appCheckCredentials.start(r,l=>(Le("FirestoreClient","Received new app check token=",l),this.appCheckCredentialListener(l,this.user)))}getConfiguration(){var e=this;return(0,ye.Z)(function*(){return{asyncQueue:e.asyncQueue,databaseInfo:e.databaseInfo,clientId:e.clientId,authCredentials:e.authCredentials,appCheckCredentials:e.appCheckCredentials,initialUser:e.user,maxConcurrentLimboResolutions:100}})()}setCredentialChangeListener(e){this.authCredentialListener=e}setAppCheckTokenChangeListener(e){this.appCheckCredentialListener=e}verifyNotTerminated(){if(this.asyncQueue.isShuttingDown)throw new Ne(de.FAILED_PRECONDITION,"The client has already been terminated.")}terminate(){var e=this;this.asyncQueue.enterRestrictedMode();const t=new vi;return this.asyncQueue.enqueueAndForgetEvenWhileRestricted((0,ye.Z)(function*(){try{e.onlineComponents&&(yield e.onlineComponents.terminate()),e.offlineComponents&&(yield e.offlineComponents.terminate()),e.authCredentials.shutdown(),e.appCheckCredentials.shutdown(),t.resolve()}catch(r){const i=q_(r,"Failed to shutdown persistence");t.reject(i)}})),t.promise}}function wL(n,e){return pN.apply(this,arguments)}function pN(){return pN=(0,ye.Z)(function*(n,e){n.asyncQueue.verifyOperationInProgress(),Le("FirestoreClient","Initializing OfflineComponentProvider");const t=yield n.getConfiguration();yield e.initialize(t);let r=t.initialUser;n.setCredentialChangeListener(function(){var i=(0,ye.Z)(function*(a){r.isEqual(a)||(yield HF(e.localStore,a),r=a)});return function(a){return i.apply(this,arguments)}}()),e.persistence.setDatabaseDeletedListener(()=>n.terminate()),n.offlineComponents=e}),pN.apply(this,arguments)}function EL(n,e){return gN.apply(this,arguments)}function gN(){return gN=(0,ye.Z)(function*(n,e){n.asyncQueue.verifyOperationInProgress();const t=yield mN(n);Le("FirestoreClient","Initializing OnlineComponentProvider");const r=yield n.getConfiguration();yield e.initialize(t,r),n.setCredentialChangeListener(i=>sL(e.remoteStore,i)),n.setAppCheckTokenChangeListener((i,a)=>sL(e.remoteStore,a)),n.onlineComponents=e}),gN.apply(this,arguments)}function mN(n){return _N.apply(this,arguments)}function _N(){return _N=(0,ye.Z)(function*(n){return n.offlineComponents||(Le("FirestoreClient","Using default OfflineComponentProvider"),yield wL(n,new _L)),n.offlineComponents}),_N.apply(this,arguments)}function lT(n){return yN.apply(this,arguments)}function yN(){return yN=(0,ye.Z)(function*(n){return n.onlineComponents||(Le("FirestoreClient","Using default OnlineComponentProvider"),yield EL(n,new fN)),n.onlineComponents}),yN.apply(this,arguments)}function CL(n){return mN(n).then(e=>e.persistence)}function vN(n){return mN(n).then(e=>e.localStore)}function IL(n){return lT(n).then(e=>e.remoteStore)}function wN(n){return lT(n).then(e=>e.syncEngine)}function Y_(n){return EN.apply(this,arguments)}function EN(){return EN=(0,ye.Z)(function*(n){const e=yield lT(n),t=e.eventManager;return t.onListen=W$.bind(null,e.syncEngine),t.onUnlisten=q$.bind(null,e.syncEngine),t}),EN.apply(this,arguments)}function bL(n,e,t={}){const r=new vi;return n.asyncQueue.enqueueAndForget((0,ye.Z)(function*(){return function(i,a,l,h,_){const w=new uT({next:S=>{a.enqueueAndForget(()=>VM(i,D));const N=S.docs.has(l);!N&&S.fromCache?_.reject(new Ne(de.UNAVAILABLE,"Failed to get document because the client is offline.")):N&&S.fromCache&&h&&"server"===h.source?_.reject(new Ne(de.UNAVAILABLE,'Failed to get document from server. (However, this document does exist in the local cache. Run again without setting source to "server" to retrieve the cached document.)')):_.resolve(S)},error:S=>_.reject(S)}),D=new jM(R_(l.path),w,{includeMetadataChanges:!0,Du:!0});return FM(i,D)}(yield Y_(n),n.asyncQueue,e,t,r)})),r.promise}function DL(n,e,t={}){const r=new vi;return n.asyncQueue.enqueueAndForget((0,ye.Z)(function*(){return function(i,a,l,h,_){const w=new uT({next:S=>{a.enqueueAndForget(()=>VM(i,D)),S.fromCache&&"server"===h.source?_.reject(new Ne(de.UNAVAILABLE,'Failed to get documents from server. (However, these documents may exist in the local cache. Run again without setting source to "server" to retrieve the cached documents.)')):_.resolve(S)},error:S=>_.reject(S)}),D=new jM(l,w,{includeMetadataChanges:!0,Du:!0});return FM(i,D)}(yield Y_(n),n.asyncQueue,e,t,r)})),r.promise}const TL=new Map;function CN(n,e,t){if(!t)throw new Ne(de.INVALID_ARGUMENT,`Function ${n}() cannot be called with an empty ${e}.`)}function SL(n,e,t,r){if(!0===e&&!0===r)throw new Ne(de.INVALID_ARGUMENT,`${n} and ${t} cannot be used together.`)}function AL(n){if(!Ge.isDocumentKey(n))throw new Ne(de.INVALID_ARGUMENT,`Invalid document reference. Document references must have an even number of segments, but ${n} has ${n.length}.`)}function xL(n){if(Ge.isDocumentKey(n))throw new Ne(de.INVALID_ARGUMENT,`Invalid collection reference. Collection references must have an odd number of segments, but ${n} has ${n.length}.`)}function cT(n){if(void 0===n)return"undefined";if(null===n)return"null";if("string"==typeof n)return n.length>20&&(n=`${n.substring(0,20)}...`),JSON.stringify(n);if("number"==typeof n||"boolean"==typeof n)return""+n;if("object"==typeof n){if(n instanceof Array)return"an array";{const e=(t=n).constructor?t.constructor.name:null;return e?`a custom ${e} object`:"an object"}}var t;return"function"==typeof n?"a function":st()}function nn(n,e){if("_delegate"in n&&(n=n._delegate),!(n instanceof e)){if(e.name===n.constructor.name)throw new Ne(de.INVALID_ARGUMENT,"Type does not match the expected instance. Did you pass a reference from a different Firestore SDK?");{const t=cT(n);throw new Ne(de.INVALID_ARGUMENT,`Expected type '${e.name}', but it was: ${t}`)}}return n}function RL(n,e){if(e<=0)throw new Ne(de.INVALID_ARGUMENT,`Function ${n}() requires a positive number, but it was: ${e}.`)}class ML{constructor(e){var t;if(void 0===e.host){if(void 0!==e.ssl)throw new Ne(de.INVALID_ARGUMENT,"Can't provide ssl option if host option is not set");this.host="firestore.googleapis.com",this.ssl=!0}else this.host=e.host,this.ssl=null===(t=e.ssl)||void 0===t||t;if(this.credentials=e.credentials,this.ignoreUndefinedProperties=!!e.ignoreUndefinedProperties,void 0===e.cacheSizeBytes)this.cacheSizeBytes=41943040;else{if(-1!==e.cacheSizeBytes&&e.cacheSizeBytes<1048576)throw new Ne(de.INVALID_ARGUMENT,"cacheSizeBytes must be at least 1048576");this.cacheSizeBytes=e.cacheSizeBytes}this.experimentalForceLongPolling=!!e.experimentalForceLongPolling,this.experimentalAutoDetectLongPolling=!!e.experimentalAutoDetectLongPolling,this.useFetchStreams=!!e.useFetchStreams,SL("experimentalForceLongPolling",e.experimentalForceLongPolling,"experimentalAutoDetectLongPolling",e.experimentalAutoDetectLongPolling)}isEqual(e){return this.host===e.host&&this.ssl===e.ssl&&this.credentials===e.credentials&&this.cacheSizeBytes===e.cacheSizeBytes&&this.experimentalForceLongPolling===e.experimentalForceLongPolling&&this.experimentalAutoDetectLongPolling===e.experimentalAutoDetectLongPolling&&this.ignoreUndefinedProperties===e.ignoreUndefinedProperties&&this.useFetchStreams===e.useFetchStreams}}class DE{constructor(e,t,r){this._authCredentials=t,this._appCheckCredentials=r,this.type="firestore-lite",this._persistenceKey="(lite)",this._settings=new ML({}),this._settingsFrozen=!1,e instanceof Kc?this._databaseId=e:(this._app=e,this._databaseId=function(i){if(!Object.prototype.hasOwnProperty.apply(i.options,["projectId"]))throw new Ne(de.INVALID_ARGUMENT,'"projectId" not provided in firebase.initializeApp.');return new Kc(i.options.projectId)}(e))}get app(){if(!this._app)throw new Ne(de.FAILED_PRECONDITION,"Firestore was not initialized using the Firebase SDK. 'app' is not available");return this._app}get _initialized(){return this._settingsFrozen}get _terminated(){return void 0!==this._terminateTask}_setSettings(e){if(this._settingsFrozen)throw new Ne(de.FAILED_PRECONDITION,"Firestore has already been started and its settings can no longer be changed. You can only modify settings before calling any other methods on a Firestore object.");this._settings=new ML(e),void 0!==e.credentials&&(this._authCredentials=function(t){if(!t)return new bj;switch(t.type){case"gapi":const r=t.client;return xt(!("object"!=typeof r||null===r||!r.auth||!r.auth.getAuthHeaderValueForFirstParty)),new Aj(r,t.sessionIndex||"0",t.iamToken||null);case"provider":return t.client;default:throw new Ne(de.INVALID_ARGUMENT,"makeAuthCredentialsProvider failed due to invalid credential type")}}(e.credentials))}_getSettings(){return this._settings}_freezeSettings(){return this._settingsFrozen=!0,this._settings}_delete(){return this._terminateTask||(this._terminateTask=this._terminate()),this._terminateTask}toJSON(){return{app:this._app,databaseId:this._databaseId,settings:this._settings}}_terminate(){return function(e){const t=TL.get(e);t&&(Le("ComponentProvider","Removing Datastore"),TL.delete(e),t.terminate())}(this),Promise.resolve()}}class Zn{constructor(e,t,r){this.converter=t,this._key=r,this.type="document",this.firestore=e}get _path(){return this._key.path}get id(){return this._key.path.lastSegment()}get path(){return this._key.path.canonicalString()}get parent(){return new Rl(this.firestore,this.converter,this._key.path.popLast())}withConverter(e){return new Zn(this.firestore,e,this._key)}}class gs{constructor(e,t,r){this.converter=t,this._query=r,this.type="query",this.firestore=e}withConverter(e){return new gs(this.firestore,e,this._query)}}class Rl extends gs{constructor(e,t,r){super(e,t,R_(r)),this._path=r,this.type="collection"}get id(){return this._query.path.lastSegment()}get path(){return this._query.path.canonicalString()}get parent(){const e=this._path.popLast();return e.isEmpty()?null:new Zn(this.firestore,null,new Ge(e))}withConverter(e){return new Rl(this.firestore,e,this._path)}}function NL(n,e,...t){if(n=(0,k.m9)(n),CN("collection","path",e),n instanceof DE){const r=un.fromString(e,...t);return xL(r),new Rl(n,null,r)}{if(!(n instanceof Zn||n instanceof Rl))throw new Ne(de.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const r=n._path.child(un.fromString(e,...t));return xL(r),new Rl(n.firestore,null,r)}}function dT(n,e,...t){if(n=(0,k.m9)(n),1===arguments.length&&(e=u1.R()),CN("doc","path",e),n instanceof DE){const r=un.fromString(e,...t);return AL(r),new Zn(n,null,new Ge(r))}{if(!(n instanceof Zn||n instanceof Rl))throw new Ne(de.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const r=n._path.child(un.fromString(e,...t));return AL(r),new Zn(n.firestore,n instanceof Rl?n.converter:null,new Ge(r))}}function PL(n,e){return n=(0,k.m9)(n),e=(0,k.m9)(e),(n instanceof Zn||n instanceof Rl)&&(e instanceof Zn||e instanceof Rl)&&n.firestore===e.firestore&&n.path===e.path&&n.converter===e.converter}function kL(n,e){return n=(0,k.m9)(n),e=(0,k.m9)(e),n instanceof gs&&e instanceof gs&&n.firestore===e.firestore&&iE(n._query,e._query)&&n.converter===e.converter}class bG{constructor(){this.Na=Promise.resolve(),this.ka=[],this.Ma=!1,this.Oa=[],this.Fa=null,this.$a=!1,this.Ba=!1,this.La=[],this.So=new _M(this,"async_queue_retry"),this.Ua=()=>{const t=sT();t&&Le("AsyncQueue","Visibility state changed to "+t.visibilityState),this.So.Eo()};const e=sT();e&&"function"==typeof e.addEventListener&&e.addEventListener("visibilitychange",this.Ua)}get isShuttingDown(){return this.Ma}enqueueAndForget(e){this.enqueue(e)}enqueueAndForgetEvenWhileRestricted(e){this.qa(),this.Ga(e)}enterRestrictedMode(e){if(!this.Ma){this.Ma=!0,this.Ba=e||!1;const t=sT();t&&"function"==typeof t.removeEventListener&&t.removeEventListener("visibilitychange",this.Ua)}}enqueue(e){if(this.qa(),this.Ma)return new Promise(()=>{});const t=new vi;return this.Ga(()=>this.Ma&&this.Ba?Promise.resolve():(e().then(t.resolve,t.reject),t.promise)).then(()=>t.promise)}enqueueRetryable(e){this.enqueueAndForget(()=>(this.ka.push(e),this.Ka()))}Ka(){var e=this;return(0,ye.Z)(function*(){if(0!==e.ka.length){try{yield e.ka[0](),e.ka.shift(),e.So.reset()}catch(t){if(!Yp(t))throw t;Le("AsyncQueue","Operation failed with retryable error: "+t)}e.ka.length>0&&e.So.Io(()=>e.Ka())}})()}Ga(e){const t=this.Na.then(()=>(this.$a=!0,e().catch(r=>{throw this.Fa=r,this.$a=!1,Vr("INTERNAL UNHANDLED ERROR: ",function(a){let l=a.message||"";return a.stack&&(l=a.stack.includes(a.message)?a.stack:a.message+"\n"+a.stack),l}(r)),r}).then(r=>(this.$a=!1,r))));return this.Na=t,t}enqueueAfterDelay(e,t,r){this.qa(),this.La.indexOf(e)>-1&&(t=0);const i=OM.createAndSchedule(this,e,t,r,a=>this.Qa(a));return this.Oa.push(i),i}qa(){this.Fa&&st()}verifyOperationInProgress(){}ja(){var e=this;return(0,ye.Z)(function*(){let t;do{t=e.Na,yield t}while(t!==e.Na)})()}Wa(e){for(const t of this.Oa)if(t.timerId===e)return!0;return!1}za(e){return this.ja().then(()=>{this.Oa.sort((t,r)=>t.targetTimeMs-r.targetTimeMs);for(const t of this.Oa)if(t.skipDelay(),"all"!==e&&t.timerId===e)break;return this.ja()})}Ha(e){this.La.push(e)}Qa(e){const t=this.Oa.indexOf(e);this.Oa.splice(t,1)}}function IN(n){return function(e,t){if("object"!=typeof e||null===e)return!1;const r=e;for(const i of["next","error","complete"])if(i in r&&"function"==typeof r[i])return!0;return!1}(n)}class DG{constructor(){this._progressObserver={},this._taskCompletionResolver=new vi,this._lastProgress={taskState:"Running",totalBytes:0,totalDocuments:0,bytesLoaded:0,documentsLoaded:0}}onProgress(e,t,r){this._progressObserver={next:e,error:t,complete:r}}catch(e){return this._taskCompletionResolver.promise.catch(e)}then(e,t){return this._taskCompletionResolver.promise.then(e,t)}_completeWith(e){this._updateProgress(e),this._progressObserver.complete&&this._progressObserver.complete(),this._taskCompletionResolver.resolve(e)}_failWith(e){this._lastProgress.taskState="Error",this._progressObserver.next&&this._progressObserver.next(this._lastProgress),this._progressObserver.error&&this._progressObserver.error(e),this._taskCompletionResolver.reject(e)}_updateProgress(e){this._lastProgress=e,this._progressObserver.next&&this._progressObserver.next(e)}}class tr extends DE{constructor(e,t,r){super(e,t,r),this.type="firestore",this._queue=new bG,this._persistenceKey="name"in e?e.name:"[DEFAULT]"}_terminate(){return this._firestoreClient||OL(this),this._firestoreClient.terminate()}}function jr(n){return n._firestoreClient||OL(n),n._firestoreClient.verifyNotTerminated(),n._firestoreClient}function OL(n){var e;const t=n._freezeSettings(),r=(a=(null===(e=n._app)||void 0===e?void 0:e.options.appId)||"",new kj(n._databaseId,a,n._persistenceKey,(h=t).host,h.ssl,h.experimentalForceLongPolling,h.experimentalAutoDetectLongPolling,h.useFetchStreams));var a,h;n._firestoreClient=new fG(n._authCredentials,n._appCheckCredentials,n._queue,r)}function FL(n,e,t){const r=new vi;return n.asyncQueue.enqueue((0,ye.Z)(function*(){try{yield wL(n,t),yield EL(n,e),r.resolve()}catch(i){if(!("FirebaseError"===(a=i).name?a.code===de.FAILED_PRECONDITION||a.code===de.UNIMPLEMENTED:!("undefined"!=typeof DOMException&&a instanceof DOMException)||22===a.code||20===a.code||11===a.code))throw i;console.warn("Error enabling offline persistence. Falling back to persistence disabled: "+i),r.reject(i)}var a})).then(()=>r.promise)}function LL(n){if(n._initialized||n._terminated)throw new Ne(de.FAILED_PRECONDITION,"Firestore has already been started and persistence can no longer be enabled. You can only enable persistence before calling any other methods on a Firestore object.")}class Jc{constructor(...e){for(let t=0;t<e.length;++t)if(0===e[t].length)throw new Ne(de.INVALID_ARGUMENT,"Invalid field name at argument $(i + 1). Field names must not be empty.");this._internalPath=new wi(e)}isEqual(e){return this._internalPath.isEqual(e._internalPath)}}class Ml{constructor(e){this._byteString=e}static fromBase64String(e){try{return new Ml(ei.fromBase64String(e))}catch(t){throw new Ne(de.INVALID_ARGUMENT,"Failed to construct data from Base64 string: "+t)}}static fromUint8Array(e){return new Ml(ei.fromUint8Array(e))}toBase64(){return this._byteString.toBase64()}toUint8Array(){return this._byteString.toUint8Array()}toString(){return"Bytes(base64: "+this.toBase64()+")"}isEqual(e){return this._byteString.isEqual(e._byteString)}}class ig{constructor(e){this._methodName=e}}class hT{constructor(e,t){if(!isFinite(e)||e<-90||e>90)throw new Ne(de.INVALID_ARGUMENT,"Latitude must be a number between -90 and 90, but was: "+e);if(!isFinite(t)||t<-180||t>180)throw new Ne(de.INVALID_ARGUMENT,"Longitude must be a number between -180 and 180, but was: "+t);this._lat=e,this._long=t}get latitude(){return this._lat}get longitude(){return this._long}isEqual(e){return this._lat===e._lat&&this._long===e._long}toJSON(){return{latitude:this._lat,longitude:this._long}}_compareTo(e){return Yt(this._lat,e._lat)||Yt(this._long,e._long)}}const OG=/^__.*__$/;class FG{constructor(e,t,r){this.data=e,this.fieldMask=t,this.fieldTransforms=r}toMutation(e,t){return null!==this.fieldMask?new Zp(e,this.data,this.fieldMask,t,this.fieldTransforms):new oE(e,this.data,t,this.fieldTransforms)}}class VL{constructor(e,t,r){this.data=e,this.fieldMask=t,this.fieldTransforms=r}toMutation(e,t){return new Zp(e,this.data,this.fieldMask,t,this.fieldTransforms)}}function UL(n){switch(n){case 0:case 2:case 1:return!0;case 3:case 4:return!1;default:throw st()}}class fT{constructor(e,t,r,i,a,l){this.settings=e,this.databaseId=t,this.M=r,this.ignoreUndefinedProperties=i,void 0===a&&this.Ja(),this.fieldTransforms=a||[],this.fieldMask=l||[]}get path(){return this.settings.path}get Ya(){return this.settings.Ya}Xa(e){return new fT(Object.assign(Object.assign({},this.settings),e),this.databaseId,this.M,this.ignoreUndefinedProperties,this.fieldTransforms,this.fieldMask)}Za(e){var t;const r=null===(t=this.path)||void 0===t?void 0:t.child(e),i=this.Xa({path:r,tc:!1});return i.ec(e),i}nc(e){var t;const r=null===(t=this.path)||void 0===t?void 0:t.child(e),i=this.Xa({path:r,tc:!1});return i.Ja(),i}sc(e){return this.Xa({path:void 0,tc:!0})}ic(e){return mT(e,this.settings.methodName,this.settings.rc||!1,this.path,this.settings.oc)}contains(e){return void 0!==this.fieldMask.find(t=>e.isPrefixOf(t))||void 0!==this.fieldTransforms.find(t=>e.isPrefixOf(t.field))}Ja(){if(this.path)for(let e=0;e<this.path.length;e++)this.ec(this.path.get(e))}ec(e){if(0===e.length)throw this.ic("Document fields must not be empty");if(UL(this.Ya)&&OG.test(e))throw this.ic('Document fields cannot begin and end with "__"')}}class LG{constructor(e,t,r){this.databaseId=e,this.ignoreUndefinedProperties=t,this.M=r||CE(e)}uc(e,t,r,i=!1){return new fT({Ya:e,methodName:t,oc:r,path:wi.emptyPath(),tc:!1,rc:i},this.databaseId,this.M,this.ignoreUndefinedProperties)}}function sg(n){const e=n._freezeSettings(),t=CE(n._databaseId);return new LG(n._databaseId,!!e.ignoreUndefinedProperties,t)}function pT(n,e,t,r,i,a={}){const l=n.uc(a.merge||a.mergeFields?2:0,e,t,i);SN("Data must be an object, but it was:",l,r);const h=HL(r,l);let _,w;if(a.merge)_=new D_(l.fieldMask),w=l.fieldTransforms;else if(a.mergeFields){const D=[];for(const S of a.mergeFields){const N=AN(e,S,t);if(!l.contains(N))throw new Ne(de.INVALID_ARGUMENT,`Field '${N}' is specified in your field mask but missing from your input data.`);GL(D,N)||D.push(N)}_=new D_(D),w=l.fieldTransforms.filter(S=>_.covers(S.field))}else _=null,w=l.fieldTransforms;return new FG(new ps(h),_,w)}class TE extends ig{_toFieldTransform(e){if(2!==e.Ya)throw e.ic(1===e.Ya?`${this._methodName}() can only appear at the top level of your update data`:`${this._methodName}() cannot be used with set() unless you pass {merge:true}`);return e.fieldMask.push(e.path),null}isEqual(e){return e instanceof TE}}function BL(n,e,t){return new fT({Ya:3,oc:e.settings.oc,methodName:n._methodName,tc:t},e.databaseId,e.M,e.ignoreUndefinedProperties)}class bN extends ig{_toFieldTransform(e){return new sE(e.path,new N_)}isEqual(e){return e instanceof bN}}class VG extends ig{constructor(e,t){super(e),this.ac=t}_toFieldTransform(e){const t=BL(this,e,!0),r=this.ac.map(a=>og(a,t)),i=new zp(r);return new sE(e.path,i)}isEqual(e){return this===e}}class UG extends ig{constructor(e,t){super(e),this.ac=t}_toFieldTransform(e){const t=BL(this,e,!0),r=this.ac.map(a=>og(a,t)),i=new Kp(r);return new sE(e.path,i)}isEqual(e){return this===e}}class BG extends ig{constructor(e,t){super(e),this.cc=t}_toFieldTransform(e){const t=new P_(e.M,O1(e.M,this.cc));return new sE(e.path,t)}isEqual(e){return this===e}}function DN(n,e,t,r){const i=n.uc(1,e,t);SN("Data must be an object, but it was:",i,r);const a=[],l=ps.empty();Hp(r,(_,w)=>{const D=gT(e,_,t);w=(0,k.m9)(w);const S=i.nc(D);if(w instanceof TE)a.push(D);else{const N=og(w,S);null!=N&&(a.push(D),l.set(D,N))}});const h=new D_(a);return new VL(l,h,i.fieldTransforms)}function TN(n,e,t,r,i,a){const l=n.uc(1,e,t),h=[AN(e,r,t)],_=[i];if(a.length%2!=0)throw new Ne(de.INVALID_ARGUMENT,`Function ${e}() needs to be called with an even number of arguments that alternate between field names and values.`);for(let N=0;N<a.length;N+=2)h.push(AN(e,a[N])),_.push(a[N+1]);const w=[],D=ps.empty();for(let N=h.length-1;N>=0;--N)if(!GL(w,h[N])){const L=h[N];let j=_[N];j=(0,k.m9)(j);const fe=l.nc(L);if(j instanceof TE)w.push(L);else{const Me=og(j,fe);null!=Me&&(w.push(L),D.set(L,Me))}}const S=new D_(w);return new VL(D,S,l.fieldTransforms)}function jL(n,e,t,r=!1){return og(t,n.uc(r?4:3,e))}function og(n,e){if($L(n=(0,k.m9)(n)))return SN("Unsupported field value:",e,n),HL(n,e);if(n instanceof ig)return function(t,r){if(!UL(r.Ya))throw r.ic(`${t._methodName}() can only be used with update() and set()`);if(!r.path)throw r.ic(`${t._methodName}() is not currently supported inside arrays`);const i=t._toFieldTransform(r);i&&r.fieldTransforms.push(i)}(n,e),null;if(void 0===n&&e.ignoreUndefinedProperties)return null;if(e.path&&e.fieldMask.push(e.path),n instanceof Array){if(e.settings.tc&&4!==e.Ya)throw e.ic("Nested arrays are not supported");return function(t,r){const i=[];let a=0;for(const l of t){let h=og(l,r.sc(a));null==h&&(h={nullValue:"NULL_VALUE"}),i.push(h),a++}return{arrayValue:{values:i}}}(n,e)}return function(t,r){if(null===(t=(0,k.m9)(t)))return{nullValue:"NULL_VALUE"};if("number"==typeof t)return O1(r.M,t);if("boolean"==typeof t)return{booleanValue:t};if("string"==typeof t)return{stringValue:t};if(t instanceof Date){const i=Rr.fromDate(t);return{timestampValue:dE(r.M,i)}}if(t instanceof Rr){const i=new Rr(t.seconds,1e3*Math.floor(t.nanoseconds/1e3));return{timestampValue:dE(r.M,i)}}if(t instanceof hT)return{geoPointValue:{latitude:t.latitude,longitude:t.longitude}};if(t instanceof Ml)return{bytesValue:eF(r.M,t._byteString)};if(t instanceof Zn){const i=r.databaseId,a=t.firestore._databaseId;if(!a.isEqual(i))throw r.ic(`Document reference is for database ${a.projectId}/${a.database} but should be for database ${i.projectId}/${i.database}`);return{referenceValue:GR(t.firestore._databaseId||r.databaseId,t._key.path)}}throw r.ic(`Unsupported field value: ${cT(t)}`)}(n,e)}function HL(n,e){const t={};return d1(n)?e.path&&e.path.length>0&&e.fieldMask.push(e.path):Hp(n,(r,i)=>{const a=og(i,e.Za(r));null!=a&&(t[r]=a)}),{mapValue:{fields:t}}}function $L(n){return!("object"!=typeof n||null===n||n instanceof Array||n instanceof Date||n instanceof Rr||n instanceof hT||n instanceof Ml||n instanceof Zn||n instanceof ig)}function SN(n,e,t){if(!$L(t)||"object"!=typeof(r=t)||null===r||Object.getPrototypeOf(r)!==Object.prototype&&null!==Object.getPrototypeOf(r)){const r=cT(t);throw e.ic("an object"===r?n+" a custom object":n+" "+r)}var r}function AN(n,e,t){if((e=(0,k.m9)(e))instanceof Jc)return e._internalPath;if("string"==typeof e)return gT(n,e);throw mT("Field path arguments must be of type string or ",n,!1,void 0,t)}const jG=new RegExp("[~\\*/\\[\\]]");function gT(n,e,t){if(e.search(jG)>=0)throw mT(`Invalid field path (${e}). Paths must not contain '~', '*', '/', '[', or ']'`,n,!1,void 0,t);try{return new Jc(...e.split("."))._internalPath}catch(r){throw mT(`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`,n,!1,void 0,t)}}function mT(n,e,t,r,i){const a=r&&!r.isEmpty(),l=void 0!==i;let h=`Function ${e}() called with invalid data`;t&&(h+=" (via `toFirestore()`)"),h+=". ";let _="";return(a||l)&&(_+=" (found",a&&(_+=` in field ${r}`),l&&(_+=` in document ${i}`),_+=")"),new Ne(de.INVALID_ARGUMENT,h+n+_)}function GL(n,e){return n.some(t=>t.isEqual(e))}class SE{constructor(e,t,r,i,a){this._firestore=e,this._userDataWriter=t,this._key=r,this._document=i,this._converter=a}get id(){return this._key.path.lastSegment()}get ref(){return new Zn(this._firestore,this._converter,this._key)}exists(){return null!==this._document}data(){if(this._document){if(this._converter){const e=new HG(this._firestore,this._userDataWriter,this._key,this._document,null);return this._converter.fromFirestore(e)}return this._userDataWriter.convertValue(this._document.data.value)}}get(e){if(this._document){const t=this._document.data.field(_T("DocumentSnapshot.get",e));if(null!==t)return this._userDataWriter.convertValue(t)}}}class HG extends SE{data(){return super.data()}}function _T(n,e){return"string"==typeof e?gT(n,e):e instanceof Jc?e._internalPath:e._delegate._internalPath}class ag{constructor(e,t){this.hasPendingWrites=e,this.fromCache=t}isEqual(e){return this.hasPendingWrites===e.hasPendingWrites&&this.fromCache===e.fromCache}}class Xc extends SE{constructor(e,t,r,i,a,l){super(e,t,r,i,l),this._firestore=e,this._firestoreImpl=e,this.metadata=a}exists(){return super.exists()}data(e={}){if(this._document){if(this._converter){const t=new AE(this._firestore,this._userDataWriter,this._key,this._document,this.metadata,null);return this._converter.fromFirestore(t,e)}return this._userDataWriter.convertValue(this._document.data.value,e.serverTimestamps)}}get(e,t={}){if(this._document){const r=this._document.data.field(_T("DocumentSnapshot.get",e));if(null!==r)return this._userDataWriter.convertValue(r,t.serverTimestamps)}}}class AE extends Xc{data(e={}){return super.data(e)}}class Yh{constructor(e,t,r,i){this._firestore=e,this._userDataWriter=t,this._snapshot=i,this.metadata=new ag(i.hasPendingWrites,i.fromCache),this.query=r}get docs(){const e=[];return this.forEach(t=>e.push(t)),e}get size(){return this._snapshot.docs.size}get empty(){return 0===this.size}forEach(e,t){this._snapshot.docs.forEach(r=>{e.call(t,new AE(this._firestore,this._userDataWriter,r.key,r,new ag(this._snapshot.mutatedKeys.has(r.key),this._snapshot.fromCache),this.query.converter))})}docChanges(e={}){const t=!!e.includeMetadataChanges;if(t&&this._snapshot.excludesMetadataChanges)throw new Ne(de.INVALID_ARGUMENT,"To include metadata changes with your document changes, you must also pass { includeMetadataChanges:true } to onSnapshot().");return this._cachedChanges&&this._cachedChangesIncludeMetadataChanges===t||(this._cachedChanges=function(r,i){if(r._snapshot.oldDocs.isEmpty()){let a=0;return r._snapshot.docChanges.map(l=>({type:"added",doc:new AE(r._firestore,r._userDataWriter,l.doc.key,l.doc,new ag(r._snapshot.mutatedKeys.has(l.doc.key),r._snapshot.fromCache),r.query.converter),oldIndex:-1,newIndex:a++}))}{let a=r._snapshot.oldDocs;return r._snapshot.docChanges.filter(l=>i||3!==l.type).map(l=>{const h=new AE(r._firestore,r._userDataWriter,l.doc.key,l.doc,new ag(r._snapshot.mutatedKeys.has(l.doc.key),r._snapshot.fromCache),r.query.converter);let _=-1,w=-1;return 0!==l.type&&(_=a.indexOf(l.doc.key),a=a.delete(l.doc.key)),1!==l.type&&(a=a.add(l.doc),w=a.indexOf(l.doc.key)),{type:$G(l.type),doc:h,oldIndex:_,newIndex:w}})}}(this,t),this._cachedChangesIncludeMetadataChanges=t),this._cachedChanges}}function $G(n){switch(n){case 0:return"added";case 2:case 3:return"modified";case 1:return"removed";default:return st()}}function WL(n,e){return n instanceof Xc&&e instanceof Xc?n._firestore===e._firestore&&n._key.isEqual(e._key)&&(null===n._document?null===e._document:n._document.isEqual(e._document))&&n._converter===e._converter:n instanceof Yh&&e instanceof Yh&&n._firestore===e._firestore&&kL(n.query,e.query)&&n.metadata.isEqual(e.metadata)&&n._snapshot.isEqual(e._snapshot)}function qL(n){if(UD(n)&&0===n.explicitOrderBy.length)throw new Ne(de.UNIMPLEMENTED,"limitToLast() queries require specifying at least one orderBy() clause")}class xE{}function Qh(n,...e){for(const t of e)n=t._apply(n);return n}class GG extends xE{constructor(e,t,r){super(),this.hc=e,this.lc=t,this.fc=r,this.type="where"}_apply(e){const t=sg(e.firestore),r=function(i,a,l,h,_,w,D){let S;if(_.isKeyField()){if("array-contains"===w||"array-contains-any"===w)throw new Ne(de.INVALID_ARGUMENT,`Invalid Query. You can't perform '${w}' queries on documentId().`);if("in"===w||"not-in"===w){JL(D,w);const L=[];for(const j of D)L.push(QL(h,i,j));S={arrayValue:{values:L}}}else S=QL(h,i,D)}else"in"!==w&&"not-in"!==w&&"array-contains-any"!==w||JL(D,w),S=jL(l,"where",D,"in"===w||"not-in"===w);const N=Gi.create(_,w,S);return function(L,j){if(j.S()){const Me=LR(L);if(null!==Me&&!Me.isEqual(j.field))throw new Ne(de.INVALID_ARGUMENT,`Invalid query. All where filters with an inequality (<, <=, !=, not-in, >, or >=) must be on the same field. But you have inequality filters on '${Me.toString()}' and '${j.field.toString()}'`);const et=FR(L);null!==et&&XL(0,j.field,et)}const fe=function(Me,et){for(const We of Me.filters)if(et.indexOf(We.op)>=0)return We.op;return null}(L,function(Me){switch(Me){case"!=":return["!=","not-in"];case"array-contains":return["array-contains","array-contains-any","not-in"];case"in":return["array-contains-any","in","not-in"];case"array-contains-any":return["array-contains","array-contains-any","in","not-in"];case"not-in":return["array-contains","array-contains-any","in","not-in","!="];default:return[]}}(j.op));if(null!==fe)throw new Ne(de.INVALID_ARGUMENT,fe===j.op?`Invalid query. You cannot use more than one '${j.op.toString()}' filter.`:`Invalid query. You cannot use '${j.op.toString()}' filters with '${fe.toString()}' filters.`)}(i,N),N}(e._query,0,t,e.firestore._databaseId,this.hc,this.lc,this.fc);return new gs(e.firestore,e.converter,function(i,a){const l=i.filters.concat([a]);return new Yc(i.path,i.collectionGroup,i.explicitOrderBy.slice(),l,i.limit,i.limitType,i.startAt,i.endAt)}(e._query,r))}}class qG extends xE{constructor(e,t){super(),this.hc=e,this.dc=t,this.type="orderBy"}_apply(e){const t=function(r,i,a){if(null!==r.startAt)throw new Ne(de.INVALID_ARGUMENT,"Invalid query. You must not call startAt() or startAfter() before calling orderBy().");if(null!==r.endAt)throw new Ne(de.INVALID_ARGUMENT,"Invalid query. You must not call endAt() or endBefore() before calling orderBy().");const l=new x_(i,a);return function(h,_){if(null===FR(h)){const w=LR(h);null!==w&&XL(0,w,_.field)}}(r,l),l}(e._query,this.hc,this.dc);return new gs(e.firestore,e.converter,function(r,i){const a=r.explicitOrderBy.concat([i]);return new Yc(r.path,r.collectionGroup,a,r.filters.slice(),r.limit,r.limitType,r.startAt,r.endAt)}(e._query,t))}}class zL extends xE{constructor(e,t,r){super(),this.type=e,this._c=t,this.wc=r}_apply(e){return new gs(e.firestore,e.converter,x1(e._query,this._c,this.wc))}}class KL extends xE{constructor(e,t,r){super(),this.type=e,this.mc=t,this.gc=r}_apply(e){const t=YL(e,this.type,this.mc,this.gc);return new gs(e.firestore,e.converter,(i=t,new Yc((r=e._query).path,r.collectionGroup,r.explicitOrderBy.slice(),r.filters.slice(),r.limit,r.limitType,i,r.endAt)));var r,i}}class ZL extends xE{constructor(e,t,r){super(),this.type=e,this.mc=t,this.gc=r}_apply(e){const t=YL(e,this.type,this.mc,this.gc);return new gs(e.firestore,e.converter,(i=t,new Yc((r=e._query).path,r.collectionGroup,r.explicitOrderBy.slice(),r.filters.slice(),r.limit,r.limitType,r.startAt,i)));var r,i}}function YL(n,e,t,r){if(t[0]=(0,k.m9)(t[0]),t[0]instanceof SE)return function(i,a,l,h,_){if(!h)throw new Ne(de.NOT_FOUND,`Can't use a DocumentSnapshot that doesn't exist for ${l}().`);const w=[];for(const D of M_(i))if(D.field.isKeyField())w.push(S_(a,h.key));else{const S=h.data.field(D.field);if(NR(S))throw new Ne(de.INVALID_ARGUMENT,'Invalid query. You are trying to start or end a query using a document for which the field "'+D.field+'" is an uncommitted server timestamp. (Since the value of this field is unknown, you cannot start/end a query with it.)');if(null===S){const N=D.field.canonicalString();throw new Ne(de.INVALID_ARGUMENT,`Invalid query. You are trying to start or end a query using a document for which the field '${N}' (used as the orderBy) does not exist.`)}w.push(S)}return new Hh(w,_)}(n._query,n.firestore._databaseId,e,t[0]._document,r);{const i=sg(n.firestore);return function(a,l,h,_,w,D){const S=a.explicitOrderBy;if(w.length>S.length)throw new Ne(de.INVALID_ARGUMENT,`Too many arguments provided to ${_}(). The number of arguments must be less than or equal to the number of orderBy() clauses`);const N=[];for(let L=0;L<w.length;L++){const j=w[L];if(S[L].field.isKeyField()){if("string"!=typeof j)throw new Ne(de.INVALID_ARGUMENT,`Invalid query. Expected a string for document ID in ${_}(), but got a ${typeof j}`);if(!VR(a)&&-1!==j.indexOf("/"))throw new Ne(de.INVALID_ARGUMENT,`Invalid query. When querying a collection and ordering by documentId(), the value passed to ${_}() must be a plain document ID, but '${j}' contains a slash.`);const fe=a.path.child(un.fromString(j));if(!Ge.isDocumentKey(fe))throw new Ne(de.INVALID_ARGUMENT,`Invalid query. When querying a collection group and ordering by documentId(), the value passed to ${_}() must result in a valid document path, but '${fe}' is not because it contains an odd number of segments.`);const Me=new Ge(fe);N.push(S_(l,Me))}else{const fe=jL(h,_,j);N.push(fe)}}return new Hh(N,D)}(n._query,n.firestore._databaseId,i,e,t,r)}}function QL(n,e,t){if("string"==typeof(t=(0,k.m9)(t))){if(""===t)throw new Ne(de.INVALID_ARGUMENT,"Invalid query. When querying with documentId(), you must provide a valid document ID, but it was an empty string.");if(!VR(e)&&-1!==t.indexOf("/"))throw new Ne(de.INVALID_ARGUMENT,`Invalid query. When querying a collection by documentId(), you must provide a plain document ID, but '${t}' contains a '/' character.`);const r=e.path.child(un.fromString(t));if(!Ge.isDocumentKey(r))throw new Ne(de.INVALID_ARGUMENT,`Invalid query. When querying a collection group by documentId(), the value provided must result in a valid document path, but '${r}' is not because it has an odd number of segments (${r.length}).`);return S_(n,new Ge(r))}if(t instanceof Zn)return S_(n,t._key);throw new Ne(de.INVALID_ARGUMENT,`Invalid query. When querying with documentId(), you must provide a valid string or a DocumentReference, but it was: ${cT(t)}.`)}function JL(n,e){if(!Array.isArray(n)||0===n.length)throw new Ne(de.INVALID_ARGUMENT,`Invalid Query. A non-empty array is required for '${e.toString()}' filters.`);if(n.length>10)throw new Ne(de.INVALID_ARGUMENT,`Invalid Query. '${e.toString()}' filters support a maximum of 10 elements in the value array.`)}function XL(n,e,t){if(!t.isEqual(e))throw new Ne(de.INVALID_ARGUMENT,`Invalid query. You have a where filter with an inequality (<, <=, !=, not-in, >, or >=) on field '${e.toString()}' and so you must also use '${e.toString()}' as your first argument to orderBy(), but your first orderBy() is on field '${t.toString()}' instead.`)}class xN{convertValue(e,t="none"){switch(Wp(e)){case 0:return null;case 1:return e.booleanValue;case 2:return vr(e.integerValue||e.doubleValue);case 3:return this.convertTimestamp(e.timestampValue);case 4:return this.convertServerTimestamp(e,t);case 5:return e.stringValue;case 6:return this.convertBytes($p(e.bytesValue));case 7:return this.convertReference(e.referenceValue);case 8:return this.convertGeoPoint(e.geoPointValue);case 9:return this.convertArray(e.arrayValue,t);case 10:return this.convertObject(e.mapValue,t);default:throw st()}}convertObject(e,t){const r={};return Hp(e.fields,(i,a)=>{r[i]=this.convertValue(a,t)}),r}convertGeoPoint(e){return new hT(vr(e.latitude),vr(e.longitude))}convertArray(e,t){return(e.values||[]).map(r=>this.convertValue(r,t))}convertServerTimestamp(e,t){switch(t){case"previous":const r=h1(e);return null==r?null:this.convertValue(r,t);case"estimate":return this.convertTimestamp(Qw(e));default:return null}}convertTimestamp(e){const t=Bh(e);return new Rr(t.seconds,t.nanos)}convertDocumentKey(e,t){const r=un.fromString(e);xt(cF(r));const i=new Kc(r.get(1),r.get(3)),a=new Ge(r.popFirst(5));return i.isEqual(t)||Vr(`Document ${a} contains a document reference within a different database (${i.projectId}/${i.database}) which is not supported. It will be treated as a reference in the current database (${t.projectId}/${t.database}) instead.`),a}}function yT(n,e,t){let r;return r=n?t&&(t.merge||t.mergeFields)?n.toFirestore(e,t):n.toFirestore(e):e,r}class eW extends xN{constructor(e){super(),this.firestore=e}convertBytes(e){return new Ml(e)}convertReference(e){const t=this.convertDocumentKey(e,this.firestore._databaseId);return new Zn(this.firestore,null,t)}}class eV{constructor(e,t){this._firestore=e,this._commitHandler=t,this._mutations=[],this._committed=!1,this._dataReader=sg(e)}set(e,t,r){this._verifyNotCommitted();const i=Jh(e,this._firestore),a=yT(i.converter,t,r),l=pT(this._dataReader,"WriteBatch.set",i._key,a,null!==i.converter,r);return this._mutations.push(l.toMutation(i._key,Ur.none())),this}update(e,t,r,...i){this._verifyNotCommitted();const a=Jh(e,this._firestore);let l;return l="string"==typeof(t=(0,k.m9)(t))||t instanceof Jc?TN(this._dataReader,"WriteBatch.update",a._key,t,r,i):DN(this._dataReader,"WriteBatch.update",a._key,t),this._mutations.push(l.toMutation(a._key,Ur.exists(!0))),this}delete(e){this._verifyNotCommitted();const t=Jh(e,this._firestore);return this._mutations=this._mutations.concat(new aE(t._key,Ur.none())),this}commit(){return this._verifyNotCommitted(),this._committed=!0,this._mutations.length>0?this._commitHandler(this._mutations):Promise.resolve()}_verifyNotCommitted(){if(this._committed)throw new Ne(de.FAILED_PRECONDITION,"A write batch can no longer be used after commit() has been called.")}}function Jh(n,e){if((n=(0,k.m9)(n)).firestore!==e)throw new Ne(de.INVALID_ARGUMENT,"Provided document reference is from a different Firestore instance.");return n}class ug extends xN{constructor(e){super(),this.firestore=e}convertBytes(e){return new Ml(e)}convertReference(e){const t=this.convertDocumentKey(e,this.firestore._databaseId);return new Zn(this.firestore,null,t)}}function tV(n,e,t){n=nn(n,Zn);const r=nn(n.firestore,tr),i=yT(n.converter,e,t);return Q_(r,[pT(sg(r),"setDoc",n._key,i,null!==n.converter,t).toMutation(n._key,Ur.none())])}function nV(n,e,t,...r){n=nn(n,Zn);const i=nn(n.firestore,tr),a=sg(i);let l;return l="string"==typeof(e=(0,k.m9)(e))||e instanceof Jc?TN(a,"updateDoc",n._key,e,t,r):DN(a,"updateDoc",n._key,e),Q_(i,[l.toMutation(n._key,Ur.exists(!0))])}function rV(n,...e){var t,r,i;n=(0,k.m9)(n);let a={includeMetadataChanges:!1},l=0;"object"!=typeof e[l]||IN(e[l])||(a=e[l],l++);const h={includeMetadataChanges:a.includeMetadataChanges};if(IN(e[l])){const S=e[l];e[l]=null===(t=S.next)||void 0===t?void 0:t.bind(S),e[l+1]=null===(r=S.error)||void 0===r?void 0:r.bind(S),e[l+2]=null===(i=S.complete)||void 0===i?void 0:i.bind(S)}let _,w,D;if(n instanceof Zn)w=nn(n.firestore,tr),D=R_(n._key.path),_={next:S=>{e[l]&&e[l](RN(w,n,S))},error:e[l+1],complete:e[l+2]};else{const S=nn(n,gs);w=nn(S.firestore,tr),D=S._query;const N=new ug(w);_={next:L=>{e[l]&&e[l](new Yh(w,N,S,L))},error:e[l+1],complete:e[l+2]},qL(n._query)}return function(S,N,L,j){const fe=new uT(j),Me=new jM(N,fe,L);return S.asyncQueue.enqueueAndForget((0,ye.Z)(function*(){return FM(yield Y_(S),Me)})),()=>{fe.pa(),S.asyncQueue.enqueueAndForget((0,ye.Z)(function*(){return VM(yield Y_(S),Me)}))}}(jr(w),D,h,_)}function Q_(n,e){return function(t,r){const i=new vi;return t.asyncQueue.enqueueAndForget((0,ye.Z)(function*(){return function z$(n,e,t){return qM.apply(this,arguments)}(yield wN(t),r,i)})),i.promise}(jr(n),e)}function RN(n,e,t){const r=t.docs.get(e._key),i=new ug(n);return new Xc(n,i,e._key,r,new ag(t.hasPendingWrites,t.fromCache),e.converter)}class cW extends class{constructor(e,t){this._firestore=e,this._transaction=t,this._dataReader=sg(e)}get(e){const t=Jh(e,this._firestore),r=new eW(this._firestore);return this._transaction.lookup([t._key]).then(i=>{if(!i||1!==i.length)return st();const a=i[0];if(a.isFoundDocument())return new SE(this._firestore,r,a.key,a,t.converter);if(a.isNoDocument())return new SE(this._firestore,r,t._key,null,t.converter);throw st()})}set(e,t,r){const i=Jh(e,this._firestore),a=yT(i.converter,t,r),l=pT(this._dataReader,"Transaction.set",i._key,a,null!==i.converter,r);return this._transaction.set(i._key,l),this}update(e,t,r,...i){const a=Jh(e,this._firestore);let l;return l="string"==typeof(t=(0,k.m9)(t))||t instanceof Jc?TN(this._dataReader,"Transaction.update",a._key,t,r,i):DN(this._dataReader,"Transaction.update",a._key,t),this._transaction.update(a._key,l),this}delete(e){const t=Jh(e,this._firestore);return this._transaction.delete(t._key),this}}{constructor(e,t){super(e,t),this._firestore=e}get(e){const t=Jh(e,this._firestore),r=new ug(this._firestore);return super.get(e).then(i=>new Xc(this._firestore,r,t._key,i._document,new ag(!1,!1),t.converter))}}function MN(n,e){if(void 0===e)return{merge:!1};if(void 0!==e.mergeFields&&void 0!==e.merge)throw new Ne("invalid-argument",`Invalid options passed to function ${n}(): You cannot specify both "merge" and "mergeFields".`);return e}function sV(){if("undefined"==typeof Uint8Array)throw new Ne("unimplemented","Uint8Arrays are not available in this environment.")}function oV(){if(!function Nj(){return"undefined"!=typeof atob}())throw new Ne("unimplemented","Blobs are unavailable in Firestore in this environment.")}!function(n,e=!0){I_=gi.SDK_VERSION,(0,gi._registerComponent)(new Co.wA("firestore",(t,{options:r})=>{const i=t.getProvider("app").getImmediate(),a=new tr(i,new Tj(t.getProvider("auth-internal")),new xj(t.getProvider("app-check-internal")));return r=Object.assign({useFetchStreams:e},r),a._setSettings(r),a},"PUBLIC")),(0,gi.registerVersion)(s1,"3.4.7",n),(0,gi.registerVersion)(s1,"3.4.7","esm2017")}();class RE{constructor(e){this._delegate=e}static fromBase64String(e){return oV(),new RE(Ml.fromBase64String(e))}static fromUint8Array(e){return sV(),new RE(Ml.fromUint8Array(e))}toBase64(){return oV(),this._delegate.toBase64()}toUint8Array(){return sV(),this._delegate.toUint8Array()}isEqual(e){return this._delegate.isEqual(e._delegate)}toString(){return"Blob(base64: "+this.toBase64()+")"}}function NN(n){return function vW(n,e){if("object"!=typeof n||null===n)return!1;const t=n;for(const r of e)if(r in t&&"function"==typeof t[r])return!0;return!1}(n,["next","error","complete"])}class wW{enableIndexedDbPersistence(e,t){return function SG(n,e){LL(n=nn(n,tr));const t=jr(n),r=n._freezeSettings(),i=new fN;return FL(t,i,new yL(i,r.cacheSizeBytes,null==e?void 0:e.forceOwnership))}(e._delegate,{forceOwnership:t})}enableMultiTabIndexedDbPersistence(e){return function AG(n){LL(n=nn(n,tr));const e=jr(n),t=n._freezeSettings(),r=new fN;return FL(e,r,new lG(r,t.cacheSizeBytes))}(e._delegate)}clearIndexedDbPersistence(e){return function xG(n){if(n._initialized&&!n._terminated)throw new Ne(de.FAILED_PRECONDITION,"Persistence can only be cleared before a Firestore instance is initialized or after it is terminated.");const e=new vi;return n._queue.enqueueAndForgetEvenWhileRestricted((0,ye.Z)(function*(){try{yield(t=(0,ye.Z)(function*(r){if(!Cu.vt())return Promise.resolve();const i=r+"main";yield Cu.delete(i)}),function(r){return t.apply(this,arguments)})(sM(n._databaseId,n._persistenceKey)),e.resolve()}catch(t){e.reject(t)}var t})),e.promise}(e._delegate)}}class aV{constructor(e,t,r){this._delegate=t,this._persistenceProvider=r,this.INTERNAL={delete:()=>this.terminate()},e instanceof Kc||(this._appCompat=e)}get _databaseId(){return this._delegate._databaseId}settings(e){const t=this._delegate._getSettings();!e.merge&&t.host!==e.host&&Zw("You are overriding the original host. If you did not intend to override your settings, use {merge: true}."),e.merge&&delete(e=Object.assign(Object.assign({},t),e)).merge,this._delegate._setSettings(e)}useEmulator(e,t,r={}){!function CG(n,e,t,r={}){var i;const a=(n=nn(n,DE))._getSettings();if("firestore.googleapis.com"!==a.host&&a.host!==e&&Zw("Host has been set in both settings() and useEmulator(), emulator host will be used"),n._setSettings(Object.assign(Object.assign({},a),{host:`${e}:${t}`,ssl:!1})),r.mockUserToken){let l,h;if("string"==typeof r.mockUserToken)l=r.mockUserToken,h=$i.MOCK_USER;else{l=(0,k.Sg)(r.mockUserToken,null===(i=n._app)||void 0===i?void 0:i.options.projectId);const _=r.mockUserToken.sub||r.mockUserToken.user_id;if(!_)throw new Ne(de.INVALID_ARGUMENT,"mockUserToken must contain 'sub' or 'user_id' field!");h=new $i(_)}n._authCredentials=new Dj(new o1(l,h))}}(this._delegate,e,t,r)}enableNetwork(){return function MG(n){return function pG(n){return n.asyncQueue.enqueue((0,ye.Z)(function*(){const e=yield CL(n),t=yield IL(n);return e.setNetworkEnabled(!0),function(r){const i=ze(r);return i.lu.delete(0),IE(i)}(t)}))}(jr(n=nn(n,tr)))}(this._delegate)}disableNetwork(){return function NG(n){return function gG(n){return n.asyncQueue.enqueue((0,ye.Z)(function*(){const e=yield CL(n),t=yield IL(n);return e.setNetworkEnabled(!1),(r=(0,ye.Z)(function*(i){const a=ze(i);a.lu.add(0),yield $_(a),a._u.set("Offline")}),function(i){return r.apply(this,arguments)})(t);var r}))}(jr(n=nn(n,tr)))}(this._delegate)}enablePersistence(e){let t=!1,r=!1;return e&&(t=!!e.synchronizeTabs,r=!!e.experimentalForceOwningTab,SL("synchronizeTabs",t,"experimentalForceOwningTab",r)),t?this._persistenceProvider.enableMultiTabIndexedDbPersistence(this):this._persistenceProvider.enableIndexedDbPersistence(this,r)}clearPersistence(){return this._persistenceProvider.clearIndexedDbPersistence(this)}terminate(){return this._appCompat&&(this._appCompat._removeServiceInstance("firestore-compat"),this._appCompat._removeServiceInstance("firestore")),this._delegate._delete()}waitForPendingWrites(){return function RG(n){return function(e){const t=new vi;return e.asyncQueue.enqueueAndForget((0,ye.Z)(function*(){return function Q$(n,e){return QM.apply(this,arguments)}(yield wN(e),t)})),t.promise}(jr(n=nn(n,tr)))}(this._delegate)}onSnapshotsInSync(e){return function lW(n,e){return function yG(n,e){const t=new uT(e);return n.asyncQueue.enqueueAndForget((0,ye.Z)(function*(){return r=yield Y_(n),i=t,ze(r).Tu.add(i),void i.next();var r,i})),()=>{t.pa(),n.asyncQueue.enqueueAndForget((0,ye.Z)(function*(){return r=yield Y_(n),i=t,void ze(r).Tu.delete(i);var r,i}))}}(jr(n=nn(n,tr)),IN(e)?e:{next:e})}(this._delegate,e)}get app(){if(!this._appCompat)throw new Ne("failed-precondition","Firestore was not initialized using the Firebase SDK. 'app' is not available");return this._appCompat}collection(e){try{return new J_(this,NL(this._delegate,e))}catch(t){throw $s(t,"collection()","Firestore.collection()")}}doc(e){try{return new Wa(this,dT(this._delegate,e))}catch(t){throw $s(t,"doc()","Firestore.doc()")}}collectionGroup(e){try{return new Gs(this,function IG(n,e){if(n=nn(n,DE),CN("collectionGroup","collection id",e),e.indexOf("/")>=0)throw new Ne(de.INVALID_ARGUMENT,`Invalid collection ID '${e}' passed to function collectionGroup(). Collection IDs must not contain '/'.`);return new gs(n,null,(t=e,new Yc(un.emptyPath(),t)));var t}(this._delegate,e))}catch(t){throw $s(t,"collectionGroup()","Firestore.collectionGroup()")}}runTransaction(e){return function dW(n,e){return function vG(n,e){const t=new vi;return n.asyncQueue.enqueueAndForget((0,ye.Z)(function*(){const r=yield(i=n,lT(i).then(a=>a.datastore));var i;new hG(n.asyncQueue,r,e,t).run()})),t.promise}(jr(n=nn(n,tr)),t=>e(new cW(n,t)))}(this._delegate,t=>e(new uV(this,t)))}batch(){return jr(this._delegate),new lV(new eV(this._delegate,e=>Q_(this._delegate,e)))}loadBundle(e){return function PG(n,e){const t=jr(n=nn(n,tr)),r=new DG;return function wG(n,e,t,r){const i=function(a,l){let h;return h="string"==typeof a?(new TextEncoder).encode(a):a,_=function(_,w){if(_ instanceof Uint8Array)return vL(_,w);if(_ instanceof ArrayBuffer)return vL(new Uint8Array(_),w);if(_ instanceof ReadableStream)return _.getReader();throw new Error("Source of `toByteStreamReader` has to be a ArrayBuffer or ReadableStream")}(h),new cG(_,l);var _}(t,CE(e));n.asyncQueue.enqueueAndForget((0,ye.Z)(function*(){!function uG(n,e,t){const r=ze(n);var i;(i=(0,ye.Z)(function*(a,l,h){try{const _=yield l.getMetadata();if(yield function(N,L){const j=ze(N),fe=Ei(L.createTime);return j.persistence.runTransaction("hasNewerBundle","readonly",Me=>j.ds.getBundleMetadata(Me,L.id)).then(Me=>!!Me&&Me.createTime.compareTo(fe)>=0)}(a.localStore,_))return yield l.close(),h._completeWith({taskState:"Success",documentsLoaded:(N=_).totalDocuments,bytesLoaded:N.totalBytes,totalDocuments:N.totalDocuments,totalBytes:N.totalBytes}),Promise.resolve(new Set);h._updateProgress(uL(_));const w=new j$(_,a.localStore,l.M);let D=yield l.fa();for(;D;){const N=yield w.Nu(D);N&&h._updateProgress(N),D=yield l.fa()}const S=yield w.complete();return yield Qc(a,S.Ou,void 0),yield function(N,L){const j=ze(N);return j.persistence.runTransaction("Save bundle","readwrite",fe=>j.ds.saveBundleMetadata(fe,L))}(a.localStore,_),h._completeWith(S.progress),Promise.resolve(S.Mu)}catch(_){return Zw("SyncEngine",`Loading bundle failed with ${_}`),h._failWith(_),Promise.resolve(new Set)}var N}),function(a,l,h){return i.apply(this,arguments)})(r,e,t).then(i=>{r.sharedClientState.notifyBundleLoaded(i)})}(yield wN(n),i,r)}))}(t,n._databaseId,e,r),r}(this._delegate,e)}namedQuery(e){return function kG(n,e){return function EG(n,e){return n.asyncQueue.enqueue((0,ye.Z)(function*(){return function(t,r){const i=ze(t);return i.persistence.runTransaction("Get named query","readonly",a=>i.ds.getNamedQuery(a,r))}(yield vN(n),e)}))}(jr(n=nn(n,tr)),e).then(t=>t?new gs(n,null,t.query):null)}(this._delegate,e).then(t=>t?new Gs(this,t):null)}}class vT extends xN{constructor(e){super(),this.firestore=e}convertBytes(e){return new RE(new Ml(e))}convertReference(e){const t=this.convertDocumentKey(e,this.firestore._databaseId);return Wa.forKey(t,this.firestore,null)}}class uV{constructor(e,t){this._firestore=e,this._delegate=t,this._userDataWriter=new vT(e)}get(e){const t=cg(e);return this._delegate.get(t).then(r=>new ME(this._firestore,new Xc(this._firestore._delegate,this._userDataWriter,r._key,r._document,r.metadata,t.converter)))}set(e,t,r){const i=cg(e);return r?(MN("Transaction.set",r),this._delegate.set(i,t,r)):this._delegate.set(i,t),this}update(e,t,r,...i){const a=cg(e);return 2===arguments.length?this._delegate.update(a,t):this._delegate.update(a,t,r,...i),this}delete(e){const t=cg(e);return this._delegate.delete(t),this}}class lV{constructor(e){this._delegate=e}set(e,t,r){const i=cg(e);return r?(MN("WriteBatch.set",r),this._delegate.set(i,t,r)):this._delegate.set(i,t),this}update(e,t,r,...i){const a=cg(e);return 2===arguments.length?this._delegate.update(a,t):this._delegate.update(a,t,r,...i),this}delete(e){const t=cg(e);return this._delegate.delete(t),this}commit(){return this._delegate.commit()}}class lg{constructor(e,t,r){this._firestore=e,this._userDataWriter=t,this._delegate=r}fromFirestore(e,t){const r=new AE(this._firestore._delegate,this._userDataWriter,e._key,e._document,e.metadata,null);return this._delegate.fromFirestore(new NE(this._firestore,r),null!=t?t:{})}toFirestore(e,t){return t?this._delegate.toFirestore(e,t):this._delegate.toFirestore(e)}static getInstance(e,t){const r=lg.INSTANCES;let i=r.get(e);i||(i=new WeakMap,r.set(e,i));let a=i.get(t);return a||(a=new lg(e,new vT(e),t),i.set(t,a)),a}}lg.INSTANCES=new WeakMap;class Wa{constructor(e,t){this.firestore=e,this._delegate=t,this._userDataWriter=new vT(e)}static forPath(e,t,r){if(e.length%2!=0)throw new Ne("invalid-argument",`Invalid document reference. Document references must have an even number of segments, but ${e.canonicalString()} has ${e.length}`);return new Wa(t,new Zn(t._delegate,r,new Ge(e)))}static forKey(e,t,r){return new Wa(t,new Zn(t._delegate,r,e))}get id(){return this._delegate.id}get parent(){return new J_(this.firestore,this._delegate.parent)}get path(){return this._delegate.path}collection(e){try{return new J_(this.firestore,NL(this._delegate,e))}catch(t){throw $s(t,"collection()","DocumentReference.collection()")}}isEqual(e){return(e=(0,k.m9)(e))instanceof Zn&&PL(this._delegate,e)}set(e,t){t=MN("DocumentReference.set",t);try{return t?tV(this._delegate,e,t):tV(this._delegate,e)}catch(r){throw $s(r,"setDoc()","DocumentReference.set()")}}update(e,t,...r){try{return 1===arguments.length?nV(this._delegate,e):nV(this._delegate,e,t,...r)}catch(i){throw $s(i,"updateDoc()","DocumentReference.update()")}}delete(){return function aW(n){return Q_(nn(n.firestore,tr),[new aE(n._key,Ur.none())])}(this._delegate)}onSnapshot(...e){const t=cV(e),r=dV(e,i=>new ME(this.firestore,new Xc(this.firestore._delegate,this._userDataWriter,i._key,i._document,i.metadata,this._delegate.converter)));return rV(this._delegate,t,r)}get(e){let t;return t="cache"===(null==e?void 0:e.source)?function nW(n){n=nn(n,Zn);const e=nn(n.firestore,tr),t=jr(e),r=new ug(e);return function mG(n,e){const t=new vi;return n.asyncQueue.enqueueAndForget((0,ye.Z)(function*(){return(r=(0,ye.Z)(function*(i,a,l){try{const h=yield function(_,w){const D=ze(_);return D.persistence.runTransaction("read document","readonly",S=>D.ai.Bs(S,w))}(i,a);h.isFoundDocument()?l.resolve(h):h.isNoDocument()?l.resolve(null):l.reject(new Ne(de.UNAVAILABLE,"Failed to get document from cache. (However, this document may exist on the server. Run again without setting 'source' in the GetOptions to attempt to retrieve the document from the server.)"))}catch(h){const _=q_(h,`Failed to get document '${a} from cache`);l.reject(_)}}),function(i,a,l){return r.apply(this,arguments)})(yield vN(n),e,t);var r})),t.promise}(t,n._key).then(i=>new Xc(e,r,n._key,i,new ag(null!==i&&i.hasLocalMutations,!0),n.converter))}(this._delegate):"server"===(null==e?void 0:e.source)?function rW(n){n=nn(n,Zn);const e=nn(n.firestore,tr);return bL(jr(e),n._key,{source:"server"}).then(t=>RN(e,n,t))}(this._delegate):function tW(n){n=nn(n,Zn);const e=nn(n.firestore,tr);return bL(jr(e),n._key).then(t=>RN(e,n,t))}(this._delegate),t.then(r=>new ME(this.firestore,new Xc(this.firestore._delegate,this._userDataWriter,r._key,r._document,r.metadata,this._delegate.converter)))}withConverter(e){return new Wa(this.firestore,this._delegate.withConverter(e?lg.getInstance(this.firestore,e):null))}}function $s(n,e,t){return n.message=n.message.replace(e,t),n}function cV(n){for(const e of n)if("object"==typeof e&&!NN(e))return e;return{}}function dV(n,e){var t,r;let i;return i=NN(n[0])?n[0]:NN(n[1])?n[1]:"function"==typeof n[0]?{next:n[0],error:n[1],complete:n[2]}:{next:n[1],error:n[2],complete:n[3]},{next:a=>{i.next&&i.next(e(a))},error:null===(t=i.error)||void 0===t?void 0:t.bind(i),complete:null===(r=i.complete)||void 0===r?void 0:r.bind(i)}}class ME{constructor(e,t){this._firestore=e,this._delegate=t}get ref(){return new Wa(this._firestore,this._delegate.ref)}get id(){return this._delegate.id}get metadata(){return this._delegate.metadata}get exists(){return this._delegate.exists()}data(e){return this._delegate.data(e)}get(e,t){return this._delegate.get(e,t)}isEqual(e){return WL(this._delegate,e._delegate)}}class NE extends ME{data(e){const t=this._delegate.data(e);return function Ij(n,e){n||st()}(void 0!==t),t}}class Gs{constructor(e,t){this.firestore=e,this._delegate=t,this._userDataWriter=new vT(e)}where(e,t,r){try{return new Gs(this.firestore,Qh(this._delegate,function WG(n,e,t){const r=e,i=_T("where",n);return new GG(i,r,t)}(e,t,r)))}catch(i){throw $s(i,/(orderBy|where)\(\)/,"Query.$1()")}}orderBy(e,t){try{return new Gs(this.firestore,Qh(this._delegate,function zG(n,e="asc"){const t=e,r=_T("orderBy",n);return new qG(r,t)}(e,t)))}catch(r){throw $s(r,/(orderBy|where)\(\)/,"Query.$1()")}}limit(e){try{return new Gs(this.firestore,Qh(this._delegate,function KG(n){return RL("limit",n),new zL("limit",n,"F")}(e)))}catch(t){throw $s(t,"limit()","Query.limit()")}}limitToLast(e){try{return new Gs(this.firestore,Qh(this._delegate,function ZG(n){return RL("limitToLast",n),new zL("limitToLast",n,"L")}(e)))}catch(t){throw $s(t,"limitToLast()","Query.limitToLast()")}}startAt(...e){try{return new Gs(this.firestore,Qh(this._delegate,function YG(...n){return new KL("startAt",n,!0)}(...e)))}catch(t){throw $s(t,"startAt()","Query.startAt()")}}startAfter(...e){try{return new Gs(this.firestore,Qh(this._delegate,function QG(...n){return new KL("startAfter",n,!1)}(...e)))}catch(t){throw $s(t,"startAfter()","Query.startAfter()")}}endBefore(...e){try{return new Gs(this.firestore,Qh(this._delegate,function JG(...n){return new ZL("endBefore",n,!1)}(...e)))}catch(t){throw $s(t,"endBefore()","Query.endBefore()")}}endAt(...e){try{return new Gs(this.firestore,Qh(this._delegate,function XG(...n){return new ZL("endAt",n,!0)}(...e)))}catch(t){throw $s(t,"endAt()","Query.endAt()")}}isEqual(e){return kL(this._delegate,e._delegate)}get(e){let t;return t="cache"===(null==e?void 0:e.source)?function sW(n){n=nn(n,gs);const e=nn(n.firestore,tr),t=jr(e),r=new ug(e);return function _G(n,e){const t=new vi;return n.asyncQueue.enqueueAndForget((0,ye.Z)(function*(){return(r=(0,ye.Z)(function*(i,a,l){try{const h=yield nT(i,a,!0),_=new dL(a,h.hi),w=_.Gu(h.documents),D=_.applyChanges(w,!1);l.resolve(D.snapshot)}catch(h){const _=q_(h,`Failed to execute query '${a} against cache`);l.reject(_)}}),function(i,a,l){return r.apply(this,arguments)})(yield vN(n),e,t);var r})),t.promise}(t,n._query).then(i=>new Yh(e,r,n,i))}(this._delegate):"server"===(null==e?void 0:e.source)?function oW(n){n=nn(n,gs);const e=nn(n.firestore,tr),t=jr(e),r=new ug(e);return DL(t,n._query,{source:"server"}).then(i=>new Yh(e,r,n,i))}(this._delegate):function iW(n){n=nn(n,gs);const e=nn(n.firestore,tr),t=jr(e),r=new ug(e);return qL(n._query),DL(t,n._query).then(i=>new Yh(e,r,n,i))}(this._delegate),t.then(r=>new PN(this.firestore,new Yh(this.firestore._delegate,this._userDataWriter,this._delegate,r._snapshot)))}onSnapshot(...e){const t=cV(e),r=dV(e,i=>new PN(this.firestore,new Yh(this.firestore._delegate,this._userDataWriter,this._delegate,i._snapshot)));return rV(this._delegate,t,r)}withConverter(e){return new Gs(this.firestore,this._delegate.withConverter(e?lg.getInstance(this.firestore,e):null))}}class CW{constructor(e,t){this._firestore=e,this._delegate=t}get type(){return this._delegate.type}get doc(){return new NE(this._firestore,this._delegate.doc)}get oldIndex(){return this._delegate.oldIndex}get newIndex(){return this._delegate.newIndex}}class PN{constructor(e,t){this._firestore=e,this._delegate=t}get query(){return new Gs(this._firestore,this._delegate.query)}get metadata(){return this._delegate.metadata}get size(){return this._delegate.size}get empty(){return this._delegate.empty}get docs(){return this._delegate.docs.map(e=>new NE(this._firestore,e))}docChanges(e){return this._delegate.docChanges(e).map(t=>new CW(this._firestore,t))}forEach(e,t){this._delegate.forEach(r=>{e.call(t,new NE(this._firestore,r))})}isEqual(e){return WL(this._delegate,e._delegate)}}class J_ extends Gs{constructor(e,t){super(e,t),this.firestore=e,this._delegate=t}get id(){return this._delegate.id}get path(){return this._delegate.path}get parent(){const e=this._delegate.parent;return e?new Wa(this.firestore,e):null}doc(e){try{return new Wa(this.firestore,void 0===e?dT(this._delegate):dT(this._delegate,e))}catch(t){throw $s(t,"doc()","CollectionReference.doc()")}}add(e){return function uW(n,e){const t=nn(n.firestore,tr),r=dT(n),i=yT(n.converter,e);return Q_(t,[pT(sg(n.firestore),"addDoc",r._key,i,null!==n.converter,{}).toMutation(r._key,Ur.exists(!1))]).then(()=>r)}(this._delegate,e).then(t=>new Wa(this.firestore,t))}isEqual(e){return PL(this._delegate,e._delegate)}withConverter(e){return new J_(this.firestore,this._delegate.withConverter(e?lg.getInstance(this.firestore,e):null))}}function cg(n){return nn(n,Zn)}class kN{constructor(...e){this._delegate=new Jc(...e)}static documentId(){return new kN(wi.keyField().canonicalString())}isEqual(e){return(e=(0,k.m9)(e))instanceof Jc&&this._delegate._internalPath.isEqual(e._internalPath)}}class dg{constructor(e){this._delegate=e}static serverTimestamp(){const e=function fW(){return new bN("serverTimestamp")}();return e._methodName="FieldValue.serverTimestamp",new dg(e)}static delete(){const e=function hW(){return new TE("deleteField")}();return e._methodName="FieldValue.delete",new dg(e)}static arrayUnion(...e){const t=function pW(...n){return new VG("arrayUnion",n)}(...e);return t._methodName="FieldValue.arrayUnion",new dg(t)}static arrayRemove(...e){const t=function gW(...n){return new UG("arrayRemove",n)}(...e);return t._methodName="FieldValue.arrayRemove",new dg(t)}static increment(e){const t=function mW(n){return new BG("increment",n)}(e);return t._methodName="FieldValue.increment",new dg(t)}isEqual(e){return this._delegate.isEqual(e._delegate)}}const IW={Firestore:aV,GeoPoint:hT,Timestamp:Rr,Blob:RE,Transaction:uV,WriteBatch:lV,DocumentReference:Wa,DocumentSnapshot:ME,Query:Gs,QueryDocumentSnapshot:NE,QuerySnapshot:PN,CollectionReference:J_,FieldPath:kN,FieldValue:dg,setLogLevel:function EW(n){!function Cj(n){Uh.setLogLevel(n)}(n)},CACHE_SIZE_UNLIMITED:-1};function hV(n,e){return function TW(n,e=hl.z){return new gr.y(t=>{let r;return null!=e?e.schedule(()=>{r=n.onSnapshot({includeMetadataChanges:!0},t)}):r=n.onSnapshot({includeMetadataChanges:!0},t),()=>{null!=r&&r()}})}(n,e)}function ON(n,e){return hV(n,e).pipe((0,yt.U)(t=>({payload:t,type:"query"})))}function wT(n,e){return ON(n,e).pipe(Ni(void 0),Vx(),(0,yt.U)(([t,r])=>{const i=r.payload.docChanges(),a=i.map(l=>({type:l.type,payload:l}));return t&&JSON.stringify(t.payload.metadata)!==JSON.stringify(r.payload.metadata)&&r.payload.docs.forEach((l,h)=>{const _=i.find(D=>D.doc.ref.isEqual(l.ref)),w=null==t?void 0:t.payload.docs.find(D=>D.ref.isEqual(l.ref));_&&JSON.stringify(_.doc.metadata)===JSON.stringify(l.metadata)||!_&&w&&JSON.stringify(w.metadata)===JSON.stringify(l.metadata)||a.push({type:"modified",payload:{oldIndex:h,newIndex:h,type:"modified",doc:l}})}),a}))}function fV(n,e,t){return wT(n,t).pipe(or((r,i)=>function AW(n,e,t){return e.forEach(r=>{t.indexOf(r.type)>-1&&(n=function xW(n,e){switch(e.type){case"added":if(!n[e.newIndex]||!n[e.newIndex].doc.ref.isEqual(e.doc.ref))return FN(n,e.newIndex,0,e);break;case"modified":if(null==n[e.oldIndex]||n[e.oldIndex].doc.ref.isEqual(e.doc.ref)){if(e.oldIndex!==e.newIndex){const t=n.slice();return t.splice(e.oldIndex,1),t.splice(e.newIndex,0,e),t}return FN(n,e.newIndex,1,e)}break;case"removed":if(n[e.oldIndex]&&n[e.oldIndex].doc.ref.isEqual(e.doc.ref))return FN(n,e.oldIndex,1)}return n}(n,r))}),n}(r,i.map(a=>a.payload),e),[]),xc(),(0,yt.U)(r=>r.map(i=>({type:i.type,payload:i}))))}function FN(n,e,t,...r){const i=n.slice();return i.splice(e,t,...r),i}function pV(n){return(!n||0===n.length)&&(n=["added","removed","modified"]),n}!function DW(n){(function bW(n,e){n.INTERNAL.registerComponent(new Co.wA("firestore-compat",t=>{const r=t.getProvider("app-compat").getImmediate(),i=t.getProvider("firestore").getImmediate();return e(r,i)},"PUBLIC").setServiceProps(Object.assign({},IW)))})(n,(e,t)=>new aV(e,t,new wW)),n.registerVersion("@firebase/firestore-compat","0.1.16")}(cm.Z);class gV{constructor(e,t,r){this.ref=e,this.query=t,this.afs=r}stateChanges(e){let t=wT(this.query,this.afs.schedulers.outsideAngular);return e&&e.length>0&&(t=t.pipe((0,yt.U)(r=>r.filter(i=>e.indexOf(i.type)>-1)))),t.pipe(Ni(void 0),Vx(),Xi(([r,i])=>i.length>0||!r),(0,yt.U)(([r,i])=>i),tn.iC)}auditTrail(e){return this.stateChanges(e).pipe(or((t,r)=>[...t,...r],[]))}snapshotChanges(e){const t=pV(e);return fV(this.query,t,this.afs.schedulers.outsideAngular).pipe(tn.iC)}valueChanges(e={}){return ON(this.query,this.afs.schedulers.outsideAngular).pipe((0,yt.U)(t=>t.payload.docs.map(r=>e.idField?Object.assign(Object.assign({},r.data()),{[e.idField]:r.id}):r.data())),tn.iC)}get(e){return(0,wn.D)(this.query.get(e)).pipe(tn.iC)}add(e){return this.ref.add(e)}doc(e){return new mV(this.ref.doc(e),this.afs)}}class mV{constructor(e,t){this.ref=e,this.afs=t}set(e,t){return this.ref.set(e,t)}update(e){return this.ref.update(e)}delete(){return this.ref.delete()}collection(e,t){const r=this.ref.collection(e),{ref:i,query:a}=vV(r,t);return new gV(i,a,this.afs)}snapshotChanges(){return function SW(n,e){return hV(n,e).pipe(Ni(void 0),Vx(),(0,yt.U)(([t,r])=>r.exists?(null==t?void 0:t.exists)?{payload:r,type:"modified"}:{payload:r,type:"added"}:{payload:r,type:"removed"}))}(this.ref,this.afs.schedulers.outsideAngular).pipe(tn.iC)}valueChanges(e={}){return this.snapshotChanges().pipe((0,yt.U)(({payload:t})=>e.idField?Object.assign(Object.assign({},t.data()),{[e.idField]:t.id}):t.data()))}get(e){return(0,wn.D)(this.ref.get(e)).pipe(tn.iC)}}class RW{constructor(e,t){this.query=e,this.afs=t}stateChanges(e){return e&&0!==e.length?wT(this.query,this.afs.schedulers.outsideAngular).pipe((0,yt.U)(t=>t.filter(r=>e.indexOf(r.type)>-1)),Xi(t=>t.length>0),tn.iC):wT(this.query,this.afs.schedulers.outsideAngular).pipe(tn.iC)}auditTrail(e){return this.stateChanges(e).pipe(or((t,r)=>[...t,...r],[]))}snapshotChanges(e){const t=pV(e);return fV(this.query,t,this.afs.schedulers.outsideAngular).pipe(tn.iC)}valueChanges(e={}){return ON(this.query,this.afs.schedulers.outsideAngular).pipe((0,yt.U)(r=>r.payload.docs.map(i=>e.idField?Object.assign({[e.idField]:i.id},i.data()):i.data())),tn.iC)}get(e){return(0,wn.D)(this.query.get(e)).pipe(tn.iC)}}const _V=new m.OlP("angularfire2.enableFirestorePersistence"),yV=new m.OlP("angularfire2.firestore.persistenceSettings"),MW=new m.OlP("angularfire2.firestore.settings"),NW=new m.OlP("angularfire2.firestore.use-emulator");function vV(n,e=(t=>t)){return{query:e(n),ref:n}}let PW=(()=>{class n{constructor(t,r,i,a,l,h,_,w,D,S,N,L,j,fe,Me,et,We){this.schedulers=_;const wt=(0,_r.on)(t,h,r),tt=D;S&&Dx(wt,h,N,j,fe,Me,L,et),[this.firestore,this.persistenceEnabled$]=(0,_r.cc)(`${wt.name}.firestore`,"AngularFirestore",wt.name,()=>{const Nt=h.runOutsideAngular(()=>wt.firestore());if(a&&Nt.settings(a),tt&&Nt.useEmulator(...tt),i&&!hr(l)){const Pt=()=>{try{return(0,wn.D)(Nt.enablePersistence(w||void 0).then(()=>!0,()=>!1))}catch(Ro){return"undefined"!=typeof console&&console.warn(Ro),ct(!1)}};return[Nt,h.runOutsideAngular(Pt)]}return[Nt,ct(!1)]},[a,tt,i])}collection(t,r){let i;i="string"==typeof t?this.firestore.collection(t):t;const{ref:a,query:l}=vV(i,r),h=this.schedulers.ngZone.run(()=>a);return new gV(h,l,this)}collectionGroup(t,r){const i=r||(l=>l),a=this.firestore.collectionGroup(t);return new RW(i(a),this)}doc(t){let r;r="string"==typeof t?this.firestore.doc(t):t;const i=this.schedulers.ngZone.run(()=>r);return new mV(i,this)}createId(){return this.firestore.collection("_").doc().id}}return n.\u0275fac=function(t){return new(t||n)(m.LFG(_r.Dh),m.LFG(_r.xv,8),m.LFG(_V,8),m.LFG(MW,8),m.LFG(m.Lbi),m.LFG(m.R0b),m.LFG(tn.HU),m.LFG(yV,8),m.LFG(NW,8),m.LFG(Xb,8),m.LFG(vx,8),m.LFG(wx,8),m.LFG(Ex,8),m.LFG(Cx,8),m.LFG(Ix,8),m.LFG(bx,8),m.LFG(Dw,8))},n.\u0275prov=m.Yz7({token:n,factory:n.\u0275fac,providedIn:"any"}),n})(),kW=(()=>{class n{constructor(){Jb.Z.registerVersion("angularfire",tn.q4.full,"fst-compat")}static enablePersistence(t){return{ngModule:n,providers:[{provide:_V,useValue:!0},{provide:yV,useValue:t}]}}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=m.oAB({type:n}),n.\u0275inj=m.cJS({providers:[PW]}),n})();const wV_firebaseConfig={apiKey:"AIzaSyAWKhOjAmEiSX4U07oZTq3uaNJvN34WVO4",authDomain:"tinyurl-e6d25.firebaseapp.com",databaseURL:"https://tinyurl-e6d25-default-rtdb.firebaseio.com",projectId:"tinyurl-e6d25",storageBucket:"tinyurl-e6d25.appspot.com",messagingSenderId:"1084747078533",appId:"1:1084747078533:web:ed40938a04e8bf5b2c42ec",measurementId:"G-ZKZMGWSYB1"};let OW=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=m.oAB({type:n,bootstrap:[bU]}),n.\u0275inj=m.cJS({providers:[ok],imports:[[eu,GE,eh,vo,_r.hO.initializeApp(wV_firebaseConfig),tU,kW,p2,gU]]}),n})();(0,m.G48)(),Hl().bootstrapModule(OW).catch(n=>console.error(n))},5867:(ot,De,F)=>{F.d(De,{C6:()=>m.getApps,Mq:()=>m.getApp});var m=F(9681);(0,m.registerVersion)("firebase","9.6.10","app")},127:(ot,De,F)=>{F.d(De,{Z:()=>m.Z});var m=F(3942);m.Z.registerVersion("firebase","9.6.10","app-compat")},4087:(ot,De,F)=>{F.r(De);var m=F(5861),Q=F(3942),O=F(2090),ae=F(9681),ee=F(655),me=F(1877),se=F(4859);const Oe=function qe(){return{"admin-restricted-operation":"This operation is restricted to administrators only.","argument-error":"","app-not-authorized":"This app, identified by the domain where it's hosted, is not authorized to use Firebase Authentication with the provided API key. Review your key configuration in the Google API console.","app-not-installed":"The requested mobile application corresponding to the identifier (Android package name or iOS bundle ID) provided is not installed on this device.","captcha-check-failed":"The reCAPTCHA response token provided is either invalid, expired, already used or the domain associated with it does not match the list of whitelisted domains.","code-expired":"The SMS code has expired. Please re-send the verification code to try again.","cordova-not-ready":"Cordova framework is not ready.","cors-unsupported":"This browser is not supported.","credential-already-in-use":"This credential is already associated with a different user account.","custom-token-mismatch":"The custom token corresponds to a different audience.","requires-recent-login":"This operation is sensitive and requires recent authentication. Log in again before retrying this request.","dependent-sdk-initialized-before-auth":"Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK.","dynamic-link-not-activated":"Please activate Dynamic Links in the Firebase Console and agree to the terms and conditions.","email-change-needs-verification":"Multi-factor users must always have a verified email.","email-already-in-use":"The email address is already in use by another account.","emulator-config-failed":'Auth instance has already been used to make a network call. Auth can no longer be configured to use the emulator. Try calling "connectAuthEmulator()" sooner.',"expired-action-code":"The action code has expired.","cancelled-popup-request":"This operation has been cancelled due to another conflicting popup being opened.","internal-error":"An internal AuthError has occurred.","invalid-app-credential":"The phone verification request contains an invalid application verifier. The reCAPTCHA token response is either invalid or expired.","invalid-app-id":"The mobile app identifier is not registed for the current project.","invalid-user-token":"This user's credential isn't valid for this project. This can happen if the user's token has been tampered with, or if the user isn't for the project associated with this API key.","invalid-auth-event":"An internal AuthError has occurred.","invalid-verification-code":"The SMS verification code used to create the phone auth credential is invalid. Please resend the verification code sms and be sure to use the verification code provided by the user.","invalid-continue-uri":"The continue URL provided in the request is invalid.","invalid-cordova-configuration":"The following Cordova plugins must be installed to enable OAuth sign-in: cordova-plugin-buildinfo, cordova-universal-links-plugin, cordova-plugin-browsertab, cordova-plugin-inappbrowser and cordova-plugin-customurlscheme.","invalid-custom-token":"The custom token format is incorrect. Please check the documentation.","invalid-dynamic-link-domain":"The provided dynamic link domain is not configured or authorized for the current project.","invalid-email":"The email address is badly formatted.","invalid-emulator-scheme":"Emulator URL must start with a valid scheme (http:// or https://).","invalid-api-key":"Your API key is invalid, please check you have copied it correctly.","invalid-cert-hash":"The SHA-1 certificate hash provided is invalid.","invalid-credential":"The supplied auth credential is malformed or has expired.","invalid-message-payload":"The email template corresponding to this action contains invalid characters in its message. Please fix by going to the Auth email templates section in the Firebase Console.","invalid-multi-factor-session":"The request does not contain a valid proof of first factor successful sign-in.","invalid-oauth-provider":"EmailAuthProvider is not supported for this operation. This operation only supports OAuth providers.","invalid-oauth-client-id":"The OAuth client ID provided is either invalid or does not match the specified API key.","unauthorized-domain":"This domain is not authorized for OAuth operations for your Firebase project. Edit the list of authorized domains from the Firebase console.","invalid-action-code":"The action code is invalid. This can happen if the code is malformed, expired, or has already been used.","wrong-password":"The password is invalid or the user does not have a password.","invalid-persistence-type":"The specified persistence type is invalid. It can only be local, session or none.","invalid-phone-number":"The format of the phone number provided is incorrect. Please enter the phone number in a format that can be parsed into E.164 format. E.164 phone numbers are written in the format [+][country code][subscriber number including area code].","invalid-provider-id":"The specified provider ID is invalid.","invalid-recipient-email":"The email corresponding to this action failed to send as the provided recipient email address is invalid.","invalid-sender":"The email template corresponding to this action contains an invalid sender email or name. Please fix by going to the Auth email templates section in the Firebase Console.","invalid-verification-id":"The verification ID used to create the phone auth credential is invalid.","invalid-tenant-id":"The Auth instance's tenant ID is invalid.","missing-android-pkg-name":"An Android Package Name must be provided if the Android App is required to be installed.","auth-domain-config-required":"Be sure to include authDomain when calling firebase.initializeApp(), by following the instructions in the Firebase console.","missing-app-credential":"The phone verification request is missing an application verifier assertion. A reCAPTCHA response token needs to be provided.","missing-verification-code":"The phone auth credential was created with an empty SMS verification code.","missing-continue-uri":"A continue URL must be provided in the request.","missing-iframe-start":"An internal AuthError has occurred.","missing-ios-bundle-id":"An iOS Bundle ID must be provided if an App Store ID is provided.","missing-or-invalid-nonce":"The request does not contain a valid nonce. This can occur if the SHA-256 hash of the provided raw nonce does not match the hashed nonce in the ID token payload.","missing-multi-factor-info":"No second factor identifier is provided.","missing-multi-factor-session":"The request is missing proof of first factor successful sign-in.","missing-phone-number":"To send verification codes, provide a phone number for the recipient.","missing-verification-id":"The phone auth credential was created with an empty verification ID.","app-deleted":"This instance of FirebaseApp has been deleted.","multi-factor-info-not-found":"The user does not have a second factor matching the identifier provided.","multi-factor-auth-required":"Proof of ownership of a second factor is required to complete sign-in.","account-exists-with-different-credential":"An account already exists with the same email address but different sign-in credentials. Sign in using a provider associated with this email address.","network-request-failed":"A network AuthError (such as timeout, interrupted connection or unreachable host) has occurred.","no-auth-event":"An internal AuthError has occurred.","no-such-provider":"User was not linked to an account with the given provider.","null-user":"A null user object was provided as the argument for an operation which requires a non-null user object.","operation-not-allowed":"The given sign-in provider is disabled for this Firebase project. Enable it in the Firebase console, under the sign-in method tab of the Auth section.","operation-not-supported-in-this-environment":'This operation is not supported in the environment this application is running on. "location.protocol" must be http, https or chrome-extension and web storage must be enabled.',"popup-blocked":"Unable to establish a connection with the popup. It may have been blocked by the browser.","popup-closed-by-user":"The popup has been closed by the user before finalizing the operation.","provider-already-linked":"User can only be linked to one identity for the given provider.","quota-exceeded":"The project's quota for this operation has been exceeded.","redirect-cancelled-by-user":"The redirect operation has been cancelled by the user before finalizing.","redirect-operation-pending":"A redirect sign-in operation is already pending.","rejected-credential":"The request contains malformed or mismatching credentials.","second-factor-already-in-use":"The second factor is already enrolled on this account.","maximum-second-factor-count-exceeded":"The maximum allowed number of second factors on a user has been exceeded.","tenant-id-mismatch":"The provided tenant ID does not match the Auth instance's tenant ID",timeout:"The operation has timed out.","user-token-expired":"The user's credential is no longer valid. The user must sign in again.","too-many-requests":"We have blocked all requests from this device due to unusual activity. Try again later.","unauthorized-continue-uri":"The domain of the continue URL is not whitelisted.  Please whitelist the domain in the Firebase console.","unsupported-first-factor":"Enrolling a second factor or signing in with a multi-factor account requires sign-in with a supported first factor.","unsupported-persistence-type":"The current environment does not support the specified persistence type.","unsupported-tenant-operation":"This operation is not supported in a multi-tenant context.","unverified-email":"The operation requires a verified email.","user-cancelled":"The user did not grant your application the permissions it requested.","user-not-found":"There is no user record corresponding to this identifier. The user may have been deleted.","user-disabled":"The user account has been disabled by an administrator.","user-mismatch":"The supplied credentials do not correspond to the previously signed in user.","user-signed-out":"","weak-password":"The password must be 6 characters long or more.","web-storage-unsupported":"This browser is not supported or 3rd party cookies and data may be disabled.","already-initialized":"initializeAuth() has already been called with different options. To avoid this error, call initializeAuth() with the same options as when it was originally called, or call getAuth() to return the already initialized instance."}},Ve=function Ae(){return{"dependent-sdk-initialized-before-auth":"Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK."}},pe=new O.LL("auth","Firebase",{"dependent-sdk-initialized-before-auth":"Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK."}),nt=new me.Yd("@firebase/auth");function Ke(y,...f){nt.logLevel<=me.in.ERROR&&nt.error(`Auth (${ae.SDK_VERSION}): ${y}`,...f)}function Te(y,...f){throw je(y,...f)}function we(y,...f){return je(y,...f)}function Ee(y,f,g){const E=Object.assign(Object.assign({},Ve()),{[f]:g});return new O.LL("auth","Firebase",E).create(f,{appName:y.name})}function $e(y,f,g){if(!(f instanceof g))throw g.name!==f.constructor.name&&Te(y,"argument-error"),Ee(y,"argument-error",`Type of ${f.constructor.name} does not match expected instance.Did you pass a reference from a different Auth SDK?`)}function je(y,...f){if("string"!=typeof y){const g=f[0],E=[...f.slice(1)];return E[0]&&(E[0].appName=y.name),y._errorFactory.create(g,...E)}return pe.create(y,...f)}function ne(y,f,...g){if(!y)throw je(f,...g)}function K(y){const f="INTERNAL ASSERTION FAILED: "+y;throw Ke(f),new Error(f)}function re(y,f){y||K(f)}const _e=new Map;function ie(y){re(y instanceof Function,"Expected a class definition");let f=_e.get(y);return f?(re(f instanceof y,"Instance stored in cache mismatched with class"),f):(f=new y,_e.set(y,f),f)}function It(){var y;return"undefined"!=typeof self&&(null===(y=self.location)||void 0===y?void 0:y.href)||""}function Qt(){return"http:"===Fn()||"https:"===Fn()}function Fn(){var y;return"undefined"!=typeof self&&(null===(y=self.location)||void 0===y?void 0:y.protocol)||null}class cn{constructor(f,g){this.shortDelay=f,this.longDelay=g,re(g>f,"Short delay should be less than long delay!"),this.isMobile=(0,O.uI)()||(0,O.b$)()}get(){return function at(){return!("undefined"!=typeof navigator&&navigator&&"onLine"in navigator&&"boolean"==typeof navigator.onLine&&(Qt()||(0,O.ru)()||"connection"in navigator))||navigator.onLine}()?this.isMobile?this.longDelay:this.shortDelay:Math.min(5e3,this.shortDelay)}}function dn(y,f){re(y.emulator,"Emulator should always be set here");const{url:g}=y.emulator;return f?`${g}${f.startsWith("/")?f.slice(1):f}`:g}class Di{static initialize(f,g,E){this.fetchImpl=f,g&&(this.headersImpl=g),E&&(this.responseImpl=E)}static fetch(){return this.fetchImpl?this.fetchImpl:"undefined"!=typeof self&&"fetch"in self?self.fetch:void K("Could not find fetch implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static headers(){return this.headersImpl?this.headersImpl:"undefined"!=typeof self&&"Headers"in self?self.Headers:void K("Could not find Headers implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static response(){return this.responseImpl?this.responseImpl:"undefined"!=typeof self&&"Response"in self?self.Response:void K("Could not find Response implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}}const Xt={CREDENTIAL_MISMATCH:"custom-token-mismatch",MISSING_CUSTOM_TOKEN:"internal-error",INVALID_IDENTIFIER:"invalid-email",MISSING_CONTINUE_URI:"internal-error",INVALID_PASSWORD:"wrong-password",MISSING_PASSWORD:"internal-error",EMAIL_EXISTS:"email-already-in-use",PASSWORD_LOGIN_DISABLED:"operation-not-allowed",INVALID_IDP_RESPONSE:"invalid-credential",INVALID_PENDING_TOKEN:"invalid-credential",FEDERATED_USER_ID_ALREADY_LINKED:"credential-already-in-use",MISSING_REQ_TYPE:"internal-error",EMAIL_NOT_FOUND:"user-not-found",RESET_PASSWORD_EXCEED_LIMIT:"too-many-requests",EXPIRED_OOB_CODE:"expired-action-code",INVALID_OOB_CODE:"invalid-action-code",MISSING_OOB_CODE:"internal-error",CREDENTIAL_TOO_OLD_LOGIN_AGAIN:"requires-recent-login",INVALID_ID_TOKEN:"invalid-user-token",TOKEN_EXPIRED:"user-token-expired",USER_NOT_FOUND:"user-token-expired",TOO_MANY_ATTEMPTS_TRY_LATER:"too-many-requests",INVALID_CODE:"invalid-verification-code",INVALID_SESSION_INFO:"invalid-verification-id",INVALID_TEMPORARY_PROOF:"invalid-credential",MISSING_SESSION_INFO:"missing-verification-id",SESSION_EXPIRED:"code-expired",MISSING_ANDROID_PACKAGE_NAME:"missing-android-pkg-name",UNAUTHORIZED_DOMAIN:"unauthorized-continue-uri",INVALID_OAUTH_CLIENT_ID:"invalid-oauth-client-id",ADMIN_ONLY_OPERATION:"admin-restricted-operation",INVALID_MFA_PENDING_CREDENTIAL:"invalid-multi-factor-session",MFA_ENROLLMENT_NOT_FOUND:"multi-factor-info-not-found",MISSING_MFA_ENROLLMENT_ID:"missing-multi-factor-info",MISSING_MFA_PENDING_CREDENTIAL:"missing-multi-factor-session",SECOND_FACTOR_EXISTS:"second-factor-already-in-use",SECOND_FACTOR_LIMIT_EXCEEDED:"maximum-second-factor-count-exceeded",BLOCKING_FUNCTION_ERROR_RESPONSE:"internal-error"},qi=new cn(3e4,6e4);function Jt(y,f){return y.tenantId&&!f.tenantId?Object.assign(Object.assign({},f),{tenantId:y.tenantId}):f}function Ht(y,f,g,E){return ur.apply(this,arguments)}function ur(){return(ur=(0,m.Z)(function*(y,f,g,E,x={}){return Hr(y,x,(0,m.Z)(function*(){let P={},z={};E&&("GET"===f?z=E:P={body:JSON.stringify(E)});const oe=(0,O.xO)(Object.assign({key:y.config.apiKey},z)).slice(1),Be=yield y._getAdditionalHeaders();return Be["Content-Type"]="application/json",y.languageCode&&(Be["X-Firebase-Locale"]=y.languageCode),Di.fetch()(Pr(y,y.config.apiHost,g,oe),Object.assign({method:f,headers:Be,referrerPolicy:"no-referrer"},P))}))})).apply(this,arguments)}function Hr(y,f,g){return Ws.apply(this,arguments)}function Ws(){return(Ws=(0,m.Z)(function*(y,f,g){y._canInitEmulator=!1;const E=Object.assign(Object.assign({},Xt),f);try{const x=new ms(y),P=yield Promise.race([g(),x.promise]);x.clearNetworkTimeout();const z=yield P.json();if("needConfirmation"in z)throw Ki(y,"account-exists-with-different-credential",z);if(P.ok&&!("errorMessage"in z))return z;{const oe=P.ok?z.errorMessage:z.error.message,[Be,Xe]=oe.split(" : ");if("FEDERATED_USER_ID_ALREADY_LINKED"===Be)throw Ki(y,"credential-already-in-use",z);if("EMAIL_EXISTS"===Be)throw Ki(y,"email-already-in-use",z);const vt=E[Be]||Be.toLowerCase().replace(/[_\s]+/g,"-");if(Xe)throw Ee(y,vt,Xe);Te(y,vt)}}catch(x){if(x instanceof O.ZR)throw x;Te(y,"network-request-failed")}})).apply(this,arguments)}function Nr(y,f,g,E){return zi.apply(this,arguments)}function zi(){return(zi=(0,m.Z)(function*(y,f,g,E,x={}){const P=yield Ht(y,f,g,E,x);return"mfaPendingCredential"in P&&Te(y,"multi-factor-auth-required",{_serverResponse:P}),P})).apply(this,arguments)}function Pr(y,f,g,E){const x=`${f}${g}?${E}`;return y.config.emulator?dn(y.config,x):`${y.config.apiScheme}://${x}`}class ms{constructor(f){this.auth=f,this.timer=null,this.promise=new Promise((g,E)=>{this.timer=setTimeout(()=>E(we(this.auth,"network-request-failed")),qi.get())})}clearNetworkTimeout(){clearTimeout(this.timer)}}function Ki(y,f,g){const E={appName:y.name};g.email&&(E.email=g.email),g.phoneNumber&&(E.phoneNumber=g.phoneNumber);const x=we(y,f,E);return x.customData._tokenResponse=g,x}function $r(){return($r=(0,m.Z)(function*(y,f){return Ht(y,"POST","/v1/accounts:delete",f)})).apply(this,arguments)}function nr(y,f){return Yn.apply(this,arguments)}function Yn(){return(Yn=(0,m.Z)(function*(y,f){return Ht(y,"POST","/v1/accounts:update",f)})).apply(this,arguments)}function ri(y,f){return qs.apply(this,arguments)}function qs(){return(qs=(0,m.Z)(function*(y,f){return Ht(y,"POST","/v1/accounts:lookup",f)})).apply(this,arguments)}function vn(y){if(y)try{const f=new Date(Number(y));if(!isNaN(f.getTime()))return f.toUTCString()}catch(f){}}function ha(){return(ha=(0,m.Z)(function*(y,f=!1){const g=(0,O.m9)(y),E=yield g.getIdToken(f),x=it(E);ne(x&&x.exp&&x.auth_time&&x.iat,g.auth,"internal-error");const P="object"==typeof x.firebase?x.firebase:void 0,z=null==P?void 0:P.sign_in_provider;return{claims:x,token:E,authTime:vn($t(x.auth_time)),issuedAtTime:vn($t(x.iat)),expirationTime:vn($t(x.exp)),signInProvider:z||null,signInSecondFactor:(null==P?void 0:P.sign_in_second_factor)||null}})).apply(this,arguments)}function $t(y){return 1e3*Number(y)}function it(y){const[f,g,E]=y.split(".");if(void 0===f||void 0===g||void 0===E)return Ke("JWT malformed, contained fewer than 3 sections"),null;try{const x=(0,O.tV)(g);return x?JSON.parse(x):(Ke("Failed to decode base64 JWT payload"),null)}catch(x){return Ke("Caught error parsing JWT payload as JSON",x),null}}function lr(y,f){return Zi.apply(this,arguments)}function Zi(){return(Zi=(0,m.Z)(function*(y,f,g=!1){if(g)return f;try{return yield f}catch(E){throw E instanceof O.ZR&&Gt(E)&&y.auth.currentUser===y&&(yield y.auth.signOut()),E}})).apply(this,arguments)}function Gt({code:y}){return"auth/user-disabled"===y||"auth/user-token-expired"===y}class Mo{constructor(f){this.user=f,this.isRunning=!1,this.timerId=null,this.errorBackoff=3e4}_start(){this.isRunning||(this.isRunning=!0,this.schedule())}_stop(){!this.isRunning||(this.isRunning=!1,null!==this.timerId&&clearTimeout(this.timerId))}getInterval(f){var g;if(f){const E=this.errorBackoff;return this.errorBackoff=Math.min(2*this.errorBackoff,96e4),E}{this.errorBackoff=3e4;const x=(null!==(g=this.user.stsTokenManager.expirationTime)&&void 0!==g?g:0)-Date.now()-3e5;return Math.max(0,x)}}schedule(f=!1){var g=this;if(!this.isRunning)return;const E=this.getInterval(f);this.timerId=setTimeout((0,m.Z)(function*(){yield g.iteration()}),E)}iteration(){var f=this;return(0,m.Z)(function*(){try{yield f.user.getIdToken(!0)}catch(g){return void("auth/network-request-failed"===g.code&&f.schedule(!0))}f.schedule()})()}}class wr{constructor(f,g){this.createdAt=f,this.lastLoginAt=g,this._initializeTime()}_initializeTime(){this.lastSignInTime=vn(this.lastLoginAt),this.creationTime=vn(this.createdAt)}_copy(f){this.createdAt=f.createdAt,this.lastLoginAt=f.lastLoginAt,this._initializeTime()}toJSON(){return{createdAt:this.createdAt,lastLoginAt:this.lastLoginAt}}}function cr(y){return dt.apply(this,arguments)}function dt(){return(dt=(0,m.Z)(function*(y){var f;const g=y.auth,E=yield y.getIdToken(),x=yield lr(y,ri(g,{idToken:E}));ne(null==x?void 0:x.users.length,g,"internal-error");const P=x.users[0];y._notifyReloadListener(P);const z=(null===(f=P.providerUserInfo)||void 0===f?void 0:f.length)?Se(P.providerUserInfo):[],oe=Ze(y.providerData,z),vt=!!y.isAnonymous&&!(y.email&&P.passwordHash||(null==oe?void 0:oe.length)),ut={uid:P.localId,displayName:P.displayName||null,photoURL:P.photoUrl||null,email:P.email||null,emailVerified:P.emailVerified||!1,phoneNumber:P.phoneNumber||null,tenantId:P.tenantId||null,providerData:oe,metadata:new wr(P.createdAt,P.lastLoginAt),isAnonymous:vt};Object.assign(y,ut)})).apply(this,arguments)}function Ut(){return(Ut=(0,m.Z)(function*(y){const f=(0,O.m9)(y);yield cr(f),yield f.auth._persistUserIfCurrent(f),f.auth._notifyListenersIfCurrent(f)})).apply(this,arguments)}function Ze(y,f){return[...y.filter(E=>!f.some(x=>x.providerId===E.providerId)),...f]}function Se(y){return y.map(f=>{var{providerId:g}=f,E=(0,ee._T)(f,["providerId"]);return{providerId:g,uid:E.rawId||"",displayName:E.displayName||null,email:E.email||null,phoneNumber:E.phoneNumber||null,photoURL:E.photoUrl||null}})}function ht(){return(ht=(0,m.Z)(function*(y,f){const g=yield Hr(y,{},(0,m.Z)(function*(){const E=(0,O.xO)({grant_type:"refresh_token",refresh_token:f}).slice(1),{tokenApiHost:x,apiKey:P}=y.config,z=Pr(y,x,"/v1/token",`key=${P}`),oe=yield y._getAdditionalHeaders();return oe["Content-Type"]="application/x-www-form-urlencoded",Di.fetch()(z,{method:"POST",headers:oe,body:E})}));return{accessToken:g.access_token,expiresIn:g.expires_in,refreshToken:g.refresh_token}})).apply(this,arguments)}class Bt{constructor(){this.refreshToken=null,this.accessToken=null,this.expirationTime=null}get isExpired(){return!this.expirationTime||Date.now()>this.expirationTime-3e4}updateFromServerResponse(f){ne(f.idToken,"internal-error"),ne(void 0!==f.idToken,"internal-error"),ne(void 0!==f.refreshToken,"internal-error");const g="expiresIn"in f&&void 0!==f.expiresIn?Number(f.expiresIn):function Et(y){const f=it(y);return ne(f,"internal-error"),ne(void 0!==f.exp,"internal-error"),ne(void 0!==f.iat,"internal-error"),Number(f.exp)-Number(f.iat)}(f.idToken);this.updateTokensAndExpiration(f.idToken,f.refreshToken,g)}getToken(f,g=!1){var E=this;return(0,m.Z)(function*(){return ne(!E.accessToken||E.refreshToken,f,"user-token-expired"),g||!E.accessToken||E.isExpired?E.refreshToken?(yield E.refresh(f,E.refreshToken),E.accessToken):null:E.accessToken})()}clearRefreshToken(){this.refreshToken=null}refresh(f,g){var E=this;return(0,m.Z)(function*(){const{accessToken:x,refreshToken:P,expiresIn:z}=yield function Je(y,f){return ht.apply(this,arguments)}(f,g);E.updateTokensAndExpiration(x,P,Number(z))})()}updateTokensAndExpiration(f,g,E){this.refreshToken=g||null,this.accessToken=f||null,this.expirationTime=Date.now()+1e3*E}static fromJSON(f,g){const{refreshToken:E,accessToken:x,expirationTime:P}=g,z=new Bt;return E&&(ne("string"==typeof E,"internal-error",{appName:f}),z.refreshToken=E),x&&(ne("string"==typeof x,"internal-error",{appName:f}),z.accessToken=x),P&&(ne("number"==typeof P,"internal-error",{appName:f}),z.expirationTime=P),z}toJSON(){return{refreshToken:this.refreshToken,accessToken:this.accessToken,expirationTime:this.expirationTime}}_assign(f){this.accessToken=f.accessToken,this.refreshToken=f.refreshToken,this.expirationTime=f.expirationTime}_clone(){return Object.assign(new Bt,this.toJSON())}_performRefresh(){return K("not implemented")}}function Lt(y,f){ne("string"==typeof y||void 0===y,"internal-error",{appName:f})}class ${constructor(f){var{uid:g,auth:E,stsTokenManager:x}=f,P=(0,ee._T)(f,["uid","auth","stsTokenManager"]);this.providerId="firebase",this.proactiveRefresh=new Mo(this),this.reloadUserInfo=null,this.reloadListener=null,this.uid=g,this.auth=E,this.stsTokenManager=x,this.accessToken=x.accessToken,this.displayName=P.displayName||null,this.email=P.email||null,this.emailVerified=P.emailVerified||!1,this.phoneNumber=P.phoneNumber||null,this.photoURL=P.photoURL||null,this.isAnonymous=P.isAnonymous||!1,this.tenantId=P.tenantId||null,this.providerData=P.providerData?[...P.providerData]:[],this.metadata=new wr(P.createdAt||void 0,P.lastLoginAt||void 0)}getIdToken(f){var g=this;return(0,m.Z)(function*(){const E=yield lr(g,g.stsTokenManager.getToken(g.auth,f));return ne(E,g.auth,"internal-error"),g.accessToken!==E&&(g.accessToken=E,yield g.auth._persistUserIfCurrent(g),g.auth._notifyListenersIfCurrent(g)),E})()}getIdTokenResult(f){return function _s(y){return ha.apply(this,arguments)}(this,f)}reload(){return function Er(y){return Ut.apply(this,arguments)}(this)}_assign(f){this!==f&&(ne(this.uid===f.uid,this.auth,"internal-error"),this.displayName=f.displayName,this.photoURL=f.photoURL,this.email=f.email,this.emailVerified=f.emailVerified,this.phoneNumber=f.phoneNumber,this.isAnonymous=f.isAnonymous,this.tenantId=f.tenantId,this.providerData=f.providerData.map(g=>Object.assign({},g)),this.metadata._copy(f.metadata),this.stsTokenManager._assign(f.stsTokenManager))}_clone(f){return new $(Object.assign(Object.assign({},this),{auth:f,stsTokenManager:this.stsTokenManager._clone()}))}_onReload(f){ne(!this.reloadListener,this.auth,"internal-error"),this.reloadListener=f,this.reloadUserInfo&&(this._notifyReloadListener(this.reloadUserInfo),this.reloadUserInfo=null)}_notifyReloadListener(f){this.reloadListener?this.reloadListener(f):this.reloadUserInfo=f}_startProactiveRefresh(){this.proactiveRefresh._start()}_stopProactiveRefresh(){this.proactiveRefresh._stop()}_updateTokensIfNecessary(f,g=!1){var E=this;return(0,m.Z)(function*(){let x=!1;f.idToken&&f.idToken!==E.stsTokenManager.accessToken&&(E.stsTokenManager.updateFromServerResponse(f),x=!0),g&&(yield cr(E)),yield E.auth._persistUserIfCurrent(E),x&&E.auth._notifyListenersIfCurrent(E)})()}delete(){var f=this;return(0,m.Z)(function*(){const g=yield f.getIdToken();return yield lr(f,function lt(y,f){return $r.apply(this,arguments)}(f.auth,{idToken:g})),f.stsTokenManager.clearRefreshToken(),f.auth.signOut()})()}toJSON(){return Object.assign(Object.assign({uid:this.uid,email:this.email||void 0,emailVerified:this.emailVerified,displayName:this.displayName||void 0,isAnonymous:this.isAnonymous,photoURL:this.photoURL||void 0,phoneNumber:this.phoneNumber||void 0,tenantId:this.tenantId||void 0,providerData:this.providerData.map(f=>Object.assign({},f)),stsTokenManager:this.stsTokenManager.toJSON(),_redirectEventId:this._redirectEventId},this.metadata.toJSON()),{apiKey:this.auth.config.apiKey,appName:this.auth.name})}get refreshToken(){return this.stsTokenManager.refreshToken||""}static _fromJSON(f,g){var E,x,P,z,oe,Be,Xe,vt;const ut=null!==(E=g.displayName)&&void 0!==E?E:void 0,On=null!==(x=g.email)&&void 0!==x?x:void 0,ss=null!==(P=g.phoneNumber)&&void 0!==P?P:void 0,wc=null!==(z=g.photoURL)&&void 0!==z?z:void 0,tl=null!==(oe=g.tenantId)&&void 0!==oe?oe:void 0,nl=null!==(Be=g._redirectEventId)&&void 0!==Be?Be:void 0,Nf=null!==(Xe=g.createdAt)&&void 0!==Xe?Xe:void 0,Ry=null!==(vt=g.lastLoginAt)&&void 0!==vt?vt:void 0,{uid:Na,emailVerified:Vd,isAnonymous:Ud,providerData:Pf,stsTokenManager:Bd}=g;ne(Na&&Bd,f,"internal-error");const Li=Bt.fromJSON(this.name,Bd);ne("string"==typeof Na,f,"internal-error"),Lt(ut,f.name),Lt(On,f.name),ne("boolean"==typeof Vd,f,"internal-error"),ne("boolean"==typeof Ud,f,"internal-error"),Lt(ss,f.name),Lt(wc,f.name),Lt(tl,f.name),Lt(nl,f.name),Lt(Nf,f.name),Lt(Ry,f.name);const kf=new $({uid:Na,auth:f,email:On,emailVerified:Vd,displayName:ut,isAnonymous:Ud,photoURL:wc,phoneNumber:ss,tenantId:tl,stsTokenManager:Li,createdAt:Nf,lastLoginAt:Ry});return Pf&&Array.isArray(Pf)&&(kf.providerData=Pf.map(Vg=>Object.assign({},Vg))),nl&&(kf._redirectEventId=nl),kf}static _fromIdTokenResponse(f,g,E=!1){return(0,m.Z)(function*(){const x=new Bt;x.updateFromServerResponse(g);const P=new $({uid:g.localId,auth:f,stsTokenManager:x,isAnonymous:E});return yield cr(P),P})()}}const q=(()=>{class y{constructor(){this.type="NONE",this.storage={}}_isAvailable(){return(0,m.Z)(function*(){return!0})()}_set(g,E){var x=this;return(0,m.Z)(function*(){x.storage[g]=E})()}_get(g){var E=this;return(0,m.Z)(function*(){const x=E.storage[g];return void 0===x?null:x})()}_remove(g){var E=this;return(0,m.Z)(function*(){delete E.storage[g]})()}_addListener(g,E){}_removeListener(g,E){}}return y.type="NONE",y})();function ce(y,f,g){return`firebase:${y}:${f}:${g}`}class J{constructor(f,g,E){this.persistence=f,this.auth=g,this.userKey=E;const{config:x,name:P}=this.auth;this.fullUserKey=ce(this.userKey,x.apiKey,P),this.fullPersistenceKey=ce("persistence",x.apiKey,P),this.boundEventHandler=g._onStorageEvent.bind(g),this.persistence._addListener(this.fullUserKey,this.boundEventHandler)}setCurrentUser(f){return this.persistence._set(this.fullUserKey,f.toJSON())}getCurrentUser(){var f=this;return(0,m.Z)(function*(){const g=yield f.persistence._get(f.fullUserKey);return g?$._fromJSON(f.auth,g):null})()}removeCurrentUser(){return this.persistence._remove(this.fullUserKey)}savePersistenceForRedirect(){return this.persistence._set(this.fullPersistenceKey,this.persistence.type)}setPersistence(f){var g=this;return(0,m.Z)(function*(){if(g.persistence===f)return;const E=yield g.getCurrentUser();return yield g.removeCurrentUser(),g.persistence=f,E?g.setCurrentUser(E):void 0})()}delete(){this.persistence._removeListener(this.fullUserKey,this.boundEventHandler)}static create(f,g,E="authUser"){return(0,m.Z)(function*(){if(!g.length)return new J(ie(q),f,E);const x=(yield Promise.all(g.map(function(){var Xe=(0,m.Z)(function*(vt){if(yield vt._isAvailable())return vt});return function(vt){return Xe.apply(this,arguments)}}()))).filter(Xe=>Xe);let P=x[0]||ie(q);const z=ce(E,f.config.apiKey,f.name);let oe=null;for(const Xe of g)try{const vt=yield Xe._get(z);if(vt){const ut=$._fromJSON(f,vt);Xe!==P&&(oe=ut),P=Xe;break}}catch(vt){}const Be=x.filter(Xe=>Xe._shouldAllowMigration);return P._shouldAllowMigration&&Be.length?(P=Be[0],oe&&(yield P._set(z,oe.toJSON())),yield Promise.all(g.map(function(){var Xe=(0,m.Z)(function*(vt){if(vt!==P)try{yield vt._remove(z)}catch(ut){}});return function(vt){return Xe.apply(this,arguments)}}())),new J(P,f,E)):new J(P,f,E)})()}}function Ue(y){const f=y.toLowerCase();if(f.includes("opera/")||f.includes("opr/")||f.includes("opios/"))return"Opera";if(qt(f))return"IEMobile";if(f.includes("msie")||f.includes("trident/"))return"IE";if(f.includes("edge/"))return"Edge";if(_t(f))return"Firefox";if(f.includes("silk/"))return"Silk";if(Rt(f))return"Blackberry";if(fn(f))return"Webos";if(Zt(f))return"Safari";if((f.includes("chrome/")||Cr(f))&&!f.includes("edge/"))return"Chrome";if(xn(f))return"Android";{const E=y.match(/([a-zA-Z\d\.]+)\/[a-zA-Z\d\.]*$/);if(2===(null==E?void 0:E.length))return E[1]}return"Other"}function _t(y=(0,O.z$)()){return/firefox\//i.test(y)}function Zt(y=(0,O.z$)()){const f=y.toLowerCase();return f.includes("safari/")&&!f.includes("chrome/")&&!f.includes("crios/")&&!f.includes("android")}function Cr(y=(0,O.z$)()){return/crios\//i.test(y)}function qt(y=(0,O.z$)()){return/iemobile/i.test(y)}function xn(y=(0,O.z$)()){return/android/i.test(y)}function Rt(y=(0,O.z$)()){return/blackberry/i.test(y)}function fn(y=(0,O.z$)()){return/webos/i.test(y)}function ir(y=(0,O.z$)()){return/iphone|ipad|ipod/i.test(y)}function ys(y=(0,O.z$)()){return ir(y)||xn(y)||fn(y)||Rt(y)||/windows phone/i.test(y)||qt(y)}function za(y,f=[]){let g;switch(y){case"Browser":g=Ue((0,O.z$)());break;case"Worker":g=`${Ue((0,O.z$)())}-${y}`;break;default:g=y}const E=f.length?f.join(","):"FirebaseCore-web";return`${g}/JsCore/${ae.SDK_VERSION}/${E}`}class ii{constructor(f,g,E){this.app=f,this.heartbeatServiceProvider=g,this.config=E,this.currentUser=null,this.emulatorConfig=null,this.operations=Promise.resolve(),this.authStateSubscription=new kt(this),this.idTokenSubscription=new kt(this),this.redirectUser=null,this.isProactiveRefreshEnabled=!1,this._canInitEmulator=!0,this._isInitialized=!1,this._deleted=!1,this._initializationPromise=null,this._popupRedirectResolver=null,this._errorFactory=pe,this.lastNotifiedUid=void 0,this.languageCode=null,this.tenantId=null,this.settings={appVerificationDisabledForTesting:!1},this.frameworks=[],this.name=f.name,this.clientVersion=E.sdkClientVersion}_initializeWithPersistence(f,g){var E=this;return g&&(this._popupRedirectResolver=ie(g)),this._initializationPromise=this.queue((0,m.Z)(function*(){var x,P;if(!E._deleted&&(E.persistenceManager=yield J.create(E,f),!E._deleted)){if(null===(x=E._popupRedirectResolver)||void 0===x?void 0:x._shouldInitProactively)try{yield E._popupRedirectResolver._initialize(E)}catch(z){}yield E.initializeCurrentUser(g),E.lastNotifiedUid=(null===(P=E.currentUser)||void 0===P?void 0:P.uid)||null,!E._deleted&&(E._isInitialized=!0)}})),this._initializationPromise}_onStorageEvent(){var f=this;return(0,m.Z)(function*(){if(f._deleted)return;const g=yield f.assertedPersistence.getCurrentUser();if(f.currentUser||g){if(f.currentUser&&g&&f.currentUser.uid===g.uid)return f._currentUser._assign(g),void(yield f.currentUser.getIdToken());yield f._updateCurrentUser(g)}})()}initializeCurrentUser(f){var g=this;return(0,m.Z)(function*(){var E;let x=yield g.assertedPersistence.getCurrentUser();if(f&&g.config.authDomain){yield g.getOrInitRedirectPersistenceManager();const P=null===(E=g.redirectUser)||void 0===E?void 0:E._redirectEventId,z=null==x?void 0:x._redirectEventId,oe=yield g.tryRedirectSignIn(f);(!P||P===z)&&(null==oe?void 0:oe.user)&&(x=oe.user)}return x?x._redirectEventId?(ne(g._popupRedirectResolver,g,"argument-error"),yield g.getOrInitRedirectPersistenceManager(),g.redirectUser&&g.redirectUser._redirectEventId===x._redirectEventId?g.directlySetCurrentUser(x):g.reloadAndSetCurrentUserOrClear(x)):g.reloadAndSetCurrentUserOrClear(x):g.directlySetCurrentUser(null)})()}tryRedirectSignIn(f){var g=this;return(0,m.Z)(function*(){let E=null;try{E=yield g._popupRedirectResolver._completeRedirectFn(g,f,!0)}catch(x){yield g._setRedirectUser(null)}return E})()}reloadAndSetCurrentUserOrClear(f){var g=this;return(0,m.Z)(function*(){try{yield cr(f)}catch(E){if("auth/network-request-failed"!==E.code)return g.directlySetCurrentUser(null)}return g.directlySetCurrentUser(f)})()}useDeviceLanguage(){this.languageCode=function gt(){if("undefined"==typeof navigator)return null;const y=navigator;return y.languages&&y.languages[0]||y.language||null}()}_delete(){var f=this;return(0,m.Z)(function*(){f._deleted=!0})()}updateCurrentUser(f){var g=this;return(0,m.Z)(function*(){const E=f?(0,O.m9)(f):null;return E&&ne(E.auth.config.apiKey===g.config.apiKey,g,"invalid-user-token"),g._updateCurrentUser(E&&E._clone(g))})()}_updateCurrentUser(f){var g=this;return(0,m.Z)(function*(){if(!g._deleted)return f&&ne(g.tenantId===f.tenantId,g,"tenant-id-mismatch"),g.queue((0,m.Z)(function*(){yield g.directlySetCurrentUser(f),g.notifyAuthListeners()}))})()}signOut(){var f=this;return(0,m.Z)(function*(){return(f.redirectPersistenceManager||f._popupRedirectResolver)&&(yield f._setRedirectUser(null)),f._updateCurrentUser(null)})()}setPersistence(f){var g=this;return this.queue((0,m.Z)(function*(){yield g.assertedPersistence.setPersistence(ie(f))}))}_getPersistence(){return this.assertedPersistence.persistence.type}_updateErrorMap(f){this._errorFactory=new O.LL("auth","Firebase",f())}onAuthStateChanged(f,g,E){return this.registerStateListener(this.authStateSubscription,f,g,E)}onIdTokenChanged(f,g,E){return this.registerStateListener(this.idTokenSubscription,f,g,E)}toJSON(){var f;return{apiKey:this.config.apiKey,authDomain:this.config.authDomain,appName:this.name,currentUser:null===(f=this._currentUser)||void 0===f?void 0:f.toJSON()}}_setRedirectUser(f,g){var E=this;return(0,m.Z)(function*(){const x=yield E.getOrInitRedirectPersistenceManager(g);return null===f?x.removeCurrentUser():x.setCurrentUser(f)})()}getOrInitRedirectPersistenceManager(f){var g=this;return(0,m.Z)(function*(){if(!g.redirectPersistenceManager){const E=f&&ie(f)||g._popupRedirectResolver;ne(E,g,"argument-error"),g.redirectPersistenceManager=yield J.create(g,[ie(E._redirectPersistence)],"redirectUser"),g.redirectUser=yield g.redirectPersistenceManager.getCurrentUser()}return g.redirectPersistenceManager})()}_redirectUserForId(f){var g=this;return(0,m.Z)(function*(){var E,x;return g._isInitialized&&(yield g.queue((0,m.Z)(function*(){}))),(null===(E=g._currentUser)||void 0===E?void 0:E._redirectEventId)===f?g._currentUser:(null===(x=g.redirectUser)||void 0===x?void 0:x._redirectEventId)===f?g.redirectUser:null})()}_persistUserIfCurrent(f){var g=this;return(0,m.Z)(function*(){if(f===g.currentUser)return g.queue((0,m.Z)(function*(){return g.directlySetCurrentUser(f)}))})()}_notifyListenersIfCurrent(f){f===this.currentUser&&this.notifyAuthListeners()}_key(){return`${this.config.authDomain}:${this.config.apiKey}:${this.name}`}_startProactiveRefresh(){this.isProactiveRefreshEnabled=!0,this.currentUser&&this._currentUser._startProactiveRefresh()}_stopProactiveRefresh(){this.isProactiveRefreshEnabled=!1,this.currentUser&&this._currentUser._stopProactiveRefresh()}get _currentUser(){return this.currentUser}notifyAuthListeners(){var f,g;if(!this._isInitialized)return;this.idTokenSubscription.next(this.currentUser);const E=null!==(g=null===(f=this.currentUser)||void 0===f?void 0:f.uid)&&void 0!==g?g:null;this.lastNotifiedUid!==E&&(this.lastNotifiedUid=E,this.authStateSubscription.next(this.currentUser))}registerStateListener(f,g,E,x){if(this._deleted)return()=>{};const P="function"==typeof g?g:g.next.bind(g),z=this._isInitialized?Promise.resolve():this._initializationPromise;return ne(z,this,"internal-error"),z.then(()=>P(this.currentUser)),"function"==typeof g?f.addObserver(g,E,x):f.addObserver(g)}directlySetCurrentUser(f){var g=this;return(0,m.Z)(function*(){g.currentUser&&g.currentUser!==f&&(g._currentUser._stopProactiveRefresh(),f&&g.isProactiveRefreshEnabled&&f._startProactiveRefresh()),g.currentUser=f,f?yield g.assertedPersistence.setCurrentUser(f):yield g.assertedPersistence.removeCurrentUser()})()}queue(f){return this.operations=this.operations.then(f,f),this.operations}get assertedPersistence(){return ne(this.persistenceManager,this,"internal-error"),this.persistenceManager}_logFramework(f){!f||this.frameworks.includes(f)||(this.frameworks.push(f),this.frameworks.sort(),this.clientVersion=za(this.config.clientPlatform,this._getFrameworks()))}_getFrameworks(){return this.frameworks}_getAdditionalHeaders(){var f=this;return(0,m.Z)(function*(){var g;const E={"X-Client-Version":f.clientVersion};f.app.options.appId&&(E["X-Firebase-gmpid"]=f.app.options.appId);const x=yield null===(g=f.heartbeatServiceProvider.getImmediate({optional:!0}))||void 0===g?void 0:g.getHeartbeatsHeader();return x&&(E["X-Firebase-Client"]=x),E})()}}function Fe(y){return(0,O.m9)(y)}class kt{constructor(f){this.auth=f,this.observer=null,this.addObserver=(0,O.ne)(g=>this.observer=g)}get next(){return ne(this.observer,this.auth,"internal-error"),this.observer.next.bind(this.observer)}}function dr(y){const f=y.indexOf(":");return f<0?"":y.substr(0,f+1)}function Bn(y){if(!y)return null;const f=Number(y);return isNaN(f)?null:f}class rn{constructor(f,g){this.providerId=f,this.signInMethod=g}toJSON(){return K("not implemented")}_getIdTokenResponse(f){return K("not implemented")}_linkToIdToken(f,g){return K("not implemented")}_getReauthenticationResolver(f){return K("not implemented")}}function Ln(y,f){return Ks.apply(this,arguments)}function Ks(){return(Ks=(0,m.Z)(function*(y,f){return Ht(y,"POST","/v1/accounts:resetPassword",Jt(y,f))})).apply(this,arguments)}function Tt(y,f){return Po.apply(this,arguments)}function Po(){return(Po=(0,m.Z)(function*(y,f){return Ht(y,"POST","/v1/accounts:update",f)})).apply(this,arguments)}function ko(y,f){return Ka.apply(this,arguments)}function Ka(){return(Ka=(0,m.Z)(function*(y,f){return Ht(y,"POST","/v1/accounts:update",Jt(y,f))})).apply(this,arguments)}function Ir(){return(Ir=(0,m.Z)(function*(y,f){return Nr(y,"POST","/v1/accounts:signInWithPassword",Jt(y,f))})).apply(this,arguments)}function vs(y,f){return ws.apply(this,arguments)}function ws(){return(ws=(0,m.Z)(function*(y,f){return Ht(y,"POST","/v1/accounts:sendOobCode",Jt(y,f))})).apply(this,arguments)}function si(y,f){return sn.apply(this,arguments)}function sn(){return(sn=(0,m.Z)(function*(y,f){return vs(y,f)})).apply(this,arguments)}function Du(y,f){return Tu.apply(this,arguments)}function Tu(){return(Tu=(0,m.Z)(function*(y,f){return vs(y,f)})).apply(this,arguments)}function Ti(y,f){return oi.apply(this,arguments)}function oi(){return(oi=(0,m.Z)(function*(y,f){return vs(y,f)})).apply(this,arguments)}function ed(y,f){return Ys.apply(this,arguments)}function Ys(){return(Ys=(0,m.Z)(function*(y,f){return vs(y,f)})).apply(this,arguments)}function Gr(){return(Gr=(0,m.Z)(function*(y,f){return Nr(y,"POST","/v1/accounts:signInWithEmailLink",Jt(y,f))})).apply(this,arguments)}function td(){return(td=(0,m.Z)(function*(y,f){return Nr(y,"POST","/v1/accounts:signInWithEmailLink",Jt(y,f))})).apply(this,arguments)}class Au extends rn{constructor(f,g,E,x=null){super("password",E),this._email=f,this._password=g,this._tenantId=x}static _fromEmailAndPassword(f,g){return new Au(f,g,"password")}static _fromEmailAndCode(f,g,E=null){return new Au(f,g,"emailLink",E)}toJSON(){return{email:this._email,password:this._password,signInMethod:this.signInMethod,tenantId:this._tenantId}}static fromJSON(f){const g="string"==typeof f?JSON.parse(f):f;if((null==g?void 0:g.email)&&(null==g?void 0:g.password)){if("password"===g.signInMethod)return this._fromEmailAndPassword(g.email,g.password);if("emailLink"===g.signInMethod)return this._fromEmailAndCode(g.email,g.password,g.tenantId)}return null}_getIdTokenResponse(f){var g=this;return(0,m.Z)(function*(){switch(g.signInMethod){case"password":return function Zs(y,f){return Ir.apply(this,arguments)}(f,{returnSecureToken:!0,email:g._email,password:g._password});case"emailLink":return function Su(y,f){return Gr.apply(this,arguments)}(f,{email:g._email,oobCode:g._password});default:Te(f,"internal-error")}})()}_linkToIdToken(f,g){var E=this;return(0,m.Z)(function*(){switch(E.signInMethod){case"password":return Tt(f,{idToken:g,returnSecureToken:!0,email:E._email,password:E._password});case"emailLink":return function Xh(y,f){return td.apply(this,arguments)}(f,{idToken:g,email:E._email,oobCode:E._password});default:Te(f,"internal-error")}})()}_getReauthenticationResolver(f){return this._getIdTokenResponse(f)}}function jn(y,f){return nd.apply(this,arguments)}function nd(){return(nd=(0,m.Z)(function*(y,f){return Nr(y,"POST","/v1/accounts:signInWithIdp",Jt(y,f))})).apply(this,arguments)}class Es extends rn{constructor(){super(...arguments),this.pendingToken=null}static _fromParams(f){const g=new Es(f.providerId,f.signInMethod);return f.idToken||f.accessToken?(f.idToken&&(g.idToken=f.idToken),f.accessToken&&(g.accessToken=f.accessToken),f.nonce&&!f.pendingToken&&(g.nonce=f.nonce),f.pendingToken&&(g.pendingToken=f.pendingToken)):f.oauthToken&&f.oauthTokenSecret?(g.accessToken=f.oauthToken,g.secret=f.oauthTokenSecret):Te("argument-error"),g}toJSON(){return{idToken:this.idToken,accessToken:this.accessToken,secret:this.secret,nonce:this.nonce,pendingToken:this.pendingToken,providerId:this.providerId,signInMethod:this.signInMethod}}static fromJSON(f){const g="string"==typeof f?JSON.parse(f):f,{providerId:E,signInMethod:x}=g,P=(0,ee._T)(g,["providerId","signInMethod"]);if(!E||!x)return null;const z=new Es(E,x);return z.idToken=P.idToken||void 0,z.accessToken=P.accessToken||void 0,z.secret=P.secret,z.nonce=P.nonce,z.pendingToken=P.pendingToken||null,z}_getIdTokenResponse(f){return jn(f,this.buildRequest())}_linkToIdToken(f,g){const E=this.buildRequest();return E.idToken=g,jn(f,E)}_getReauthenticationResolver(f){const g=this.buildRequest();return g.autoCreate=!1,jn(f,g)}buildRequest(){const f={requestUri:"http://localhost",returnSecureToken:!0};if(this.pendingToken)f.pendingToken=this.pendingToken;else{const g={};this.idToken&&(g.id_token=this.idToken),this.accessToken&&(g.access_token=this.accessToken),this.secret&&(g.oauth_token_secret=this.secret),g.providerId=this.providerId,this.nonce&&!this.pendingToken&&(g.nonce=this.nonce),f.postBody=(0,O.xO)(g)}return f}}function fg(y,f){return rd.apply(this,arguments)}function rd(){return(rd=(0,m.Z)(function*(y,f){return Ht(y,"POST","/v1/accounts:sendVerificationCode",Jt(y,f))})).apply(this,arguments)}function Qs(){return(Qs=(0,m.Z)(function*(y,f){return Nr(y,"POST","/v1/accounts:signInWithPhoneNumber",Jt(y,f))})).apply(this,arguments)}function id(){return(id=(0,m.Z)(function*(y,f){const g=yield Nr(y,"POST","/v1/accounts:signInWithPhoneNumber",Jt(y,f));if(g.temporaryProof)throw Ki(y,"account-exists-with-different-credential",g);return g})).apply(this,arguments)}const gg={USER_NOT_FOUND:"user-not-found"};function sd(){return(sd=(0,m.Z)(function*(y,f){return Nr(y,"POST","/v1/accounts:signInWithPhoneNumber",Jt(y,Object.assign(Object.assign({},f),{operation:"REAUTH"})),gg)})).apply(this,arguments)}class fa extends rn{constructor(f){super("phone","phone"),this.params=f}static _fromVerification(f,g){return new fa({verificationId:f,verificationCode:g})}static _fromTokenResponse(f,g){return new fa({phoneNumber:f,temporaryProof:g})}_getIdTokenResponse(f){return function Nl(y,f){return Qs.apply(this,arguments)}(f,this._makeVerificationRequest())}_linkToIdToken(f,g){return function pg(y,f){return id.apply(this,arguments)}(f,Object.assign({idToken:g},this._makeVerificationRequest()))}_getReauthenticationResolver(f){return function mg(y,f){return sd.apply(this,arguments)}(f,this._makeVerificationRequest())}_makeVerificationRequest(){const{temporaryProof:f,phoneNumber:g,verificationId:E,verificationCode:x}=this.params;return f&&g?{temporaryProof:f,phoneNumber:g}:{sessionInfo:E,code:x}}toJSON(){const f={providerId:this.providerId};return this.params.phoneNumber&&(f.phoneNumber=this.params.phoneNumber),this.params.temporaryProof&&(f.temporaryProof=this.params.temporaryProof),this.params.verificationCode&&(f.verificationCode=this.params.verificationCode),this.params.verificationId&&(f.verificationId=this.params.verificationId),f}static fromJSON(f){"string"==typeof f&&(f=JSON.parse(f));const{verificationId:g,verificationCode:E,phoneNumber:x,temporaryProof:P}=f;return E||g||x||P?new fa({verificationId:g,verificationCode:E,phoneNumber:x,temporaryProof:P}):null}}class Oo{constructor(f){var g,E,x,P,z,oe;const Be=(0,O.zd)((0,O.pd)(f)),Xe=null!==(g=Be.apiKey)&&void 0!==g?g:null,vt=null!==(E=Be.oobCode)&&void 0!==E?E:null,ut=function ey(y){switch(y){case"recoverEmail":return"RECOVER_EMAIL";case"resetPassword":return"PASSWORD_RESET";case"signIn":return"EMAIL_SIGNIN";case"verifyEmail":return"VERIFY_EMAIL";case"verifyAndChangeEmail":return"VERIFY_AND_CHANGE_EMAIL";case"revertSecondFactorAddition":return"REVERT_SECOND_FACTOR_ADDITION";default:return null}}(null!==(x=Be.mode)&&void 0!==x?x:null);ne(Xe&&vt&&ut,"argument-error"),this.apiKey=Xe,this.operation=ut,this.code=vt,this.continueUrl=null!==(P=Be.continueUrl)&&void 0!==P?P:null,this.languageCode=null!==(z=Be.languageCode)&&void 0!==z?z:null,this.tenantId=null!==(oe=Be.tenantId)&&void 0!==oe?oe:null}static parseLink(f){const g=function xu(y){const f=(0,O.zd)((0,O.pd)(y)).link,g=f?(0,O.zd)((0,O.pd)(f)).deep_link_id:null,E=(0,O.zd)((0,O.pd)(y)).deep_link_id;return(E?(0,O.zd)((0,O.pd)(E)).link:null)||E||g||f||y}(f);try{return new Oo(g)}catch(E){return null}}}let Pl=(()=>{class y{constructor(){this.providerId=y.PROVIDER_ID}static credential(g,E){return Au._fromEmailAndPassword(g,E)}static credentialWithLink(g,E){const x=Oo.parseLink(E);return ne(x,"argument-error"),Au._fromEmailAndCode(g,x.code,x.tenantId)}}return y.PROVIDER_ID="password",y.EMAIL_PASSWORD_SIGN_IN_METHOD="password",y.EMAIL_LINK_SIGN_IN_METHOD="emailLink",y})();class Js{constructor(f){this.providerId=f,this.defaultLanguageCode=null,this.customParameters={}}setDefaultLanguage(f){this.defaultLanguageCode=f}setCustomParameters(f){return this.customParameters=f,this}getCustomParameters(){return this.customParameters}}class Wr extends Js{constructor(){super(...arguments),this.scopes=[]}addScope(f){return this.scopes.includes(f)||this.scopes.push(f),this}getScopes(){return[...this.scopes]}}class pa extends Wr{static credentialFromJSON(f){const g="string"==typeof f?JSON.parse(f):f;return ne("providerId"in g&&"signInMethod"in g,"argument-error"),Es._fromParams(g)}credential(f){return this._credential(Object.assign(Object.assign({},f),{nonce:f.rawNonce}))}_credential(f){return ne(f.idToken||f.accessToken,"argument-error"),Es._fromParams(Object.assign(Object.assign({},f),{providerId:this.providerId,signInMethod:this.providerId}))}static credentialFromResult(f){return pa.oauthCredentialFromTaggedObject(f)}static credentialFromError(f){return pa.oauthCredentialFromTaggedObject(f.customData||{})}static oauthCredentialFromTaggedObject({_tokenResponse:f}){if(!f)return null;const{oauthIdToken:g,oauthAccessToken:E,oauthTokenSecret:x,pendingToken:P,nonce:z,providerId:oe}=f;if(!E&&!x&&!g&&!P||!oe)return null;try{return new pa(oe)._credential({idToken:g,accessToken:E,nonce:z,pendingToken:P})}catch(Be){return null}}}let Fo=(()=>{class y extends Wr{constructor(){super("facebook.com")}static credential(g){return Es._fromParams({providerId:y.PROVIDER_ID,signInMethod:y.FACEBOOK_SIGN_IN_METHOD,accessToken:g})}static credentialFromResult(g){return y.credentialFromTaggedObject(g)}static credentialFromError(g){return y.credentialFromTaggedObject(g.customData||{})}static credentialFromTaggedObject({_tokenResponse:g}){if(!g||!("oauthAccessToken"in g)||!g.oauthAccessToken)return null;try{return y.credential(g.oauthAccessToken)}catch(E){return null}}}return y.FACEBOOK_SIGN_IN_METHOD="facebook.com",y.PROVIDER_ID="facebook.com",y})(),Za=(()=>{class y extends Wr{constructor(){super("google.com"),this.addScope("profile")}static credential(g,E){return Es._fromParams({providerId:y.PROVIDER_ID,signInMethod:y.GOOGLE_SIGN_IN_METHOD,idToken:g,accessToken:E})}static credentialFromResult(g){return y.credentialFromTaggedObject(g)}static credentialFromError(g){return y.credentialFromTaggedObject(g.customData||{})}static credentialFromTaggedObject({_tokenResponse:g}){if(!g)return null;const{oauthIdToken:E,oauthAccessToken:x}=g;if(!E&&!x)return null;try{return y.credential(E,x)}catch(P){return null}}}return y.GOOGLE_SIGN_IN_METHOD="google.com",y.PROVIDER_ID="google.com",y})(),od=(()=>{class y extends Wr{constructor(){super("github.com")}static credential(g){return Es._fromParams({providerId:y.PROVIDER_ID,signInMethod:y.GITHUB_SIGN_IN_METHOD,accessToken:g})}static credentialFromResult(g){return y.credentialFromTaggedObject(g)}static credentialFromError(g){return y.credentialFromTaggedObject(g.customData||{})}static credentialFromTaggedObject({_tokenResponse:g}){if(!g||!("oauthAccessToken"in g)||!g.oauthAccessToken)return null;try{return y.credential(g.oauthAccessToken)}catch(E){return null}}}return y.GITHUB_SIGN_IN_METHOD="github.com",y.PROVIDER_ID="github.com",y})();class ga extends rn{constructor(f,g){super(f,f),this.pendingToken=g}_getIdTokenResponse(f){return jn(f,this.buildRequest())}_linkToIdToken(f,g){const E=this.buildRequest();return E.idToken=g,jn(f,E)}_getReauthenticationResolver(f){const g=this.buildRequest();return g.autoCreate=!1,jn(f,g)}toJSON(){return{signInMethod:this.signInMethod,providerId:this.providerId,pendingToken:this.pendingToken}}static fromJSON(f){const g="string"==typeof f?JSON.parse(f):f,{providerId:E,signInMethod:x,pendingToken:P}=g;return E&&x&&P&&E===x?new ga(E,P):null}static _create(f,g){return new ga(f,g)}buildRequest(){return{requestUri:"http://localhost",returnSecureToken:!0,pendingToken:this.pendingToken}}}class ai extends Js{constructor(f){ne(f.startsWith("saml."),"argument-error"),super(f)}static credentialFromResult(f){return ai.samlCredentialFromTaggedObject(f)}static credentialFromError(f){return ai.samlCredentialFromTaggedObject(f.customData||{})}static credentialFromJSON(f){const g=ga.fromJSON(f);return ne(g,"argument-error"),g}static samlCredentialFromTaggedObject({_tokenResponse:f}){if(!f)return null;const{pendingToken:g,providerId:E}=f;if(!g||!E)return null;try{return ga._create(E,g)}catch(x){return null}}}let Ru=(()=>{class y extends Wr{constructor(){super("twitter.com")}static credential(g,E){return Es._fromParams({providerId:y.PROVIDER_ID,signInMethod:y.TWITTER_SIGN_IN_METHOD,oauthToken:g,oauthTokenSecret:E})}static credentialFromResult(g){return y.credentialFromTaggedObject(g)}static credentialFromError(g){return y.credentialFromTaggedObject(g.customData||{})}static credentialFromTaggedObject({_tokenResponse:g}){if(!g)return null;const{oauthAccessToken:E,oauthTokenSecret:x}=g;if(!E||!x)return null;try{return y.credential(E,x)}catch(P){return null}}}return y.TWITTER_SIGN_IN_METHOD="twitter.com",y.PROVIDER_ID="twitter.com",y})();function Mu(y,f){return qr.apply(this,arguments)}function qr(){return(qr=(0,m.Z)(function*(y,f){return Nr(y,"POST","/v1/accounts:signUp",Jt(y,f))})).apply(this,arguments)}class hr{constructor(f){this.user=f.user,this.providerId=f.providerId,this._tokenResponse=f._tokenResponse,this.operationType=f.operationType}static _fromIdTokenResponse(f,g,E,x=!1){return(0,m.Z)(function*(){const P=yield $._fromIdTokenResponse(f,E,x),z=tf(E);return new hr({user:P,providerId:z,_tokenResponse:E,operationType:g})})()}static _forOperation(f,g,E){return(0,m.Z)(function*(){yield f._updateTokensIfNecessary(E,!0);const x=tf(E);return new hr({user:f,providerId:x,_tokenResponse:E,operationType:g})})()}}function tf(y){return y.providerId?y.providerId:"phoneNumber"in y?"phone":null}function ad(){return(ad=(0,m.Z)(function*(y){var f;const g=Fe(y);if(yield g._initializationPromise,null===(f=g.currentUser)||void 0===f?void 0:f.isAnonymous)return new hr({user:g.currentUser,providerId:null,operationType:"signIn"});const E=yield Mu(g,{returnSecureToken:!0}),x=yield hr._fromIdTokenResponse(g,"signIn",E,!0);return yield g._updateCurrentUser(x.user),x})).apply(this,arguments)}class Pu extends O.ZR{constructor(f,g,E,x){var P;super(g.code,g.message),this.operationType=E,this.user=x,Object.setPrototypeOf(this,Pu.prototype),this.customData={appName:f.name,tenantId:null!==(P=f.tenantId)&&void 0!==P?P:void 0,_serverResponse:g.customData._serverResponse,operationType:E}}static _fromErrorAndOperation(f,g,E,x){return new Pu(f,g,E,x)}}function ku(y,f,g,E){return("reauthenticate"===f?g._getReauthenticationResolver(y):g._getIdTokenResponse(y)).catch(P=>{throw"auth/multi-factor-auth-required"===P.code?Pu._fromErrorAndOperation(y,P,f,E):P})}function Cs(y){return new Set(y.map(({providerId:f})=>f).filter(f=>!!f))}function kl(){return(kl=(0,m.Z)(function*(y,f){const g=(0,O.m9)(y);yield eo(!0,g,f);const{providerUserInfo:E}=yield nr(g.auth,{idToken:yield g.getIdToken(),deleteProvider:[f]}),x=Cs(E||[]);return g.providerData=g.providerData.filter(P=>x.has(P.providerId)),x.has("phone")||(g.phoneNumber=null),yield g.auth._persistUserIfCurrent(g),g})).apply(this,arguments)}function gn(y,f){return ma.apply(this,arguments)}function ma(){return(ma=(0,m.Z)(function*(y,f,g=!1){const E=yield lr(y,f._linkToIdToken(y.auth,yield y.getIdToken()),g);return hr._forOperation(y,"link",E)})).apply(this,arguments)}function eo(y,f,g){return on.apply(this,arguments)}function on(){return(on=(0,m.Z)(function*(y,f,g){yield cr(f);const x=!1===y?"provider-already-linked":"no-such-provider";ne(Cs(f.providerData).has(g)===y,f.auth,x)})).apply(this,arguments)}function ud(y,f){return Lo.apply(this,arguments)}function Lo(){return(Lo=(0,m.Z)(function*(y,f,g=!1){const{auth:E}=y,x="reauthenticate";try{const P=yield lr(y,ku(E,x,f,y),g);ne(P.idToken,E,"internal-error");const z=it(P.idToken);ne(z,E,"internal-error");const{sub:oe}=z;return ne(y.uid===oe,E,"user-mismatch"),hr._forOperation(y,x,P)}catch(P){throw"auth/user-not-found"===(null==P?void 0:P.code)&&Te(E,"user-mismatch"),P}})).apply(this,arguments)}function Vo(y,f){return br.apply(this,arguments)}function br(){return(br=(0,m.Z)(function*(y,f,g=!1){const E="signIn",x=yield ku(y,E,f),P=yield hr._fromIdTokenResponse(y,E,x);return g||(yield y._updateCurrentUser(P.user)),P})).apply(this,arguments)}function Vn(y,f){return Qa.apply(this,arguments)}function Qa(){return(Qa=(0,m.Z)(function*(y,f){return Vo(Fe(y),f)})).apply(this,arguments)}function Si(y,f){return Dr.apply(this,arguments)}function Dr(){return(Dr=(0,m.Z)(function*(y,f){const g=(0,O.m9)(y);return yield eo(!1,g,f.providerId),gn(g,f)})).apply(this,arguments)}function to(y,f){return Is.apply(this,arguments)}function Is(){return(Is=(0,m.Z)(function*(y,f){return ud((0,O.m9)(y),f)})).apply(this,arguments)}function Ou(y,f){return zr.apply(this,arguments)}function zr(){return(zr=(0,m.Z)(function*(y,f){return Nr(y,"POST","/v1/accounts:signInWithCustomToken",Jt(y,f))})).apply(this,arguments)}function ro(){return(ro=(0,m.Z)(function*(y,f){const g=Fe(y),E=yield Ou(g,{token:f,returnSecureToken:!0}),x=yield hr._fromIdTokenResponse(g,"signIn",E);return yield g._updateCurrentUser(x.user),x})).apply(this,arguments)}class ft{constructor(f,g){this.factorId=f,this.uid=g.mfaEnrollmentId,this.enrollmentTime=new Date(g.enrolledAt).toUTCString(),this.displayName=g.displayName}static _fromServerResponse(f,g){return"phoneInfo"in g?Fu._fromServerResponse(f,g):Te(f,"internal-error")}}class Fu extends ft{constructor(f){super("phone",f),this.phoneNumber=f.phoneInfo}static _fromServerResponse(f,g){return new Fu(g)}}function Ja(y,f,g){var E;ne((null===(E=g.url)||void 0===E?void 0:E.length)>0,y,"invalid-continue-uri"),ne(void 0===g.dynamicLinkDomain||g.dynamicLinkDomain.length>0,y,"invalid-dynamic-link-domain"),f.continueUrl=g.url,f.dynamicLinkDomain=g.dynamicLinkDomain,f.canHandleCodeInApp=g.handleCodeInApp,g.iOS&&(ne(g.iOS.bundleId.length>0,y,"missing-ios-bundle-id"),f.iOSBundleId=g.iOS.bundleId),g.android&&(ne(g.android.packageName.length>0,y,"missing-android-pkg-name"),f.androidInstallApp=g.android.installApp,f.androidMinimumVersionCode=g.android.minimumVersion,f.androidPackageName=g.android.packageName)}function Vu(){return(Vu=(0,m.Z)(function*(y,f,g){const E=(0,O.m9)(y),x={requestType:"PASSWORD_RESET",email:f};g&&Ja(E,x,g),yield Du(E,x)})).apply(this,arguments)}function Ol(){return(Ol=(0,m.Z)(function*(y,f,g){yield Ln((0,O.m9)(y),{oobCode:f,newPassword:g})})).apply(this,arguments)}function Ie(){return(Ie=(0,m.Z)(function*(y,f){yield ko((0,O.m9)(y),{oobCode:f})})).apply(this,arguments)}function Vt(y,f){return Ll.apply(this,arguments)}function Ll(){return(Ll=(0,m.Z)(function*(y,f){const g=(0,O.m9)(y),E=yield Ln(g,{oobCode:f}),x=E.requestType;switch(ne(x,g,"internal-error"),x){case"EMAIL_SIGNIN":break;case"VERIFY_AND_CHANGE_EMAIL":ne(E.newEmail,g,"internal-error");break;case"REVERT_SECOND_FACTOR_ADDITION":ne(E.mfaInfo,g,"internal-error");default:ne(E.email,g,"internal-error")}let P=null;return E.mfaInfo&&(P=ft._fromServerResponse(Fe(g),E.mfaInfo)),{data:{email:("VERIFY_AND_CHANGE_EMAIL"===E.requestType?E.newEmail:E.email)||null,previousEmail:("VERIFY_AND_CHANGE_EMAIL"===E.requestType?E.email:E.newEmail)||null,multiFactorInfo:P},operation:x}})).apply(this,arguments)}function _a(){return(_a=(0,m.Z)(function*(y,f){const{data:g}=yield Vt((0,O.m9)(y),f);return g.email})).apply(this,arguments)}function Kr(){return(Kr=(0,m.Z)(function*(y,f,g){const E=Fe(y),x=yield Mu(E,{returnSecureToken:!0,email:f,password:g}),P=yield hr._fromIdTokenResponse(E,"signIn",x);return yield E._updateCurrentUser(P.user),P})).apply(this,arguments)}function ld(){return(ld=(0,m.Z)(function*(y,f,g){const E=(0,O.m9)(y),x={requestType:"EMAIL_SIGNIN",email:f};ne(g.handleCodeInApp,E,"argument-error"),g&&Ja(E,x,g),yield Ti(E,x)})).apply(this,arguments)}function io(){return(io=(0,m.Z)(function*(y,f,g){const E=(0,O.m9)(y),x=Pl.credentialWithLink(f,g||It());return ne(x._tenantId===(E.tenantId||null),E,"tenant-id-mismatch"),Vn(E,x)})).apply(this,arguments)}function fr(y,f){return ui.apply(this,arguments)}function ui(){return(ui=(0,m.Z)(function*(y,f){return Ht(y,"POST","/v1/accounts:createAuthUri",Jt(y,f))})).apply(this,arguments)}function so(){return(so=(0,m.Z)(function*(y,f){const E={identifier:f,continueUri:Qt()?It():"http://localhost"},{signinMethods:x}=yield fr((0,O.m9)(y),E);return x||[]})).apply(this,arguments)}function jl(){return(jl=(0,m.Z)(function*(y,f){const g=(0,O.m9)(y),x={requestType:"VERIFY_EMAIL",idToken:yield y.getIdToken()};f&&Ja(g.auth,x,f);const{email:P}=yield si(g.auth,x);P!==y.email&&(yield y.reload())})).apply(this,arguments)}function $u(){return($u=(0,m.Z)(function*(y,f,g){const E=(0,O.m9)(y),P={requestType:"VERIFY_AND_CHANGE_EMAIL",idToken:yield y.getIdToken(),newEmail:f};g&&Ja(E.auth,P,g);const{email:z}=yield ed(E.auth,P);z!==y.email&&(yield y.reload())})).apply(this,arguments)}function Hl(y,f){return Xa.apply(this,arguments)}function Xa(){return(Xa=(0,m.Z)(function*(y,f){return Ht(y,"POST","/v1/accounts:update",f)})).apply(this,arguments)}function $l(){return($l=(0,m.Z)(function*(y,{displayName:f,photoURL:g}){if(void 0===f&&void 0===g)return;const E=(0,O.m9)(y),P={idToken:yield E.getIdToken(),displayName:f,photoUrl:g,returnSecureToken:!0},z=yield lr(E,Hl(E.auth,P));E.displayName=z.displayName||null,E.photoURL=z.photoUrl||null;const oe=E.providerData.find(({providerId:Be})=>"password"===Be);oe&&(oe.displayName=E.displayName,oe.photoURL=E.photoURL),yield E._updateTokensIfNecessary(z)})).apply(this,arguments)}function Wl(y,f,g){return Uo.apply(this,arguments)}function Uo(){return(Uo=(0,m.Z)(function*(y,f,g){const{auth:E}=y,P={idToken:yield y.getIdToken(),returnSecureToken:!0};f&&(P.email=f),g&&(P.password=g);const z=yield lr(y,Tt(E,P));yield y._updateTokensIfNecessary(z,!0)})).apply(this,arguments)}class Bo{constructor(f,g,E={}){this.isNewUser=f,this.providerId=g,this.profile=E}}class hd extends Bo{constructor(f,g,E,x){super(f,g,E),this.username=x}}class fd extends Bo{constructor(f,g){super(f,"facebook.com",g)}}class jo extends hd{constructor(f,g){super(f,"github.com",g,"string"==typeof(null==g?void 0:g.login)?null==g?void 0:g.login:null)}}class oo extends Bo{constructor(f,g){super(f,"google.com",g)}}class ql extends hd{constructor(f,g,E){super(f,"twitter.com",g,E)}}function Tr(y){const{user:f,_tokenResponse:g}=y;return f.isAnonymous&&!g?{providerId:null,isNewUser:!1,profile:null}:function dd(y){var f,g;if(!y)return null;const{providerId:E}=y,x=y.rawUserInfo?JSON.parse(y.rawUserInfo):{},P=y.isNewUser||"identitytoolkit#SignupNewUserResponse"===y.kind;if(!E&&(null==y?void 0:y.idToken)){const z=null===(g=null===(f=it(y.idToken))||void 0===f?void 0:f.firebase)||void 0===g?void 0:g.sign_in_provider;if(z)return new Bo(P,"anonymous"!==z&&"custom"!==z?z:null)}if(!E)return null;switch(E){case"facebook.com":return new fd(P,x);case"github.com":return new jo(P,x);case"google.com":return new oo(P,x);case"twitter.com":return new ql(P,x,y.screenName||null);case"custom":case"anonymous":return new Bo(P,null);default:return new Bo(P,E,x)}}(g)}class bs{constructor(f,g){this.type=f,this.credential=g}static _fromIdtoken(f){return new bs("enroll",f)}static _fromMfaPendingCredential(f){return new bs("signin",f)}toJSON(){return{multiFactorSession:{["enroll"===this.type?"idToken":"pendingCredential"]:this.credential}}}static fromJSON(f){var g,E;if(null==f?void 0:f.multiFactorSession){if(null===(g=f.multiFactorSession)||void 0===g?void 0:g.pendingCredential)return bs._fromMfaPendingCredential(f.multiFactorSession.pendingCredential);if(null===(E=f.multiFactorSession)||void 0===E?void 0:E.idToken)return bs._fromIdtoken(f.multiFactorSession.idToken)}return null}}class tu{constructor(f,g,E){this.session=f,this.hints=g,this.signInResolver=E}static _fromError(f,g){const E=Fe(f),x=g.customData._serverResponse,P=(x.mfaInfo||[]).map(oe=>ft._fromServerResponse(E,oe));ne(x.mfaPendingCredential,E,"internal-error");const z=bs._fromMfaPendingCredential(x.mfaPendingCredential);return new tu(z,P,function(){var oe=(0,m.Z)(function*(Be){const Xe=yield Be._process(E,z);delete x.mfaInfo,delete x.mfaPendingCredential;const vt=Object.assign(Object.assign({},x),{idToken:Xe.idToken,refreshToken:Xe.refreshToken});switch(g.operationType){case"signIn":const ut=yield hr._fromIdTokenResponse(E,g.operationType,vt);return yield E._updateCurrentUser(ut.user),ut;case"reauthenticate":return ne(g.user,E,"internal-error"),hr._forOperation(g.user,g.operationType,vt);default:Te(E,"internal-error")}});return function(Be){return oe.apply(this,arguments)}}())}resolveSignIn(f){var g=this;return(0,m.Z)(function*(){return g.signInResolver(f)})()}}function Hn(y,f){return Ht(y,"POST","/v2/accounts/mfaEnrollment:start",Jt(y,f))}class Ds{constructor(f){this.user=f,this.enrolledFactors=[],f._onReload(g=>{g.mfaInfo&&(this.enrolledFactors=g.mfaInfo.map(E=>ft._fromServerResponse(f.auth,E)))})}static _fromUser(f){return new Ds(f)}getSession(){var f=this;return(0,m.Z)(function*(){return bs._fromIdtoken(yield f.user.getIdToken())})()}enroll(f,g){var E=this;return(0,m.Z)(function*(){const x=f,P=yield E.getSession(),z=yield lr(E.user,x._process(E.user.auth,P,g));return yield E.user._updateTokensIfNecessary(z),E.user.reload()})()}unenroll(f){var g=this;return(0,m.Z)(function*(){const E="string"==typeof f?f:f.uid,x=yield g.user.getIdToken(),P=yield lr(g.user,function yg(y,f){return Ht(y,"POST","/v2/accounts/mfaEnrollment:withdraw",Jt(y,f))}(g.user.auth,{idToken:x,mfaEnrollmentId:E}));g.enrolledFactors=g.enrolledFactors.filter(({uid:z})=>z!==E),yield g.user._updateTokensIfNecessary(P);try{yield g.user.reload()}catch(z){if("auth/user-token-expired"!==z.code)throw z}})()}}const va=new WeakMap,Zl="__sak";class Ho{constructor(f,g){this.storageRetriever=f,this.type=g}_isAvailable(){try{return this.storage?(this.storage.setItem(Zl,"1"),this.storage.removeItem(Zl),Promise.resolve(!0)):Promise.resolve(!1)}catch(f){return Promise.resolve(!1)}}_set(f,g){return this.storage.setItem(f,JSON.stringify(g)),Promise.resolve()}_get(f){const g=this.storage.getItem(f);return Promise.resolve(g?JSON.parse(g):null)}_remove(f){return this.storage.removeItem(f),Promise.resolve()}get storage(){return this.storageRetriever()}}const Mn=(()=>{class y extends Ho{constructor(){super(()=>window.localStorage,"LOCAL"),this.boundEventHandler=(g,E)=>this.onStorageEvent(g,E),this.listeners={},this.localCache={},this.pollTimer=null,this.safariLocalStorageNotSynced=function _d(){const y=(0,O.z$)();return Zt(y)||ir(y)}()&&function Qn(){try{return!(!window||window===window.top)}catch(y){return!1}}(),this.fallbackToPolling=ys(),this._shouldAllowMigration=!0}forAllChangedKeys(g){for(const E of Object.keys(this.listeners)){const x=this.storage.getItem(E),P=this.localCache[E];x!==P&&g(E,P,x)}}onStorageEvent(g,E=!1){if(!g.key)return void this.forAllChangedKeys((oe,Be,Xe)=>{this.notifyListeners(oe,Xe)});const x=g.key;if(E?this.detachListener():this.stopPolling(),this.safariLocalStorageNotSynced){const oe=this.storage.getItem(x);if(g.newValue!==oe)null!==g.newValue?this.storage.setItem(x,g.newValue):this.storage.removeItem(x);else if(this.localCache[x]===g.newValue&&!E)return}const P=()=>{const oe=this.storage.getItem(x);!E&&this.localCache[x]===oe||this.notifyListeners(x,oe)},z=this.storage.getItem(x);!function qa(){return(0,O.w1)()&&10===document.documentMode}()||z===g.newValue||g.newValue===g.oldValue?P():setTimeout(P,10)}notifyListeners(g,E){this.localCache[g]=E;const x=this.listeners[g];if(x)for(const P of Array.from(x))P(E&&JSON.parse(E))}startPolling(){this.stopPolling(),this.pollTimer=setInterval(()=>{this.forAllChangedKeys((g,E,x)=>{this.onStorageEvent(new StorageEvent("storage",{key:g,oldValue:E,newValue:x}),!0)})},1e3)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}attachListener(){window.addEventListener("storage",this.boundEventHandler)}detachListener(){window.removeEventListener("storage",this.boundEventHandler)}_addListener(g,E){0===Object.keys(this.listeners).length&&(this.fallbackToPolling?this.startPolling():this.attachListener()),this.listeners[g]||(this.listeners[g]=new Set,this.localCache[g]=this.storage.getItem(g)),this.listeners[g].add(E)}_removeListener(g,E){this.listeners[g]&&(this.listeners[g].delete(E),0===this.listeners[g].size&&delete this.listeners[g]),0===Object.keys(this.listeners).length&&(this.detachListener(),this.stopPolling())}_set(g,E){var x=()=>super._set,P=this;return(0,m.Z)(function*(){yield x().call(P,g,E),P.localCache[g]=JSON.stringify(E)})()}_get(g){var E=()=>super._get,x=this;return(0,m.Z)(function*(){const P=yield E().call(x,g);return x.localCache[g]=JSON.stringify(P),P})()}_remove(g){var E=()=>super._remove,x=this;return(0,m.Z)(function*(){yield E().call(x,g),delete x.localCache[g]})()}}return y.type="LOCAL",y})(),pr=(()=>{class y extends Ho{constructor(){super(()=>window.sessionStorage,"SESSION")}_addListener(g,E){}_removeListener(g,E){}}return y.type="SESSION",y})();let gr=(()=>{class y{constructor(g){this.eventTarget=g,this.handlersMap={},this.boundEventHandler=this.handleEvent.bind(this)}static _getInstance(g){const E=this.receivers.find(P=>P.isListeningto(g));if(E)return E;const x=new y(g);return this.receivers.push(x),x}isListeningto(g){return this.eventTarget===g}handleEvent(g){var E=this;return(0,m.Z)(function*(){const x=g,{eventId:P,eventType:z,data:oe}=x.data,Be=E.handlersMap[z];if(!(null==Be?void 0:Be.size))return;x.ports[0].postMessage({status:"ack",eventId:P,eventType:z});const Xe=Array.from(Be).map(function(){var ut=(0,m.Z)(function*(On){return On(x.origin,oe)});return function(On){return ut.apply(this,arguments)}}()),vt=yield function Zr(y){return Promise.all(y.map(function(){var f=(0,m.Z)(function*(g){try{return{fulfilled:!0,value:yield g}}catch(E){return{fulfilled:!1,reason:E}}});return function(g){return f.apply(this,arguments)}}()))}(Xe);x.ports[0].postMessage({status:"done",eventId:P,eventType:z,response:vt})})()}_subscribe(g,E){0===Object.keys(this.handlersMap).length&&this.eventTarget.addEventListener("message",this.boundEventHandler),this.handlersMap[g]||(this.handlersMap[g]=new Set),this.handlersMap[g].add(E)}_unsubscribe(g,E){this.handlersMap[g]&&E&&this.handlersMap[g].delete(E),(!E||0===this.handlersMap[g].size)&&delete this.handlersMap[g],0===Object.keys(this.handlersMap).length&&this.eventTarget.removeEventListener("message",this.boundEventHandler)}}return y.receivers=[],y})();function wa(y="",f=10){let g="";for(let E=0;E<f;E++)g+=Math.floor(10*Math.random());return y+g}class yd{constructor(f){this.target=f,this.handlers=new Set}removeMessageHandler(f){f.messageChannel&&(f.messageChannel.port1.removeEventListener("message",f.onMessage),f.messageChannel.port1.close()),this.handlers.delete(f)}_send(f,g,E=50){var x=this;return(0,m.Z)(function*(){const P="undefined"!=typeof MessageChannel?new MessageChannel:null;if(!P)throw new Error("connection_unavailable");let z,oe;return new Promise((Be,Xe)=>{const vt=wa("",20);P.port1.start();const ut=setTimeout(()=>{Xe(new Error("unsupported_event"))},E);oe={messageChannel:P,onMessage(On){const ss=On;if(ss.data.eventId===vt)switch(ss.data.status){case"ack":clearTimeout(ut),z=setTimeout(()=>{Xe(new Error("timeout"))},3e3);break;case"done":clearTimeout(z),Be(ss.data.response);break;default:clearTimeout(ut),clearTimeout(z),Xe(new Error("invalid_response"))}}},x.handlers.add(oe),P.port1.addEventListener("message",oe.onMessage),x.target.postMessage({eventType:f,eventId:vt,data:g},[P.port2])}).finally(()=>{oe&&x.removeMessageHandler(oe)})})()}}function mn(){return window}function xi(){return void 0!==mn().WorkerGlobalScope&&"function"==typeof mn().importScripts}function Yr(){return(Yr=(0,m.Z)(function*(){if(!(null==navigator?void 0:navigator.serviceWorker))return null;try{return(yield navigator.serviceWorker.ready).active}catch(y){return null}})).apply(this,arguments)}const Yl="firebaseLocalStorageDb",$o="firebaseLocalStorage",In="fbase_key";class Ts{constructor(f){this.request=f}toPromise(){return new Promise((f,g)=>{this.request.addEventListener("success",()=>{f(this.request.result)}),this.request.addEventListener("error",()=>{g(this.request.error)})})}}function Ea(y,f){return y.transaction([$o],f?"readwrite":"readonly").objectStore($o)}function uo(){const y=indexedDB.open(Yl,1);return new Promise((f,g)=>{y.addEventListener("error",()=>{g(y.error)}),y.addEventListener("upgradeneeded",()=>{const E=y.result;try{E.createObjectStore($o,{keyPath:In})}catch(x){g(x)}}),y.addEventListener("success",(0,m.Z)(function*(){const E=y.result;E.objectStoreNames.contains($o)?f(E):(E.close(),yield function li(){const y=indexedDB.deleteDatabase(Yl);return new Ts(y).toPromise()}(),f(yield uo()))}))})}function nu(y,f,g){return Qi.apply(this,arguments)}function Qi(){return(Qi=(0,m.Z)(function*(y,f,g){const E=Ea(y,!0).put({[In]:f,value:g});return new Ts(E).toPromise()})).apply(this,arguments)}function lo(){return(lo=(0,m.Z)(function*(y,f){const g=Ea(y,!1).get(f),E=yield new Ts(g).toPromise();return void 0===E?null:E.value})).apply(this,arguments)}function Ji(y,f){const g=Ea(y,!0).delete(f);return new Ts(g).toPromise()}const Ri=(()=>{class y{constructor(){this.type="LOCAL",this._shouldAllowMigration=!0,this.listeners={},this.localCache={},this.pollTimer=null,this.pendingWrites=0,this.receiver=null,this.sender=null,this.serviceWorkerReceiverAvailable=!1,this.activeServiceWorker=null,this._workerInitializationPromise=this.initializeServiceWorkerMessaging().then(()=>{},()=>{})}_openDb(){var g=this;return(0,m.Z)(function*(){return g.db||(g.db=yield uo()),g.db})()}_withRetries(g){var E=this;return(0,m.Z)(function*(){let x=0;for(;;)try{const P=yield E._openDb();return yield g(P)}catch(P){if(x++>3)throw P;E.db&&(E.db.close(),E.db=void 0)}})()}initializeServiceWorkerMessaging(){var g=this;return(0,m.Z)(function*(){return xi()?g.initializeReceiver():g.initializeSender()})()}initializeReceiver(){var g=this;return(0,m.Z)(function*(){g.receiver=gr._getInstance(function vd(){return xi()?self:null}()),g.receiver._subscribe("keyChanged",function(){var E=(0,m.Z)(function*(x,P){return{keyProcessed:(yield g._poll()).includes(P.key)}});return function(x,P){return E.apply(this,arguments)}}()),g.receiver._subscribe("ping",function(){var E=(0,m.Z)(function*(x,P){return["keyChanged"]});return function(x,P){return E.apply(this,arguments)}}())})()}initializeSender(){var g=this;return(0,m.Z)(function*(){var E,x;if(g.activeServiceWorker=yield function Wu(){return Yr.apply(this,arguments)}(),!g.activeServiceWorker)return;g.sender=new yd(g.activeServiceWorker);const P=yield g.sender._send("ping",{},800);!P||(null===(E=P[0])||void 0===E?void 0:E.fulfilled)&&(null===(x=P[0])||void 0===x?void 0:x.value.includes("keyChanged"))&&(g.serviceWorkerReceiverAvailable=!0)})()}notifyServiceWorker(g){var E=this;return(0,m.Z)(function*(){if(E.sender&&E.activeServiceWorker&&function yt(){var y;return(null===(y=null==navigator?void 0:navigator.serviceWorker)||void 0===y?void 0:y.controller)||null}()===E.activeServiceWorker)try{yield E.sender._send("keyChanged",{key:g},E.serviceWorkerReceiverAvailable?800:50)}catch(x){}})()}_isAvailable(){return(0,m.Z)(function*(){try{if(!indexedDB)return!1;const g=yield uo();return yield nu(g,Zl,"1"),yield Ji(g,Zl),!0}catch(g){}return!1})()}_withPendingWrite(g){var E=this;return(0,m.Z)(function*(){E.pendingWrites++;try{yield g()}finally{E.pendingWrites--}})()}_set(g,E){var x=this;return(0,m.Z)(function*(){return x._withPendingWrite((0,m.Z)(function*(){return yield x._withRetries(P=>nu(P,g,E)),x.localCache[g]=E,x.notifyServiceWorker(g)}))})()}_get(g){var E=this;return(0,m.Z)(function*(){const x=yield E._withRetries(P=>function Ql(y,f){return lo.apply(this,arguments)}(P,g));return E.localCache[g]=x,x})()}_remove(g){var E=this;return(0,m.Z)(function*(){return E._withPendingWrite((0,m.Z)(function*(){return yield E._withRetries(x=>Ji(x,g)),delete E.localCache[g],E.notifyServiceWorker(g)}))})()}_poll(){var g=this;return(0,m.Z)(function*(){const E=yield g._withRetries(z=>{const oe=Ea(z,!1).getAll();return new Ts(oe).toPromise()});if(!E)return[];if(0!==g.pendingWrites)return[];const x=[],P=new Set;for(const{fbase_key:z,value:oe}of E)P.add(z),JSON.stringify(g.localCache[z])!==JSON.stringify(oe)&&(g.notifyListeners(z,oe),x.push(z));for(const z of Object.keys(g.localCache))g.localCache[z]&&!P.has(z)&&(g.notifyListeners(z,null),x.push(z));return x})()}notifyListeners(g,E){this.localCache[g]=E;const x=this.listeners[g];if(x)for(const P of Array.from(x))P(E)}startPolling(){var g=this;this.stopPolling(),this.pollTimer=setInterval((0,m.Z)(function*(){return g._poll()}),800)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}_addListener(g,E){0===Object.keys(this.listeners).length&&this.startPolling(),this.listeners[g]||(this.listeners[g]=new Set,this._get(g)),this.listeners[g].add(E)}_removeListener(g,E){this.listeners[g]&&(this.listeners[g].delete(E),0===this.listeners[g].size&&delete this.listeners[g]),0===Object.keys(this.listeners).length&&this.stopPolling()}}return y.type="LOCAL",y})();function Ca(y,f){return Ht(y,"POST","/v2/accounts/mfaSignIn:start",Jt(y,f))}function Mi(){return(Mi=(0,m.Z)(function*(y){return(yield Ht(y,"GET","/v1/recaptchaParams")).recaptchaSiteKey||""})).apply(this,arguments)}function bn(y){return new Promise((f,g)=>{const E=document.createElement("script");E.setAttribute("src",y),E.onload=f,E.onerror=x=>{const P=we("internal-error");P.customData=x,g(P)},E.type="text/javascript",E.charset="UTF-8",function Cd(){var y,f;return null!==(f=null===(y=document.getElementsByTagName("head"))||void 0===y?void 0:y[0])&&void 0!==f?f:document}().appendChild(E)})}function Ia(y){return`__${y}${Math.floor(1e6*Math.random())}`}const or=1e12;class Xi{constructor(f){this.auth=f,this.counter=or,this._widgets=new Map}render(f,g){const E=this.counter;return this._widgets.set(E,new es(f,this.auth.name,g||{})),this.counter++,E}reset(f){var g;const E=f||or;null===(g=this._widgets.get(E))||void 0===g||g.delete(),this._widgets.delete(E)}getResponse(f){var g;return(null===(g=this._widgets.get(f||or))||void 0===g?void 0:g.getResponse())||""}execute(f){var g=this;return(0,m.Z)(function*(){var E;return null===(E=g._widgets.get(f||or))||void 0===E||E.execute(),""})()}}class es{constructor(f,g,E){this.params=E,this.timerId=null,this.deleted=!1,this.responseToken=null,this.clickHandler=()=>{this.execute()};const x="string"==typeof f?document.getElementById(f):f;ne(x,"argument-error",{appName:g}),this.container=x,this.isVisible="invisible"!==this.params.size,this.isVisible?this.execute():this.container.addEventListener("click",this.clickHandler)}getResponse(){return this.checkIfDeleted(),this.responseToken}delete(){this.checkIfDeleted(),this.deleted=!0,this.timerId&&(clearTimeout(this.timerId),this.timerId=null),this.container.removeEventListener("click",this.clickHandler)}execute(){this.checkIfDeleted(),!this.timerId&&(this.timerId=window.setTimeout(()=>{this.responseToken=function Nn(y){const f=[],g="1234567890abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ";for(let E=0;E<y;E++)f.push(g.charAt(Math.floor(Math.random()*g.length)));return f.join("")}(50);const{callback:f,"expired-callback":g}=this.params;if(f)try{f(this.responseToken)}catch(E){}this.timerId=window.setTimeout(()=>{if(this.timerId=null,this.responseToken=null,g)try{g()}catch(E){}this.isVisible&&this.execute()},6e4)},500))}checkIfDeleted(){if(this.deleted)throw new Error("reCAPTCHA mock was already deleted!")}}const Ss=Ia("rcb"),Id=new cn(3e4,6e4);class wg{constructor(){this.hostLanguage="",this.counter=0,this.librarySeparatelyLoaded=!!mn().grecaptcha}load(f,g=""){return ne(function Eg(y){return y.length<=6&&/^\s*[a-zA-Z0-9\-]*\s*$/.test(y)}(g),f,"argument-error"),this.shouldResolveImmediately(g)?Promise.resolve(mn().grecaptcha):new Promise((E,x)=>{const P=mn().setTimeout(()=>{x(we(f,"network-request-failed"))},Id.get());mn()[Ss]=()=>{mn().clearTimeout(P),delete mn()[Ss];const oe=mn().grecaptcha;if(!oe)return void x(we(f,"internal-error"));const Be=oe.render;oe.render=(Xe,vt)=>{const ut=Be(Xe,vt);return this.counter++,ut},this.hostLanguage=g,E(oe)},bn(`https://www.google.com/recaptcha/api.js??${(0,O.xO)({onload:Ss,render:"explicit",hl:g})}`).catch(()=>{clearTimeout(P),x(we(f,"internal-error"))})})}clearedOneInstance(){this.counter--}shouldResolveImmediately(f){return!!mn().grecaptcha&&(f===this.hostLanguage||this.counter>0||this.librarySeparatelyLoaded)}}class Cg{load(f){return(0,m.Z)(function*(){return new Xi(f)})()}clearedOneInstance(){}}const co="recaptcha",Qr={theme:"light",type:"image"};class Ig{constructor(f,g=Object.assign({},Qr),E){this.parameters=g,this.type=co,this.destroyed=!1,this.widgetId=null,this.tokenChangeListeners=new Set,this.renderPromise=null,this.recaptcha=null,this.auth=Fe(E),this.isInvisible="invisible"===this.parameters.size,ne("undefined"!=typeof document,this.auth,"operation-not-supported-in-this-environment");const x="string"==typeof f?document.getElementById(f):f;ne(x,this.auth,"argument-error"),this.container=x,this.parameters.callback=this.makeTokenCallback(this.parameters.callback),this._recaptchaLoader=this.auth.settings.appVerificationDisabledForTesting?new Cg:new wg,this.validateStartingState()}verify(){var f=this;return(0,m.Z)(function*(){f.assertNotDestroyed();const g=yield f.render(),E=f.getAssertedRecaptcha();return E.getResponse(g)||new Promise(P=>{const z=oe=>{!oe||(f.tokenChangeListeners.delete(z),P(oe))};f.tokenChangeListeners.add(z),f.isInvisible&&E.execute(g)})})()}render(){try{this.assertNotDestroyed()}catch(f){return Promise.reject(f)}return this.renderPromise||(this.renderPromise=this.makeRenderPromise().catch(f=>{throw this.renderPromise=null,f})),this.renderPromise}_reset(){this.assertNotDestroyed(),null!==this.widgetId&&this.getAssertedRecaptcha().reset(this.widgetId)}clear(){this.assertNotDestroyed(),this.destroyed=!0,this._recaptchaLoader.clearedOneInstance(),this.isInvisible||this.container.childNodes.forEach(f=>{this.container.removeChild(f)})}validateStartingState(){ne(!this.parameters.sitekey,this.auth,"argument-error"),ne(this.isInvisible||!this.container.hasChildNodes(),this.auth,"argument-error"),ne("undefined"!=typeof document,this.auth,"operation-not-supported-in-this-environment")}makeTokenCallback(f){return g=>{if(this.tokenChangeListeners.forEach(E=>E(g)),"function"==typeof f)f(g);else if("string"==typeof f){const E=mn()[f];"function"==typeof E&&E(g)}}}assertNotDestroyed(){ne(!this.destroyed,this.auth,"internal-error")}makeRenderPromise(){var f=this;return(0,m.Z)(function*(){if(yield f.init(),!f.widgetId){let g=f.container;if(!f.isInvisible){const E=document.createElement("div");g.appendChild(E),g=E}f.widgetId=f.getAssertedRecaptcha().render(g,f.parameters)}return f.widgetId})()}init(){var f=this;return(0,m.Z)(function*(){ne(Qt()&&!xi(),f.auth,"internal-error"),yield function ho(){let y=null;return new Promise(f=>{"complete"!==document.readyState?(y=()=>f(),window.addEventListener("load",y)):f()}).catch(f=>{throw y&&window.removeEventListener("load",y),f})}(),f.recaptcha=yield f._recaptchaLoader.load(f.auth,f.auth.languageCode||void 0);const g=yield function sr(y){return Mi.apply(this,arguments)}(f.auth);ne(g,f.auth,"internal-error"),f.parameters.sitekey=g})()}getAssertedRecaptcha(){return ne(this.recaptcha,this.auth,"internal-error"),this.recaptcha}}class As{constructor(f,g){this.verificationId=f,this.onConfirmation=g}confirm(f){const g=fa._fromVerification(this.verificationId,f);return this.onConfirmation(g)}}function Sn(){return(Sn=(0,m.Z)(function*(y,f,g){const E=Fe(y),x=yield mr(E,f,(0,O.m9)(g));return new As(x,P=>Vn(E,P))})).apply(this,arguments)}function Da(){return(Da=(0,m.Z)(function*(y,f,g){const E=(0,O.m9)(y);yield eo(!1,E,"phone");const x=yield mr(E.auth,f,(0,O.m9)(g));return new As(x,P=>Si(E,P))})).apply(this,arguments)}function ec(){return(ec=(0,m.Z)(function*(y,f,g){const E=(0,O.m9)(y),x=yield mr(E.auth,f,(0,O.m9)(g));return new As(x,P=>to(E,P))})).apply(this,arguments)}function mr(y,f,g){return ci.apply(this,arguments)}function ci(){return(ci=(0,m.Z)(function*(y,f,g){var E;const x=yield g.verify();try{let P;if(ne("string"==typeof x,y,"argument-error"),ne(g.type===co,y,"argument-error"),P="string"==typeof f?{phoneNumber:f}:f,"session"in P){const z=P.session;if("phoneNumber"in P)return ne("enroll"===z.type,y,"internal-error"),(yield Hn(y,{idToken:z.credential,phoneEnrollmentInfo:{phoneNumber:P.phoneNumber,recaptchaToken:x}})).phoneSessionInfo.sessionInfo;{ne("signin"===z.type,y,"internal-error");const oe=(null===(E=P.multiFactorHint)||void 0===E?void 0:E.uid)||P.multiFactorUid;return ne(oe,y,"missing-multi-factor-info"),(yield Ca(y,{mfaPendingCredential:z.credential,mfaEnrollmentId:oe,phoneSignInInfo:{recaptchaToken:x}})).phoneResponseInfo.sessionInfo}}{const{sessionInfo:z}=yield fg(y,{phoneNumber:P.phoneNumber,recaptchaToken:x});return z}}finally{g._reset()}})).apply(this,arguments)}function xs(){return(xs=(0,m.Z)(function*(y,f){yield gn((0,O.m9)(y),f)})).apply(this,arguments)}let Pi=(()=>{class y{constructor(g){this.providerId=y.PROVIDER_ID,this.auth=Fe(g)}verifyPhoneNumber(g,E){return mr(this.auth,g,(0,O.m9)(E))}static credential(g,E){return fa._fromVerification(g,E)}static credentialFromResult(g){return y.credentialFromTaggedObject(g)}static credentialFromError(g){return y.credentialFromTaggedObject(g.customData||{})}static credentialFromTaggedObject({_tokenResponse:g}){if(!g)return null;const{phoneNumber:E,temporaryProof:x}=g;return E&&x?fa._fromTokenResponse(E,x):null}}return y.PROVIDER_ID="phone",y.PHONE_SIGN_IN_METHOD="phone",y})();function ts(y,f){return f?ie(f):(ne(y._popupRedirectResolver,y,"argument-error"),y._popupRedirectResolver)}class iu extends rn{constructor(f){super("custom","custom"),this.params=f}_getIdTokenResponse(f){return jn(f,this._buildIdpRequest())}_linkToIdToken(f,g){return jn(f,this._buildIdpRequest(g))}_getReauthenticationResolver(f){return jn(f,this._buildIdpRequest())}_buildIdpRequest(f){const g={requestUri:this.params.requestUri,sessionId:this.params.sessionId,postBody:this.params.postBody,tenantId:this.params.tenantId,pendingToken:this.params.pendingToken,returnSecureToken:!0,returnIdpCredential:!0};return f&&(g.idToken=f),g}}function nc(y){return Vo(y.auth,new iu(y),y.bypassAuthState)}function rc(y){const{auth:f,user:g}=y;return ne(g,f,"internal-error"),ud(g,new iu(y),y.bypassAuthState)}function Ot(y){return ic.apply(this,arguments)}function ic(){return(ic=(0,m.Z)(function*(y){const{auth:f,user:g}=y;return ne(g,f,"internal-error"),gn(g,new iu(y),y.bypassAuthState)})).apply(this,arguments)}class Jn{constructor(f,g,E,x,P=!1){this.auth=f,this.resolver=E,this.user=x,this.bypassAuthState=P,this.pendingPromise=null,this.eventManager=null,this.filter=Array.isArray(g)?g:[g]}execute(){var f=this;return new Promise(function(){var g=(0,m.Z)(function*(E,x){f.pendingPromise={resolve:E,reject:x};try{f.eventManager=yield f.resolver._initialize(f.auth),yield f.onExecution(),f.eventManager.registerConsumer(f)}catch(P){f.reject(P)}});return function(E,x){return g.apply(this,arguments)}}())}onAuthEvent(f){var g=this;return(0,m.Z)(function*(){const{urlResponse:E,sessionId:x,postBody:P,tenantId:z,error:oe,type:Be}=f;if(oe)return void g.reject(oe);const Xe={auth:g.auth,requestUri:E,sessionId:x,tenantId:z||void 0,postBody:P||void 0,user:g.user,bypassAuthState:g.bypassAuthState};try{g.resolve(yield g.getIdpTask(Be)(Xe))}catch(vt){g.reject(vt)}})()}onError(f){this.reject(f)}getIdpTask(f){switch(f){case"signInViaPopup":case"signInViaRedirect":return nc;case"linkViaPopup":case"linkViaRedirect":return Ot;case"reauthViaPopup":case"reauthViaRedirect":return rc;default:Te(this.auth,"internal-error")}}resolve(f){re(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.resolve(f),this.unregisterAndCleanUp()}reject(f){re(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.reject(f),this.unregisterAndCleanUp()}unregisterAndCleanUp(){this.eventManager&&this.eventManager.unregisterConsumer(this),this.pendingPromise=null,this.cleanUp()}}const sc=new cn(2e3,1e4);function bd(){return(bd=(0,m.Z)(function*(y,f,g){const E=Fe(y);$e(y,f,Js);const x=ts(E,g);return new rs(E,"signInViaPopup",f,x).executeNotNull()})).apply(this,arguments)}function zu(){return(zu=(0,m.Z)(function*(y,f,g){const E=(0,O.m9)(y);$e(E.auth,f,Js);const x=ts(E.auth,g);return new rs(E.auth,"reauthViaPopup",f,x,E).executeNotNull()})).apply(this,arguments)}function Ku(){return(Ku=(0,m.Z)(function*(y,f,g){const E=(0,O.m9)(y);$e(E.auth,f,Js);const x=ts(E.auth,g);return new rs(E.auth,"linkViaPopup",f,x,E).executeNotNull()})).apply(this,arguments)}let rs=(()=>{class y extends Jn{constructor(g,E,x,P,z){super(g,E,P,z),this.provider=x,this.authWindow=null,this.pollId=null,y.currentPopupAction&&y.currentPopupAction.cancel(),y.currentPopupAction=this}executeNotNull(){var g=this;return(0,m.Z)(function*(){const E=yield g.execute();return ne(E,g.auth,"internal-error"),E})()}onExecution(){var g=this;return(0,m.Z)(function*(){re(1===g.filter.length,"Popup operations only handle one event");const E=wa();g.authWindow=yield g.resolver._openPopup(g.auth,g.provider,g.filter[0],E),g.authWindow.associatedEvent=E,g.resolver._originValidation(g.auth).catch(x=>{g.reject(x)}),g.resolver._isIframeWebStorageSupported(g.auth,x=>{x||g.reject(we(g.auth,"web-storage-unsupported"))}),g.pollUserCancellation()})()}get eventId(){var g;return(null===(g=this.authWindow)||void 0===g?void 0:g.associatedEvent)||null}cancel(){this.reject(we(this.auth,"cancelled-popup-request"))}cleanUp(){this.authWindow&&this.authWindow.close(),this.pollId&&window.clearTimeout(this.pollId),this.authWindow=null,this.pollId=null,y.currentPopupAction=null}pollUserCancellation(){const g=()=>{var E,x;this.pollId=(null===(x=null===(E=this.authWindow)||void 0===E?void 0:E.window)||void 0===x?void 0:x.closed)?window.setTimeout(()=>{this.pollId=null,this.reject(we(this.auth,"popup-closed-by-user"))},2e3):window.setTimeout(g,sc.get())};g()}}return y.currentPopupAction=null,y})();const is=new Map;class $n extends Jn{constructor(f,g,E=!1){super(f,["signInViaRedirect","linkViaRedirect","reauthViaRedirect","unknown"],g,void 0,E),this.eventId=null}execute(){var f=()=>super.execute,g=this;return(0,m.Z)(function*(){let E=is.get(g.auth._key());if(!E){try{const P=(yield function di(y,f){return oc.apply(this,arguments)}(g.resolver,g.auth))?yield f().call(g):null;E=()=>Promise.resolve(P)}catch(x){E=()=>Promise.reject(x)}is.set(g.auth._key(),E)}return g.bypassAuthState||is.set(g.auth._key(),()=>Promise.resolve(null)),E()})()}onAuthEvent(f){var g=()=>super.onAuthEvent,E=this;return(0,m.Z)(function*(){if("signInViaRedirect"===f.type)return g().call(E,f);if("unknown"!==f.type){if(f.eventId){const x=yield E.auth._redirectUserForId(f.eventId);if(x)return E.user=x,g().call(E,f);E.resolve(null)}}else E.resolve(null)})()}onExecution(){return(0,m.Z)(function*(){})()}cleanUp(){}}function oc(){return(oc=(0,m.Z)(function*(y,f){const g=T(f),E=b(y);if(!(yield E._isAvailable()))return!1;const x="true"===(yield E._get(g));return yield E._remove(g),x})).apply(this,arguments)}function qo(y,f){return Ta.apply(this,arguments)}function Ta(){return(Ta=(0,m.Z)(function*(y,f){return b(y)._set(T(f),"true")})).apply(this,arguments)}function b(y){return ie(y._redirectPersistence)}function T(y){return ce("pendingRedirect",y.config.apiKey,y.name)}function Z(){return(Z=(0,m.Z)(function*(y,f,g){const E=Fe(y);$e(y,f,Js);const x=ts(E,g);return yield qo(x,E),x._openRedirect(E,f,"signInViaRedirect")})).apply(this,arguments)}function Re(){return(Re=(0,m.Z)(function*(y,f,g){const E=(0,O.m9)(y);$e(E.auth,f,Js);const x=ts(E.auth,g);yield qo(x,E.auth);const P=yield zo(E);return x._openRedirect(E.auth,f,"reauthViaRedirect",P)})).apply(this,arguments)}function Mt(){return(Mt=(0,m.Z)(function*(y,f,g){const E=(0,O.m9)(y);$e(E.auth,f,Js);const x=ts(E.auth,g);yield eo(!1,E,f.providerId),yield qo(x,E.auth);const P=yield zo(E);return x._openRedirect(E.auth,f,"linkViaRedirect",P)})).apply(this,arguments)}function Gn(){return(Gn=(0,m.Z)(function*(y,f){return yield Fe(y)._initializationPromise,kn(y,f,!1)})).apply(this,arguments)}function kn(y,f){return Sa.apply(this,arguments)}function Sa(){return(Sa=(0,m.Z)(function*(y,f,g=!1){const E=Fe(y),x=ts(E,f),z=yield new $n(E,x,g).execute();return z&&!g&&(delete z.user._redirectEventId,yield E._persistUserIfCurrent(z.user),yield E._setRedirectUser(null,f)),z})).apply(this,arguments)}function zo(y){return kr.apply(this,arguments)}function kr(){return(kr=(0,m.Z)(function*(y){const f=wa(`${y.uid}:::`);return y._redirectEventId=f,yield y.auth._setRedirectUser(y),yield y.auth._persistUserIfCurrent(y),f})).apply(this,arguments)}class ki{constructor(f){this.auth=f,this.cachedEventUids=new Set,this.consumers=new Set,this.queuedRedirectEvent=null,this.hasHandledPotentialRedirect=!1,this.lastProcessedEventTime=Date.now()}registerConsumer(f){this.consumers.add(f),this.queuedRedirectEvent&&this.isEventForConsumer(this.queuedRedirectEvent,f)&&(this.sendToConsumer(this.queuedRedirectEvent,f),this.saveEventToCache(this.queuedRedirectEvent),this.queuedRedirectEvent=null)}unregisterConsumer(f){this.consumers.delete(f)}onEvent(f){if(this.hasEventBeenHandled(f))return!1;let g=!1;return this.consumers.forEach(E=>{this.isEventForConsumer(f,E)&&(g=!0,this.sendToConsumer(f,E),this.saveEventToCache(f))}),this.hasHandledPotentialRedirect||!function ac(y){switch(y.type){case"signInViaRedirect":case"linkViaRedirect":case"reauthViaRedirect":return!0;case"unknown":return Td(y);default:return!1}}(f)||(this.hasHandledPotentialRedirect=!0,g||(this.queuedRedirectEvent=f,g=!0)),g}sendToConsumer(f,g){var E;if(f.error&&!Td(f)){const x=(null===(E=f.error.code)||void 0===E?void 0:E.split("auth/")[1])||"internal-error";g.onError(we(this.auth,x))}else g.onAuthEvent(f)}isEventForConsumer(f,g){const E=null===g.eventId||!!f.eventId&&f.eventId===g.eventId;return g.filter.includes(f.type)&&E}hasEventBeenHandled(f){return Date.now()-this.lastProcessedEventTime>=6e5&&this.cachedEventUids.clear(),this.cachedEventUids.has(Ko(f))}saveEventToCache(f){this.cachedEventUids.add(Ko(f)),this.lastProcessedEventTime=Date.now()}}function Ko(y){return[y.type,y.eventId,y.sessionId,y.tenantId].filter(f=>f).join("-")}function Td({type:y,error:f}){return"unknown"===y&&"auth/no-auth-event"===(null==f?void 0:f.code)}function uc(y){return su.apply(this,arguments)}function su(){return(su=(0,m.Z)(function*(y,f={}){return Ht(y,"GET","/v1/projects",f)})).apply(this,arguments)}const Dg=/^\d{1,3}\.\d{1,3}\.\d{1,3}\.\d{1,3}$/,ry=/^https?/;function Rs(){return(Rs=(0,m.Z)(function*(y){if(y.config.emulator)return;const{authorizedDomains:f}=yield uc(y);for(const g of f)try{if(lc(g))return}catch(E){}Te(y,"unauthorized-domain")})).apply(this,arguments)}function lc(y){const f=It(),{protocol:g,hostname:E}=new URL(f);if(y.startsWith("chrome-extension://")){const z=new URL(y);return""===z.hostname&&""===E?"chrome-extension:"===g&&y.replace("chrome-extension://","")===f.replace("chrome-extension://",""):"chrome-extension:"===g&&z.hostname===E}if(!ry.test(g))return!1;if(Dg.test(y))return E===y;const x=y.replace(/\./g,"\\.");return new RegExp("^(.+\\."+x+"|"+x+")$","i").test(E)}const sy=new cn(3e4,6e4);function oy(){const y=mn().___jsl;if(null==y?void 0:y.H)for(const f of Object.keys(y.H))if(y.H[f].r=y.H[f].r||[],y.H[f].L=y.H[f].L||[],y.H[f].r=[...y.H[f].L],y.CP)for(let g=0;g<y.CP.length;g++)y.CP[g]=null}let Sd=null;function ay(y){return Sd=Sd||function Tg(y){return new Promise((f,g)=>{var E,x,P;function z(){oy(),gapi.load("gapi.iframes",{callback:()=>{f(gapi.iframes.getContext())},ontimeout:()=>{oy(),g(we(y,"network-request-failed"))},timeout:sy.get()})}if(null===(x=null===(E=mn().gapi)||void 0===E?void 0:E.iframes)||void 0===x?void 0:x.Iframe)f(gapi.iframes.getContext());else{if(!(null===(P=mn().gapi)||void 0===P?void 0:P.load)){const oe=Ia("iframefcb");return mn()[oe]=()=>{gapi.load?z():g(we(y,"network-request-failed"))},bn(`https://apis.google.com/js/api.js?onload=${oe}`).catch(Be=>g(Be))}z()}}).catch(f=>{throw Sd=null,f})}(y),Sd}const sf=new cn(5e3,15e3),Yo={style:{position:"absolute",top:"-100px",width:"1px",height:"1px"},"aria-hidden":"true",tabindex:"-1"},Ad=new Map([["identitytoolkit.googleapis.com","p"],["staging-identitytoolkit.sandbox.googleapis.com","s"],["test-identitytoolkit.sandbox.googleapis.com","t"]]);function ou(y){const f=y.config;ne(f.authDomain,y,"auth-domain-config-required");const g=f.emulator?dn(f,"emulator/auth/iframe"):`https://${y.config.authDomain}/__/auth/iframe`,E={apiKey:f.apiKey,appName:y.name,v:ae.SDK_VERSION},x=Ad.get(y.config.apiHost);x&&(E.eid=x);const P=y._getFrameworks();return P.length&&(E.fw=P.join(",")),`${g}?${(0,O.xO)(E).slice(1)}`}function Aa(){return Aa=(0,m.Z)(function*(y){const f=yield ay(y),g=mn().gapi;return ne(g,y,"internal-error"),f.open({where:document.body,url:ou(y),messageHandlersFilter:g.iframes.CROSS_ORIGIN_IFRAMES_FILTER,attributes:Yo,dontclear:!0},E=>new Promise(function(){var x=(0,m.Z)(function*(P,z){yield E.restyle({setHideOnLeave:!1});const oe=we(y,"network-request-failed"),Be=mn().setTimeout(()=>{z(oe)},sf.get());function Xe(){mn().clearTimeout(Be),P(E)}E.ping(Xe).then(Xe,()=>{z(oe)})});return function(P,z){return x.apply(this,arguments)}}()))}),Aa.apply(this,arguments)}const ly={location:"yes",resizable:"yes",statusbar:"yes",toolbar:"no"};class Md{constructor(f){this.window=f,this.associatedEvent=null}close(){if(this.window)try{this.window.close()}catch(f){}}}function cf(y,f,g,E,x,P){ne(y.config.authDomain,y,"auth-domain-config-required"),ne(y.config.apiKey,y,"invalid-api-key");const z={apiKey:y.config.apiKey,appName:y.name,authType:g,redirectUrl:E,v:ae.SDK_VERSION,eventId:x};if(f instanceof Js){f.setDefaultLanguage(y.languageCode),z.providerId=f.providerId||"",(0,O.xb)(f.getCustomParameters())||(z.customParameters=JSON.stringify(f.getCustomParameters()));for(const[Be,Xe]of Object.entries(P||{}))z[Be]=Xe}if(f instanceof Wr){const Be=f.getScopes().filter(Xe=>""!==Xe);Be.length>0&&(z.scopes=Be.join(","))}y.tenantId&&(z.tid=y.tenantId);const oe=z;for(const Be of Object.keys(oe))void 0===oe[Be]&&delete oe[Be];return`${function dy({config:y}){return y.emulator?dn(y,"emulator/auth/handler"):`https://${y.authDomain}/__/auth/handler`}(y)}?${(0,O.xO)(oe).slice(1)}`}const po="webStorageSupport";class df extends class Sg{constructor(f){this.factorId=f}_process(f,g,E){switch(g.type){case"enroll":return this._finalizeEnroll(f,g.credential,E);case"signin":return this._finalizeSignIn(f,g.credential);default:return K("unexpected MultiFactorSessionType")}}}{constructor(f){super("phone"),this.credential=f}static _fromCredential(f){return new df(f)}_finalizeEnroll(f,g,E){return function gd(y,f){return Ht(y,"POST","/v2/accounts/mfaEnrollment:finalize",Jt(y,f))}(f,{idToken:g,displayName:E,phoneVerificationInfo:this.credential._makeVerificationRequest()})}_finalizeSignIn(f,g){return function ru(y,f){return Ht(y,"POST","/v2/accounts/mfaSignIn:finalize",Jt(y,f))}(f,{mfaPendingCredential:g,phoneVerificationInfo:this.credential._makeVerificationRequest()})}}let hy=(()=>{class y{constructor(){}static assertion(g){return df._fromCredential(g)}}return y.FACTOR_ID="phone",y})();var fy="@firebase/auth",hf="0.19.11";class Ag{constructor(f){this.auth=f,this.internalListeners=new Map}getUid(){var f;return this.assertAuthConfigured(),(null===(f=this.auth.currentUser)||void 0===f?void 0:f.uid)||null}getToken(f){var g=this;return(0,m.Z)(function*(){return g.assertAuthConfigured(),yield g.auth._initializationPromise,g.auth.currentUser?{accessToken:yield g.auth.currentUser.getIdToken(f)}:null})()}addAuthTokenListener(f){if(this.assertAuthConfigured(),this.internalListeners.has(f))return;const g=this.auth.onIdTokenChanged(E=>{var x;f((null===(x=E)||void 0===x?void 0:x.stsTokenManager.accessToken)||null)});this.internalListeners.set(f,g),this.updateProactiveRefresh()}removeAuthTokenListener(f){this.assertAuthConfigured();const g=this.internalListeners.get(f);!g||(this.internalListeners.delete(f),g(),this.updateProactiveRefresh())}assertAuthConfigured(){ne(this.auth._initializationPromise,"dependent-sdk-initialized-before-auth")}updateProactiveRefresh(){this.internalListeners.size>0?this.auth._startProactiveRefresh():this.auth._stopProactiveRefresh()}}function go(){return window}function Ju(){return(Ju=(0,m.Z)(function*(y,f,g){var E;const{BuildInfo:x}=go();re(f.sessionId,"AuthEvent did not contain a session ID");const P=yield au(f.sessionId),z={};return ir()?z.ibi=x.packageName:xn()?z.apn=x.packageName:Te(y,"operation-not-supported-in-this-environment"),x.displayName&&(z.appDisplayName=x.displayName),z.sessionId=P,cf(y,g,f.type,void 0,null!==(E=f.eventId)&&void 0!==E?E:void 0,z)})).apply(this,arguments)}function Oi(){return(Oi=(0,m.Z)(function*(y){const{BuildInfo:f}=go(),g={};ir()?g.iosBundleId=f.packageName:xn()?g.androidPackageName=f.packageName:Te(y,"operation-not-supported-in-this-environment"),yield uc(y,g)})).apply(this,arguments)}function Pd(){return(Pd=(0,m.Z)(function*(y,f,g){const{cordova:E}=go();let x=()=>{};try{yield new Promise((P,z)=>{let oe=null;function Be(){var ut;P();const On=null===(ut=E.plugins.browsertab)||void 0===ut?void 0:ut.close;"function"==typeof On&&On(),"function"==typeof(null==g?void 0:g.close)&&g.close()}function Xe(){oe||(oe=window.setTimeout(()=>{z(we(y,"redirect-cancelled-by-user"))},2e3))}function vt(){"visible"===(null==document?void 0:document.visibilityState)&&Xe()}f.addPassiveListener(Be),document.addEventListener("resume",Xe,!1),xn()&&document.addEventListener("visibilitychange",vt,!1),x=()=>{f.removePassiveListener(Be),document.removeEventListener("resume",Xe,!1),document.removeEventListener("visibilitychange",vt,!1),oe&&window.clearTimeout(oe)}})}finally{x()}})).apply(this,arguments)}function au(y){return Rg.apply(this,arguments)}function Rg(){return(Rg=(0,m.Z)(function*(y){const f=Xu(y),g=yield crypto.subtle.digest("SHA-256",f);return Array.from(new Uint8Array(g)).map(x=>x.toString(16).padStart(2,"0")).join("")})).apply(this,arguments)}function Xu(y){if(re(/[0-9a-zA-Z]+/.test(y),"Can only convert alpha-numeric strings"),"undefined"!=typeof TextEncoder)return(new TextEncoder).encode(y);const f=new ArrayBuffer(y.length),g=new Uint8Array(f);for(let E=0;E<y.length;E++)g[E]=y.charCodeAt(E);return g}!function gy(y){(0,ae._registerComponent)(new se.wA("auth",(f,{options:g})=>{const E=f.getProvider("app").getImmediate(),x=f.getProvider("heartbeat"),{apiKey:P,authDomain:z}=E.options;return((oe,Be)=>{ne(P&&!P.includes(":"),"invalid-api-key",{appName:oe.name}),ne(!(null==z?void 0:z.includes(":")),"argument-error",{appName:oe.name});const Xe={apiKey:P,authDomain:z,clientPlatform:y,apiHost:"identitytoolkit.googleapis.com",tokenApiHost:"securetoken.googleapis.com",apiScheme:"https",sdkClientVersion:za(y)},vt=new ii(oe,Be,Xe);return function ue(y,f){const g=(null==f?void 0:f.persistence)||[],E=(Array.isArray(g)?g:[g]).map(ie);(null==f?void 0:f.errorMap)&&y._updateErrorMap(f.errorMap),y._initializeWithPersistence(E,null==f?void 0:f.popupRedirectResolver)}(vt,g),vt})(E,x)},"PUBLIC").setInstantiationMode("EXPLICIT").setInstanceCreatedCallback((f,g,E)=>{f.getProvider("auth-internal").initialize()})),(0,ae._registerComponent)(new se.wA("auth-internal",f=>{const g=Fe(f.getProvider("auth").getImmediate());return new Ag(g)},"PRIVATE").setInstantiationMode("EXPLICIT")),(0,ae.registerVersion)(fy,hf,function py(y){switch(y){case"Node":return"node";case"ReactNative":return"rn";case"Worker":return"webworker";case"Cordova":return"cordova";default:return}}(y)),(0,ae.registerVersion)(fy,hf,"esm2017")}("Browser");class mf extends ki{constructor(){super(...arguments),this.passiveListeners=new Set,this.initPromise=new Promise(f=>{this.resolveInialized=f})}addPassiveListener(f){this.passiveListeners.add(f)}removePassiveListener(f){this.passiveListeners.delete(f)}resetRedirect(){this.queuedRedirectEvent=null,this.hasHandledPotentialRedirect=!1}onEvent(f){return this.resolveInialized(),this.passiveListeners.forEach(g=>g(f)),super.onEvent(f)}initialized(){var f=this;return(0,m.Z)(function*(){yield f.initPromise})()}}function hc(y){return Ra.apply(this,arguments)}function Ra(){return(Ra=(0,m.Z)(function*(y){const f=yield pc()._get(yf(y));return f&&(yield pc()._remove(yf(y))),f})).apply(this,arguments)}function fc(){const y=[],f="1234567890abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ";for(let g=0;g<20;g++){const E=Math.floor(Math.random()*f.length);y.push(f.charAt(E))}return y.join("")}function pc(){return ie(Mn)}function yf(y){return ce("authEvent",y.config.apiKey,y.name)}function Od(y){if(!(null==y?void 0:y.includes("?")))return{};const[f,...g]=y.split("?");return(0,O.zd)(g.join("?"))}function Cf(){return{type:"unknown",eventId:null,sessionId:null,urlResponse:null,postBody:null,tenantId:null,error:we("no-auth-event")}}function Fd(){var y;return(null===(y=null==self?void 0:self.location)||void 0===y?void 0:y.protocol)||null}function Ng(y=(0,O.z$)()){return!("file:"!==Fd()&&"ionic:"!==Fd()||!y.toLowerCase().match(/iphone|ipad|ipod|android/))}function Sr(){try{const y=self.localStorage,f=wa();if(y)return y.setItem(f,"1"),y.removeItem(f),!function Ma(y=(0,O.z$)()){return function wy(){return(0,O.w1)()&&11===(null==document?void 0:document.documentMode)}()||function Ey(y=(0,O.z$)()){return/Edge\/\d+/.test(y)}(y)}()||(0,O.hl)()}catch(y){return Qo()&&(0,O.hl)()}return!1}function Qo(){return"undefined"!=typeof global&&"WorkerGlobalScope"in global&&"importScripts"in global}function _c(){return(function vy(){return"http:"===Fd()||"https:"===Fd()}()||(0,O.ru)()||Ng())&&!function Ld(){return(0,O.b$)()||(0,O.UG)()}()&&Sr()&&!Qo()}function If(){return Ng()&&"undefined"!=typeof document}function uu(){return(uu=(0,m.Z)(function*(){return!!If()&&new Promise(y=>{const f=setTimeout(()=>{y(!1)},1e3);document.addEventListener("deviceready",()=>{clearTimeout(f),y(!0)})})})).apply(this,arguments)}const Fi={LOCAL:"local",NONE:"none",SESSION:"session"},lu=ne,Df="persistence";function cu(y){return Tf.apply(this,arguments)}function Tf(){return(Tf=(0,m.Z)(function*(y){yield y._initializationPromise;const f=yc(),g=ce(Df,y.config.apiKey,y.name);f&&f.setItem(g,y._getPersistence())})).apply(this,arguments)}function yc(){var y;try{return(null===(y=function bf(){return"undefined"!=typeof window?window:null}())||void 0===y?void 0:y.sessionStorage)||null}catch(f){return null}}const Cy=ne;class fi{constructor(){this.browserResolver=ie(class xa{constructor(){this.eventManagers={},this.iframes={},this.originValidationPromises={},this._redirectPersistence=pr,this._completeRedirectFn=kn}_openPopup(f,g,E,x){var P=this;return(0,m.Z)(function*(){var z;re(null===(z=P.eventManagers[f._key()])||void 0===z?void 0:z.manager,"_initialize() not called before _openPopup()");const oe=cf(f,g,E,It(),x);return function Nd(y,f,g,E=500,x=600){const P=Math.max((window.screen.availHeight-x)/2,0).toString(),z=Math.max((window.screen.availWidth-E)/2,0).toString();let oe="";const Be=Object.assign(Object.assign({},ly),{width:E.toString(),height:x.toString(),top:P,left:z}),Xe=(0,O.z$)().toLowerCase();g&&(oe=Cr(Xe)?"_blank":g),_t(Xe)&&(f=f||"http://localhost",Be.scrollbars="yes");const vt=Object.entries(Be).reduce((On,[ss,wc])=>`${On}${ss}=${wc},`,"");if(function bu(y=(0,O.z$)()){var f;return ir(y)&&!!(null===(f=window.navigator)||void 0===f?void 0:f.standalone)}(Xe)&&"_self"!==oe)return function lf(y,f){const g=document.createElement("a");g.href=y,g.target=f;const E=document.createEvent("MouseEvent");E.initMouseEvent("click",!0,!0,window,1,0,0,0,0,!1,!1,!1,!1,1,null),g.dispatchEvent(E)}(f||"",oe),new Md(null);const ut=window.open(f||"",oe,vt);ne(ut,y,"popup-blocked");try{ut.focus()}catch(On){}return new Md(ut)}(f,oe,wa())})()}_openRedirect(f,g,E,x){var P=this;return(0,m.Z)(function*(){return yield P._originValidation(f),function rf(y){mn().location.href=y}(cf(f,g,E,It(),x)),new Promise(()=>{})})()}_initialize(f){const g=f._key();if(this.eventManagers[g]){const{manager:x,promise:P}=this.eventManagers[g];return x?Promise.resolve(x):(re(P,"If manager is not set, promise should be"),P)}const E=this.initAndGetManager(f);return this.eventManagers[g]={promise:E},E.catch(()=>{delete this.eventManagers[g]}),E}initAndGetManager(f){var g=this;return(0,m.Z)(function*(){const E=yield function uy(y){return Aa.apply(this,arguments)}(f),x=new ki(f);return E.register("authEvent",P=>(ne(null==P?void 0:P.authEvent,f,"invalid-auth-event"),{status:x.onEvent(P.authEvent)?"ACK":"ERROR"}),gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER),g.eventManagers[f._key()]={manager:x},g.iframes[f._key()]=E,x})()}_isIframeWebStorageSupported(f,g){this.iframes[f._key()].send(po,{type:po},x=>{var P;const z=null===(P=null==x?void 0:x[0])||void 0===P?void 0:P[po];void 0!==z&&g(!!z),Te(f,"internal-error")},gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER)}_originValidation(f){const g=f._key();return this.originValidationPromises[g]||(this.originValidationPromises[g]=function iy(y){return Rs.apply(this,arguments)}(f)),this.originValidationPromises[g]}get _shouldInitProactively(){return ys()||Zt()||ir()}}),this.cordovaResolver=ie(class Ef{constructor(){this._redirectPersistence=pr,this._shouldInitProactively=!0,this.eventManagers=new Map,this.originValidationPromises={},this._completeRedirectFn=kn}_initialize(f){var g=this;return(0,m.Z)(function*(){const E=f._key();let x=g.eventManagers.get(E);return x||(x=new mf(f),g.eventManagers.set(E,x),g.attachCallbackListeners(f,x)),x})()}_openPopup(f){Te(f,"operation-not-supported-in-this-environment")}_openRedirect(f,g,E,x){var P=this;return(0,m.Z)(function*(){!function kd(y){var f,g,E,x,P,z,oe,Be,Xe,vt;const ut=go();ne("function"==typeof(null===(f=null==ut?void 0:ut.universalLinks)||void 0===f?void 0:f.subscribe),y,"invalid-cordova-configuration",{missingPlugin:"cordova-universal-links-plugin-fix"}),ne(void 0!==(null===(g=null==ut?void 0:ut.BuildInfo)||void 0===g?void 0:g.packageName),y,"invalid-cordova-configuration",{missingPlugin:"cordova-plugin-buildInfo"}),ne("function"==typeof(null===(P=null===(x=null===(E=null==ut?void 0:ut.cordova)||void 0===E?void 0:E.plugins)||void 0===x?void 0:x.browsertab)||void 0===P?void 0:P.openUrl),y,"invalid-cordova-configuration",{missingPlugin:"cordova-plugin-browsertab"}),ne("function"==typeof(null===(Be=null===(oe=null===(z=null==ut?void 0:ut.cordova)||void 0===z?void 0:z.plugins)||void 0===oe?void 0:oe.browsertab)||void 0===Be?void 0:Be.isAvailable),y,"invalid-cordova-configuration",{missingPlugin:"cordova-plugin-browsertab"}),ne("function"==typeof(null===(vt=null===(Xe=null==ut?void 0:ut.cordova)||void 0===Xe?void 0:Xe.InAppBrowser)||void 0===vt?void 0:vt.open),y,"invalid-cordova-configuration",{missingPlugin:"cordova-plugin-inappbrowser"})}(f);const z=yield P._initialize(f);yield z.initialized(),z.resetRedirect(),function Zu(){is.clear()}(),yield P._originValidation(f);const oe=function _f(y,f,g=null){return{type:f,eventId:g,urlResponse:null,sessionId:fc(),postBody:null,tenantId:y.tenantId,error:we(y,"no-auth-event")}}(f,E,x);yield function OE(y,f){return pc()._set(yf(y),f)}(f,oe);const Be=yield function ff(y,f,g){return Ju.apply(this,arguments)}(f,oe,g),Xe=yield function dc(y){const{cordova:f}=go();return new Promise(g=>{f.plugins.browsertab.isAvailable(E=>{let x=null;E?f.plugins.browsertab.openUrl(y):x=f.InAppBrowser.open(y,function No(y=(0,O.z$)()){return/(iPad|iPhone|iPod).*OS 7_\d/i.test(y)||/(iPad|iPhone|iPod).*OS 8_\d/i.test(y)}()?"_blank":"_system","location=yes"),g(x)})})}(Be);return function xg(y,f,g){return Pd.apply(this,arguments)}(f,z,Xe)})()}_isIframeWebStorageSupported(f,g){throw new Error("Method not implemented.")}_originValidation(f){const g=f._key();return this.originValidationPromises[g]||(this.originValidationPromises[g]=function pf(y){return Oi.apply(this,arguments)}(f)),this.originValidationPromises[g]}attachCallbackListeners(f,g){const{universalLinks:E,handleOpenURL:x,BuildInfo:P}=go(),z=setTimeout((0,m.Z)(function*(){yield hc(f),g.onEvent(Cf())}),500),oe=function(){var vt=(0,m.Z)(function*(ut){clearTimeout(z);const On=yield hc(f);let ss=null;On&&(null==ut?void 0:ut.url)&&(ss=function _y(y,f){var g,E;const x=function gc(y){const f=Od(y),g=f.link?decodeURIComponent(f.link):void 0,E=Od(g).link,x=f.deep_link_id?decodeURIComponent(f.deep_link_id):void 0;return Od(x).link||x||E||g||y}(f);if(x.includes("/__/auth/callback")){const P=Od(x),z=P.firebaseError?function vf(y){try{return JSON.parse(y)}catch(f){return null}}(decodeURIComponent(P.firebaseError)):null,oe=null===(E=null===(g=null==z?void 0:z.code)||void 0===g?void 0:g.split("auth/"))||void 0===E?void 0:E[1],Be=oe?we(oe):null;return Be?{type:y.type,eventId:y.eventId,tenantId:y.tenantId,error:Be,urlResponse:null,sessionId:null,postBody:null}:{type:y.type,eventId:y.eventId,tenantId:y.tenantId,sessionId:y.sessionId,urlResponse:x,postBody:null}}return null}(On,ut.url)),g.onEvent(ss||Cf())});return function(On){return vt.apply(this,arguments)}}();void 0!==E&&"function"==typeof E.subscribe&&E.subscribe(null,oe);const Be=x,Xe=`${P.packageName.toLowerCase()}://`;go().handleOpenURL=function(){var vt=(0,m.Z)(function*(ut){if(ut.toLowerCase().startsWith(Xe)&&oe({url:ut}),"function"==typeof Be)try{Be(ut)}catch(On){console.error(On)}});return function(ut){return vt.apply(this,arguments)}}()}}),this.underlyingResolver=null,this._redirectPersistence=pr,this._completeRedirectFn=kn}_initialize(f){var g=this;return(0,m.Z)(function*(){return yield g.selectUnderlyingResolver(),g.assertedUnderlyingResolver._initialize(f)})()}_openPopup(f,g,E,x){var P=this;return(0,m.Z)(function*(){return yield P.selectUnderlyingResolver(),P.assertedUnderlyingResolver._openPopup(f,g,E,x)})()}_openRedirect(f,g,E,x){var P=this;return(0,m.Z)(function*(){return yield P.selectUnderlyingResolver(),P.assertedUnderlyingResolver._openRedirect(f,g,E,x)})()}_isIframeWebStorageSupported(f,g){this.assertedUnderlyingResolver._isIframeWebStorageSupported(f,g)}_originValidation(f){return this.assertedUnderlyingResolver._originValidation(f)}get _shouldInitProactively(){return If()||this.browserResolver._shouldInitProactively}get assertedUnderlyingResolver(){return Cy(this.underlyingResolver,"internal-error"),this.underlyingResolver}selectUnderlyingResolver(){var f=this;return(0,m.Z)(function*(){if(f.underlyingResolver)return;const g=yield function Or(){return uu.apply(this,arguments)}();f.underlyingResolver=g?f.cordovaResolver:f.browserResolver})()}}function Og(y){return y.unwrap()}function du(y){return Fg(y)}function Fg(y){const{_tokenResponse:f}=y instanceof O.ZR?y.customData:y;if(!f)return null;if(!(y instanceof O.ZR)&&"temporaryProof"in f&&"phoneNumber"in f)return Pi.credentialFromResult(y);const g=f.providerId;if(!g||"password"===g)return null;let E;switch(g){case"google.com":E=Za;break;case"facebook.com":E=Fo;break;case"github.com":E=od;break;case"twitter.com":E=Ru;break;default:const{oauthIdToken:x,oauthAccessToken:P,oauthTokenSecret:z,pendingToken:oe,nonce:Be}=f;return P||z||x||oe?oe?g.startsWith("saml.")?ga._create(g,oe):Es._fromParams({providerId:g,signInMethod:g,pendingToken:oe,idToken:x,accessToken:P}):new pa(g).credential({idToken:x,accessToken:P,rawNonce:Be}):null}return y instanceof O.ZR?E.credentialFromError(y):E.credentialFromResult(y)}function Ar(y,f){return f.catch(g=>{throw g instanceof O.ZR&&function by(y,f){var g;const E=null===(g=f.customData)||void 0===g?void 0:g._tokenResponse;if("auth/multi-factor-auth-required"===f.code)f.resolver=new Dy(y,function Gu(y,f){var g;const E=(0,O.m9)(y),x=f;return ne(f.customData.operationType,E,"argument-error"),ne(null===(g=x.customData._serverResponse)||void 0===g?void 0:g.mfaPendingCredential,E,"argument-error"),tu._fromError(E,x)}(y,f));else if(E){const x=Fg(f),P=f;x&&(P.credential=x,P.tenantId=E.tenantId||void 0,P.email=E.email||void 0,P.phoneNumber=E.phoneNumber||void 0)}}(y,g),g}).then(g=>{const x=g.user;return{operationType:g.operationType,credential:du(g),additionalUserInfo:Tr(g),user:Jo.getOrCreate(x)}})}function Sf(y,f){return Af.apply(this,arguments)}function Af(){return(Af=(0,m.Z)(function*(y,f){const g=yield f;return{verificationId:g.verificationId,confirm:E=>Ar(y,g.confirm(E))}})).apply(this,arguments)}class Dy{constructor(f,g){this.resolver=g,this.auth=function Iy(y){return y.wrapped()}(f)}get session(){return this.resolver.session}get hints(){return this.resolver.hints}resolveSignIn(f){return Ar(Og(this.auth),this.resolver.resolveSignIn(f))}}class Jo{constructor(f){this._delegate=f,this.multiFactor=function md(y){const f=(0,O.m9)(y);return va.has(f)||va.set(f,Ds._fromUser(f)),va.get(f)}(f)}static getOrCreate(f){return Jo.USER_MAP.has(f)||Jo.USER_MAP.set(f,new Jo(f)),Jo.USER_MAP.get(f)}delete(){return this._delegate.delete()}reload(){return this._delegate.reload()}toJSON(){return this._delegate.toJSON()}getIdTokenResult(f){return this._delegate.getIdTokenResult(f)}getIdToken(f){return this._delegate.getIdToken(f)}linkAndRetrieveDataWithCredential(f){return this.linkWithCredential(f)}linkWithCredential(f){var g=this;return(0,m.Z)(function*(){return Ar(g.auth,Si(g._delegate,f))})()}linkWithPhoneNumber(f,g){var E=this;return(0,m.Z)(function*(){return Sf(E.auth,function Xl(y,f,g){return Da.apply(this,arguments)}(E._delegate,f,g))})()}linkWithPopup(f){var g=this;return(0,m.Z)(function*(){return Ar(g.auth,function ns(y,f,g){return Ku.apply(this,arguments)}(g._delegate,f,fi))})()}linkWithRedirect(f){var g=this;return(0,m.Z)(function*(){return yield cu(Fe(g.auth)),function Ye(y,f,g){return function Ct(y,f,g){return Mt.apply(this,arguments)}(y,f,g)}(g._delegate,f,fi)})()}reauthenticateAndRetrieveDataWithCredential(f){return this.reauthenticateWithCredential(f)}reauthenticateWithCredential(f){var g=this;return(0,m.Z)(function*(){return Ar(g.auth,to(g._delegate,f))})()}reauthenticateWithPhoneNumber(f,g){return Sf(this.auth,function bg(y,f,g){return ec.apply(this,arguments)}(this._delegate,f,g))}reauthenticateWithPopup(f){return Ar(this.auth,function Wo(y,f,g){return zu.apply(this,arguments)}(this._delegate,f,fi))}reauthenticateWithRedirect(f){var g=this;return(0,m.Z)(function*(){return yield cu(Fe(g.auth)),function te(y,f,g){return function xe(y,f,g){return Re.apply(this,arguments)}(y,f,g)}(g._delegate,f,fi)})()}sendEmailVerification(f){return function Ai(y,f){return jl.apply(this,arguments)}(this._delegate,f)}unlink(f){var g=this;return(0,m.Z)(function*(){return yield function Ya(y,f){return kl.apply(this,arguments)}(g._delegate,f),g})()}updateEmail(f){return function Gl(y,f){return Wl((0,O.m9)(y),f,null)}(this._delegate,f)}updatePassword(f){return function cd(y,f){return Wl((0,O.m9)(y),null,f)}(this._delegate,f)}updatePhoneNumber(f){return function tc(y,f){return xs.apply(this,arguments)}(this._delegate,f)}updateProfile(f){return function eu(y,f){return $l.apply(this,arguments)}(this._delegate,f)}verifyBeforeUpdateEmail(f,g){return function Hu(y,f,g){return $u.apply(this,arguments)}(this._delegate,f,g)}get emailVerified(){return this._delegate.emailVerified}get isAnonymous(){return this._delegate.isAnonymous}get metadata(){return this._delegate.metadata}get phoneNumber(){return this._delegate.phoneNumber}get providerData(){return this._delegate.providerData}get refreshToken(){return this._delegate.refreshToken}get tenantId(){return this._delegate.tenantId}get displayName(){return this._delegate.displayName}get email(){return this._delegate.email}get photoURL(){return this._delegate.photoURL}get providerId(){return this._delegate.providerId}get uid(){return this._delegate.uid}get auth(){return this._delegate.auth}}Jo.USER_MAP=new WeakMap;const vc=ne;let xf=(()=>{class y{constructor(g,E){if(this.app=g,E.isInitialized())return this._delegate=E.getImmediate(),void this.linkUnderlyingAuth();const{apiKey:x}=g.options;vc(x,"invalid-api-key",{appName:g.name}),vc(x,"invalid-api-key",{appName:g.name});const P="undefined"!=typeof window?fi:void 0;this._delegate=E.initialize({options:{persistence:Ty(x,g.name),popupRedirectResolver:P}}),this._delegate._updateErrorMap(Oe),this.linkUnderlyingAuth()}get emulatorConfig(){return this._delegate.emulatorConfig}get currentUser(){return this._delegate.currentUser?Jo.getOrCreate(this._delegate.currentUser):null}get languageCode(){return this._delegate.languageCode}set languageCode(g){this._delegate.languageCode=g}get settings(){return this._delegate.settings}get tenantId(){return this._delegate.tenantId}set tenantId(g){this._delegate.tenantId=g}useDeviceLanguage(){this._delegate.useDeviceLanguage()}signOut(){return this._delegate.signOut()}useEmulator(g,E){!function pn(y,f,g){const E=Fe(y);ne(E._canInitEmulator,E,"emulator-config-failed"),ne(/^https?:\/\//.test(f),E,"invalid-emulator-scheme");const x=!!(null==g?void 0:g.disableWarnings),P=dr(f),{host:z,port:oe}=function zs(y){const f=dr(y),g=/(\/\/)?([^?#/]+)/.exec(y.substr(f.length));if(!g)return{host:"",port:null};const E=g[2].split("@").pop()||"",x=/^(\[[^\]]+\])(:|$)/.exec(E);if(x){const P=x[1];return{host:P,port:Bn(E.substr(P.length+1))}}{const[P,z]=E.split(":");return{host:P,port:Bn(z)}}}(f);E.config.emulator={url:`${P}//${z}${null===oe?"":`:${oe}`}/`},E.settings.appVerificationDisabledForTesting=!0,E.emulatorConfig=Object.freeze({host:z,port:oe,protocol:P.replace(":",""),options:Object.freeze({disableWarnings:x})}),x||function Yi(){function y(){const f=document.createElement("p"),g=f.style;f.innerText="Running in emulator mode. Do not use with production credentials.",g.position="fixed",g.width="100%",g.backgroundColor="#ffffff",g.border=".1em solid #000000",g.color="#b50000",g.bottom="0px",g.left="0px",g.margin="0px",g.zIndex="10000",g.textAlign="center",f.classList.add("firebase-emulator-warning"),document.body.appendChild(f)}"undefined"!=typeof console&&"function"==typeof console.info&&console.info("WARNING: You are using the Auth Emulator, which is intended for local testing only.  Do not use with production credentials."),"undefined"!=typeof window&&"undefined"!=typeof document&&("loading"===document.readyState?window.addEventListener("DOMContentLoaded",y):y())}()}(this._delegate,g,E)}applyActionCode(g){return function Fl(y,f){return Ie.apply(this,arguments)}(this._delegate,g)}checkActionCode(g){return Vt(this._delegate,g)}confirmPasswordReset(g,E){return function Uu(y,f,g){return Ol.apply(this,arguments)}(this._delegate,g,E)}createUserWithEmailAndPassword(g,E){var x=this;return(0,m.Z)(function*(){return Ar(x._delegate,function ya(y,f,g){return Kr.apply(this,arguments)}(x._delegate,g,E))})()}fetchProvidersForEmail(g){return this.fetchSignInMethodsForEmail(g)}fetchSignInMethodsForEmail(g){return function ju(y,f){return so.apply(this,arguments)}(this._delegate,g)}isSignInWithEmailLink(g){return function Bl(y,f){const g=Oo.parseLink(f);return"EMAIL_SIGNIN"===(null==g?void 0:g.operation)}(0,g)}getRedirectResult(){var g=this;return(0,m.Z)(function*(){vc(_c(),g._delegate,"operation-not-supported-in-this-environment");const E=yield function bt(y,f){return Gn.apply(this,arguments)}(g._delegate,fi);return E?Ar(g._delegate,Promise.resolve(E)):{credential:null,user:null}})()}addFrameworkForLogging(g){!function Mg(y,f){Fe(y)._logFramework(f)}(this._delegate,g)}onAuthStateChanged(g,E,x){const{next:P,error:z,complete:oe}=Rf(g,E,x);return this._delegate.onAuthStateChanged(P,z,oe)}onIdTokenChanged(g,E,x){const{next:P,error:z,complete:oe}=Rf(g,E,x);return this._delegate.onIdTokenChanged(P,z,oe)}sendSignInLinkToEmail(g,E){return function Ul(y,f,g){return ld.apply(this,arguments)}(this._delegate,g,E)}sendPasswordResetEmail(g,E){return function Lu(y,f,g){return Vu.apply(this,arguments)}(this._delegate,g,E||void 0)}setPersistence(g){var E=this;return(0,m.Z)(function*(){let x;switch(function Pg(y,f){lu(Object.values(Fi).includes(f),y,"invalid-persistence-type"),(0,O.b$)()?lu(f!==Fi.SESSION,y,"unsupported-persistence-type"):(0,O.UG)()?lu(f===Fi.NONE,y,"unsupported-persistence-type"):Qo()?lu(f===Fi.NONE||f===Fi.LOCAL&&(0,O.hl)(),y,"unsupported-persistence-type"):lu(f===Fi.NONE||Sr(),y,"unsupported-persistence-type")}(E._delegate,g),g){case Fi.SESSION:x=pr;break;case Fi.LOCAL:x=(yield ie(Ri)._isAvailable())?Ri:Mn;break;case Fi.NONE:x=q;break;default:return Te("argument-error",{appName:E._delegate.name})}return E._delegate.setPersistence(x)})()}signInAndRetrieveDataWithCredential(g){return this.signInWithCredential(g)}signInAnonymously(){return Ar(this._delegate,function Nu(y){return ad.apply(this,arguments)}(this._delegate))}signInWithCredential(g){return Ar(this._delegate,Vn(this._delegate,g))}signInWithCustomToken(g){return Ar(this._delegate,function no(y,f){return ro.apply(this,arguments)}(this._delegate,g))}signInWithEmailAndPassword(g,E){return Ar(this._delegate,function Vl(y,f,g){return Vn((0,O.m9)(y),Pl.credential(f,g))}(this._delegate,g,E))}signInWithEmailLink(g,E){return Ar(this._delegate,function Bu(y,f,g){return io.apply(this,arguments)}(this._delegate,g,E))}signInWithPhoneNumber(g,E){return Sf(this._delegate,function qu(y,f,g){return Sn.apply(this,arguments)}(this._delegate,g,E))}signInWithPopup(g){var E=this;return(0,m.Z)(function*(){return vc(_c(),E._delegate,"operation-not-supported-in-this-environment"),Ar(E._delegate,function fo(y,f,g){return bd.apply(this,arguments)}(E._delegate,g,fi))})()}signInWithRedirect(g){var E=this;return(0,m.Z)(function*(){return vc(_c(),E._delegate,"operation-not-supported-in-this-environment"),yield cu(E._delegate),function M(y,f,g){return function U(y,f,g){return Z.apply(this,arguments)}(y,f,g)}(E._delegate,g,fi)})()}updateCurrentUser(g){return this._delegate.updateCurrentUser(g)}verifyPasswordResetCode(g){return function Cn(y,f){return _a.apply(this,arguments)}(this._delegate,g)}unwrap(){return this._delegate}_delete(){return this._delegate._delete()}linkUnderlyingAuth(){this._delegate.wrapped=()=>this}}return y.Persistence=Fi,y})();function Rf(y,f,g){let E=y;"function"!=typeof y&&({next:E,error:f,complete:g}=y);const x=E;return{next:z=>x(z&&Jo.getOrCreate(z)),error:f,complete:g}}function Ty(y,f){const g=function kg(y,f){const g=yc();if(!g)return[];const E=ce(Df,y,f);switch(g.getItem(E)){case Fi.NONE:return[q];case Fi.LOCAL:return[Ri,pr];case Fi.SESSION:return[pr];default:return[]}}(y,f);if("undefined"!=typeof self&&!g.includes(Ri)&&g.push(Ri),"undefined"!=typeof window)for(const E of[Mn,pr])g.includes(E)||g.push(E);return g.includes(q)||g.push(q),g}class Mf{constructor(){this.providerId="phone",this._delegate=new Pi(Og(Q.Z.auth()))}static credential(f,g){return Pi.credential(f,g)}verifyPhoneNumber(f,g){return this._delegate.verifyPhoneNumber(f,g)}unwrap(){return this._delegate}}Mf.PHONE_SIGN_IN_METHOD=Pi.PHONE_SIGN_IN_METHOD,Mf.PROVIDER_ID=Pi.PROVIDER_ID;const Sy=ne;class Ay{constructor(f,g,E=Q.Z.app()){var x;Sy(null===(x=E.options)||void 0===x?void 0:x.apiKey,"invalid-api-key",{appName:E.name}),this._delegate=new Ig(f,g,E.auth()),this.type=this._delegate.type}clear(){this._delegate.clear()}render(){return this._delegate.render()}verify(){return this._delegate.verify()}}!function Lg(y){y.INTERNAL.registerComponent(new se.wA("auth-compat",f=>{const g=f.getProvider("app-compat").getImmediate(),E=f.getProvider("auth");return new xf(g,E)},"PUBLIC").setServiceProps({ActionCodeInfo:{Operation:{EMAIL_SIGNIN:"EMAIL_SIGNIN",PASSWORD_RESET:"PASSWORD_RESET",RECOVER_EMAIL:"RECOVER_EMAIL",REVERT_SECOND_FACTOR_ADDITION:"REVERT_SECOND_FACTOR_ADDITION",VERIFY_AND_CHANGE_EMAIL:"VERIFY_AND_CHANGE_EMAIL",VERIFY_EMAIL:"VERIFY_EMAIL"}},EmailAuthProvider:Pl,FacebookAuthProvider:Fo,GithubAuthProvider:od,GoogleAuthProvider:Za,OAuthProvider:pa,SAMLAuthProvider:ai,PhoneAuthProvider:Mf,PhoneMultiFactorGenerator:hy,RecaptchaVerifier:Ay,TwitterAuthProvider:Ru,Auth:xf,AuthCredential:rn,Error:O.ZR}).setInstantiationMode("LAZY").setMultipleInstances(!1)),y.registerVersion("@firebase/auth-compat","0.2.11")}(Q.Z)},8306:(ot,De,F)=>{F.d(De,{y:()=>W});var m=F(930),Q=F(727),O=F(8822),ae=F(4671);var se=F(2416),he=F(576),le=F(2806);let W=(()=>{class Ae{constructor(Ve){Ve&&(this._subscribe=Ve)}lift(Ve){const pe=new Ae;return pe.source=this,pe.operator=Ve,pe}subscribe(Ve,pe,Ce){const nt=function qe(Ae){return Ae&&Ae instanceof m.Lv||function X(Ae){return Ae&&(0,he.m)(Ae.next)&&(0,he.m)(Ae.error)&&(0,he.m)(Ae.complete)}(Ae)&&(0,Q.Nn)(Ae)}(Ve)?Ve:new m.Hp(Ve,pe,Ce);return(0,le.x)(()=>{const{operator:Ke,source:Te}=this;nt.add(Ke?Ke.call(nt,Te):Te?this._subscribe(nt):this._trySubscribe(nt))}),nt}_trySubscribe(Ve){try{return this._subscribe(Ve)}catch(pe){Ve.error(pe)}}forEach(Ve,pe){return new(pe=G(pe))((Ce,nt)=>{const Ke=new m.Hp({next:Te=>{try{Ve(Te)}catch(we){nt(we),Ke.unsubscribe()}},error:nt,complete:Ce});this.subscribe(Ke)})}_subscribe(Ve){var pe;return null===(pe=this.source)||void 0===pe?void 0:pe.subscribe(Ve)}[O.L](){return this}pipe(...Ve){return function me(Ae){return 0===Ae.length?ae.y:1===Ae.length?Ae[0]:function(Ve){return Ae.reduce((pe,Ce)=>Ce(pe),Ve)}}(Ve)(this)}toPromise(Ve){return new(Ve=G(Ve))((pe,Ce)=>{let nt;this.subscribe(Ke=>nt=Ke,Ke=>Ce(Ke),()=>pe(nt))})}}return Ae.create=Oe=>new Ae(Oe),Ae})();function G(Ae){var Oe;return null!==(Oe=null!=Ae?Ae:se.v.Promise)&&void 0!==Oe?Oe:Promise}},7579:(ot,De,F)=>{F.d(De,{x:()=>se});var m=F(8306),Q=F(727);const ae=(0,F(3888).d)(le=>function(){le(this),this.name="ObjectUnsubscribedError",this.message="object unsubscribed"});var ee=F(8737),me=F(2806);let se=(()=>{class le extends m.y{constructor(){super(),this.closed=!1,this.currentObservers=null,this.observers=[],this.isStopped=!1,this.hasError=!1,this.thrownError=null}lift(G){const X=new he(this,this);return X.operator=G,X}_throwIfClosed(){if(this.closed)throw new ae}next(G){(0,me.x)(()=>{if(this._throwIfClosed(),!this.isStopped){this.currentObservers||(this.currentObservers=Array.from(this.observers));for(const X of this.currentObservers)X.next(G)}})}error(G){(0,me.x)(()=>{if(this._throwIfClosed(),!this.isStopped){this.hasError=this.isStopped=!0,this.thrownError=G;const{observers:X}=this;for(;X.length;)X.shift().error(G)}})}complete(){(0,me.x)(()=>{if(this._throwIfClosed(),!this.isStopped){this.isStopped=!0;const{observers:G}=this;for(;G.length;)G.shift().complete()}})}unsubscribe(){this.isStopped=this.closed=!0,this.observers=this.currentObservers=null}get observed(){var G;return(null===(G=this.observers)||void 0===G?void 0:G.length)>0}_trySubscribe(G){return this._throwIfClosed(),super._trySubscribe(G)}_subscribe(G){return this._throwIfClosed(),this._checkFinalizedStatuses(G),this._innerSubscribe(G)}_innerSubscribe(G){const{hasError:X,isStopped:qe,observers:Ae}=this;return X||qe?Q.Lc:(this.currentObservers=null,Ae.push(G),new Q.w0(()=>{this.currentObservers=null,(0,ee.P)(Ae,G)}))}_checkFinalizedStatuses(G){const{hasError:X,thrownError:qe,isStopped:Ae}=this;X?G.error(qe):Ae&&G.complete()}asObservable(){const G=new m.y;return G.source=this,G}}return le.create=(W,G)=>new he(W,G),le})();class he extends se{constructor(W,G){super(),this.destination=W,this.source=G}next(W){var G,X;null===(X=null===(G=this.destination)||void 0===G?void 0:G.next)||void 0===X||X.call(G,W)}error(W){var G,X;null===(X=null===(G=this.destination)||void 0===G?void 0:G.error)||void 0===X||X.call(G,W)}complete(){var W,G;null===(G=null===(W=this.destination)||void 0===W?void 0:W.complete)||void 0===G||G.call(W)}_subscribe(W){var G,X;return null!==(X=null===(G=this.source)||void 0===G?void 0:G.subscribe(W))&&void 0!==X?X:Q.Lc}}},930:(ot,De,F)=>{F.d(De,{Hp:()=>Ve,Lv:()=>X});var m=F(576),Q=F(727),O=F(2416),ae=F(7849),ee=F(5032);const me=le("C",void 0,void 0);function le(Te,we,Ee){return{kind:Te,value:we,error:Ee}}var W=F(3410),G=F(2806);class X extends Q.w0{constructor(we){super(),this.isStopped=!1,we?(this.destination=we,(0,Q.Nn)(we)&&we.add(this)):this.destination=Ke}static create(we,Ee,$e){return new Ve(we,Ee,$e)}next(we){this.isStopped?nt(function he(Te){return le("N",Te,void 0)}(we),this):this._next(we)}error(we){this.isStopped?nt(function se(Te){return le("E",void 0,Te)}(we),this):(this.isStopped=!0,this._error(we))}complete(){this.isStopped?nt(me,this):(this.isStopped=!0,this._complete())}unsubscribe(){this.closed||(this.isStopped=!0,super.unsubscribe(),this.destination=null)}_next(we){this.destination.next(we)}_error(we){try{this.destination.error(we)}finally{this.unsubscribe()}}_complete(){try{this.destination.complete()}finally{this.unsubscribe()}}}const qe=Function.prototype.bind;function Ae(Te,we){return qe.call(Te,we)}class Oe{constructor(we){this.partialObserver=we}next(we){const{partialObserver:Ee}=this;if(Ee.next)try{Ee.next(we)}catch($e){pe($e)}}error(we){const{partialObserver:Ee}=this;if(Ee.error)try{Ee.error(we)}catch($e){pe($e)}else pe(we)}complete(){const{partialObserver:we}=this;if(we.complete)try{we.complete()}catch(Ee){pe(Ee)}}}class Ve extends X{constructor(we,Ee,$e){let je;if(super(),(0,m.m)(we)||!we)je={next:null!=we?we:void 0,error:null!=Ee?Ee:void 0,complete:null!=$e?$e:void 0};else{let ne;this&&O.v.useDeprecatedNextContext?(ne=Object.create(we),ne.unsubscribe=()=>this.unsubscribe(),je={next:we.next&&Ae(we.next,ne),error:we.error&&Ae(we.error,ne),complete:we.complete&&Ae(we.complete,ne)}):je=we}this.destination=new Oe(je)}}function pe(Te){O.v.useDeprecatedSynchronousErrorHandling?(0,G.O)(Te):(0,ae.h)(Te)}function nt(Te,we){const{onStoppedNotification:Ee}=O.v;Ee&&W.z.setTimeout(()=>Ee(Te,we))}const Ke={closed:!0,next:ee.Z,error:function Ce(Te){throw Te},complete:ee.Z}},727:(ot,De,F)=>{F.d(De,{Lc:()=>me,w0:()=>ee,Nn:()=>se});var m=F(576);const O=(0,F(3888).d)(le=>function(G){le(this),this.message=G?`${G.length} errors occurred during unsubscription:\n${G.map((X,qe)=>`${qe+1}) ${X.toString()}`).join("\n  ")}`:"",this.name="UnsubscriptionError",this.errors=G});var ae=F(8737);class ee{constructor(W){this.initialTeardown=W,this.closed=!1,this._parentage=null,this._finalizers=null}unsubscribe(){let W;if(!this.closed){this.closed=!0;const{_parentage:G}=this;if(G)if(this._parentage=null,Array.isArray(G))for(const Ae of G)Ae.remove(this);else G.remove(this);const{initialTeardown:X}=this;if((0,m.m)(X))try{X()}catch(Ae){W=Ae instanceof O?Ae.errors:[Ae]}const{_finalizers:qe}=this;if(qe){this._finalizers=null;for(const Ae of qe)try{he(Ae)}catch(Oe){W=null!=W?W:[],Oe instanceof O?W=[...W,...Oe.errors]:W.push(Oe)}}if(W)throw new O(W)}}add(W){var G;if(W&&W!==this)if(this.closed)he(W);else{if(W instanceof ee){if(W.closed||W._hasParent(this))return;W._addParent(this)}(this._finalizers=null!==(G=this._finalizers)&&void 0!==G?G:[]).push(W)}}_hasParent(W){const{_parentage:G}=this;return G===W||Array.isArray(G)&&G.includes(W)}_addParent(W){const{_parentage:G}=this;this._parentage=Array.isArray(G)?(G.push(W),G):G?[G,W]:W}_removeParent(W){const{_parentage:G}=this;G===W?this._parentage=null:Array.isArray(G)&&(0,ae.P)(G,W)}remove(W){const{_finalizers:G}=this;G&&(0,ae.P)(G,W),W instanceof ee&&W._removeParent(this)}}ee.EMPTY=(()=>{const le=new ee;return le.closed=!0,le})();const me=ee.EMPTY;function se(le){return le instanceof ee||le&&"closed"in le&&(0,m.m)(le.remove)&&(0,m.m)(le.add)&&(0,m.m)(le.unsubscribe)}function he(le){(0,m.m)(le)?le():le.unsubscribe()}},2416:(ot,De,F)=>{F.d(De,{v:()=>m});const m={onUnhandledError:null,onStoppedNotification:null,Promise:void 0,useDeprecatedSynchronousErrorHandling:!1,useDeprecatedNextContext:!1}},515:(ot,De,F)=>{F.d(De,{E:()=>Q});const Q=new(F(8306).y)(ee=>ee.complete())},8996:(ot,De,F)=>{F.d(De,{D:()=>we});var m=F(8421),Q=F(5363),O=F(9468),me=F(8306),he=F(2202),le=F(576),W=F(9672);function X(Ee,$e){if(!Ee)throw new Error("Iterable cannot be null");return new me.y(je=>{(0,W.f)(je,$e,()=>{const ne=Ee[Symbol.asyncIterator]();(0,W.f)(je,$e,()=>{ne.next().then(K=>{K.done?je.complete():je.next(K.value)})},0,!0)})})}var qe=F(3670),Ae=F(8239),Oe=F(1144),Ve=F(6495),pe=F(2206),Ce=F(4532),nt=F(3260);function we(Ee,$e){return $e?function Te(Ee,$e){if(null!=Ee){if((0,qe.c)(Ee))return function ae(Ee,$e){return(0,m.Xf)(Ee).pipe((0,O.R)($e),(0,Q.Q)($e))}(Ee,$e);if((0,Oe.z)(Ee))return function se(Ee,$e){return new me.y(je=>{let ne=0;return $e.schedule(function(){ne===Ee.length?je.complete():(je.next(Ee[ne++]),je.closed||this.schedule())})})}(Ee,$e);if((0,Ae.t)(Ee))return function ee(Ee,$e){return(0,m.Xf)(Ee).pipe((0,O.R)($e),(0,Q.Q)($e))}(Ee,$e);if((0,pe.D)(Ee))return X(Ee,$e);if((0,Ve.T)(Ee))return function G(Ee,$e){return new me.y(je=>{let ne;return(0,W.f)(je,$e,()=>{ne=Ee[he.h](),(0,W.f)(je,$e,()=>{let K,re;try{({value:K,done:re}=ne.next())}catch(_e){return void je.error(_e)}re?je.complete():je.next(K)},0,!0)}),()=>(0,le.m)(null==ne?void 0:ne.return)&&ne.return()})}(Ee,$e);if((0,nt.L)(Ee))return function Ke(Ee,$e){return X((0,nt.Q)(Ee),$e)}(Ee,$e)}throw(0,Ce.z)(Ee)}(Ee,$e):(0,m.Xf)(Ee)}},8421:(ot,De,F)=>{F.d(De,{Xf:()=>qe});var m=F(655),Q=F(1144),O=F(8239),ae=F(8306),ee=F(3670),me=F(2206),se=F(4532),he=F(6495),le=F(3260),W=F(576),G=F(7849),X=F(8822);function qe(Te){if(Te instanceof ae.y)return Te;if(null!=Te){if((0,ee.c)(Te))return function Ae(Te){return new ae.y(we=>{const Ee=Te[X.L]();if((0,W.m)(Ee.subscribe))return Ee.subscribe(we);throw new TypeError("Provided object does not correctly implement Symbol.observable")})}(Te);if((0,Q.z)(Te))return function Oe(Te){return new ae.y(we=>{for(let Ee=0;Ee<Te.length&&!we.closed;Ee++)we.next(Te[Ee]);we.complete()})}(Te);if((0,O.t)(Te))return function Ve(Te){return new ae.y(we=>{Te.then(Ee=>{we.closed||(we.next(Ee),we.complete())},Ee=>we.error(Ee)).then(null,G.h)})}(Te);if((0,me.D)(Te))return Ce(Te);if((0,he.T)(Te))return function pe(Te){return new ae.y(we=>{for(const Ee of Te)if(we.next(Ee),we.closed)return;we.complete()})}(Te);if((0,le.L)(Te))return function nt(Te){return Ce((0,le.Q)(Te))}(Te)}throw(0,se.z)(Te)}function Ce(Te){return new ae.y(we=>{(function Ke(Te,we){var Ee,$e,je,ne;return(0,m.mG)(this,void 0,void 0,function*(){try{for(Ee=(0,m.KL)(Te);!($e=yield Ee.next()).done;)if(we.next($e.value),we.closed)return}catch(K){je={error:K}}finally{try{$e&&!$e.done&&(ne=Ee.return)&&(yield ne.call(Ee))}finally{if(je)throw je.error}}we.complete()})})(Te,we).catch(Ee=>we.error(Ee))})}},6451:(ot,De,F)=>{F.d(De,{T:()=>me});var m=F(8189),Q=F(8421),O=F(515),ae=F(7669),ee=F(8996);function me(...se){const he=(0,ae.yG)(se),le=(0,ae._6)(se,1/0),W=se;return W.length?1===W.length?(0,Q.Xf)(W[0]):(0,m.J)(le)((0,ee.D)(W,he)):O.E}},5403:(ot,De,F)=>{F.d(De,{x:()=>Q});var m=F(930);function Q(ae,ee,me,se,he){return new O(ae,ee,me,se,he)}class O extends m.Lv{constructor(ee,me,se,he,le,W){super(ee),this.onFinalize=le,this.shouldUnsubscribe=W,this._next=me?function(G){try{me(G)}catch(X){ee.error(X)}}:super._next,this._error=he?function(G){try{he(G)}catch(X){ee.error(X)}finally{this.unsubscribe()}}:super._error,this._complete=se?function(){try{se()}catch(G){ee.error(G)}finally{this.unsubscribe()}}:super._complete}unsubscribe(){var ee;if(!this.shouldUnsubscribe||this.shouldUnsubscribe()){const{closed:me}=this;super.unsubscribe(),!me&&(null===(ee=this.onFinalize)||void 0===ee||ee.call(this))}}}},4004:(ot,De,F)=>{F.d(De,{U:()=>O});var m=F(4482),Q=F(5403);function O(ae,ee){return(0,m.e)((me,se)=>{let he=0;me.subscribe((0,Q.x)(se,le=>{se.next(ae.call(ee,le,he++))}))})}},8189:(ot,De,F)=>{F.d(De,{J:()=>O});var m=F(5577),Q=F(4671);function O(ae=1/0){return(0,m.z)(Q.y,ae)}},5577:(ot,De,F)=>{F.d(De,{z:()=>he});var m=F(4004),Q=F(8421),O=F(4482),ae=F(9672),ee=F(5403),se=F(576);function he(le,W,G=1/0){return(0,se.m)(W)?he((X,qe)=>(0,m.U)((Ae,Oe)=>W(X,Ae,qe,Oe))((0,Q.Xf)(le(X,qe))),G):("number"==typeof W&&(G=W),(0,O.e)((X,qe)=>function me(le,W,G,X,qe,Ae,Oe,Ve){const pe=[];let Ce=0,nt=0,Ke=!1;const Te=()=>{Ke&&!pe.length&&!Ce&&W.complete()},we=$e=>Ce<X?Ee($e):pe.push($e),Ee=$e=>{Ae&&W.next($e),Ce++;let je=!1;(0,Q.Xf)(G($e,nt++)).subscribe((0,ee.x)(W,ne=>{null==qe||qe(ne),Ae?we(ne):W.next(ne)},()=>{je=!0},void 0,()=>{if(je)try{for(Ce--;pe.length&&Ce<X;){const ne=pe.shift();Oe?(0,ae.f)(W,Oe,()=>Ee(ne)):Ee(ne)}Te()}catch(ne){W.error(ne)}}))};return le.subscribe((0,ee.x)(W,we,()=>{Ke=!0,Te()})),()=>{null==Ve||Ve()}}(X,qe,le,G)))}},5363:(ot,De,F)=>{F.d(De,{Q:()=>ae});var m=F(9672),Q=F(4482),O=F(5403);function ae(ee,me=0){return(0,Q.e)((se,he)=>{se.subscribe((0,O.x)(he,le=>(0,m.f)(he,ee,()=>he.next(le),me),()=>(0,m.f)(he,ee,()=>he.complete(),me),le=>(0,m.f)(he,ee,()=>he.error(le),me)))})}},3099:(ot,De,F)=>{F.d(De,{B:()=>me});var m=F(8996),Q=F(5698),O=F(7579),ae=F(930),ee=F(4482);function me(he={}){const{connector:le=(()=>new O.x),resetOnError:W=!0,resetOnComplete:G=!0,resetOnRefCountZero:X=!0}=he;return qe=>{let Ae=null,Oe=null,Ve=null,pe=0,Ce=!1,nt=!1;const Ke=()=>{null==Oe||Oe.unsubscribe(),Oe=null},Te=()=>{Ke(),Ae=Ve=null,Ce=nt=!1},we=()=>{const Ee=Ae;Te(),null==Ee||Ee.unsubscribe()};return(0,ee.e)((Ee,$e)=>{pe++,!nt&&!Ce&&Ke();const je=Ve=null!=Ve?Ve:le();$e.add(()=>{pe--,0===pe&&!nt&&!Ce&&(Oe=se(we,X))}),je.subscribe($e),Ae||(Ae=new ae.Hp({next:ne=>je.next(ne),error:ne=>{nt=!0,Ke(),Oe=se(Te,W,ne),je.error(ne)},complete:()=>{Ce=!0,Ke(),Oe=se(Te,G),je.complete()}}),(0,m.D)(Ee).subscribe(Ae))})(qe)}}function se(he,le,...W){return!0===le?(he(),null):!1===le?null:le(...W).pipe((0,Q.q)(1)).subscribe(()=>he())}},9468:(ot,De,F)=>{F.d(De,{R:()=>Q});var m=F(4482);function Q(O,ae=0){return(0,m.e)((ee,me)=>{me.add(O.schedule(()=>ee.subscribe(me),ae))})}},5698:(ot,De,F)=>{F.d(De,{q:()=>ae});var m=F(515),Q=F(4482),O=F(5403);function ae(ee){return ee<=0?()=>m.E:(0,Q.e)((me,se)=>{let he=0;me.subscribe((0,O.x)(se,le=>{++he<=ee&&(se.next(le),ee<=he&&se.complete())}))})}},8505:(ot,De,F)=>{F.d(De,{b:()=>ee});var m=F(576),Q=F(4482),O=F(5403),ae=F(4671);function ee(me,se,he){const le=(0,m.m)(me)||se||he?{next:me,error:se,complete:he}:me;return le?(0,Q.e)((W,G)=>{var X;null===(X=le.subscribe)||void 0===X||X.call(le);let qe=!0;W.subscribe((0,O.x)(G,Ae=>{var Oe;null===(Oe=le.next)||void 0===Oe||Oe.call(le,Ae),G.next(Ae)},()=>{var Ae;qe=!1,null===(Ae=le.complete)||void 0===Ae||Ae.call(le),G.complete()},Ae=>{var Oe;qe=!1,null===(Oe=le.error)||void 0===Oe||Oe.call(le,Ae),G.error(Ae)},()=>{var Ae,Oe;qe&&(null===(Ae=le.unsubscribe)||void 0===Ae||Ae.call(le)),null===(Oe=le.finalize)||void 0===Oe||Oe.call(le)}))}):ae.y}},4408:(ot,De,F)=>{F.d(De,{o:()=>ee});var m=F(727);class Q extends m.w0{constructor(se,he){super()}schedule(se,he=0){return this}}const O={setInterval(me,se,...he){const{delegate:le}=O;return(null==le?void 0:le.setInterval)?le.setInterval(me,se,...he):setInterval(me,se,...he)},clearInterval(me){const{delegate:se}=O;return((null==se?void 0:se.clearInterval)||clearInterval)(me)},delegate:void 0};var ae=F(8737);class ee extends Q{constructor(se,he){super(se,he),this.scheduler=se,this.work=he,this.pending=!1}schedule(se,he=0){if(this.closed)return this;this.state=se;const le=this.id,W=this.scheduler;return null!=le&&(this.id=this.recycleAsyncId(W,le,he)),this.pending=!0,this.delay=he,this.id=this.id||this.requestAsyncId(W,this.id,he),this}requestAsyncId(se,he,le=0){return O.setInterval(se.flush.bind(se,this),le)}recycleAsyncId(se,he,le=0){if(null!=le&&this.delay===le&&!1===this.pending)return he;O.clearInterval(he)}execute(se,he){if(this.closed)return new Error("executing a cancelled action");this.pending=!1;const le=this._execute(se,he);if(le)return le;!1===this.pending&&null!=this.id&&(this.id=this.recycleAsyncId(this.scheduler,this.id,null))}_execute(se,he){let W,le=!1;try{this.work(se)}catch(G){le=!0,W=G||new Error("Scheduled action threw falsy error")}if(le)return this.unsubscribe(),W}unsubscribe(){if(!this.closed){const{id:se,scheduler:he}=this,{actions:le}=he;this.work=this.state=this.scheduler=null,this.pending=!1,(0,ae.P)(le,this),null!=se&&(this.id=this.recycleAsyncId(he,se,null)),this.delay=null,super.unsubscribe()}}}},7565:(ot,De,F)=>{F.d(De,{v:()=>O});var m=F(6063);class Q{constructor(ee,me=Q.now){this.schedulerActionCtor=ee,this.now=me}schedule(ee,me=0,se){return new this.schedulerActionCtor(this,ee).schedule(se,me)}}Q.now=m.l.now;class O extends Q{constructor(ee,me=Q.now){super(ee,me),this.actions=[],this._active=!1,this._scheduled=void 0}flush(ee){const{actions:me}=this;if(this._active)return void me.push(ee);let se;this._active=!0;do{if(se=ee.execute(ee.state,ee.delay))break}while(ee=me.shift());if(this._active=!1,se){for(;ee=me.shift();)ee.unsubscribe();throw se}}}},4986:(ot,De,F)=>{F.d(De,{z:()=>O});var m=F(4408);const O=new(F(7565).v)(m.o)},6063:(ot,De,F)=>{F.d(De,{l:()=>m});const m={now:()=>(m.delegate||Date).now(),delegate:void 0}},3410:(ot,De,F)=>{F.d(De,{z:()=>m});const m={setTimeout(Q,O,...ae){const{delegate:ee}=m;return(null==ee?void 0:ee.setTimeout)?ee.setTimeout(Q,O,...ae):setTimeout(Q,O,...ae)},clearTimeout(Q){const{delegate:O}=m;return((null==O?void 0:O.clearTimeout)||clearTimeout)(Q)},delegate:void 0}},2202:(ot,De,F)=>{F.d(De,{h:()=>Q});const Q=function m(){return"function"==typeof Symbol&&Symbol.iterator?Symbol.iterator:"@@iterator"}()},8822:(ot,De,F)=>{F.d(De,{L:()=>m});const m="function"==typeof Symbol&&Symbol.observable||"@@observable"},7669:(ot,De,F)=>{F.d(De,{_6:()=>me,jO:()=>ae,yG:()=>ee});var m=F(576);function O(se){return se[se.length-1]}function ae(se){return(0,m.m)(O(se))?se.pop():void 0}function ee(se){return function Q(se){return se&&(0,m.m)(se.schedule)}(O(se))?se.pop():void 0}function me(se,he){return"number"==typeof O(se)?se.pop():he}},8737:(ot,De,F)=>{function m(Q,O){if(Q){const ae=Q.indexOf(O);0<=ae&&Q.splice(ae,1)}}F.d(De,{P:()=>m})},3888:(ot,De,F)=>{function m(Q){const ae=Q(ee=>{Error.call(ee),ee.stack=(new Error).stack});return ae.prototype=Object.create(Error.prototype),ae.prototype.constructor=ae,ae}F.d(De,{d:()=>m})},2806:(ot,De,F)=>{F.d(De,{O:()=>ae,x:()=>O});var m=F(2416);let Q=null;function O(ee){if(m.v.useDeprecatedSynchronousErrorHandling){const me=!Q;if(me&&(Q={errorThrown:!1,error:null}),ee(),me){const{errorThrown:se,error:he}=Q;if(Q=null,se)throw he}}else ee()}function ae(ee){m.v.useDeprecatedSynchronousErrorHandling&&Q&&(Q.errorThrown=!0,Q.error=ee)}},9672:(ot,De,F)=>{function m(Q,O,ae,ee=0,me=!1){const se=O.schedule(function(){ae(),me?Q.add(this.schedule(null,ee)):this.unsubscribe()},ee);if(Q.add(se),!me)return se}F.d(De,{f:()=>m})},4671:(ot,De,F)=>{function m(Q){return Q}F.d(De,{y:()=>m})},1144:(ot,De,F)=>{F.d(De,{z:()=>m});const m=Q=>Q&&"number"==typeof Q.length&&"function"!=typeof Q},2206:(ot,De,F)=>{F.d(De,{D:()=>Q});var m=F(576);function Q(O){return Symbol.asyncIterator&&(0,m.m)(null==O?void 0:O[Symbol.asyncIterator])}},576:(ot,De,F)=>{function m(Q){return"function"==typeof Q}F.d(De,{m:()=>m})},3670:(ot,De,F)=>{F.d(De,{c:()=>O});var m=F(8822),Q=F(576);function O(ae){return(0,Q.m)(ae[m.L])}},6495:(ot,De,F)=>{F.d(De,{T:()=>O});var m=F(2202),Q=F(576);function O(ae){return(0,Q.m)(null==ae?void 0:ae[m.h])}},8239:(ot,De,F)=>{F.d(De,{t:()=>Q});var m=F(576);function Q(O){return(0,m.m)(null==O?void 0:O.then)}},3260:(ot,De,F)=>{F.d(De,{L:()=>ae,Q:()=>O});var m=F(655),Q=F(576);function O(ee){return(0,m.FC)(this,arguments,function*(){const se=ee.getReader();try{for(;;){const{value:he,done:le}=yield(0,m.qq)(se.read());if(le)return yield(0,m.qq)(void 0);yield yield(0,m.qq)(he)}}finally{se.releaseLock()}})}function ae(ee){return(0,Q.m)(null==ee?void 0:ee.getReader)}},4482:(ot,De,F)=>{F.d(De,{A:()=>Q,e:()=>O});var m=F(576);function Q(ae){return(0,m.m)(null==ae?void 0:ae.lift)}function O(ae){return ee=>{if(Q(ee))return ee.lift(function(me){try{return ae(me,this)}catch(se){this.error(se)}});throw new TypeError("Unable to lift unknown Observable type")}}},5032:(ot,De,F)=>{function m(){}F.d(De,{Z:()=>m})},7849:(ot,De,F)=>{F.d(De,{h:()=>O});var m=F(2416),Q=F(3410);function O(ae){Q.z.setTimeout(()=>{const{onUnhandledError:ee}=m.v;if(!ee)throw ae;ee(ae)})}},4532:(ot,De,F)=>{function m(Q){return new TypeError(`You provided ${null!==Q&&"object"==typeof Q?"an invalid object":`'${Q}'`} where a stream was expected. You can provide an Observable, Promise, ReadableStream, Array, AsyncIterable, or Iterable.`)}F.d(De,{z:()=>m})},655:(ot,De,F)=>{function ae(K,re){var _e={};for(var ie in K)Object.prototype.hasOwnProperty.call(K,ie)&&re.indexOf(ie)<0&&(_e[ie]=K[ie]);if(null!=K&&"function"==typeof Object.getOwnPropertySymbols){var Pe=0;for(ie=Object.getOwnPropertySymbols(K);Pe<ie.length;Pe++)re.indexOf(ie[Pe])<0&&Object.prototype.propertyIsEnumerable.call(K,ie[Pe])&&(_e[ie[Pe]]=K[ie[Pe]])}return _e}function he(K,re,_e,ie){return new(_e||(_e=Promise))(function(ue,It){function Qt(gt){try{at(ie.next(gt))}catch(cn){It(cn)}}function Fn(gt){try{at(ie.throw(gt))}catch(cn){It(cn)}}function at(gt){gt.done?ue(gt.value):function Pe(ue){return ue instanceof _e?ue:new _e(function(It){It(ue)})}(gt.value).then(Qt,Fn)}at((ie=ie.apply(K,re||[])).next())})}function pe(K){return this instanceof pe?(this.v=K,this):new pe(K)}function Ce(K,re,_e){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var Pe,ie=_e.apply(K,re||[]),ue=[];return Pe={},It("next"),It("throw"),It("return"),Pe[Symbol.asyncIterator]=function(){return this},Pe;function It(dn){ie[dn]&&(Pe[dn]=function(Di){return new Promise(function(Xt,qi){ue.push([dn,Di,Xt,qi])>1||Qt(dn,Di)})})}function Qt(dn,Di){try{!function Fn(dn){dn.value instanceof pe?Promise.resolve(dn.value.v).then(at,gt):cn(ue[0][2],dn)}(ie[dn](Di))}catch(Xt){cn(ue[0][3],Xt)}}function at(dn){Qt("next",dn)}function gt(dn){Qt("throw",dn)}function cn(dn,Di){dn(Di),ue.shift(),ue.length&&Qt(ue[0][0],ue[0][1])}}function Ke(K){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var _e,re=K[Symbol.asyncIterator];return re?re.call(K):(K=function X(K){var re="function"==typeof Symbol&&Symbol.iterator,_e=re&&K[re],ie=0;if(_e)return _e.call(K);if(K&&"number"==typeof K.length)return{next:function(){return K&&ie>=K.length&&(K=void 0),{value:K&&K[ie++],done:!K}}};throw new TypeError(re?"Object is not iterable.":"Symbol.iterator is not defined.")}(K),_e={},ie("next"),ie("throw"),ie("return"),_e[Symbol.asyncIterator]=function(){return this},_e);function ie(ue){_e[ue]=K[ue]&&function(It){return new Promise(function(Qt,Fn){!function Pe(ue,It,Qt,Fn){Promise.resolve(Fn).then(function(at){ue({value:at,done:Qt})},It)}(Qt,Fn,(It=K[ue](It)).done,It.value)})}}}F.d(De,{FC:()=>Ce,KL:()=>Ke,_T:()=>ae,mG:()=>he,qq:()=>pe})},5e3:(ot,De,F)=>{F.d(De,{$8M:()=>Ia,$Z:()=>sh,AFp:()=>lw,AaK:()=>he,CHM:()=>Ll,CRH:()=>ob,CZH:()=>yu,CqO:()=>WC,EJc:()=>o_,EpF:()=>vm,F4k:()=>$v,FYo:()=>KI,FiY:()=>hi,G48:()=>WA,GfV:()=>ZI,Gpc:()=>G,JOm:()=>oe,LFG:()=>Ye,LSH:()=>el,Lbi:()=>Cb,NdJ:()=>rp,O4$:()=>pd,OlP:()=>Pn,Oqu:()=>t0,PXZ:()=>VA,Q6J:()=>oh,QGY:()=>Hv,Qsj:()=>eA,R0b:()=>aa,RDi:()=>Cs,Rgc:()=>Fc,SBq:()=>Th,Sil:()=>Tb,Suo:()=>Mh,TTD:()=>Fo,TgZ:()=>ep,VLi:()=>OA,X6Q:()=>GA,XFs:()=>lt,Xpm:()=>Lt,Y36:()=>Xf,YKP:()=>A0,YNc:()=>Io,Yjl:()=>Cr,Yz7:()=>Xt,ZZ4:()=>qb,_Bn:()=>$m,_UZ:()=>_m,_Vd:()=>bh,_c5:()=>ox,_uU:()=>uI,aQg:()=>zb,c2e:()=>Ib,cJS:()=>Jt,cg1:()=>At,dDg:()=>Pb,deG:()=>wg,dqk:()=>Gt,eFA:()=>Ao,ekj:()=>bm,g9A:()=>Eb,h0i:()=>Ah,hGG:()=>ax,hij:()=>Tm,iGM:()=>Rh,ifc:()=>$t,ip1:()=>Os,kL8:()=>dh,kYT:()=>Ue,kcU:()=>ty,lG2:()=>Zt,n5z:()=>Cd,oAB:()=>J,oxw:()=>KC,q4F:()=>b0,qLn:()=>Ar,qOj:()=>kv,qZA:()=>tp,sBO:()=>qA,sIi:()=>Sc,s_b:()=>Sp,soG:()=>dw,tBr:()=>kr,tb:()=>s_,tp0:()=>Ko,uIk:()=>MC,vHH:()=>Oe,vpe:()=>Ba,wAp:()=>mt,xp6:()=>$y,z2F:()=>_w,zSh:()=>Cv,zs3:()=>vo});var m=F(7579),Q=F(727),O=F(8306),ae=F(6451),ee=F(3099);function me(s){for(let o in s)if(s[o]===me)return o;throw Error("Could not find renamed property on target object.")}function se(s,o){for(const u in o)o.hasOwnProperty(u)&&!s.hasOwnProperty(u)&&(s[u]=o[u])}function he(s){if("string"==typeof s)return s;if(Array.isArray(s))return"["+s.map(he).join(", ")+"]";if(null==s)return""+s;if(s.overriddenName)return`${s.overriddenName}`;if(s.name)return`${s.name}`;const o=s.toString();if(null==o)return""+o;const u=o.indexOf("\n");return-1===u?o:o.substring(0,u)}function le(s,o){return null==s||""===s?null===o?"":o:null==o||""===o?s:s+" "+o}const W=me({__forward_ref__:me});function G(s){return s.__forward_ref__=G,s.toString=function(){return he(this())},s}function X(s){return qe(s)?s():s}function qe(s){return"function"==typeof s&&s.hasOwnProperty(W)&&s.__forward_ref__===G}class Oe extends Error{constructor(o,u){super(function Ve(s,o){return`NG0${Math.abs(s)}${o?": "+o:""}`}(o,u)),this.code=o}}function pe(s){return"string"==typeof s?s:null==s?"":String(s)}function Ce(s){return"function"==typeof s?s.name||s.toString():"object"==typeof s&&null!=s&&"function"==typeof s.type?s.type.name||s.type.toString():pe(s)}function we(s,o){const u=o?` in ${o}`:"";throw new Oe(-201,`No provider for ${Ce(s)} found${u}`)}function at(s,o){null==s&&function gt(s,o,u,c){throw new Error(`ASSERTION ERROR: ${s}`+(null==c?"":` [Expected=> ${u} ${c} ${o} <=Actual]`))}(o,s,null,"!=")}function Xt(s){return{token:s.token,providedIn:s.providedIn||null,factory:s.factory,value:void 0}}function Jt(s){return{providers:s.providers||[],imports:s.imports||[]}}function Ht(s){return ur(s,zi)||ur(s,ms)}function ur(s,o){return s.hasOwnProperty(o)?s[o]:null}function Nr(s){return s&&(s.hasOwnProperty(Pr)||s.hasOwnProperty(Ki))?s[Pr]:null}const zi=me({\u0275prov:me}),Pr=me({\u0275inj:me}),ms=me({ngInjectableDef:me}),Ki=me({ngInjectorDef:me});var lt=(()=>((lt=lt||{})[lt.Default=0]="Default",lt[lt.Host=1]="Host",lt[lt.Self=2]="Self",lt[lt.SkipSelf=4]="SkipSelf",lt[lt.Optional=8]="Optional",lt))();let $r;function Yn(s){const o=$r;return $r=s,o}function ri(s,o,u){const c=Ht(s);return c&&"root"==c.providedIn?void 0===c.value?c.value=c.factory():c.value:u&lt.Optional?null:void 0!==o?o:void we(he(s),"Injector")}function vn(s){return{toString:s}.toString()}var rr=(()=>((rr=rr||{})[rr.OnPush=0]="OnPush",rr[rr.Default=1]="Default",rr))(),$t=(()=>{return(s=$t||($t={}))[s.Emulated=0]="Emulated",s[s.None=2]="None",s[s.ShadowDom=3]="ShadowDom",$t;var s})();const it="undefined"!=typeof globalThis&&globalThis,Et="undefined"!=typeof window&&window,lr="undefined"!=typeof self&&"undefined"!=typeof WorkerGlobalScope&&self instanceof WorkerGlobalScope&&self,Gt=it||"undefined"!=typeof global&&global||Et||lr,cr={},dt=[],Er=me({\u0275cmp:me}),Ut=me({\u0275dir:me}),Ze=me({\u0275pipe:me}),Se=me({\u0275mod:me}),Je=me({\u0275fac:me}),ht=me({__NG_ELEMENT_ID__:me});let Bt=0;function Lt(s){return vn(()=>{const u={},c={type:s.type,providersResolver:null,decls:s.decls,vars:s.vars,factory:null,template:s.template||null,consts:s.consts||null,ngContentSelectors:s.ngContentSelectors,hostBindings:s.hostBindings||null,hostVars:s.hostVars||0,hostAttrs:s.hostAttrs||null,contentQueries:s.contentQueries||null,declaredInputs:u,inputs:null,outputs:null,exportAs:s.exportAs||null,onPush:s.changeDetection===rr.OnPush,directiveDefs:null,pipeDefs:null,selectors:s.selectors||dt,viewQuery:s.viewQuery||null,features:s.features||null,data:s.data||{},encapsulation:s.encapsulation||$t.Emulated,id:"c",styles:s.styles||dt,_:null,setInput:null,schemas:s.schemas||null,tView:null},d=s.directives,p=s.features,v=s.pipes;return c.id+=Bt++,c.inputs=_t(s.inputs,u),c.outputs=_t(s.outputs),p&&p.forEach(C=>C(c)),c.directiveDefs=d?()=>("function"==typeof d?d():d).map(B):null,c.pipeDefs=v?()=>("function"==typeof v?v():v).map(q):null,c})}function B(s){return qt(s)||function xn(s){return s[Ut]||null}(s)}function q(s){return function Rt(s){return s[Ze]||null}(s)}const ce={};function J(s){return vn(()=>{const o={type:s.type,bootstrap:s.bootstrap||dt,declarations:s.declarations||dt,imports:s.imports||dt,exports:s.exports||dt,transitiveCompileScopes:null,schemas:s.schemas||null,id:s.id||null};return null!=s.id&&(ce[s.id]=s.type),o})}function Ue(s,o){return vn(()=>{const u=fn(s,!0);u.declarations=o.declarations||dt,u.imports=o.imports||dt,u.exports=o.exports||dt})}function _t(s,o){if(null==s)return cr;const u={};for(const c in s)if(s.hasOwnProperty(c)){let d=s[c],p=d;Array.isArray(d)&&(p=d[1],d=d[0]),u[d]=c,o&&(o[d]=p)}return u}const Zt=Lt;function Cr(s){return{type:s.type,name:s.name,factory:null,pure:!1!==s.pure,onDestroy:s.type.prototype.ngOnDestroy||null}}function qt(s){return s[Er]||null}function fn(s,o){const u=s[Se]||null;if(!u&&!0===o)throw new Error(`Type ${he(s)} does not have '\u0275mod' property.`);return u}function Ti(s){return Array.isArray(s)&&"object"==typeof s[1]}function oi(s){return Array.isArray(s)&&!0===s[1]}function ed(s){return 0!=(8&s.flags)}function Ys(s){return 2==(2&s.flags)}function Su(s){return 1==(1&s.flags)}function Gr(s){return null!==s.template}function Xh(s){return 0!=(512&s[2])}function Wr(s,o){return s.hasOwnProperty(Je)?s[Je]:null}class pa{constructor(o,u,c){this.previousValue=o,this.currentValue=u,this.firstChange=c}isFirstChange(){return this.firstChange}}function Fo(){return Za}function Za(s){return s.type.prototype.ngOnChanges&&(s.setInput=_g),od}function od(){const s=Xs(this),o=null==s?void 0:s.current;if(o){const u=s.previous;if(u===cr)s.previous=o;else for(let c in o)u[c]=o[c];s.current=null,this.ngOnChanges(o)}}function _g(s,o,u,c){const d=Xs(s)||function ai(s,o){return s[ga]=o}(s,{previous:cr,current:null}),p=d.current||(d.current={}),v=d.previous,C=this.declaredInputs[u],I=v[C];p[C]=new pa(I&&I.currentValue,o,v===cr),s[c]=o}Fo.ngInherit=!0;const ga="__ngSimpleChanges__";function Xs(s){return s[ga]||null}let ku;function Cs(s){ku=s}function gn(s){return!!s.listen}const ma={createRenderer:(s,o)=>function Ya(){return void 0!==ku?ku:"undefined"!=typeof document?document:void 0}()};function on(s){for(;Array.isArray(s);)s=s[0];return s}function Vo(s,o){return on(o[s])}function br(s,o){return on(o[s.index])}function Qa(s,o){return s.data[o]}function Dr(s,o){const u=o[s];return Ti(u)?u:u[0]}function to(s){return 4==(4&s[2])}function Is(s){return 128==(128&s[2])}function zr(s,o){return null==o?null:s[o]}function no(s){s[18]=0}function ro(s,o){s[5]+=o;let u=s,c=s[3];for(;null!==c&&(1===o&&1===u[5]||-1===o&&0===u[5]);)c[5]+=o,u=c,c=c[3]}const ft={lFrame:Bo(null),bindingsEnabled:!0,isInCheckNoChangesMode:!1};function Uu(){return ft.bindingsEnabled}function Ie(){return ft.lFrame.lView}function Vt(){return ft.lFrame.tView}function Ll(s){return ft.lFrame.contextLView=s,s[8]}function Cn(){let s=_a();for(;null!==s&&64===s.type;)s=s.parent;return s}function _a(){return ft.lFrame.currentTNode}function Kr(s,o){const u=ft.lFrame;u.currentTNode=s,u.isParent=o}function Vl(){return ft.lFrame.isParent}function Bu(){return ft.isInCheckNoChangesMode}function io(s){ft.isInCheckNoChangesMode=s}function so(){return ft.lFrame.bindingIndex++}function $u(s,o){const u=ft.lFrame;u.bindingIndex=u.bindingRootIndex=s,Xa(o)}function Xa(s){ft.lFrame.currentDirectiveIndex=s}function $l(){return ft.lFrame.currentQueryIndex}function Gl(s){ft.lFrame.currentQueryIndex=s}function cd(s){const o=s[1];return 2===o.type?o.declTNode:1===o.type?s[6]:null}function Wl(s,o,u){if(u&lt.SkipSelf){let d=o,p=s;for(;!(d=d.parent,null!==d||u&lt.Host||(d=cd(p),null===d||(p=p[15],10&d.type))););if(null===d)return!1;o=d,s=p}const c=ft.lFrame=dd();return c.currentTNode=o,c.lView=s,!0}function Uo(s){const o=dd(),u=s[1];ft.lFrame=o,o.currentTNode=u.firstChild,o.lView=s,o.tView=u,o.contextLView=s,o.bindingIndex=u.bindingStartIndex,o.inI18n=!1}function dd(){const s=ft.lFrame,o=null===s?null:s.child;return null===o?Bo(s):o}function Bo(s){const o={currentTNode:null,isParent:!0,lView:null,tView:null,selectedIndex:-1,contextLView:null,elementDepthCount:0,currentNamespace:null,currentDirectiveIndex:-1,bindingRootIndex:-1,bindingIndex:-1,currentQueryIndex:0,parent:s,child:null,inI18n:!1};return null!==s&&(s.child=o),o}function hd(){const s=ft.lFrame;return ft.lFrame=s.parent,s.currentTNode=null,s.lView=null,s}const fd=hd;function jo(){const s=hd();s.isParent=!0,s.tView=null,s.selectedIndex=-1,s.contextLView=null,s.elementDepthCount=0,s.currentDirectiveIndex=-1,s.currentNamespace=null,s.bindingRootIndex=-1,s.bindingIndex=-1,s.currentQueryIndex=0}function Tr(){return ft.lFrame.selectedIndex}function ao(s){ft.lFrame.selectedIndex=s}function Rn(){const s=ft.lFrame;return Qa(s.tView,s.selectedIndex)}function pd(){ft.lFrame.currentNamespace="svg"}function ty(){!function zl(){ft.lFrame.currentNamespace=null}()}function bs(s,o){for(let u=o.directiveStart,c=o.directiveEnd;u<c;u++){const p=s.data[u].type.prototype,{ngAfterContentInit:v,ngAfterContentChecked:C,ngAfterViewInit:I,ngAfterViewChecked:A,ngOnDestroy:R}=p;v&&(s.contentHooks||(s.contentHooks=[])).push(-u,v),C&&((s.contentHooks||(s.contentHooks=[])).push(u,C),(s.contentCheckHooks||(s.contentCheckHooks=[])).push(u,C)),I&&(s.viewHooks||(s.viewHooks=[])).push(-u,I),A&&((s.viewHooks||(s.viewHooks=[])).push(u,A),(s.viewCheckHooks||(s.viewCheckHooks=[])).push(u,A)),null!=R&&(s.destroyHooks||(s.destroyHooks=[])).push(u,R)}}function tu(s,o,u){gd(s,o,3,u)}function Gu(s,o,u,c){(3&s[2])===u&&gd(s,o,u,c)}function Hn(s,o){let u=s[2];(3&u)===o&&(u&=2047,u+=1,s[2]=u)}function gd(s,o,u,c){const p=null!=c?c:-1,v=o.length-1;let C=0;for(let I=void 0!==c?65535&s[18]:0;I<v;I++)if("number"==typeof o[I+1]){if(C=o[I],null!=c&&C>=c)break}else o[I]<0&&(s[18]+=65536),(C<p||-1==p)&&(yg(s,u,o,I),s[18]=(4294901760&s[18])+I+2),I++}function yg(s,o,u,c){const d=u[c]<0,p=u[c+1],C=s[d?-u[c]:u[c]];if(d){if(s[2]>>11<s[18]>>16&&(3&s[2])===o){s[2]+=2048;try{p.call(C)}finally{}}}else try{p.call(C)}finally{}}class va{constructor(o,u,c){this.factory=o,this.resolving=!1,this.canSeeViewProviders=u,this.injectImpl=c}}function ct(s,o,u){const c=gn(s);let d=0;for(;d<u.length;){const p=u[d];if("number"==typeof p){if(0!==p)break;d++;const v=u[d++],C=u[d++],I=u[d++];c?s.setAttribute(o,C,I,v):o.setAttributeNS(v,C,I)}else{const v=p,C=u[++d];Zr(v)?c&&s.setProperty(o,v,C):c?s.setAttribute(o,v,C):o.setAttribute(v,C),d++}}return d}function pr(s){return 3===s||4===s||6===s}function Zr(s){return 64===s.charCodeAt(0)}function gr(s,o){if(null!==o&&0!==o.length)if(null===s||0===s.length)s=o.slice();else{let u=-1;for(let c=0;c<o.length;c++){const d=o[c];"number"==typeof d?u=d:0===u||wa(s,u,d,null,-1===u||2===u?o[++c]:null)}}return s}function wa(s,o,u,c,d){let p=0,v=s.length;if(-1===o)v=-1;else for(;p<s.length;){const C=s[p++];if("number"==typeof C){if(C===o){v=-1;break}if(C>o){v=p-1;break}}}for(;p<s.length;){const C=s[p];if("number"==typeof C)break;if(C===u){if(null===c)return void(null!==d&&(s[p+1]=d));if(c===s[p+1])return void(s[p+2]=d)}p++,null!==c&&p++,null!==d&&p++}-1!==v&&(s.splice(v,0,o),p=v+1),s.splice(p++,0,u),null!==c&&s.splice(p++,0,c),null!==d&&s.splice(p++,0,d)}function yd(s){return-1!==s}function mn(s){return 32767&s}function xi(s,o){let u=function rf(s){return s>>16}(s),c=o;for(;u>0;)c=c[15],u--;return c}let Wu=!0;function Yr(s){const o=Wu;return Wu=s,o}let wd=0;function In(s,o){const u=Ea(s,o);if(-1!==u)return u;const c=o[1];c.firstCreatePass&&(s.injectorIndex=o.length,Ts(c.data,s),Ts(o,null),Ts(c.blueprint,null));const d=li(s,o),p=s.injectorIndex;if(yd(d)){const v=mn(d),C=xi(d,o),I=C[1].data;for(let A=0;A<8;A++)o[p+A]=C[v+A]|I[v+A]}return o[p+8]=d,p}function Ts(s,o){s.push(0,0,0,0,0,0,0,0,o)}function Ea(s,o){return-1===s.injectorIndex||s.parent&&s.parent.injectorIndex===s.injectorIndex||null===o[s.injectorIndex+8]?-1:s.injectorIndex}function li(s,o){if(s.parent&&-1!==s.parent.injectorIndex)return s.parent.injectorIndex;let u=0,c=null,d=o;for(;null!==d;){const p=d[1],v=p.type;if(c=2===v?p.declTNode:1===v?d[6]:null,null===c)return-1;if(u++,d=d[15],-1!==c.injectorIndex)return c.injectorIndex|u<<16}return-1}function uo(s,o,u){!function $o(s,o,u){let c;"string"==typeof u?c=u.charCodeAt(0)||0:u.hasOwnProperty(ht)&&(c=u[ht]),null==c&&(c=u[ht]=wd++);const d=255&c;o.data[s+(d>>5)]|=1<<d}(s,o,u)}function Qi(s,o,u){if(u&lt.Optional)return s;we(o,"NodeInjector")}function Ql(s,o,u,c){if(u&lt.Optional&&void 0===c&&(c=null),0==(u&(lt.Self|lt.Host))){const d=s[9],p=Yn(void 0);try{return d?d.get(o,c,u&lt.Optional):ri(o,c,u&lt.Optional)}finally{Yn(p)}}return Qi(c,o,u)}function lo(s,o,u,c=lt.Default,d){if(null!==s){const p=function Ca(s){if("string"==typeof s)return s.charCodeAt(0)||0;const o=s.hasOwnProperty(ht)?s[ht]:void 0;return"number"==typeof o?o>=0?255&o:Jl:o}(u);if("function"==typeof p){if(!Wl(o,s,c))return c&lt.Host?Qi(d,u,c):Ql(o,u,c,d);try{const v=p(c);if(null!=v||c&lt.Optional)return v;we(u)}finally{fd()}}else if("number"==typeof p){let v=null,C=Ea(s,o),I=-1,A=c&lt.Host?o[16][6]:null;for((-1===C||c&lt.SkipSelf)&&(I=-1===C?li(s,o):o[C+8],-1!==I&&sr(c,!1)?(v=o[1],C=mn(I),o=xi(I,o)):C=-1);-1!==C;){const R=o[1];if(ru(p,C,R.data)){const V=Ed(C,o,u,v,c,A);if(V!==Ji)return V}I=o[C+8],-1!==I&&sr(c,o[1].data[C+8]===A)&&ru(p,C,o)?(v=R,C=mn(I),o=xi(I,o)):C=-1}}}return Ql(o,u,c,d)}const Ji={};function Jl(){return new Mi(Cn(),Ie())}function Ed(s,o,u,c,d,p){const v=o[1],C=v.data[s+8],R=Go(C,v,u,null==c?Ys(C)&&Wu:c!=v&&0!=(3&C.type),d&lt.Host&&p===C);return null!==R?Ri(o,v,R,C):Ji}function Go(s,o,u,c,d){const p=s.providerIndexes,v=o.data,C=1048575&p,I=s.directiveStart,R=p>>20,H=d?C+R:s.directiveEnd;for(let Y=c?C:C+R;Y<H;Y++){const ve=v[Y];if(Y<I&&u===ve||Y>=I&&ve.type===u)return Y}if(d){const Y=v[I];if(Y&&Gr(Y)&&Y.type===u)return I}return null}function Ri(s,o,u,c){let d=s[u];const p=o.data;if(function md(s){return s instanceof va}(d)){const v=d;v.resolving&&function nt(s,o){const u=o?`. Dependency path: ${o.join(" > ")} > ${s}`:"";throw new Oe(-200,`Circular dependency in DI detected for ${s}${u}`)}(Ce(p[u]));const C=Yr(v.canSeeViewProviders);v.resolving=!0;const I=v.injectImpl?Yn(v.injectImpl):null;Wl(s,c,lt.Default);try{d=s[u]=v.factory(void 0,p,s,c),o.firstCreatePass&&u>=c.directiveStart&&function Kl(s,o,u){const{ngOnChanges:c,ngOnInit:d,ngDoCheck:p}=o.type.prototype;if(c){const v=Za(o);(u.preOrderHooks||(u.preOrderHooks=[])).push(s,v),(u.preOrderCheckHooks||(u.preOrderCheckHooks=[])).push(s,v)}d&&(u.preOrderHooks||(u.preOrderHooks=[])).push(0-s,d),p&&((u.preOrderHooks||(u.preOrderHooks=[])).push(s,p),(u.preOrderCheckHooks||(u.preOrderCheckHooks=[])).push(s,p))}(u,p[u],o)}finally{null!==I&&Yn(I),Yr(C),v.resolving=!1,fd()}}return d}function ru(s,o,u){return!!(u[o+(s>>5)]&1<<s)}function sr(s,o){return!(s&lt.Self||s&lt.Host&&o)}class Mi{constructor(o,u){this._tNode=o,this._lView=u}get(o,u,c){return lo(this._tNode,this._lView,o,c,u)}}function Cd(s){return vn(()=>{const o=s.prototype.constructor,u=o[Je]||bn(o),c=Object.prototype;let d=Object.getPrototypeOf(s.prototype).constructor;for(;d&&d!==c;){const p=d[Je]||bn(d);if(p&&p!==u)return p;d=Object.getPrototypeOf(d)}return p=>new p})}function bn(s){return qe(s)?()=>{const o=bn(X(s));return o&&o()}:Wr(s)}function Ia(s){return function nu(s,o){if("class"===o)return s.classes;if("style"===o)return s.styles;const u=s.attrs;if(u){const c=u.length;let d=0;for(;d<c;){const p=u[d];if(pr(p))break;if(0===p)d+=2;else if("number"==typeof p)for(d++;d<c&&"string"==typeof u[d];)d++;else{if(p===o)return u[d+1];d+=2}}}return null}(Cn(),s)}const ba="__parameters__";function Nn(s,o,u){return vn(()=>{const c=function es(s){return function(...u){if(s){const c=s(...u);for(const d in c)this[d]=c[d]}}}(o);function d(...p){if(this instanceof d)return c.apply(this,p),this;const v=new d(...p);return C.annotation=v,C;function C(I,A,R){const V=I.hasOwnProperty(ba)?I[ba]:Object.defineProperty(I,ba,{value:[]})[ba];for(;V.length<=R;)V.push(null);return(V[R]=V[R]||[]).push(v),I}}return u&&(d.prototype=Object.create(u.prototype)),d.prototype.ngMetadataName=s,d.annotationCls=d,d})}class Pn{constructor(o,u){this._desc=o,this.ngMetadataName="InjectionToken",this.\u0275prov=void 0,"number"==typeof u?this.__NG_ELEMENT_ID__=u:void 0!==u&&(this.\u0275prov=Xt({token:this,providedIn:u.providedIn||"root",factory:u.factory}))}toString(){return`InjectionToken ${this._desc}`}}const wg=new Pn("AnalyzeForEntryComponents");function mr(s,o){void 0===o&&(o=s);for(let u=0;u<s.length;u++){let c=s[u];Array.isArray(c)?(o===s&&(o=s.slice(0,u)),mr(c,o)):o!==s&&o.push(c)}return o}function ci(s,o){s.forEach(u=>Array.isArray(u)?ci(u,o):o(u))}function tc(s,o,u){o>=s.length?s.push(u):s.splice(o,0,u)}function xs(s,o){return o>=s.length-1?s.pop():s.splice(o,1)[0]}function Jn(s,o,u){let c=fo(s,o);return c>=0?s[1|c]=u:(c=~c,function nc(s,o,u,c){let d=s.length;if(d==o)s.push(u,c);else if(1===d)s.push(c,s[0]),s[0]=u;else{for(d--,s.push(s[d-1],s[d]);d>o;)s[d]=s[d-2],d--;s[o]=u,s[o+1]=c}}(s,c,o,u)),c}function sc(s,o){const u=fo(s,o);if(u>=0)return s[1|u]}function fo(s,o){return function Wo(s,o,u){let c=0,d=s.length>>u;for(;d!==c;){const p=c+(d-c>>1),v=s[p<<u];if(o===v)return p<<u;v>o?d=p:c=p+1}return~(d<<u)}(s,o,1)}const qo={},Ta="__NG_DI_FLAG__",Zu="ngTempTokenPath",T=/\n/gm,U="__source",Z=me({provide:String,useValue:me});let te;function xe(s){const o=te;return te=s,o}function Re(s,o=lt.Default){if(void 0===te)throw new Oe(203,"");return null===te?ri(s,void 0,o):te.get(s,o&lt.Optional?null:void 0,o)}function Ye(s,o=lt.Default){return(function nr(){return $r}()||Re)(X(s),o)}const Mt=Ye;function bt(s){const o=[];for(let u=0;u<s.length;u++){const c=X(s[u]);if(Array.isArray(c)){if(0===c.length)throw new Oe(900,"");let d,p=lt.Default;for(let v=0;v<c.length;v++){const C=c[v],I=kn(C);"number"==typeof I?-1===I?d=C.token:p|=I:d=C}o.push(Ye(d,p))}else o.push(Ye(c))}return o}function Gn(s,o){return s[Ta]=o,s.prototype[Ta]=o,s}function kn(s){return s[Ta]}const kr=Gn(Nn("Inject",s=>({token:s})),-1),hi=Gn(Nn("Optional"),8),Ko=Gn(Nn("SkipSelf"),4);class Nd{constructor(o){this.changingThisBreaksApplicationSecurity=o}toString(){return`SafeValue must use [property]=binding: ${this.changingThisBreaksApplicationSecurity} (see https://g.co/ng/security#xss)`}}function po(s){return s instanceof Nd?s.changingThisBreaksApplicationSecurity:s}const go=/^(?:(?:https?|mailto|ftp|tel|file|sms):|[^&:/?#]*(?:[/?#]|$))/gi,ff=/^data:(?:image\/(?:bmp|gif|jpeg|jpg|png|tiff|webp)|video\/(?:mpeg|mp4|ogg|webm)|audio\/(?:mp3|oga|ogg|opus));base64,[a-z0-9+\/]+=*$/i;var en=(()=>((en=en||{})[en.NONE=0]="NONE",en[en.HTML=1]="HTML",en[en.STYLE=2]="STYLE",en[en.SCRIPT=3]="SCRIPT",en[en.URL=4]="URL",en[en.RESOURCE_URL=5]="RESOURCE_URL",en))();function el(s){const o=function Ma(){const s=Ie();return s&&s[12]}();return o?o.sanitize(en.URL,s)||"":function xa(s,o){const u=function Qu(s){return s instanceof Nd&&s.getTypeName()||null}(s);if(null!=u&&u!==o){if("ResourceURL"===u&&"URL"===o)return!0;throw new Error(`Required a safe ${o}, got a ${u} (see https://g.co/ng/security#xss)`)}return u===o}(s,"URL")?po(s):function Ju(s){return(s=String(s)).match(go)||s.match(ff)?s:"unsafe:"+s}(pe(s))}const If="__ngContext__";function Or(s,o){s[If]=o}function bf(s){const o=function uu(s){return s[If]||null}(s);return o?Array.isArray(o)?o:o.lView:null}function du(s){return s.ngOriginalError}function Fg(s,...o){s.error(...o)}class Ar{constructor(){this._console=console}handleError(o){const u=this._findOriginalError(o),c=function by(s){return s&&s.ngErrorLogger||Fg}(o);c(this._console,"ERROR",o),u&&c(this._console,"ORIGINAL ERROR",u)}_findOriginalError(o){let u=o&&du(o);for(;u&&du(u);)u=du(u);return u||null}}const Ay=(()=>("undefined"!=typeof requestAnimationFrame&&requestAnimationFrame||setTimeout).bind(Gt))();function g(s){return s instanceof Function?s():s}var oe=(()=>((oe=oe||{})[oe.Important=1]="Important",oe[oe.DashCase=2]="DashCase",oe))();function Xe(s,o){return undefined(s,o)}function On(s){const o=s[3];return oi(o)?o[3]:o}function tl(s){return Nf(s[13])}function nl(s){return Nf(s[4])}function Nf(s){for(;null!==s&&!oi(s);)s=s[4];return s}function Na(s,o,u,c,d){if(null!=c){let p,v=!1;oi(c)?p=c:Ti(c)&&(v=!0,c=c[0]);const C=on(c);0===s&&null!==u?null==d?Fy(o,u,C):Ms(o,u,C,d||null,!0):1===s&&null!==u?Ms(o,u,C,d||null,!0):2===s?function By(s,o,u){const c=Of(s,o);c&&function CT(s,o,u,c){gn(s)?s.removeChild(o,u,c):o.removeChild(u)}(s,c,o,u)}(o,C,v):3===s&&o.destroyNode(C),null!=p&&function DT(s,o,u,c,d){const p=u[7];p!==on(u)&&Na(o,s,c,p,d);for(let C=10;C<u.length;C++){const I=u[C];jg(I[1],I,s,o,c,p)}}(o,s,p,u,d)}}function Bd(s,o,u){if(gn(s))return s.createElement(o,u);{const c=null!==u?function Pu(s){const o=s.toLowerCase();return"svg"===o?"http://www.w3.org/2000/svg":"math"===o?"http://www.w3.org/1998/MathML/":null}(u):null;return null===c?s.createElement(o):s.createElementNS(c,o)}}function FE(s,o){const u=s[9],c=u.indexOf(o),d=o[3];1024&o[2]&&(o[2]&=-1025,ro(d,-1)),u.splice(c,1)}function Py(s,o){if(s.length<=10)return;const u=10+o,c=s[u];if(c){const d=c[17];null!==d&&d!==s&&FE(d,c),o>0&&(s[u-1][4]=c[4]);const p=xs(s,10+o);!function Li(s,o){jg(s,o,o[11],2,null,null),o[0]=null,o[6]=null}(c[1],c);const v=p[19];null!==v&&v.detachView(p[1]),c[3]=null,c[4]=null,c[2]&=-129}return c}function ky(s,o){if(!(256&o[2])){const u=o[11];gn(u)&&u.destroyNode&&jg(s,o,u,3,null,null),function My(s){let o=s[13];if(!o)return Oy(s[1],s);for(;o;){let u=null;if(Ti(o))u=o[13];else{const c=o[10];c&&(u=c)}if(!u){for(;o&&!o[4]&&o!==s;)Ti(o)&&Oy(o[1],o),o=o[3];null===o&&(o=s),Ti(o)&&Oy(o[1],o),u=o&&o[4]}o=u}}(o)}}function Oy(s,o){if(!(256&o[2])){o[2]&=-129,o[2]|=256,function VE(s,o){let u;if(null!=s&&null!=(u=s.destroyHooks))for(let c=0;c<u.length;c+=2){const d=o[u[c]];if(!(d instanceof va)){const p=u[c+1];if(Array.isArray(p))for(let v=0;v<p.length;v+=2){const C=d[p[v]],I=p[v+1];try{I.call(C)}finally{}}else try{p.call(d)}finally{}}}}(s,o),function LE(s,o){const u=s.cleanup,c=o[7];let d=-1;if(null!==u)for(let p=0;p<u.length-1;p+=2)if("string"==typeof u[p]){const v=u[p+1],C="function"==typeof v?v(o):on(o[v]),I=c[d=u[p+2]],A=u[p+3];"boolean"==typeof A?C.removeEventListener(u[p],I,A):A>=0?c[d=A]():c[d=-A].unsubscribe(),p+=2}else{const v=c[d=u[p+1]];u[p].call(v)}if(null!==c){for(let p=d+1;p<c.length;p++)c[p]();o[7]=null}}(s,o),1===o[1].type&&gn(o[11])&&o[11].destroy();const u=o[17];if(null!==u&&oi(o[3])){u!==o[3]&&FE(u,o);const c=o[19];null!==c&&c.detachView(s)}}}function Ug(s,o,u){return function ET(s,o,u){let c=o;for(;null!==c&&40&c.type;)c=(o=c).parent;if(null===c)return u[0];if(2&c.flags){const d=s.data[c.directiveStart].encapsulation;if(d===$t.None||d===$t.Emulated)return null}return br(c,u)}(s,o.parent,u)}function Ms(s,o,u,c,d){gn(s)?s.insertBefore(o,u,c,d):o.insertBefore(u,c,d)}function Fy(s,o,u){gn(s)?s.appendChild(o,u):o.appendChild(u)}function UE(s,o,u,c,d){null!==c?Ms(s,o,u,c,d):Fy(s,o,u)}function Of(s,o){return gn(s)?s.parentNode(o):o.parentNode}let Ly=function jE(s,o,u){return 40&s.type?br(s,u):null};function Bg(s,o,u,c){const d=Ug(s,c,o),p=o[11],C=function BE(s,o,u){return Ly(s,o,u)}(c.parent||o[6],c,o);if(null!=d)if(Array.isArray(u))for(let I=0;I<u.length;I++)UE(p,d,u[I],C,!1);else UE(p,d,u,C,!1)}function Hd(s,o){if(null!==o){const u=o.type;if(3&u)return br(o,s);if(4&u)return Uy(-1,s[o.index]);if(8&u){const c=o.child;if(null!==c)return Hd(s,c);{const d=s[o.index];return oi(d)?Uy(-1,d):on(d)}}if(32&u)return Xe(o,s)()||on(s[o.index]);{const c=$E(s,o);return null!==c?Array.isArray(c)?c[0]:Hd(On(s[16]),c):Hd(s,o.next)}}return null}function $E(s,o){return null!==o?s[16][6].projection[o.projection]:null}function Uy(s,o){const u=10+s+1;if(u<o.length){const c=o[u],d=c[1].firstChild;if(null!==d)return Hd(c,d)}return o[7]}function jy(s,o,u,c,d,p,v){for(;null!=u;){const C=c[u.index],I=u.type;if(v&&0===o&&(C&&Or(on(C),c),u.flags|=4),64!=(64&u.flags))if(8&I)jy(s,o,u.child,c,d,p,!1),Na(o,s,d,C,p);else if(32&I){const A=Xe(u,c);let R;for(;R=A();)Na(o,s,d,R,p);Na(o,s,d,C,p)}else 16&I?GE(s,o,c,u,d,p):Na(o,s,d,C,p);u=v?u.projectionNext:u.next}}function jg(s,o,u,c,d,p){jy(u,c,s.firstChild,o,d,p,!1)}function GE(s,o,u,c,d,p){const v=u[16],I=v[6].projection[c.projection];if(Array.isArray(I))for(let A=0;A<I.length;A++)Na(o,s,d,I[A],p);else jy(s,o,I,v[3],d,p,!0)}function rl(s,o,u){gn(s)?s.setAttribute(o,"style",u):o.style.cssText=u}function mo(s,o,u){gn(s)?""===u?s.removeAttribute(o,"class"):s.setAttribute(o,"class",u):o.className=u}function qE(s,o,u){let c=s.length;for(;;){const d=s.indexOf(o,u);if(-1===d)return d;if(0===d||s.charCodeAt(d-1)<=32){const p=o.length;if(d+p===c||s.charCodeAt(d+p)<=32)return d}u=d+1}}const zE="ng-template";function ST(s,o,u){let c=0;for(;c<s.length;){let d=s[c++];if(u&&"class"===d){if(d=s[c],-1!==qE(d.toLowerCase(),o,0))return!0}else if(1===d){for(;c<s.length&&"string"==typeof(d=s[c++]);)if(d.toLowerCase()===o)return!0;return!1}}return!1}function KE(s){return 4===s.type&&s.value!==zE}function Hg(s,o,u){return o===(4!==s.type||u?s.value:zE)}function il(s,o,u){let c=4;const d=s.attrs||[],p=function $g(s){for(let o=0;o<s.length;o++)if(pr(s[o]))return o;return s.length}(d);let v=!1;for(let C=0;C<o.length;C++){const I=o[C];if("number"!=typeof I){if(!v)if(4&c){if(c=2|1&c,""!==I&&!Hg(s,I,u)||""===I&&1===o.length){if(_o(c))return!1;v=!0}}else{const A=8&c?I:o[++C];if(8&c&&null!==s.attrs){if(!ST(s.attrs,A,u)){if(_o(c))return!1;v=!0}continue}const V=pi(8&c?"class":I,d,KE(s),u);if(-1===V){if(_o(c))return!1;v=!0;continue}if(""!==A){let H;H=V>p?"":d[V+1].toLowerCase();const Y=8&c?H:null;if(Y&&-1!==qE(Y,A,0)||2&c&&A!==H){if(_o(c))return!1;v=!0}}}}else{if(!v&&!_o(c)&&!_o(I))return!1;if(v&&_o(I))continue;v=!1,c=I|1&c}}return _o(c)||v}function _o(s){return 0==(1&s)}function pi(s,o,u,c){if(null===o)return-1;let d=0;if(c||!u){let p=!1;for(;d<o.length;){const v=o[d];if(v===s)return d;if(3===v||6===v)p=!0;else{if(1===v||2===v){let C=o[++d];for(;"string"==typeof C;)C=o[++d];continue}if(4===v)break;if(0===v){d+=4;continue}}d+=p?1:2}return-1}return function ZE(s,o){let u=s.indexOf(4);if(u>-1)for(u++;u<s.length;){const c=s[u];if("number"==typeof c)return-1;if(c===o)return u;u++}return-1}(o,s)}function hu(s,o,u=!1){for(let c=0;c<o.length;c++)if(il(s,o[c],u))return!0;return!1}function Hy(s,o){return s?":not("+o.trim()+")":o}function QE(s){let o=s[0],u=1,c=2,d="",p=!1;for(;u<s.length;){let v=s[u];if("string"==typeof v)if(2&c){const C=s[++u];d+="["+v+(C.length>0?'="'+C+'"':"")+"]"}else 8&c?d+="."+v:4&c&&(d+=" "+v);else""!==d&&!_o(v)&&(o+=Hy(p,d),d=""),c=v,p=p||!_o(c);u++}return""!==d&&(o+=Hy(p,d)),o}const St={};function $y(s){Ff(Vt(),Ie(),Tr()+s,Bu())}function Ff(s,o,u,c){if(!c)if(3==(3&o[2])){const p=s.preOrderCheckHooks;null!==p&&tu(o,p,u)}else{const p=s.preOrderHooks;null!==p&&Gu(o,p,0,u)}ao(u)}function Lf(s,o){return s<<17|o<<2}function yo(s){return s>>17&32767}function Gg(s){return 2|s}function Pa(s){return(131068&s)>>2}function Vf(s,o){return-131069&s|o<<2}function Uf(s){return 1|s}function VT(s,o){const u=s.contentQueries;if(null!==u)for(let c=0;c<u.length;c+=2){const d=u[c],p=u[c+1];if(-1!==p){const v=s.data[p];Gl(d),v.contentQueries(2,o[p],p)}}}function Jg(s,o,u,c,d,p,v,C,I,A){const R=o.blueprint.slice();return R[0]=d,R[2]=140|c,no(R),R[3]=R[15]=s,R[8]=u,R[10]=v||s&&s[10],R[11]=C||s&&s[11],R[12]=I||s&&s[12]||null,R[9]=A||s&&s[9]||null,R[6]=p,R[16]=2==o.type?s[16]:R,R}function ol(s,o,u,c,d){let p=s.data[o];if(null===p)p=function Xy(s,o,u,c,d){const p=_a(),v=Vl(),I=s.data[o]=function rv(s,o,u,c,d,p){return{type:u,index:c,insertBeforeIndex:null,injectorIndex:o?o.injectorIndex:-1,directiveStart:-1,directiveEnd:-1,directiveStylingLast:-1,propertyBindings:null,flags:0,providerIndexes:0,value:d,attrs:p,mergedAttrs:null,localNames:null,initialInputs:void 0,inputs:null,outputs:null,tViews:null,next:null,projectionNext:null,child:null,parent:o,projection:null,styles:null,stylesWithoutHost:null,residualStyles:void 0,classes:null,classesWithoutHost:null,residualClasses:void 0,classBindings:0,styleBindings:0}}(0,v?p:p&&p.parent,u,o,c,d);return null===s.firstChild&&(s.firstChild=I),null!==p&&(v?null==p.child&&null!==I.parent&&(p.child=I):null===p.next&&(p.next=I)),I}(s,o,u,c,d),function jl(){return ft.lFrame.inI18n}()&&(p.flags|=64);else if(64&p.type){p.type=u,p.value=c,p.attrs=d;const v=function ya(){const s=ft.lFrame,o=s.currentTNode;return s.isParent?o:o.parent}();p.injectorIndex=null===v?-1:v.injectorIndex}return Kr(p,!0),p}function bc(s,o,u,c){if(0===u)return-1;const d=o.length;for(let p=0;p<u;p++)o.push(c),s.blueprint.push(c),s.data.push(null);return d}function Dc(s,o,u){Uo(o);try{const c=s.viewQuery;null!==c&&wv(1,c,u);const d=s.template;null!==d&&Xg(s,o,d,1,u),s.firstCreatePass&&(s.firstCreatePass=!1),s.staticContentQueries&&VT(s,o),s.staticViewQueries&&wv(2,s.viewQuery,u);const p=s.components;null!==p&&function rC(s,o){for(let u=0;u<o.length;u++)hC(s,o[u])}(o,p)}catch(c){throw s.firstCreatePass&&(s.incompleteFirstPass=!0,s.firstCreatePass=!1),c}finally{o[2]&=-5,jo()}}function al(s,o,u,c){const d=o[2];if(256==(256&d))return;Uo(o);const p=Bu();try{no(o),function ju(s){return ft.lFrame.bindingIndex=s}(s.bindingStartIndex),null!==u&&Xg(s,o,u,2,c);const v=3==(3&d);if(!p)if(v){const A=s.preOrderCheckHooks;null!==A&&tu(o,A,null)}else{const A=s.preOrderHooks;null!==A&&Gu(o,A,0,null),Hn(o,0)}if(function dC(s){for(let o=tl(s);null!==o;o=nl(o)){if(!o[2])continue;const u=o[9];for(let c=0;c<u.length;c++){const d=u[c],p=d[3];0==(1024&d[2])&&ro(p,1),d[2]|=1024}}}(o),function GT(s){for(let o=tl(s);null!==o;o=nl(o))for(let u=10;u<o.length;u++){const c=o[u],d=c[1];Is(c)&&al(d,c,d.template,c[8])}}(o),null!==s.contentQueries&&VT(s,o),!p)if(v){const A=s.contentCheckHooks;null!==A&&tu(o,A)}else{const A=s.contentHooks;null!==A&&Gu(o,A,1),Hn(o,1)}!function LT(s,o){const u=s.hostBindingOpCodes;if(null!==u)try{for(let c=0;c<u.length;c++){const d=u[c];if(d<0)ao(~d);else{const p=d,v=u[++c],C=u[++c];$u(v,p),C(2,o[p])}}}finally{ao(-1)}}(s,o);const C=s.components;null!==C&&function UT(s,o){for(let u=0;u<o.length;u++)fv(s,o[u])}(o,C);const I=s.viewQuery;if(null!==I&&wv(2,I,c),!p)if(v){const A=s.viewCheckHooks;null!==A&&tu(o,A)}else{const A=s.viewHooks;null!==A&&Gu(o,A,2),Hn(o,2)}!0===s.firstUpdatePass&&(s.firstUpdatePass=!1),p||(o[2]&=-73),1024&o[2]&&(o[2]&=-1025,ro(o[3],-1))}finally{jo()}}function $N(s,o,u,c){const d=o[10],p=!Bu(),v=to(o);try{p&&!v&&d.begin&&d.begin(),v&&Dc(s,o,c),al(s,o,u,c)}finally{p&&!v&&d.end&&d.end()}}function Xg(s,o,u,c,d){const p=Tr(),v=2&c;try{ao(-1),v&&o.length>20&&Ff(s,o,20,Bu()),u(c,d)}finally{ao(p)}}function qd(s,o,u){!Uu()||(function qN(s,o,u,c){const d=u.directiveStart,p=u.directiveEnd;s.firstCreatePass||In(u,o),Or(c,o);const v=u.initialInputs;for(let C=d;C<p;C++){const I=s.data[C],A=Gr(I);A&&$T(o,u,I);const R=Ri(o,s,C,u);Or(R,o),null!==v&&KN(0,C-d,R,I,0,v),A&&(Dr(u.index,o)[8]=R)}}(s,o,u,br(u,o)),128==(128&u.flags)&&function zN(s,o,u){const c=u.directiveStart,d=u.directiveEnd,v=u.index,C=function Hl(){return ft.lFrame.currentDirectiveIndex}();try{ao(v);for(let I=c;I<d;I++){const A=s.data[I],R=o[I];Xa(I),(null!==A.hostBindings||0!==A.hostVars||null!==A.hostAttrs)&&BT(A,R)}}finally{ao(-1),Xa(C)}}(s,o,u))}function ul(s,o,u=br){const c=o.localNames;if(null!==c){let d=o.index+1;for(let p=0;p<c.length;p+=2){const v=c[p+1],C=-1===v?u(o,s):s[v];s[d++]=C}}}function zd(s){const o=s.tView;return null===o||o.incompleteFirstPass?s.tView=em(1,null,s.template,s.decls,s.vars,s.directiveDefs,s.pipeDefs,s.viewQuery,s.schemas,s.consts):o}function em(s,o,u,c,d,p,v,C,I,A){const R=20+c,V=R+d,H=function ev(s,o){const u=[];for(let c=0;c<o;c++)u.push(c<s?null:St);return u}(R,V),Y="function"==typeof A?A():A;return H[1]={type:s,blueprint:H,template:u,queries:null,viewQuery:C,declTNode:o,data:H.slice().fill(null,R),bindingStartIndex:R,expandoStartIndex:V,hostBindingOpCodes:null,firstCreatePass:!0,firstUpdatePass:!0,staticViewQueries:!1,staticContentQueries:!1,preOrderHooks:null,preOrderCheckHooks:null,contentHooks:null,contentCheckHooks:null,viewHooks:null,viewCheckHooks:null,destroyHooks:null,cleanup:null,contentQueries:null,components:null,directiveRegistry:"function"==typeof p?p():p,pipeRegistry:"function"==typeof v?v():v,firstChild:null,schemas:I,consts:Y,incompleteFirstPass:!1}}function jf(s,o,u,c){const d=tm(o);null===u?d.push(c):(d.push(u),s.firstCreatePass&&fC(s).push(c,d.length-1))}function Hf(s,o,u){for(let c in s)if(s.hasOwnProperty(c)){const d=s[c];(u=null===u?{}:u).hasOwnProperty(c)?u[c].push(o,d):u[c]=[o,d]}return u}function Gf(s,o,u,c){let d=!1;if(Uu()){const p=function jT(s,o,u){const c=s.directiveRegistry;let d=null;if(c)for(let p=0;p<c.length;p++){const v=c[p];hu(u,v.selectors,!1)&&(d||(d=[]),uo(In(u,o),s,v.type),Gr(v)?(uv(s,u),d.unshift(v)):d.push(v))}return d}(s,o,u),v=null===c?null:{"":-1};if(null!==p){d=!0,lv(u,s.data.length,p.length);for(let R=0;R<p.length;R++){const V=p[R];V.providersResolver&&V.providersResolver(V)}let C=!1,I=!1,A=bc(s,o,p.length,null);for(let R=0;R<p.length;R++){const V=p[R];u.mergedAttrs=gr(u.mergedAttrs,V.hostAttrs),cv(s,u,o,A,V),lC(A,V,v),null!==V.contentQueries&&(u.flags|=8),(null!==V.hostBindings||null!==V.hostAttrs||0!==V.hostVars)&&(u.flags|=128);const H=V.type.prototype;!C&&(H.ngOnChanges||H.ngOnInit||H.ngDoCheck)&&((s.preOrderHooks||(s.preOrderHooks=[])).push(u.index),C=!0),!I&&(H.ngOnChanges||H.ngDoCheck)&&((s.preOrderCheckHooks||(s.preOrderCheckHooks=[])).push(u.index),I=!0),A++}!function sC(s,o){const c=o.directiveEnd,d=s.data,p=o.attrs,v=[];let C=null,I=null;for(let A=o.directiveStart;A<c;A++){const R=d[A],V=R.inputs,H=null===p||KE(o)?null:cC(V,p);v.push(H),C=Hf(V,A,C),I=Hf(R.outputs,A,I)}null!==C&&(C.hasOwnProperty("class")&&(o.flags|=16),C.hasOwnProperty("style")&&(o.flags|=32)),o.initialInputs=v,o.inputs=C,o.outputs=I}(s,u)}v&&function HT(s,o,u){if(o){const c=s.localNames=[];for(let d=0;d<o.length;d+=2){const p=u[o[d+1]];if(null==p)throw new Oe(-301,!1);c.push(o[d],p)}}}(u,c,v)}return u.mergedAttrs=gr(u.mergedAttrs,u.attrs),d}function av(s,o,u,c,d,p){const v=p.hostBindings;if(v){let C=s.hostBindingOpCodes;null===C&&(C=s.hostBindingOpCodes=[]);const I=~o.index;(function WN(s){let o=s.length;for(;o>0;){const u=s[--o];if("number"==typeof u&&u<0)return u}return 0})(C)!=I&&C.push(I),C.push(c,d,v)}}function BT(s,o){null!==s.hostBindings&&s.hostBindings(1,o)}function uv(s,o){o.flags|=2,(s.components||(s.components=[])).push(o.index)}function lC(s,o,u){if(u){if(o.exportAs)for(let c=0;c<o.exportAs.length;c++)u[o.exportAs[c]]=s;Gr(o)&&(u[""]=s)}}function lv(s,o,u){s.flags|=1,s.directiveStart=o,s.directiveEnd=o+u,s.providerIndexes=o}function cv(s,o,u,c,d){s.data[c]=d;const p=d.factory||(d.factory=Wr(d.type)),v=new va(p,Gr(d),null);s.blueprint[c]=v,u[c]=v,av(s,o,0,c,bc(s,u,d.hostVars,St),d)}function $T(s,o,u){const c=br(o,s),d=zd(u),p=s[10],v=Tc(s,Jg(s,d,null,u.onPush?64:16,c,o,p,p.createRenderer(c,u),null,null));s[o.index]=v}function ea(s,o,u,c,d,p){const v=br(s,o);!function dv(s,o,u,c,d,p,v){if(null==p)gn(s)?s.removeAttribute(o,d,u):o.removeAttribute(d);else{const C=null==v?pe(p):v(p,c||"",d);gn(s)?s.setAttribute(o,d,C,u):u?o.setAttributeNS(u,d,C):o.setAttribute(d,C)}}(o[11],v,p,s.value,u,c,d)}function KN(s,o,u,c,d,p){const v=p[o];if(null!==v){const C=c.setInput;for(let I=0;I<v.length;){const A=v[I++],R=v[I++],V=v[I++];null!==C?c.setInput(u,V,A,R):u[R]=V}}}function cC(s,o){let u=null,c=0;for(;c<o.length;){const d=o[c];if(0!==d)if(5!==d){if("number"==typeof d)break;s.hasOwnProperty(d)&&(null===u&&(u=[]),u.push(d,s[d],o[c+1])),c+=2}else c+=2;else c+=4}return u}function hv(s,o,u,c){return new Array(s,!0,!1,o,null,0,c,u,null,null)}function fv(s,o){const u=Dr(o,s);if(Is(u)){const c=u[1];80&u[2]?al(c,u,c.template,u[8]):u[5]>0&&pv(u)}}function pv(s){for(let c=tl(s);null!==c;c=nl(c))for(let d=10;d<c.length;d++){const p=c[d];if(1024&p[2]){const v=p[1];al(v,p,v.template,p[8])}else p[5]>0&&pv(p)}const u=s[1].components;if(null!==u)for(let c=0;c<u.length;c++){const d=Dr(u[c],s);Is(d)&&d[5]>0&&pv(d)}}function hC(s,o){const u=Dr(o,s),c=u[1];(function WT(s,o){for(let u=o.length;u<s.blueprint.length;u++)o.push(s.blueprint[u])})(c,u),Dc(c,u,u[8])}function Tc(s,o){return s[13]?s[14][4]=o:s[13]=o,s[14]=o,o}function gv(s){for(;s;){s[2]|=64;const o=On(s);if(Xh(s)&&!o)return s;s=o}return null}function Wf(s,o,u){const c=o[10];c.begin&&c.begin();try{al(s,o,s.template,u)}catch(d){throw Ev(o,d),d}finally{c.end&&c.end()}}function yv(s){!function _v(s){for(let o=0;o<s.components.length;o++){const u=s.components[o],c=bf(u),d=c[1];$N(d,c,d.template,u)}}(s[8])}function wv(s,o,u){Gl(0),o(s,u)}const KT=(()=>Promise.resolve(null))();function tm(s){return s[7]||(s[7]=[])}function fC(s){return s.cleanup||(s.cleanup=[])}function Ev(s,o){const u=s[9],c=u?u.get(Ar,null):null;c&&c.handleError(o)}function gC(s,o,u,c,d){for(let p=0;p<u.length;){const v=u[p++],C=u[p++],I=o[v],A=s.data[v];null!==A.setInput?A.setInput(I,d,c,C):I[C]=d}}function ll(s,o,u){const c=Vo(o,s);!function Ud(s,o,u){gn(s)?s.setValue(o,u):o.textContent=u}(s[11],c,u)}function Kd(s,o,u){let c=u?s.styles:null,d=u?s.classes:null,p=0;if(null!==o)for(let v=0;v<o.length;v++){const C=o[v];"number"==typeof C?p=C:1==p?d=le(d,C):2==p&&(c=le(c,C+": "+o[++v]+";"))}u?s.styles=c:s.stylesWithoutHost=c,u?s.classes=d:s.classesWithoutHost=d}const nm=new Pn("INJECTOR",-1);class cl{get(o,u=qo){if(u===qo){const c=new Error(`NullInjectorError: No provider for ${he(o)}!`);throw c.name="NullInjectorError",c}return u}}const Cv=new Pn("Set Injector scope."),Zd={},YT={};let rm;function _C(){return void 0===rm&&(rm=new cl),rm}function yC(s,o=null,u=null,c){const d=im(s,o,u,c);return d._resolveInjectorDefTypes(),d}function im(s,o=null,u=null,c){return new vC(s,u,o||_C(),c)}class vC{constructor(o,u,c,d=null){this.parent=c,this.records=new Map,this.injectorDefTypes=new Set,this.onDestroy=new Set,this._destroyed=!1;const p=[];u&&ci(u,C=>this.processProvider(C,o,u)),ci([o],C=>this.processInjectorType(C,[],p)),this.records.set(nm,Yd(void 0,this));const v=this.records.get(Cv);this.scope=null!=v?v.value:null,this.source=d||("object"==typeof o?null:he(o))}get destroyed(){return this._destroyed}destroy(){this.assertNotDestroyed(),this._destroyed=!0;try{this.onDestroy.forEach(o=>o.ngOnDestroy())}finally{this.records.clear(),this.onDestroy.clear(),this.injectorDefTypes.clear()}}get(o,u=qo,c=lt.Default){this.assertNotDestroyed();const d=xe(this),p=Yn(void 0);try{if(!(c&lt.SkipSelf)){let C=this.records.get(o);if(void 0===C){const I=function XN(s){return"function"==typeof s||"object"==typeof s&&s instanceof Pn}(o)&&Ht(o);C=I&&this.injectableDefInScope(I)?Yd(Iv(o),Zd):null,this.records.set(o,C)}if(null!=C)return this.hydrate(o,C)}return(c&lt.Self?_C():this.parent).get(o,u=c&lt.Optional&&u===qo?null:u)}catch(v){if("NullInjectorError"===v.name){if((v[Zu]=v[Zu]||[]).unshift(he(o)),d)throw v;return function Sa(s,o,u,c){const d=s[Zu];throw o[U]&&d.unshift(o[U]),s.message=function zo(s,o,u,c=null){s=s&&"\n"===s.charAt(0)&&"\u0275"==s.charAt(1)?s.substr(2):s;let d=he(o);if(Array.isArray(o))d=o.map(he).join(" -> ");else if("object"==typeof o){let p=[];for(let v in o)if(o.hasOwnProperty(v)){let C=o[v];p.push(v+":"+("string"==typeof C?JSON.stringify(C):he(C)))}d=`{${p.join(", ")}}`}return`${u}${c?"("+c+")":""}[${d}]: ${s.replace(T,"\n  ")}`}("\n"+s.message,d,u,c),s.ngTokenPath=d,s[Zu]=null,s}(v,o,"R3InjectorError",this.source)}throw v}finally{Yn(p),xe(d)}}_resolveInjectorDefTypes(){this.injectorDefTypes.forEach(o=>this.get(o))}toString(){const o=[];return this.records.forEach((c,d)=>o.push(he(d))),`R3Injector[${o.join(", ")}]`}assertNotDestroyed(){if(this._destroyed)throw new Oe(205,!1)}processInjectorType(o,u,c){if(!(o=X(o)))return!1;let d=Nr(o);const p=null==d&&o.ngModule||void 0,v=void 0===p?o:p,C=-1!==c.indexOf(v);if(void 0!==p&&(d=Nr(p)),null==d)return!1;if(null!=d.imports&&!C){let R;c.push(v);try{ci(d.imports,V=>{this.processInjectorType(V,u,c)&&(void 0===R&&(R=[]),R.push(V))})}finally{}if(void 0!==R)for(let V=0;V<R.length;V++){const{ngModule:H,providers:Y}=R[V];ci(Y,ve=>this.processProvider(ve,H,Y||dt))}}this.injectorDefTypes.add(v);const I=Wr(v)||(()=>new v);this.records.set(v,Yd(I,Zd));const A=d.providers;if(null!=A&&!C){const R=o;ci(A,V=>this.processProvider(V,R,A))}return void 0!==p&&void 0!==o.providers}processProvider(o,u,c){let d=qf(o=X(o))?o:X(o&&o.provide);const p=function QT(s,o,u){return Dv(s)?Yd(void 0,s.useValue):Yd(bv(s),Zd)}(o);if(qf(o)||!0!==o.multi)this.records.get(d);else{let v=this.records.get(d);v||(v=Yd(void 0,Zd,!0),v.factory=()=>bt(v.multi),this.records.set(d,v)),d=o,v.multi.push(o)}this.records.set(d,p)}hydrate(o,u){return u.value===Zd&&(u.value=YT,u.value=u.factory()),"object"==typeof u.value&&u.value&&function XT(s){return null!==s&&"object"==typeof s&&"function"==typeof s.ngOnDestroy}(u.value)&&this.onDestroy.add(u.value),u.value}injectableDefInScope(o){if(!o.providedIn)return!1;const u=X(o.providedIn);return"string"==typeof u?"any"===u||u===this.scope:this.injectorDefTypes.has(u)}}function Iv(s){const o=Ht(s),u=null!==o?o.factory:Wr(s);if(null!==u)return u;if(s instanceof Pn)throw new Oe(204,!1);if(s instanceof Function)return function wC(s){const o=s.length;if(o>0)throw function Pi(s,o){const u=[];for(let c=0;c<s;c++)u.push(o);return u}(o,"?"),new Oe(204,!1);const u=function Hr(s){const o=s&&(s[zi]||s[ms]);if(o){const u=function Ws(s){if(s.hasOwnProperty("name"))return s.name;const o=(""+s).match(/^function\s*([^\s(]+)/);return null===o?"":o[1]}(s);return console.warn(`DEPRECATED: DI is instantiating a token "${u}" that inherits its @Injectable decorator but does not provide one itself.\nThis will become an error in a future version of Angular. Please add @Injectable() to the "${u}" class.`),o}return null}(s);return null!==u?()=>u.factory(s):()=>new s}(s);throw new Oe(204,!1)}function bv(s,o,u){let c;if(qf(s)){const d=X(s);return Wr(d)||Iv(d)}if(Dv(s))c=()=>X(s.useValue);else if(function EC(s){return!(!s||!s.useFactory)}(s))c=()=>s.useFactory(...bt(s.deps||[]));else if(function JT(s){return!(!s||!s.useExisting)}(s))c=()=>Ye(X(s.useExisting));else{const d=X(s&&(s.useClass||s.provide));if(!function JN(s){return!!s.deps}(s))return Wr(d)||Iv(d);c=()=>new d(...bt(s.deps))}return c}function Yd(s,o,u=!1){return{factory:s,value:o,multi:u?[]:void 0}}function Dv(s){return null!==s&&"object"==typeof s&&Z in s}function qf(s){return"function"==typeof s}let vo=(()=>{class s{static create(u,c){var d;if(Array.isArray(u))return yC({name:""},c,u,"");{const p=null!==(d=u.name)&&void 0!==d?d:"";return yC({name:p},u.parent,u.providers,p)}}}return s.THROW_IF_NOT_FOUND=qo,s.NULL=new cl,s.\u0275prov=Xt({token:s,providedIn:"any",factory:()=>Ye(nm)}),s.__NG_ELEMENT_ID__=-1,s})();function Nv(s,o){bs(bf(s)[1],Cn())}function kv(s){let o=function Pv(s){return Object.getPrototypeOf(s.prototype).constructor}(s.type),u=!0;const c=[s];for(;o;){let d;if(Gr(s))d=o.\u0275cmp||o.\u0275dir;else{if(o.\u0275cmp)throw new Oe(903,"");d=o.\u0275dir}if(d){if(u){c.push(d);const v=s;v.inputs=AC(s.inputs),v.declaredInputs=AC(s.declaredInputs),v.outputs=AC(s.outputs);const C=d.hostBindings;C&&oP(s,C);const I=d.viewQuery,A=d.contentQueries;if(I&&iP(s,I),A&&sP(s,A),se(s.inputs,d.inputs),se(s.declaredInputs,d.declaredInputs),se(s.outputs,d.outputs),Gr(d)&&d.data.animation){const R=s.data;R.animation=(R.animation||[]).concat(d.data.animation)}}const p=d.features;if(p)for(let v=0;v<p.length;v++){const C=p[v];C&&C.ngInherit&&C(s),C===kv&&(u=!1)}}o=Object.getPrototypeOf(o)}!function rP(s){let o=0,u=null;for(let c=s.length-1;c>=0;c--){const d=s[c];d.hostVars=o+=d.hostVars,d.hostAttrs=gr(d.hostAttrs,u=gr(u,d.hostAttrs))}}(c)}function AC(s){return s===cr?{}:s===dt?[]:s}function iP(s,o){const u=s.viewQuery;s.viewQuery=u?(c,d)=>{o(c,d),u(c,d)}:o}function sP(s,o){const u=s.contentQueries;s.contentQueries=u?(c,d,p)=>{o(c,d,p),u(c,d,p)}:o}function oP(s,o){const u=s.hostBindings;s.hostBindings=u?(c,d)=>{o(c,d),u(c,d)}:o}let um=null;function Qd(){if(!um){const s=Gt.Symbol;if(s&&s.iterator)um=s.iterator;else{const o=Object.getOwnPropertyNames(Map.prototype);for(let u=0;u<o.length;++u){const c=o[u];"entries"!==c&&"size"!==c&&Map.prototype[c]===Map.prototype.entries&&(um=c)}}}return um}function Sc(s){return!!Fv(s)&&(Array.isArray(s)||!(s instanceof Map)&&Qd()in s)}function Fv(s){return null!==s&&("function"==typeof s||"object"==typeof s)}function Ui(s,o,u){return!Object.is(s[o],u)&&(s[o]=u,!0)}function MC(s,o,u,c){const d=Ie();return Ui(d,so(),o)&&(Vt(),ea(Rn(),d,s,o,u,c)),MC}function Io(s,o,u,c,d,p,v,C){const I=Ie(),A=Vt(),R=s+20,V=A.firstCreatePass?function k(s,o,u,c,d,p,v,C,I){const A=o.consts,R=ol(o,s,4,v||null,zr(A,C));Gf(o,u,R,zr(A,I)),bs(o,R);const V=R.tViews=em(2,R,c,d,p,o.directiveRegistry,o.pipeRegistry,null,o.schemas,A);return null!==o.queries&&(o.queries.template(o,R),V.queries=o.queries.embeddedTView(R)),R}(R,A,I,o,u,c,d,p,v):A.data[R];Kr(V,!1);const H=I[11].createComment("");Bg(A,I,H,V),Or(H,I),Tc(I,I[R]=hv(H,I,H,V)),Su(V)&&qd(A,I,V),null!=v&&ul(I,V,C)}function Xf(s,o=lt.Default){const u=Ie();return null===u?Ye(s,o):lo(Cn(),u,X(s),o)}function sh(){throw new Error("invalid")}function oh(s,o,u){const c=Ie();return Ui(c,so(),o)&&function os(s,o,u,c,d,p,v,C){const I=br(o,u);let R,A=o.inputs;!C&&null!=A&&(R=A[c])?(gC(s,u,R,c,d),Ys(o)&&function aC(s,o){const u=Dr(o,s);16&u[2]||(u[2]|=64)}(u,o.index)):3&o.type&&(c=function oC(s){return"class"===s?"className":"for"===s?"htmlFor":"formaction"===s?"formAction":"innerHtml"===s?"innerHTML":"readonly"===s?"readOnly":"tabindex"===s?"tabIndex":s}(c),d=null!=v?v(d,o.value||"",c):d,gn(p)?p.setProperty(I,c,d):Zr(c)||(I.setProperty?I.setProperty(c,d):I[c]=d))}(Vt(),Rn(),c,s,o,c[11],u,!1),oh}function mm(s,o,u,c,d){const v=d?"class":"style";gC(s,u,o.inputs[v],v,c)}function ep(s,o,u,c){const d=Ie(),p=Vt(),v=20+s,C=d[11],I=d[v]=Bd(C,o,function ny(){return ft.lFrame.currentNamespace}()),A=p.firstCreatePass?function GC(s,o,u,c,d,p,v){const C=o.consts,A=ol(o,s,2,d,zr(C,p));return Gf(o,u,A,zr(C,v)),null!==A.attrs&&Kd(A,A.attrs,!1),null!==A.mergedAttrs&&Kd(A,A.mergedAttrs,!0),null!==o.queries&&o.queries.elementStart(o,A),A}(v,p,d,0,o,u,c):p.data[v];Kr(A,!0);const R=A.mergedAttrs;null!==R&&ct(C,I,R);const V=A.classes;null!==V&&mo(C,I,V);const H=A.styles;return null!==H&&rl(C,I,H),64!=(64&A.flags)&&Bg(p,d,I,A),0===function Ja(){return ft.lFrame.elementDepthCount}()&&Or(I,d),function Lu(){ft.lFrame.elementDepthCount++}(),Su(A)&&(qd(p,d,A),function Wd(s,o,u){if(ed(o)){const d=o.directiveEnd;for(let p=o.directiveStart;p<d;p++){const v=s.data[p];v.contentQueries&&v.contentQueries(1,u[p],p)}}}(p,A,d)),null!==c&&ul(d,A),ep}function tp(){let s=Cn();Vl()?function Ul(){ft.lFrame.isParent=!1}():(s=s.parent,Kr(s,!1));const o=s;!function Vu(){ft.lFrame.elementDepthCount--}();const u=Vt();return u.firstCreatePass&&(bs(u,s),ed(s)&&u.queries.elementEnd(s)),null!=o.classesWithoutHost&&function nf(s){return 0!=(16&s.flags)}(o)&&mm(u,o,Ie(),o.classesWithoutHost,!0),null!=o.stylesWithoutHost&&function vg(s){return 0!=(32&s.flags)}(o)&&mm(u,o,Ie(),o.stylesWithoutHost,!1),tp}function _m(s,o,u,c){return ep(s,o,u,c),tp(),_m}function vm(){return Ie()}function Hv(s){return!!s&&"function"==typeof s.then}function $v(s){return!!s&&"function"==typeof s.subscribe}const WC=$v;function rp(s,o,u,c){const d=Ie(),p=Vt(),v=Cn();return function qC(s,o,u,c,d,p,v,C){const I=Su(c),R=s.firstCreatePass&&fC(s),V=o[8],H=tm(o);let Y=!0;if(3&c.type||C){const He=br(c,o),Qe=C?C(He):He,be=H.length,pt=C?Kt=>C(on(Kt[c.index])):c.index;if(gn(u)){let Kt=null;if(!C&&I&&(Kt=function Gv(s,o,u,c){const d=s.cleanup;if(null!=d)for(let p=0;p<d.length-1;p+=2){const v=d[p];if(v===u&&d[p+1]===c){const C=o[7],I=d[p+2];return C.length>I?C[I]:null}"string"==typeof v&&(p+=2)}return null}(s,o,d,c.index)),null!==Kt)(Kt.__ngLastListenerFn__||Kt).__ngNextListenerFn__=p,Kt.__ngLastListenerFn__=p,Y=!1;else{p=Em(c,o,V,p,!1);const yn=u.listen(Qe,d,p);H.push(p,yn),R&&R.push(d,pt,be,be+1)}}else p=Em(c,o,V,p,!0),Qe.addEventListener(d,p,v),H.push(p),R&&R.push(d,pt,be,v)}else p=Em(c,o,V,p,!1);const ve=c.outputs;let ke;if(Y&&null!==ve&&(ke=ve[d])){const He=ke.length;if(He)for(let Qe=0;Qe<He;Qe+=2){const Ls=o[ke[Qe]][ke[Qe+1]].subscribe(p),bl=H.length;H.push(p,Ls),R&&R.push(d,c.index,bl,-(bl+1))}}}(p,d,d[11],v,s,o,!!u,c),rp}function zC(s,o,u,c){try{return!1!==u(c)}catch(d){return Ev(s,d),!1}}function Em(s,o,u,c,d){return function p(v){if(v===Function)return c;const C=2&s.flags?Dr(s.index,o):o;0==(32&o[2])&&gv(C);let I=zC(o,0,c,v),A=p.__ngNextListenerFn__;for(;A;)I=zC(o,0,A,v)&&I,A=A.__ngNextListenerFn__;return d&&!1===I&&(v.preventDefault(),v.returnValue=!1),I}}function KC(s=1){return function oo(s){return(ft.lFrame.contextLView=function ql(s,o){for(;s>0;)o=o[15],s--;return o}(s,ft.lFrame.contextLView))[8]}(s)}function Im(s,o,u,c,d){const p=s[u+1],v=null===o;let C=c?yo(p):Pa(p),I=!1;for(;0!==C&&(!1===I||v);){const R=s[C+1];wS(s[C],o)&&(I=!0,s[C+1]=c?Uf(R):Gg(R)),C=c?yo(R):Pa(R)}I&&(s[u+1]=c?Gg(p):Uf(p))}function wS(s,o){return null===s||null==o||(Array.isArray(s)?s[1]:s)===o||!(!Array.isArray(s)||"string"!=typeof o)&&fo(s,o)>=0}function bm(s,o){return function us(s,o,u,c){const d=Ie(),p=Vt(),v=function Ai(s){const o=ft.lFrame,u=o.bindingIndex;return o.bindingIndex=o.bindingIndex+s,u}(2);p.firstUpdatePass&&function hn(s,o,u,c){const d=s.data;if(null===d[u+1]){const p=d[Tr()],v=function Jv(s,o){return o>=s.expandoStartIndex}(s,u);(function Ns(s,o){return 0!=(s.flags&(o?16:32))})(p,c)&&null===o&&!v&&(o=!1),o=function an(s,o,u,c){const d=function eu(s){const o=ft.lFrame.currentDirectiveIndex;return-1===o?null:s[o]}(s);let p=c?o.residualClasses:o.residualStyles;if(null===d)0===(c?o.classBindings:o.styleBindings)&&(u=op(u=sp(null,s,o,u,c),o.attrs,c),p=null);else{const v=o.directiveStylingLast;if(-1===v||s[v]!==d)if(u=sp(d,s,o,u,c),null===p){let I=function Wt(s,o,u){const c=u?o.classBindings:o.styleBindings;if(0!==Pa(c))return s[yo(c)]}(s,o,c);void 0!==I&&Array.isArray(I)&&(I=sp(null,s,o,I[1],c),I=op(I,o.attrs,c),function _l(s,o,u,c){s[yo(u?o.classBindings:o.styleBindings)]=c}(s,o,c,I))}else p=function Dn(s,o,u){let c;const d=o.directiveEnd;for(let p=1+o.directiveStylingLast;p<d;p++)c=op(c,s[p].hostAttrs,u);return op(c,o.attrs,u)}(s,o,c)}return void 0!==p&&(c?o.residualClasses=p:o.residualStyles=p),u}(d,p,o,c),function vS(s,o,u,c,d,p){let v=p?o.classBindings:o.styleBindings,C=yo(v),I=Pa(v);s[c]=u;let R,A=!1;if(Array.isArray(u)){const V=u;R=V[1],(null===R||fo(V,R)>0)&&(A=!0)}else R=u;if(d)if(0!==I){const H=yo(s[C+1]);s[c+1]=Lf(H,C),0!==H&&(s[H+1]=Vf(s[H+1],c)),s[C+1]=function xT(s,o){return 131071&s|o<<17}(s[C+1],c)}else s[c+1]=Lf(C,0),0!==C&&(s[C+1]=Vf(s[C+1],c)),C=c;else s[c+1]=Lf(I,0),0===C?C=c:s[I+1]=Vf(s[I+1],c),I=c;A&&(s[c+1]=Gg(s[c+1])),Im(s,R,c,!0),Im(s,R,c,!1),function ah(s,o,u,c,d){const p=d?s.residualClasses:s.residualStyles;null!=p&&"string"==typeof o&&fo(p,o)>=0&&(u[c+1]=Uf(u[c+1]))}(o,R,s,c,p),v=Lf(C,I),p?o.classBindings=v:o.styleBindings=v}(d,p,o,u,v,c)}}(p,s,v,c),o!==St&&Ui(d,v,o)&&function jt(s,o,u,c,d,p,v,C){if(!(3&o.type))return;const I=s.data,A=I[C+1];Dm(function qy(s){return 1==(1&s)}(A)?mi(I,o,u,d,Pa(A),v):void 0)||(Dm(p)||function Wy(s){return 2==(2&s)}(A)&&(p=mi(I,null,u,d,C,v)),function WE(s,o,u,c,d){const p=gn(s);if(o)d?p?s.addClass(u,c):u.classList.add(c):p?s.removeClass(u,c):u.classList.remove(c);else{let v=-1===c.indexOf("-")?void 0:oe.DashCase;if(null==d)p?s.removeStyle(u,c,v):u.style.removeProperty(c);else{const C="string"==typeof d&&d.endsWith("!important");C&&(d=d.slice(0,-10),v|=oe.Important),p?s.setStyle(u,c,d,v):u.style.setProperty(c,d,C?"important":"")}}}(c,v,Vo(Tr(),u),d,p))}(p,p.data[Tr()],d,d[11],s,d[v+1]=function e0(s,o){return null==s||("string"==typeof o?s+=o:"object"==typeof s&&(s=he(po(s)))),s}(o,u),c,v)}(s,o,null,!0),bm}function sp(s,o,u,c,d){let p=null;const v=u.directiveEnd;let C=u.directiveStylingLast;for(-1===C?C=u.directiveStart:C++;C<v&&(p=o[C],c=op(c,p.hostAttrs,d),p!==s);)C++;return null!==s&&(u.directiveStylingLast=C),c}function op(s,o,u){const c=u?1:2;let d=-1;if(null!==o)for(let p=0;p<o.length;p++){const v=o[p];"number"==typeof v?d=v:d===c&&(Array.isArray(s)||(s=void 0===s?[]:["",s]),Jn(s,v,!!u||o[++p]))}return void 0===s?null:s}function mi(s,o,u,c,d,p){const v=null===o;let C;for(;d>0;){const I=s[d],A=Array.isArray(I),R=A?I[1]:I,V=null===R;let H=u[d+1];H===St&&(H=V?dt:void 0);let Y=V?sc(H,c):R===c?H:void 0;if(A&&!Dm(Y)&&(Y=sc(I,c)),Dm(Y)&&(C=Y,v))return C;const ve=s[d+1];d=v?yo(ve):Pa(ve)}if(null!==o){let I=p?o.residualClasses:o.residualStyles;null!=I&&(C=sc(I,c))}return C}function Dm(s){return void 0!==s}function uI(s,o=""){const u=Ie(),c=Vt(),d=s+20,p=c.firstCreatePass?ol(c,d,1,o,null):c.data[d],v=u[d]=function Vd(s,o){return gn(s)?s.createText(o):s.createTextNode(o)}(u[11],o);Bg(c,u,v,p),Kr(p,!1)}function t0(s){return Tm("",s,""),t0}function Tm(s,o,u){const c=Ie(),d=function Xd(s,o,u,c){return Ui(s,so(),u)?o+pe(u)+c:St}(c,s,o,u);return d!==St&&ll(c,Tr(),d),Tm}const Ua=void 0;var ch=["en",[["a","p"],["AM","PM"],Ua],[["AM","PM"],Ua,Ua],[["S","M","T","W","T","F","S"],["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],["Su","Mo","Tu","We","Th","Fr","Sa"]],Ua,[["J","F","M","A","M","J","J","A","S","O","N","D"],["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],["January","February","March","April","May","June","July","August","September","October","November","December"]],Ua,[["B","A"],["BC","AD"],["Before Christ","Anno Domini"]],0,[6,0],["M/d/yy","MMM d, y","MMMM d, y","EEEE, MMMM d, y"],["h:mm a","h:mm:ss a","h:mm:ss a z","h:mm:ss a zzzz"],["{1}, {0}",Ua,"{1} 'at' {0}",Ua],[".",",",";","%","+","-","E","\xd7","\u2030","\u221e","NaN",":"],["#,##0.###","#,##0%","\xa4#,##0.00","#E0"],"USD","$","US Dollar",{},"ltr",function d0(s){const u=Math.floor(Math.abs(s)),c=s.toString().replace(/^[^.]*\.?/,"").length;return 1===u&&0===c?1:5}];let cs={};function At(s){const o=function RS(s){return s.toLowerCase().replace(/_/g,"-")}(s);let u=wI(o);if(u)return u;const c=o.split("-")[0];if(u=wI(c),u)return u;if("en"===c)return ch;throw new Error(`Missing locale data for the locale "${s}".`)}function dh(s){return At(s)[mt.PluralCase]}function wI(s){return s in cs||(cs[s]=Gt.ng&&Gt.ng.common&&Gt.ng.common.locales&&Gt.ng.common.locales[s]),cs[s]}var mt=(()=>((mt=mt||{})[mt.LocaleId=0]="LocaleId",mt[mt.DayPeriodsFormat=1]="DayPeriodsFormat",mt[mt.DayPeriodsStandalone=2]="DayPeriodsStandalone",mt[mt.DaysFormat=3]="DaysFormat",mt[mt.DaysStandalone=4]="DaysStandalone",mt[mt.MonthsFormat=5]="MonthsFormat",mt[mt.MonthsStandalone=6]="MonthsStandalone",mt[mt.Eras=7]="Eras",mt[mt.FirstDayOfWeek=8]="FirstDayOfWeek",mt[mt.WeekendRange=9]="WeekendRange",mt[mt.DateFormat=10]="DateFormat",mt[mt.TimeFormat=11]="TimeFormat",mt[mt.DateTimeFormat=12]="DateTimeFormat",mt[mt.NumberSymbols=13]="NumberSymbols",mt[mt.NumberFormats=14]="NumberFormats",mt[mt.CurrencyCode=15]="CurrencyCode",mt[mt.CurrencySymbol=16]="CurrencySymbol",mt[mt.CurrencyName=17]="CurrencyName",mt[mt.Currencies=18]="Currencies",mt[mt.Directionality=19]="Directionality",mt[mt.PluralCase=20]="PluralCase",mt[mt.ExtraData=21]="ExtraData",mt))();const fh="en-US";let f0=fh;function Ih(s,o,u,c,d){if(s=X(s),Array.isArray(s))for(let p=0;p<s.length;p++)Ih(s[p],o,u,c,d);else{const p=Vt(),v=Ie();let C=qf(s)?s:X(s.provide),I=bv(s);const A=Cn(),R=1048575&A.providerIndexes,V=A.directiveStart,H=A.providerIndexes>>20;if(qf(s)||!s.multi){const Y=new va(I,d,Xf),ve=Hm(C,o,d?R:R+H,V);-1===ve?(uo(In(A,v),p,C),E0(p,s,o.length),o.push(C),A.directiveStart++,A.directiveEnd++,d&&(A.providerIndexes+=1048576),u.push(Y),v.push(Y)):(u[ve]=Y,v[ve]=Y)}else{const Y=Hm(C,o,R+H,V),ve=Hm(C,o,R,R+H),ke=Y>=0&&u[Y],He=ve>=0&&u[ve];if(d&&!He||!d&&!ke){uo(In(A,v),p,C);const Qe=function GI(s,o,u,c,d){const p=new va(s,u,Xf);return p.multi=[],p.index=o,p.componentProviders=0,jm(p,d,c&&!u),p}(d?YS:$I,u.length,d,c,I);!d&&He&&(u[ve].providerFactory=Qe),E0(p,s,o.length,0),o.push(C),A.directiveStart++,A.directiveEnd++,d&&(A.providerIndexes+=1048576),u.push(Qe),v.push(Qe)}else E0(p,s,Y>-1?Y:ve,jm(u[d?ve:Y],I,!d&&c));!d&&c&&He&&u[ve].componentProviders++}}}function E0(s,o,u,c){const d=qf(o),p=function QN(s){return!!s.useClass}(o);if(d||p){const I=(p?X(o.useClass):o).prototype.ngOnDestroy;if(I){const A=s.destroyHooks||(s.destroyHooks=[]);if(!d&&o.multi){const R=A.indexOf(u);-1===R?A.push(u,[c,I]):A[R+1].push(c,I)}else A.push(u,I)}}}function jm(s,o,u){return u&&s.componentProviders++,s.multi.push(o)-1}function Hm(s,o,u,c){for(let d=u;d<c;d++)if(o[d]===s)return d;return-1}function $I(s,o,u,c){return C0(this.multi,[])}function YS(s,o,u,c){const d=this.multi;let p;if(this.providerFactory){const v=this.providerFactory.componentProviders,C=Ri(u,u[1],this.providerFactory.index,c);p=C.slice(0,v),C0(d,p);for(let I=v;I<C.length;I++)p.push(C[I])}else p=[],C0(d,p);return p}function C0(s,o){for(let u=0;u<s.length;u++)o.push((0,s[u])());return o}function $m(s,o=[]){return u=>{u.providersResolver=(c,d)=>function HI(s,o,u){const c=Vt();if(c.firstCreatePass){const d=Gr(s);Ih(u,c.data,c.blueprint,d,!0),Ih(o,c.data,c.blueprint,d,!1)}}(c,d?d(s):s,o)}}class WI{}class Gm{resolveComponentFactory(o){throw function JS(s){const o=Error(`No component factory found for ${he(s)}. Did you add it to @NgModule.entryComponents?`);return o.ngComponent=s,o}(o)}}let bh=(()=>{class s{}return s.NULL=new Gm,s})();function zI(){return Dh(Cn(),Ie())}function Dh(s,o){return new Th(br(s,o))}let Th=(()=>{class s{constructor(u){this.nativeElement=u}}return s.__NG_ELEMENT_ID__=zI,s})();function I0(s){return s instanceof Th?s.nativeElement:s}class KI{}let eA=(()=>{class s{}return s.__NG_ELEMENT_ID__=()=>function nA(){const s=Ie(),u=Dr(Cn().index,s);return function tA(s){return s[11]}(Ti(u)?u:s)}(),s})(),rA=(()=>{class s{}return s.\u0275prov=Xt({token:s,providedIn:"root",factory:()=>null}),s})();class ZI{constructor(o){this.full=o,this.major=o.split(".")[0],this.minor=o.split(".")[1],this.patch=o.split(".").slice(2).join(".")}}const b0=new ZI("13.3.1"),D0={};function yp(s,o,u,c,d=!1){for(;null!==u;){const p=o[u.index];if(null!==p&&c.push(on(p)),oi(p))for(let C=10;C<p.length;C++){const I=p[C],A=I[1].firstChild;null!==A&&yp(I[1],I,A,c)}const v=u.type;if(8&v)yp(s,o,u.child,c);else if(32&v){const C=Xe(u,o);let I;for(;I=C();)c.push(I)}else if(16&v){const C=$E(o,u);if(Array.isArray(C))c.push(...C);else{const I=On(o[16]);yp(I[1],I,C,c,!0)}}u=d?u.projectionNext:u.next}return c}class Sh{constructor(o,u){this._lView=o,this._cdRefInjectingView=u,this._appRef=null,this._attachedToViewContainer=!1}get rootNodes(){const o=this._lView,u=o[1];return yp(u,o,u.firstChild,[])}get context(){return this._lView[8]}set context(o){this._lView[8]=o}get destroyed(){return 256==(256&this._lView[2])}destroy(){if(this._appRef)this._appRef.detachView(this);else if(this._attachedToViewContainer){const o=this._lView[3];if(oi(o)){const u=o[8],c=u?u.indexOf(this):-1;c>-1&&(Py(o,c),xs(u,c))}this._attachedToViewContainer=!1}ky(this._lView[1],this._lView)}onDestroy(o){jf(this._lView[1],this._lView,null,o)}markForCheck(){gv(this._cdRefInjectingView||this._lView)}detach(){this._lView[2]&=-129}reattach(){this._lView[2]|=128}detectChanges(){Wf(this._lView[1],this._lView,this.context)}checkNoChanges(){!function qT(s,o,u){io(!0);try{Wf(s,o,u)}finally{io(!1)}}(this._lView[1],this._lView,this.context)}attachToViewContainerRef(){if(this._appRef)throw new Oe(902,"");this._attachedToViewContainer=!0}detachFromAppRef(){this._appRef=null,function Vg(s,o){jg(s,o,o[11],2,null,null)}(this._lView[1],this._lView)}attachToAppRef(o){if(this._attachedToViewContainer)throw new Oe(902,"");this._appRef=o}}class iA extends Sh{constructor(o){super(o),this._view=o}detectChanges(){yv(this._view)}checkNoChanges(){!function vv(s){io(!0);try{yv(s)}finally{io(!1)}}(this._view)}get context(){return null}}class T0 extends bh{constructor(o){super(),this.ngModule=o}resolveComponentFactory(o){const u=qt(o);return new S0(u,this.ngModule)}}function vp(s){const o=[];for(let u in s)s.hasOwnProperty(u)&&o.push({propName:s[u],templateName:u});return o}class S0 extends WI{constructor(o,u){super(),this.componentDef=o,this.ngModule=u,this.componentType=o.type,this.selector=function JE(s){return s.map(QE).join(",")}(o.selectors),this.ngContentSelectors=o.ngContentSelectors?o.ngContentSelectors:[],this.isBoundToModule=!!u}get inputs(){return vp(this.componentDef.inputs)}get outputs(){return vp(this.componentDef.outputs)}create(o,u,c,d){const p=(d=d||this.ngModule)?function sA(s,o){return{get:(u,c,d)=>{const p=s.get(u,D0,d);return p!==D0||c===D0?p:o.get(u,c,d)}}}(o,d.injector):o,v=p.get(KI,ma),C=p.get(rA,null),I=v.createRenderer(null,this.componentDef),A=this.componentDef.selectors[0][0]||"div",R=c?function nv(s,o,u){if(gn(s))return s.selectRootElement(o,u===$t.ShadowDom);let c="string"==typeof o?s.querySelector(o):o;return c.textContent="",c}(I,c,this.componentDef.encapsulation):Bd(v.createRenderer(null,this.componentDef),A,function YI(s){const o=s.toLowerCase();return"svg"===o?"svg":"math"===o?"math":null}(A)),V=this.componentDef.onPush?576:528,H=function am(s,o){return{components:[],scheduler:s||Ay,clean:KT,playerHandler:o||null,flags:0}}(),Y=em(0,null,null,1,0,null,null,null,null,null),ve=Jg(null,Y,H,V,null,null,v,I,C,p);let ke,He;Uo(ve);try{const Qe=function zf(s,o,u,c,d,p){const v=u[1];u[20]=s;const I=ol(v,20,2,"#host",null),A=I.mergedAttrs=o.hostAttrs;null!==A&&(Kd(I,A,!0),null!==s&&(ct(d,s,A),null!==I.classes&&mo(d,s,I.classes),null!==I.styles&&rl(d,s,I.styles)));const R=c.createRenderer(s,o),V=Jg(u,zd(o),null,o.onPush?64:16,u[20],I,c,R,p||null,null);return v.firstCreatePass&&(uo(In(I,u),v,o.type),uv(v,I),lv(I,u.length,1)),Tc(u,V),u[20]=V}(R,this.componentDef,ve,v,I);if(R)if(c)ct(I,R,["ng-version",b0.full]);else{const{attrs:be,classes:pt}=function XE(s){const o=[],u=[];let c=1,d=2;for(;c<s.length;){let p=s[c];if("string"==typeof p)2===d?""!==p&&o.push(p,s[++c]):8===d&&u.push(p);else{if(!_o(d))break;d=p}c++}return{attrs:o,classes:u}}(this.componentDef.selectors[0]);be&&ct(I,R,be),pt&&pt.length>0&&mo(I,R,pt.join(" "))}if(He=Qa(Y,20),void 0!==u){const be=He.projection=[];for(let pt=0;pt<this.ngContentSelectors.length;pt++){const Kt=u[pt];be.push(null!=Kt?Array.from(Kt):null)}}ke=function Mv(s,o,u,c,d){const p=u[1],v=function $f(s,o,u){const c=Cn();s.firstCreatePass&&(u.providersResolver&&u.providersResolver(u),cv(s,c,o,bc(s,o,1,null),u));const d=Ri(o,s,c.directiveStart,c);Or(d,o);const p=br(c,o);return p&&Or(p,o),d}(p,u,o);if(c.components.push(v),s[8]=v,d&&d.forEach(I=>I(v,o)),o.contentQueries){const I=Cn();o.contentQueries(1,v,I.directiveStart)}const C=Cn();return!p.firstCreatePass||null===o.hostBindings&&null===o.hostAttrs||(ao(C.index),av(u[1],C,0,C.directiveStart,C.directiveEnd,o),BT(o,v)),v}(Qe,this.componentDef,ve,H,[Nv]),Dc(Y,ve,null)}finally{jo()}return new JI(this.componentType,ke,Dh(He,ve),ve,He)}}class JI extends class QS{}{constructor(o,u,c,d,p){super(),this.location=c,this._rootLView=d,this._tNode=p,this.instance=u,this.hostView=this.changeDetectorRef=new iA(d),this.componentType=o}get injector(){return new Mi(this._tNode,this._rootLView)}destroy(){this.hostView.destroy()}onDestroy(o){this.hostView.onDestroy(o)}}class Ah{}class A0{}const Ps=new Map;class XI extends Ah{constructor(o,u){super(),this._parent=u,this._bootstrapComponents=[],this.injector=this,this.destroyCbs=[],this.componentFactoryResolver=new T0(this);const c=fn(o);this._bootstrapComponents=g(c.bootstrap),this._r3Injector=im(o,u,[{provide:Ah,useValue:this},{provide:bh,useValue:this.componentFactoryResolver}],he(o)),this._r3Injector._resolveInjectorDefTypes(),this.instance=this.get(o)}get(o,u=vo.THROW_IF_NOT_FOUND,c=lt.Default){return o===vo||o===Ah||o===nm?this:this._r3Injector.get(o,u,c)}destroy(){const o=this._r3Injector;!o.destroyed&&o.destroy(),this.destroyCbs.forEach(u=>u()),this.destroyCbs=null}onDestroy(o){this.destroyCbs.push(o)}}class M0 extends A0{constructor(o){super(),this.moduleType=o,null!==fn(o)&&function El(s){const o=new Set;!function u(c){const d=fn(c,!0),p=d.id;null!==p&&(function x0(s,o,u){if(o&&o!==u)throw new Error(`Duplicate module registered for ${s} - ${he(o)} vs ${he(o.name)}`)}(p,Ps.get(p),c),Ps.set(p,c));const v=g(d.imports);for(const C of v)o.has(C)||(o.add(C),u(C))}(s)}(o)}create(o){return new XI(this.moduleType,o)}}function U0(s){return o=>{setTimeout(s,void 0,o)}}const Ba=class Dp extends m.x{constructor(o=!1){super(),this.__isAsync=o}emit(o){super.next(o)}subscribe(o,u,c){var d,p,v;let C=o,I=u||(()=>null),A=c;if(o&&"object"==typeof o){const V=o;C=null===(d=V.next)||void 0===d?void 0:d.bind(V),I=null===(p=V.error)||void 0===p?void 0:p.bind(V),A=null===(v=V.complete)||void 0===v?void 0:v.bind(V)}this.__isAsync&&(I=U0(I),C&&(C=U0(C)),A&&(A=U0(A)));const R=super.subscribe({next:C,error:I,complete:A});return o instanceof Q.w0&&o.add(R),R}};function pA(){return this._results[Qd()]()}class Tp{constructor(o=!1){this._emitDistinctChangesOnly=o,this.dirty=!0,this._results=[],this._changesDetected=!1,this._changes=null,this.length=0,this.first=void 0,this.last=void 0;const u=Qd(),c=Tp.prototype;c[u]||(c[u]=pA)}get changes(){return this._changes||(this._changes=new Ba)}get(o){return this._results[o]}map(o){return this._results.map(o)}filter(o){return this._results.filter(o)}find(o){return this._results.find(o)}reduce(o,u){return this._results.reduce(o,u)}forEach(o){this._results.forEach(o)}some(o){return this._results.some(o)}toArray(){return this._results.slice()}toString(){return this._results.toString()}reset(o,u){const c=this;c.dirty=!1;const d=mr(o);(this._changesDetected=!function ec(s,o,u){if(s.length!==o.length)return!1;for(let c=0;c<s.length;c++){let d=s[c],p=o[c];if(u&&(d=u(d),p=u(p)),p!==d)return!1}return!0}(c._results,d,u))&&(c._results=d,c.length=d.length,c.last=d[this.length-1],c.first=d[0])}notifyOnChanges(){this._changes&&(this._changesDetected||!this._emitDistinctChangesOnly)&&this._changes.emit(this)}setDirty(){this.dirty=!0}destroy(){this.changes.complete(),this.changes.unsubscribe()}}Symbol;let Fc=(()=>{class s{}return s.__NG_ELEMENT_ID__=mA,s})();const gA=Fc,ib=class extends gA{constructor(o,u,c){super(),this._declarationLView=o,this._declarationTContainer=u,this.elementRef=c}createEmbeddedView(o){const u=this._declarationTContainer.tViews,c=Jg(this._declarationLView,u,o,16,null,u.declTNode,null,null,null,null);c[17]=this._declarationLView[this._declarationTContainer.index];const p=this._declarationLView[19];return null!==p&&(c[19]=p.createEmbeddedView(u)),Dc(u,c,o),new Sh(c)}};function mA(){return zm(Cn(),Ie())}function zm(s,o){return 4&s.type?new ib(o,s,Dh(s,o)):null}let Sp=(()=>{class s{}return s.__NG_ELEMENT_ID__=B0,s})();function B0(){return Zm(Cn(),Ie())}const j0=Sp,Km=class extends j0{constructor(o,u,c){super(),this._lContainer=o,this._hostTNode=u,this._hostLView=c}get element(){return Dh(this._hostTNode,this._hostLView)}get injector(){return new Mi(this._hostTNode,this._hostLView)}get parentInjector(){const o=li(this._hostTNode,this._hostLView);if(yd(o)){const u=xi(o,this._hostLView),c=mn(o);return new Mi(u[1].data[c+8],u)}return new Mi(null,this._hostLView)}clear(){for(;this.length>0;)this.remove(this.length-1)}get(o){const u=Ap(this._lContainer);return null!==u&&u[o]||null}get length(){return this._lContainer.length-10}createEmbeddedView(o,u,c){const d=o.createEmbeddedView(u||{});return this.insert(d,c),d}createComponent(o,u,c,d,p){const v=o&&!function Da(s){return"function"==typeof s}(o);let C;if(v)C=u;else{const V=u||{};C=V.index,c=V.injector,d=V.projectableNodes,p=V.ngModuleRef}const I=v?o:new S0(qt(o)),A=c||this.parentInjector;if(!p&&null==I.ngModule){const H=(v?A:this.parentInjector).get(Ah,null);H&&(p=H)}const R=I.create(A,d,void 0,p);return this.insert(R.hostView,C),R}insert(o,u){const c=o._lView,d=c[1];if(function Ou(s){return oi(s[3])}(c)){const R=this.indexOf(o);if(-1!==R)this.detach(R);else{const V=c[3],H=new Km(V,V[6],V[3]);H.detach(H.indexOf(o))}}const p=this._adjustIndex(u),v=this._lContainer;!function Ny(s,o,u,c){const d=10+c,p=u.length;c>0&&(u[d-1][4]=o),c<p-10?(o[4]=u[d],tc(u,10+c,o)):(u.push(o),o[4]=null),o[3]=u;const v=o[17];null!==v&&u!==v&&function jd(s,o){const u=s[9];o[16]!==o[3][3][16]&&(s[2]=!0),null===u?s[9]=[o]:u.push(o)}(v,o);const C=o[19];null!==C&&C.insertView(s),o[2]|=128}(d,c,v,p);const C=Uy(p,v),I=c[11],A=Of(I,v[7]);return null!==A&&function kf(s,o,u,c,d,p){c[0]=d,c[6]=o,jg(s,c,u,1,d,p)}(d,v[6],I,c,A,C),o.attachToViewContainerRef(),tc(_u(v),p,o),o}move(o,u){return this.insert(o,u)}indexOf(o){const u=Ap(this._lContainer);return null!==u?u.indexOf(o):-1}remove(o){const u=this._adjustIndex(o,-1),c=Py(this._lContainer,u);c&&(xs(_u(this._lContainer),u),ky(c[1],c))}detach(o){const u=this._adjustIndex(o,-1),c=Py(this._lContainer,u);return c&&null!=xs(_u(this._lContainer),u)?new Sh(c):null}_adjustIndex(o,u=0){return null==o?this.length+u:o}};function Ap(s){return s[8]}function _u(s){return s[8]||(s[8]=[])}function Zm(s,o){let u;const c=o[s.index];if(oi(c))u=c;else{let d;if(8&s.type)d=on(c);else{const p=o[11];d=p.createComment("");const v=br(s,o);Ms(p,Of(p,v),d,function IT(s,o){return gn(s)?s.nextSibling(o):o.nextSibling}(p,v),!1)}o[s.index]=u=hv(c,o,d,s),Tc(o,u)}return new Km(u,s,o)}class Ym{constructor(o){this.queryList=o,this.matches=null}clone(){return new Ym(this.queryList)}setDirty(){this.queryList.setDirty()}}class $0{constructor(o=[]){this.queries=o}createEmbeddedView(o){const u=o.queries;if(null!==u){const c=null!==o.contentQueries?o.contentQueries[0]:u.length,d=[];for(let p=0;p<c;p++){const v=u.getByIndex(p);d.push(this.queries[v.indexInDeclarationView].clone())}return new $0(d)}return null}insertView(o){this.dirtyQueriesWithMatches(o)}detachView(o){this.dirtyQueriesWithMatches(o)}dirtyQueriesWithMatches(o){for(let u=0;u<this.queries.length;u++)null!==ub(o,u).matches&&this.queries[u].setDirty()}}class xh{constructor(o,u,c=null){this.predicate=o,this.flags=u,this.read=c}}class xp{constructor(o=[]){this.queries=o}elementStart(o,u){for(let c=0;c<this.queries.length;c++)this.queries[c].elementStart(o,u)}elementEnd(o){for(let u=0;u<this.queries.length;u++)this.queries[u].elementEnd(o)}embeddedTView(o){let u=null;for(let c=0;c<this.length;c++){const d=null!==u?u.length:0,p=this.getByIndex(c).embeddedTView(o,d);p&&(p.indexInDeclarationView=c,null!==u?u.push(p):u=[p])}return null!==u?new xp(u):null}template(o,u){for(let c=0;c<this.queries.length;c++)this.queries[c].template(o,u)}getByIndex(o){return this.queries[o]}get length(){return this.queries.length}track(o){this.queries.push(o)}}class G0{constructor(o,u=-1){this.metadata=o,this.matches=null,this.indexInDeclarationView=-1,this.crossesNgTemplate=!1,this._appliesToNextNode=!0,this._declarationNodeIndex=u}elementStart(o,u){this.isApplyingToNode(u)&&this.matchTNode(o,u)}elementEnd(o){this._declarationNodeIndex===o.index&&(this._appliesToNextNode=!1)}template(o,u){this.elementStart(o,u)}embeddedTView(o,u){return this.isApplyingToNode(o)?(this.crossesNgTemplate=!0,this.addMatch(-o.index,u),new G0(this.metadata)):null}isApplyingToNode(o){if(this._appliesToNextNode&&1!=(1&this.metadata.flags)){const u=this._declarationNodeIndex;let c=o.parent;for(;null!==c&&8&c.type&&c.index!==u;)c=c.parent;return u===(null!==c?c.index:-1)}return this._appliesToNextNode}matchTNode(o,u){const c=this.metadata.predicate;if(Array.isArray(c))for(let d=0;d<c.length;d++){const p=c[d];this.matchTNodeWithReadOption(o,u,yA(u,p)),this.matchTNodeWithReadOption(o,u,Go(u,o,p,!1,!1))}else c===Fc?4&u.type&&this.matchTNodeWithReadOption(o,u,-1):this.matchTNodeWithReadOption(o,u,Go(u,o,c,!1,!1))}matchTNodeWithReadOption(o,u,c){if(null!==c){const d=this.metadata.read;if(null!==d)if(d===Th||d===Sp||d===Fc&&4&u.type)this.addMatch(u.index,-2);else{const p=Go(u,o,d,!1,!1);null!==p&&this.addMatch(u.index,p)}else this.addMatch(u.index,c)}}addMatch(o,u){null===this.matches?this.matches=[o,u]:this.matches.push(o,u)}}function yA(s,o){const u=s.localNames;if(null!==u)for(let c=0;c<u.length;c+=2)if(u[c]===o)return u[c+1];return null}function W0(s,o,u,c){return-1===u?function vA(s,o){return 11&s.type?Dh(s,o):4&s.type?zm(s,o):null}(o,s):-2===u?function Qm(s,o,u){return u===Th?Dh(o,s):u===Fc?zm(o,s):u===Sp?Zm(o,s):void 0}(s,o,c):Ri(s,s[1],u,o)}function q0(s,o,u,c){const d=o[19].queries[c];if(null===d.matches){const p=s.data,v=u.matches,C=[];for(let I=0;I<v.length;I+=2){const A=v[I];C.push(A<0?null:W0(o,p[A],v[I+1],u.metadata.read))}d.matches=C}return d.matches}function z0(s,o,u,c){const d=s.queries.getByIndex(u),p=d.matches;if(null!==p){const v=q0(s,o,d,u);for(let C=0;C<p.length;C+=2){const I=p[C];if(I>0)c.push(v[C/2]);else{const A=p[C+1],R=o[-I];for(let V=10;V<R.length;V++){const H=R[V];H[17]===H[3]&&z0(H[1],H,A,c)}if(null!==R[9]){const V=R[9];for(let H=0;H<V.length;H++){const Y=V[H];z0(Y[1],Y,A,c)}}}}}return c}function Rh(s){const o=Ie(),u=Vt(),c=$l();Gl(c+1);const d=ub(u,c);if(s.dirty&&to(o)===(2==(2&d.metadata.flags))){if(null===d.matches)s.reset([]);else{const p=d.crossesNgTemplate?z0(u,o,c,[]):q0(u,o,d,c);s.reset(p,I0),s.notifyOnChanges()}return!0}return!1}function Mh(s,o,u,c){const d=Vt();if(d.firstCreatePass){const p=Cn();(function Nh(s,o,u){null===s.queries&&(s.queries=new xp),s.queries.track(new G0(o,u))})(d,new xh(o,u,c),p.index),function Rp(s,o){const u=s.contentQueries||(s.contentQueries=[]);o!==(u.length?u[u.length-1]:-1)&&u.push(s.queries.length-1,o)}(d,s),2==(2&u)&&(d.staticContentQueries=!0)}!function Jm(s,o,u){const c=new Tp(4==(4&u));jf(s,o,c,c.destroy),null===o[19]&&(o[19]=new $0),o[19].queries.push(new Ym(c))}(d,Ie(),u)}function ob(){return function ab(s,o){return s[19].queries[o].queryList}(Ie(),$l())}function ub(s,o){return s.queries.getByIndex(o)}function oa(...s){}const Os=new Pn("Application Initializer");let yu=(()=>{class s{constructor(u){this.appInits=u,this.resolve=oa,this.reject=oa,this.initialized=!1,this.done=!1,this.donePromise=new Promise((c,d)=>{this.resolve=c,this.reject=d})}runInitializers(){if(this.initialized)return;const u=[],c=()=>{this.done=!0,this.resolve()};if(this.appInits)for(let d=0;d<this.appInits.length;d++){const p=this.appInits[d]();if(Hv(p))u.push(p);else if(WC(p)){const v=new Promise((C,I)=>{p.subscribe({complete:C,error:I})});u.push(v)}}Promise.all(u).then(()=>{c()}).catch(d=>{this.reject(d)}),0===u.length&&c(),this.initialized=!0}}return s.\u0275fac=function(u){return new(u||s)(Ye(Os,8))},s.\u0275prov=Xt({token:s,factory:s.\u0275fac,providedIn:"root"}),s})();const lw=new Pn("AppId",{providedIn:"root",factory:function cw(){return`${wb()}${wb()}${wb()}`}});function wb(){return String.fromCharCode(97+Math.floor(25*Math.random()))}const Eb=new Pn("Platform Initializer"),Cb=new Pn("Platform ID"),s_=new Pn("appBootstrapListener");let Ib=(()=>{class s{log(u){console.log(u)}warn(u){console.warn(u)}}return s.\u0275fac=function(u){return new(u||s)},s.\u0275prov=Xt({token:s,factory:s.\u0275fac}),s})();const dw=new Pn("LocaleId",{providedIn:"root",factory:()=>Mt(dw,lt.Optional|lt.SkipSelf)||function xA(){return"undefined"!=typeof $localize&&$localize.locale||fh}()}),o_=new Pn("DefaultCurrencyCode",{providedIn:"root",factory:()=>"USD"});class Db{constructor(o,u){this.ngModuleFactory=o,this.componentFactories=u}}let Tb=(()=>{class s{compileModuleSync(u){return new M0(u)}compileModuleAsync(u){return Promise.resolve(this.compileModuleSync(u))}compileModuleAndAllComponentsSync(u){const c=this.compileModuleSync(u),p=g(fn(u).declarations).reduce((v,C)=>{const I=qt(C);return I&&v.push(new S0(I)),v},[]);return new Db(c,p)}compileModuleAndAllComponentsAsync(u){return Promise.resolve(this.compileModuleAndAllComponentsSync(u))}clearCache(){}clearCacheFor(u){}getModuleId(u){}}return s.\u0275fac=function(u){return new(u||s)},s.\u0275prov=Xt({token:s,factory:s.\u0275fac,providedIn:"root"}),s})();const Ab=(()=>Promise.resolve(0))();function Fs(s){"undefined"==typeof Zone?Ab.then(()=>{s&&s.apply(null,null)}):Zone.current.scheduleMicroTask("scheduleMicrotask",s)}class aa{constructor({enableLongStackTrace:o=!1,shouldCoalesceEventChangeDetection:u=!1,shouldCoalesceRunChangeDetection:c=!1}){if(this.hasPendingMacrotasks=!1,this.hasPendingMicrotasks=!1,this.isStable=!0,this.onUnstable=new Ba(!1),this.onMicrotaskEmpty=new Ba(!1),this.onStable=new Ba(!1),this.onError=new Ba(!1),"undefined"==typeof Zone)throw new Error("In this configuration Angular requires Zone.js");Zone.assertZonePatched();const d=this;d._nesting=0,d._outer=d._inner=Zone.current,Zone.TaskTrackingZoneSpec&&(d._inner=d._inner.fork(new Zone.TaskTrackingZoneSpec)),o&&Zone.longStackTraceZoneSpec&&(d._inner=d._inner.fork(Zone.longStackTraceZoneSpec)),d.shouldCoalesceEventChangeDetection=!c&&u,d.shouldCoalesceRunChangeDetection=c,d.lastRequestAnimationFrameId=-1,d.nativeRequestAnimationFrame=function xb(){let s=Gt.requestAnimationFrame,o=Gt.cancelAnimationFrame;if("undefined"!=typeof Zone&&s&&o){const u=s[Zone.__symbol__("OriginalDelegate")];u&&(s=u);const c=o[Zone.__symbol__("OriginalDelegate")];c&&(o=c)}return{nativeRequestAnimationFrame:s,nativeCancelAnimationFrame:o}}().nativeRequestAnimationFrame,function NA(s){const o=()=>{!function Rb(s){s.isCheckStableRunning||-1!==s.lastRequestAnimationFrameId||(s.lastRequestAnimationFrameId=s.nativeRequestAnimationFrame.call(Gt,()=>{s.fakeTopEventTask||(s.fakeTopEventTask=Zone.root.scheduleEventTask("fakeTopEventTask",()=>{s.lastRequestAnimationFrameId=-1,pw(s),s.isCheckStableRunning=!0,fw(s),s.isCheckStableRunning=!1},void 0,()=>{},()=>{})),s.fakeTopEventTask.invoke()}),pw(s))}(s)};s._inner=s._inner.fork({name:"angular",properties:{isAngularZone:!0},onInvokeTask:(u,c,d,p,v,C)=>{try{return Mb(s),u.invokeTask(d,p,v,C)}finally{(s.shouldCoalesceEventChangeDetection&&"eventTask"===p.type||s.shouldCoalesceRunChangeDetection)&&o(),Nb(s)}},onInvoke:(u,c,d,p,v,C,I)=>{try{return Mb(s),u.invoke(d,p,v,C,I)}finally{s.shouldCoalesceRunChangeDetection&&o(),Nb(s)}},onHasTask:(u,c,d,p)=>{u.hasTask(d,p),c===d&&("microTask"==p.change?(s._hasPendingMicrotasks=p.microTask,pw(s),fw(s)):"macroTask"==p.change&&(s.hasPendingMacrotasks=p.macroTask))},onHandleError:(u,c,d,p)=>(u.handleError(d,p),s.runOutsideAngular(()=>s.onError.emit(p)),!1)})}(d)}static isInAngularZone(){return"undefined"!=typeof Zone&&!0===Zone.current.get("isAngularZone")}static assertInAngularZone(){if(!aa.isInAngularZone())throw new Error("Expected to be in Angular Zone, but it is not!")}static assertNotInAngularZone(){if(aa.isInAngularZone())throw new Error("Expected to not be in Angular Zone, but it is!")}run(o,u,c){return this._inner.run(o,u,c)}runTask(o,u,c,d){const p=this._inner,v=p.scheduleEventTask("NgZoneEvent: "+d,o,MA,oa,oa);try{return p.runTask(v,u,c)}finally{p.cancelTask(v)}}runGuarded(o,u,c){return this._inner.runGuarded(o,u,c)}runOutsideAngular(o){return this._outer.run(o)}}const MA={};function fw(s){if(0==s._nesting&&!s.hasPendingMicrotasks&&!s.isStable)try{s._nesting++,s.onMicrotaskEmpty.emit(null)}finally{if(s._nesting--,!s.hasPendingMicrotasks)try{s.runOutsideAngular(()=>s.onStable.emit(null))}finally{s.isStable=!0}}}function pw(s){s.hasPendingMicrotasks=!!(s._hasPendingMicrotasks||(s.shouldCoalesceEventChangeDetection||s.shouldCoalesceRunChangeDetection)&&-1!==s.lastRequestAnimationFrameId)}function Mb(s){s._nesting++,s.isStable&&(s.isStable=!1,s.onUnstable.emit(null))}function Nb(s){s._nesting--,fw(s)}class PA{constructor(){this.hasPendingMicrotasks=!1,this.hasPendingMacrotasks=!1,this.isStable=!0,this.onUnstable=new Ba,this.onMicrotaskEmpty=new Ba,this.onStable=new Ba,this.onError=new Ba}run(o,u,c){return o.apply(u,c)}runGuarded(o,u,c){return o.apply(u,c)}runOutsideAngular(o){return o()}runTask(o,u,c,d){return o.apply(u,c)}}let Pb=(()=>{class s{constructor(u){this._ngZone=u,this._pendingCount=0,this._isZoneStable=!0,this._didWork=!1,this._callbacks=[],this.taskTrackingZone=null,this._watchAngularEvents(),u.run(()=>{this.taskTrackingZone="undefined"==typeof Zone?null:Zone.current.get("TaskTrackingZone")})}_watchAngularEvents(){this._ngZone.onUnstable.subscribe({next:()=>{this._didWork=!0,this._isZoneStable=!1}}),this._ngZone.runOutsideAngular(()=>{this._ngZone.onStable.subscribe({next:()=>{aa.assertNotInAngularZone(),Fs(()=>{this._isZoneStable=!0,this._runCallbacksIfReady()})}})})}increasePendingRequestCount(){return this._pendingCount+=1,this._didWork=!0,this._pendingCount}decreasePendingRequestCount(){if(this._pendingCount-=1,this._pendingCount<0)throw new Error("pending async requests below zero");return this._runCallbacksIfReady(),this._pendingCount}isStable(){return this._isZoneStable&&0===this._pendingCount&&!this._ngZone.hasPendingMacrotasks}_runCallbacksIfReady(){if(this.isStable())Fs(()=>{for(;0!==this._callbacks.length;){let u=this._callbacks.pop();clearTimeout(u.timeoutId),u.doneCb(this._didWork)}this._didWork=!1});else{let u=this.getPendingTasks();this._callbacks=this._callbacks.filter(c=>!c.updateCb||!c.updateCb(u)||(clearTimeout(c.timeoutId),!1)),this._didWork=!0}}getPendingTasks(){return this.taskTrackingZone?this.taskTrackingZone.macroTasks.map(u=>({source:u.source,creationLocation:u.creationLocation,data:u.data})):[]}addCallback(u,c,d){let p=-1;c&&c>0&&(p=setTimeout(()=>{this._callbacks=this._callbacks.filter(v=>v.timeoutId!==p),u(this._didWork,this.getPendingTasks())},c)),this._callbacks.push({doneCb:u,timeoutId:p,updateCb:d})}whenStable(u,c,d){if(d&&!this.taskTrackingZone)throw new Error('Task tracking zone is required when passing an update callback to whenStable(). Is "zone.js/plugins/task-tracking" loaded?');this.addCallback(u,c,d),this._runCallbacksIfReady()}getPendingRequestCount(){return this._pendingCount}findProviders(u,c,d){return[]}}return s.\u0275fac=function(u){return new(u||s)(Ye(aa))},s.\u0275prov=Xt({token:s,factory:s.\u0275fac}),s})(),kb=(()=>{class s{constructor(){this._applications=new Map,gw.addToWindow(this)}registerApplication(u,c){this._applications.set(u,c)}unregisterApplication(u){this._applications.delete(u)}unregisterAllApplications(){this._applications.clear()}getTestability(u){return this._applications.get(u)||null}getAllTestabilities(){return Array.from(this._applications.values())}getAllRootElements(){return Array.from(this._applications.keys())}findTestabilityInTree(u,c=!0){return gw.findTestabilityInTree(this,u,c)}}return s.\u0275fac=function(u){return new(u||s)},s.\u0275prov=Xt({token:s,factory:s.\u0275fac}),s})();class kA{addToWindow(o){}findTestabilityInTree(o,u,c){return null}}function OA(s){gw=s}let ua,gw=new kA;const Ob=new Pn("AllowMultipleToken");class VA{constructor(o,u){this.name=o,this.token=u}}function Ao(s,o,u=[]){const c=`Platform: ${o}`,d=new Pn(c);return(p=[])=>{let v=mw();if(!v||v.injector.get(Ob,!1))if(s)s(u.concat(p).concat({provide:d,useValue:!0}));else{const C=u.concat(p).concat({provide:d,useValue:!0},{provide:Cv,useValue:"platform"});!function UA(s){if(ua&&!ua.destroyed&&!ua.injector.get(Ob,!1))throw new Oe(400,"");ua=s.get(Lb);const o=s.get(Eb,null);o&&o.forEach(u=>u())}(vo.create({providers:C,name:c}))}return function BA(s){const o=mw();if(!o)throw new Oe(401,"");return o}()}}function mw(){return ua&&!ua.destroyed?ua:null}let Lb=(()=>{class s{constructor(u){this._injector=u,this._modules=[],this._destroyListeners=[],this._destroyed=!1}bootstrapModuleFactory(u,c){const C=function Vb(s,o){let u;return u="noop"===s?new PA:("zone.js"===s?void 0:s)||new aa({enableLongStackTrace:!1,shouldCoalesceEventChangeDetection:!!(null==o?void 0:o.ngZoneEventCoalescing),shouldCoalesceRunChangeDetection:!!(null==o?void 0:o.ngZoneRunCoalescing)}),u}(c?c.ngZone:void 0,{ngZoneEventCoalescing:c&&c.ngZoneEventCoalescing||!1,ngZoneRunCoalescing:c&&c.ngZoneRunCoalescing||!1}),I=[{provide:aa,useValue:C}];return C.run(()=>{const A=vo.create({providers:I,parent:this.injector,name:u.moduleType.name}),R=u.create(A),V=R.injector.get(Ar,null);if(!V)throw new Oe(402,"");return C.runOutsideAngular(()=>{const H=C.onError.subscribe({next:Y=>{V.handleError(Y)}});R.onDestroy(()=>{yw(this._modules,R),H.unsubscribe()})}),function jA(s,o,u){try{const c=u();return Hv(c)?c.catch(d=>{throw o.runOutsideAngular(()=>s.handleError(d)),d}):c}catch(c){throw o.runOutsideAngular(()=>s.handleError(c)),c}}(V,C,()=>{const H=R.injector.get(yu);return H.runInitializers(),H.donePromise.then(()=>(function ph(s){at(s,"Expected localeId to be defined"),"string"==typeof s&&(f0=s.toLowerCase().replace(/_/g,"-"))}(R.injector.get(dw,fh)||fh),this._moduleDoBootstrap(R),R))})})}bootstrapModule(u,c=[]){const d=Ub({},c);return function FA(s,o,u){const c=new M0(u);return Promise.resolve(c)}(0,0,u).then(p=>this.bootstrapModuleFactory(p,d))}_moduleDoBootstrap(u){const c=u.injector.get(_w);if(u._bootstrapComponents.length>0)u._bootstrapComponents.forEach(d=>c.bootstrap(d));else{if(!u.instance.ngDoBootstrap)throw new Oe(403,"");u.instance.ngDoBootstrap(c)}this._modules.push(u)}onDestroy(u){this._destroyListeners.push(u)}get injector(){return this._injector}destroy(){if(this._destroyed)throw new Oe(404,"");this._modules.slice().forEach(u=>u.destroy()),this._destroyListeners.forEach(u=>u()),this._destroyed=!0}get destroyed(){return this._destroyed}}return s.\u0275fac=function(u){return new(u||s)(Ye(vo))},s.\u0275prov=Xt({token:s,factory:s.\u0275fac}),s})();function Ub(s,o){return Array.isArray(o)?o.reduce(Ub,s):Object.assign(Object.assign({},s),o)}let _w=(()=>{class s{constructor(u,c,d,p,v){this._zone=u,this._injector=c,this._exceptionHandler=d,this._componentFactoryResolver=p,this._initStatus=v,this._bootstrapListeners=[],this._views=[],this._runningTick=!1,this._stable=!0,this.componentTypes=[],this.components=[],this._onMicrotaskEmptySubscription=this._zone.onMicrotaskEmpty.subscribe({next:()=>{this._zone.run(()=>{this.tick()})}});const C=new O.y(A=>{this._stable=this._zone.isStable&&!this._zone.hasPendingMacrotasks&&!this._zone.hasPendingMicrotasks,this._zone.runOutsideAngular(()=>{A.next(this._stable),A.complete()})}),I=new O.y(A=>{let R;this._zone.runOutsideAngular(()=>{R=this._zone.onStable.subscribe(()=>{aa.assertNotInAngularZone(),Fs(()=>{!this._stable&&!this._zone.hasPendingMacrotasks&&!this._zone.hasPendingMicrotasks&&(this._stable=!0,A.next(!0))})})});const V=this._zone.onUnstable.subscribe(()=>{aa.assertInAngularZone(),this._stable&&(this._stable=!1,this._zone.runOutsideAngular(()=>{A.next(!1)}))});return()=>{R.unsubscribe(),V.unsubscribe()}});this.isStable=(0,ae.T)(C,I.pipe((0,ee.B)()))}bootstrap(u,c){if(!this._initStatus.done)throw new Oe(405,"");let d;d=u instanceof WI?u:this._componentFactoryResolver.resolveComponentFactory(u),this.componentTypes.push(d.componentType);const p=function LA(s){return s.isBoundToModule}(d)?void 0:this._injector.get(Ah),C=d.create(vo.NULL,[],c||d.selector,p),I=C.location.nativeElement,A=C.injector.get(Pb,null),R=A&&C.injector.get(kb);return A&&R&&R.registerApplication(I,A),C.onDestroy(()=>{this.detachView(C.hostView),yw(this.components,C),R&&R.unregisterApplication(I)}),this._loadComponent(C),C}tick(){if(this._runningTick)throw new Oe(101,"");try{this._runningTick=!0;for(let u of this._views)u.detectChanges()}catch(u){this._zone.runOutsideAngular(()=>this._exceptionHandler.handleError(u))}finally{this._runningTick=!1}}attachView(u){const c=u;this._views.push(c),c.attachToAppRef(this)}detachView(u){const c=u;yw(this._views,c),c.detachFromAppRef()}_loadComponent(u){this.attachView(u.hostView),this.tick(),this.components.push(u),this._injector.get(s_,[]).concat(this._bootstrapListeners).forEach(d=>d(u))}ngOnDestroy(){this._views.slice().forEach(u=>u.destroy()),this._onMicrotaskEmptySubscription.unsubscribe()}get viewCount(){return this._views.length}}return s.\u0275fac=function(u){return new(u||s)(Ye(aa),Ye(vo),Ye(Ar),Ye(bh),Ye(yu))},s.\u0275prov=Xt({token:s,factory:s.\u0275fac,providedIn:"root"}),s})();function yw(s,o){const u=s.indexOf(o);u>-1&&s.splice(u,1)}let Bb=!0,jb=!1;function GA(){return jb=!0,Bb}function WA(){if(jb)throw new Error("Cannot enable prod mode after platform setup.");Bb=!1}let qA=(()=>{class s{}return s.__NG_ELEMENT_ID__=zA,s})();function zA(s){return function CP(s,o,u){if(Ys(s)&&!u){const c=Dr(s.index,o);return new Sh(c,c)}return 47&s.type?new Sh(o[16],o):null}(Cn(),Ie(),16==(16&s))}class l_{constructor(){}supports(o){return Sc(o)}create(o){return new c_(o)}}const $b=(s,o)=>o;class c_{constructor(o){this.length=0,this._linkedRecords=null,this._unlinkedRecords=null,this._previousItHead=null,this._itHead=null,this._itTail=null,this._additionsHead=null,this._additionsTail=null,this._movesHead=null,this._movesTail=null,this._removalsHead=null,this._removalsTail=null,this._identityChangesHead=null,this._identityChangesTail=null,this._trackByFn=o||$b}forEachItem(o){let u;for(u=this._itHead;null!==u;u=u._next)o(u)}forEachOperation(o){let u=this._itHead,c=this._removalsHead,d=0,p=null;for(;u||c;){const v=!c||u&&u.currentIndex<d_(c,d,p)?u:c,C=d_(v,d,p),I=v.currentIndex;if(v===c)d--,c=c._nextRemoved;else if(u=u._next,null==v.previousIndex)d++;else{p||(p=[]);const A=C-d,R=I-d;if(A!=R){for(let H=0;H<A;H++){const Y=H<p.length?p[H]:p[H]=0,ve=Y+H;R<=ve&&ve<A&&(p[H]=Y+1)}p[v.previousIndex]=R-A}}C!==I&&o(v,C,I)}}forEachPreviousItem(o){let u;for(u=this._previousItHead;null!==u;u=u._nextPrevious)o(u)}forEachAddedItem(o){let u;for(u=this._additionsHead;null!==u;u=u._nextAdded)o(u)}forEachMovedItem(o){let u;for(u=this._movesHead;null!==u;u=u._nextMoved)o(u)}forEachRemovedItem(o){let u;for(u=this._removalsHead;null!==u;u=u._nextRemoved)o(u)}forEachIdentityChange(o){let u;for(u=this._identityChangesHead;null!==u;u=u._nextIdentityChange)o(u)}diff(o){if(null==o&&(o=[]),!Sc(o))throw new Oe(900,"");return this.check(o)?this:null}onDestroy(){}check(o){this._reset();let d,p,v,u=this._itHead,c=!1;if(Array.isArray(o)){this.length=o.length;for(let C=0;C<this.length;C++)p=o[C],v=this._trackByFn(C,p),null!==u&&Object.is(u.trackById,v)?(c&&(u=this._verifyReinsertion(u,p,v,C)),Object.is(u.item,p)||this._addIdentityChange(u,p)):(u=this._mismatch(u,p,v,C),c=!0),u=u._next}else d=0,function RC(s,o){if(Array.isArray(s))for(let u=0;u<s.length;u++)o(s[u]);else{const u=s[Qd()]();let c;for(;!(c=u.next()).done;)o(c.value)}}(o,C=>{v=this._trackByFn(d,C),null!==u&&Object.is(u.trackById,v)?(c&&(u=this._verifyReinsertion(u,C,v,d)),Object.is(u.item,C)||this._addIdentityChange(u,C)):(u=this._mismatch(u,C,v,d),c=!0),u=u._next,d++}),this.length=d;return this._truncate(u),this.collection=o,this.isDirty}get isDirty(){return null!==this._additionsHead||null!==this._movesHead||null!==this._removalsHead||null!==this._identityChangesHead}_reset(){if(this.isDirty){let o;for(o=this._previousItHead=this._itHead;null!==o;o=o._next)o._nextPrevious=o._next;for(o=this._additionsHead;null!==o;o=o._nextAdded)o.previousIndex=o.currentIndex;for(this._additionsHead=this._additionsTail=null,o=this._movesHead;null!==o;o=o._nextMoved)o.previousIndex=o.currentIndex;this._movesHead=this._movesTail=null,this._removalsHead=this._removalsTail=null,this._identityChangesHead=this._identityChangesTail=null}}_mismatch(o,u,c,d){let p;return null===o?p=this._itTail:(p=o._prev,this._remove(o)),null!==(o=null===this._unlinkedRecords?null:this._unlinkedRecords.get(c,null))?(Object.is(o.item,u)||this._addIdentityChange(o,u),this._reinsertAfter(o,p,d)):null!==(o=null===this._linkedRecords?null:this._linkedRecords.get(c,d))?(Object.is(o.item,u)||this._addIdentityChange(o,u),this._moveAfter(o,p,d)):o=this._addAfter(new tx(u,c),p,d),o}_verifyReinsertion(o,u,c,d){let p=null===this._unlinkedRecords?null:this._unlinkedRecords.get(c,null);return null!==p?o=this._reinsertAfter(p,o._prev,d):o.currentIndex!=d&&(o.currentIndex=d,this._addToMoves(o,d)),o}_truncate(o){for(;null!==o;){const u=o._next;this._addToRemovals(this._unlink(o)),o=u}null!==this._unlinkedRecords&&this._unlinkedRecords.clear(),null!==this._additionsTail&&(this._additionsTail._nextAdded=null),null!==this._movesTail&&(this._movesTail._nextMoved=null),null!==this._itTail&&(this._itTail._next=null),null!==this._removalsTail&&(this._removalsTail._nextRemoved=null),null!==this._identityChangesTail&&(this._identityChangesTail._nextIdentityChange=null)}_reinsertAfter(o,u,c){null!==this._unlinkedRecords&&this._unlinkedRecords.remove(o);const d=o._prevRemoved,p=o._nextRemoved;return null===d?this._removalsHead=p:d._nextRemoved=p,null===p?this._removalsTail=d:p._prevRemoved=d,this._insertAfter(o,u,c),this._addToMoves(o,c),o}_moveAfter(o,u,c){return this._unlink(o),this._insertAfter(o,u,c),this._addToMoves(o,c),o}_addAfter(o,u,c){return this._insertAfter(o,u,c),this._additionsTail=null===this._additionsTail?this._additionsHead=o:this._additionsTail._nextAdded=o,o}_insertAfter(o,u,c){const d=null===u?this._itHead:u._next;return o._next=d,o._prev=u,null===d?this._itTail=o:d._prev=o,null===u?this._itHead=o:u._next=o,null===this._linkedRecords&&(this._linkedRecords=new Gb),this._linkedRecords.put(o),o.currentIndex=c,o}_remove(o){return this._addToRemovals(this._unlink(o))}_unlink(o){null!==this._linkedRecords&&this._linkedRecords.remove(o);const u=o._prev,c=o._next;return null===u?this._itHead=c:u._next=c,null===c?this._itTail=u:c._prev=u,o}_addToMoves(o,u){return o.previousIndex===u||(this._movesTail=null===this._movesTail?this._movesHead=o:this._movesTail._nextMoved=o),o}_addToRemovals(o){return null===this._unlinkedRecords&&(this._unlinkedRecords=new Gb),this._unlinkedRecords.put(o),o.currentIndex=null,o._nextRemoved=null,null===this._removalsTail?(this._removalsTail=this._removalsHead=o,o._prevRemoved=null):(o._prevRemoved=this._removalsTail,this._removalsTail=this._removalsTail._nextRemoved=o),o}_addIdentityChange(o,u){return o.item=u,this._identityChangesTail=null===this._identityChangesTail?this._identityChangesHead=o:this._identityChangesTail._nextIdentityChange=o,o}}class tx{constructor(o,u){this.item=o,this.trackById=u,this.currentIndex=null,this.previousIndex=null,this._nextPrevious=null,this._prev=null,this._next=null,this._prevDup=null,this._nextDup=null,this._prevRemoved=null,this._nextRemoved=null,this._nextAdded=null,this._nextMoved=null,this._nextIdentityChange=null}}class AP{constructor(){this._head=null,this._tail=null}add(o){null===this._head?(this._head=this._tail=o,o._nextDup=null,o._prevDup=null):(this._tail._nextDup=o,o._prevDup=this._tail,o._nextDup=null,this._tail=o)}get(o,u){let c;for(c=this._head;null!==c;c=c._nextDup)if((null===u||u<=c.currentIndex)&&Object.is(c.trackById,o))return c;return null}remove(o){const u=o._prevDup,c=o._nextDup;return null===u?this._head=c:u._nextDup=c,null===c?this._tail=u:c._prevDup=u,null===this._head}}class Gb{constructor(){this.map=new Map}put(o){const u=o.trackById;let c=this.map.get(u);c||(c=new AP,this.map.set(u,c)),c.add(o)}get(o,u){const d=this.map.get(o);return d?d.get(o,u):null}remove(o){const u=o.trackById;return this.map.get(u).remove(o)&&this.map.delete(u),o}get isEmpty(){return 0===this.map.size}clear(){this.map.clear()}}function d_(s,o,u){const c=s.previousIndex;if(null===c)return c;let d=0;return u&&c<u.length&&(d=u[c]),c+o+d}class nx{constructor(){}supports(o){return o instanceof Map||Fv(o)}create(){return new xP}}class xP{constructor(){this._records=new Map,this._mapHead=null,this._appendAfter=null,this._previousMapHead=null,this._changesHead=null,this._changesTail=null,this._additionsHead=null,this._additionsTail=null,this._removalsHead=null,this._removalsTail=null}get isDirty(){return null!==this._additionsHead||null!==this._changesHead||null!==this._removalsHead}forEachItem(o){let u;for(u=this._mapHead;null!==u;u=u._next)o(u)}forEachPreviousItem(o){let u;for(u=this._previousMapHead;null!==u;u=u._nextPrevious)o(u)}forEachChangedItem(o){let u;for(u=this._changesHead;null!==u;u=u._nextChanged)o(u)}forEachAddedItem(o){let u;for(u=this._additionsHead;null!==u;u=u._nextAdded)o(u)}forEachRemovedItem(o){let u;for(u=this._removalsHead;null!==u;u=u._nextRemoved)o(u)}diff(o){if(o){if(!(o instanceof Map||Fv(o)))throw new Oe(900,"")}else o=new Map;return this.check(o)?this:null}onDestroy(){}check(o){this._reset();let u=this._mapHead;if(this._appendAfter=null,this._forEach(o,(c,d)=>{if(u&&u.key===d)this._maybeAddToChanges(u,c),this._appendAfter=u,u=u._next;else{const p=this._getOrCreateRecordForKey(d,c);u=this._insertBeforeOrAppend(u,p)}}),u){u._prev&&(u._prev._next=null),this._removalsHead=u;for(let c=u;null!==c;c=c._nextRemoved)c===this._mapHead&&(this._mapHead=null),this._records.delete(c.key),c._nextRemoved=c._next,c.previousValue=c.currentValue,c.currentValue=null,c._prev=null,c._next=null}return this._changesTail&&(this._changesTail._nextChanged=null),this._additionsTail&&(this._additionsTail._nextAdded=null),this.isDirty}_insertBeforeOrAppend(o,u){if(o){const c=o._prev;return u._next=o,u._prev=c,o._prev=u,c&&(c._next=u),o===this._mapHead&&(this._mapHead=u),this._appendAfter=o,o}return this._appendAfter?(this._appendAfter._next=u,u._prev=this._appendAfter):this._mapHead=u,this._appendAfter=u,null}_getOrCreateRecordForKey(o,u){if(this._records.has(o)){const d=this._records.get(o);this._maybeAddToChanges(d,u);const p=d._prev,v=d._next;return p&&(p._next=v),v&&(v._prev=p),d._next=null,d._prev=null,d}const c=new rx(o);return this._records.set(o,c),c.currentValue=u,this._addToAdditions(c),c}_reset(){if(this.isDirty){let o;for(this._previousMapHead=this._mapHead,o=this._previousMapHead;null!==o;o=o._next)o._nextPrevious=o._next;for(o=this._changesHead;null!==o;o=o._nextChanged)o.previousValue=o.currentValue;for(o=this._additionsHead;null!=o;o=o._nextAdded)o.previousValue=o.currentValue;this._changesHead=this._changesTail=null,this._additionsHead=this._additionsTail=null,this._removalsHead=null}}_maybeAddToChanges(o,u){Object.is(u,o.currentValue)||(o.previousValue=o.currentValue,o.currentValue=u,this._addToChanges(o))}_addToAdditions(o){null===this._additionsHead?this._additionsHead=this._additionsTail=o:(this._additionsTail._nextAdded=o,this._additionsTail=o)}_addToChanges(o){null===this._changesHead?this._changesHead=this._changesTail=o:(this._changesTail._nextChanged=o,this._changesTail=o)}_forEach(o,u){o instanceof Map?o.forEach(u):Object.keys(o).forEach(c=>u(o[c],c))}}class rx{constructor(o){this.key=o,this.previousValue=null,this.currentValue=null,this._nextPrevious=null,this._next=null,this._prev=null,this._nextAdded=null,this._nextRemoved=null,this._nextChanged=null}}function Wb(){return new qb([new l_])}let qb=(()=>{class s{constructor(u){this.factories=u}static create(u,c){if(null!=c){const d=c.factories.slice();u=u.concat(d)}return new s(u)}static extend(u){return{provide:s,useFactory:c=>s.create(u,c||Wb()),deps:[[s,new Ko,new hi]]}}find(u){const c=this.factories.find(d=>d.supports(u));if(null!=c)return c;throw new Oe(901,"")}}return s.\u0275prov=Xt({token:s,providedIn:"root",factory:Wb}),s})();function ix(){return new zb([new nx])}let zb=(()=>{class s{constructor(u){this.factories=u}static create(u,c){if(c){const d=c.factories.slice();u=u.concat(d)}return new s(u)}static extend(u){return{provide:s,useFactory:c=>s.create(u,c||ix()),deps:[[s,new Ko,new hi]]}}find(u){const c=this.factories.find(p=>p.supports(u));if(c)return c;throw new Oe(901,"")}}return s.\u0275prov=Xt({token:s,providedIn:"root",factory:ix}),s})();const ox=Ao(null,"core",[{provide:Cb,useValue:"unknown"},{provide:Lb,deps:[vo]},{provide:kb,deps:[]},{provide:Ib,deps:[]}]);let ax=(()=>{class s{constructor(u){}}return s.\u0275fac=function(u){return new(u||s)(Ye(_w))},s.\u0275mod=J({type:s}),s.\u0275inj=Jt({}),s})()},3942:(ot,De,F)=>{F.d(De,{Z:()=>Oe});var m=F(2090),Q=F(4859),O=F(9681),ae=F(1877);class ee{constructor(pe,Ce){this._delegate=pe,this.firebase=Ce,(0,O._addComponent)(pe,new Q.wA("app-compat",()=>this,"PUBLIC")),this.container=pe.container}get automaticDataCollectionEnabled(){return this._delegate.automaticDataCollectionEnabled}set automaticDataCollectionEnabled(pe){this._delegate.automaticDataCollectionEnabled=pe}get name(){return this._delegate.name}get options(){return this._delegate.options}delete(){return new Promise(pe=>{this._delegate.checkDestroyed(),pe()}).then(()=>(this.firebase.INTERNAL.removeApp(this.name),(0,O.deleteApp)(this._delegate)))}_getService(pe,Ce=O._DEFAULT_ENTRY_NAME){var nt;this._delegate.checkDestroyed();const Ke=this._delegate.container.getProvider(pe);return!Ke.isInitialized()&&"EXPLICIT"===(null===(nt=Ke.getComponent())||void 0===nt?void 0:nt.instantiationMode)&&Ke.initialize(),Ke.getImmediate({identifier:Ce})}_removeServiceInstance(pe,Ce=O._DEFAULT_ENTRY_NAME){this._delegate.container.getProvider(pe).clearInstance(Ce)}_addComponent(pe){(0,O._addComponent)(this._delegate,pe)}_addOrOverwriteComponent(pe){(0,O._addOrOverwriteComponent)(this._delegate,pe)}toJSON(){return{name:this.name,automaticDataCollectionEnabled:this.automaticDataCollectionEnabled,options:this.options}}}const se=new m.LL("app-compat","Firebase",{"no-app":"No Firebase App '{$appName}' has been created - call Firebase App.initializeApp()","invalid-app-argument":"firebase.{$appName}() takes either no argument or a Firebase App instance."}),W=function le(){const Ve=function he(Ve){const pe={},Ce={__esModule:!0,initializeApp:function Te(je,ne={}){const K=O.initializeApp(je,ne);if((0,m.r3)(pe,K.name))return pe[K.name];const re=new Ve(K,Ce);return pe[K.name]=re,re},app:Ke,registerVersion:O.registerVersion,setLogLevel:O.setLogLevel,onLog:O.onLog,apps:null,SDK_VERSION:O.SDK_VERSION,INTERNAL:{registerComponent:function Ee(je){const ne=je.name,K=ne.replace("-compat","");if(O._registerComponent(je)&&"PUBLIC"===je.type){const re=(_e=Ke())=>{if("function"!=typeof _e[K])throw se.create("invalid-app-argument",{appName:ne});return _e[K]()};void 0!==je.serviceProps&&(0,m.ZB)(re,je.serviceProps),Ce[K]=re,Ve.prototype[K]=function(..._e){return this._getService.bind(this,ne).apply(this,je.multipleInstances?_e:[])}}return"PUBLIC"===je.type?Ce[K]:null},removeApp:function nt(je){delete pe[je]},useAsService:function $e(je,ne){return"serverAuth"===ne?null:ne},modularAPIs:O}};function Ke(je){if(!(0,m.r3)(pe,je=je||O._DEFAULT_ENTRY_NAME))throw se.create("no-app",{appName:je});return pe[je]}return Ce.default=Ce,Object.defineProperty(Ce,"apps",{get:function we(){return Object.keys(pe).map(je=>pe[je])}}),Ke.App=Ve,Ce}(ee);return Ve.INTERNAL=Object.assign(Object.assign({},Ve.INTERNAL),{createFirebaseNamespace:le,extendNamespace:function pe(Ce){(0,m.ZB)(Ve,Ce)},createSubscribe:m.ne,ErrorFactory:m.LL,deepExtend:m.ZB}),Ve}(),G=new ae.Yd("@firebase/app-compat");if((0,m.jU)()&&void 0!==self.firebase){G.warn("\n    Warning: Firebase is already defined in the global scope. Please make sure\n    Firebase library is only loaded once.\n  ");const Ve=self.firebase.SDK_VERSION;Ve&&Ve.indexOf("LITE")>=0&&G.warn("\n    Warning: You are trying to load Firebase while using Firebase Performance standalone script.\n    You should load Firebase Performance with this instance of Firebase to avoid loading duplicate code.\n    ")}const Oe=W;!function Ae(Ve){(0,O.registerVersion)("@firebase/app-compat","0.1.21",Ve)}()},9681:(ot,De,F)=>{F.r(De),F.d(De,{FirebaseError:()=>ae.ZR,SDK_VERSION:()=>Nr,_DEFAULT_ENTRY_NAME:()=>Fn,_addComponent:()=>dn,_addOrOverwriteComponent:()=>Di,_apps:()=>gt,_clearComponents:()=>Ht,_components:()=>cn,_getProvider:()=>qi,_registerComponent:()=>Xt,_removeServiceInstance:()=>Jt,deleteApp:()=>Ki,getApp:()=>Pr,getApps:()=>ms,initializeApp:()=>zi,onLog:()=>nr,registerVersion:()=>$r,setLogLevel:()=>Yn});var m=F(5861),Q=F(4859),O=F(1877),ae=F(2090);class ee{constructor(Se){this.container=Se}getPlatformInfoString(){return this.container.getProviders().map(Je=>{if(function me(Ze){const Se=Ze.getComponent();return"VERSION"===(null==Se?void 0:Se.type)}(Je)){const ht=Je.getImmediate();return`${ht.library}/${ht.version}`}return null}).filter(Je=>Je).join(" ")}}const se="@firebase/app",le=new O.Yd("@firebase/app"),Fn="[DEFAULT]",at={[se]:"fire-core","@firebase/app-compat":"fire-core-compat","@firebase/analytics":"fire-analytics","@firebase/analytics-compat":"fire-analytics-compat","@firebase/app-check":"fire-app-check","@firebase/app-check-compat":"fire-app-check-compat","@firebase/auth":"fire-auth","@firebase/auth-compat":"fire-auth-compat","@firebase/database":"fire-rtdb","@firebase/database-compat":"fire-rtdb-compat","@firebase/functions":"fire-fn","@firebase/functions-compat":"fire-fn-compat","@firebase/installations":"fire-iid","@firebase/installations-compat":"fire-iid-compat","@firebase/messaging":"fire-fcm","@firebase/messaging-compat":"fire-fcm-compat","@firebase/performance":"fire-perf","@firebase/performance-compat":"fire-perf-compat","@firebase/remote-config":"fire-rc","@firebase/remote-config-compat":"fire-rc-compat","@firebase/storage":"fire-gcs","@firebase/storage-compat":"fire-gcs-compat","@firebase/firestore":"fire-fst","@firebase/firestore-compat":"fire-fst-compat","fire-js":"fire-js",firebase:"fire-js-all"},gt=new Map,cn=new Map;function dn(Ze,Se){try{Ze.container.addComponent(Se)}catch(Je){le.debug(`Component ${Se.name} failed to register with FirebaseApp ${Ze.name}`,Je)}}function Di(Ze,Se){Ze.container.addOrOverwriteComponent(Se)}function Xt(Ze){const Se=Ze.name;if(cn.has(Se))return le.debug(`There were multiple attempts to register component ${Se}.`),!1;cn.set(Se,Ze);for(const Je of gt.values())dn(Je,Ze);return!0}function qi(Ze,Se){const Je=Ze.container.getProvider("heartbeat").getImmediate({optional:!0});return Je&&Je.triggerHeartbeat(),Ze.container.getProvider(Se)}function Jt(Ze,Se,Je=Fn){qi(Ze,Se).clearInstance(Je)}function Ht(){cn.clear()}const Hr=new ae.LL("app","Firebase",{"no-app":"No Firebase App '{$appName}' has been created - call Firebase App.initializeApp()","bad-app-name":"Illegal App name: '{$appName}","duplicate-app":"Firebase App named '{$appName}' already exists with different options or config","app-deleted":"Firebase App named '{$appName}' already deleted","invalid-app-argument":"firebase.{$appName}() takes either no argument or a Firebase App instance.","invalid-log-argument":"First argument to `onLog` must be null or a function.","storage-open":"Error thrown when opening storage. Original error: {$originalErrorMessage}.","storage-get":"Error thrown when reading from storage. Original error: {$originalErrorMessage}.","storage-set":"Error thrown when writing to storage. Original error: {$originalErrorMessage}.","storage-delete":"Error thrown when deleting from storage. Original error: {$originalErrorMessage}."});class Ws{constructor(Se,Je,ht){this._isDeleted=!1,this._options=Object.assign({},Se),this._config=Object.assign({},Je),this._name=Je.name,this._automaticDataCollectionEnabled=Je.automaticDataCollectionEnabled,this._container=ht,this.container.addComponent(new Q.wA("app",()=>this,"PUBLIC"))}get automaticDataCollectionEnabled(){return this.checkDestroyed(),this._automaticDataCollectionEnabled}set automaticDataCollectionEnabled(Se){this.checkDestroyed(),this._automaticDataCollectionEnabled=Se}get name(){return this.checkDestroyed(),this._name}get options(){return this.checkDestroyed(),this._options}get config(){return this.checkDestroyed(),this._config}get container(){return this._container}get isDeleted(){return this._isDeleted}set isDeleted(Se){this._isDeleted=Se}checkDestroyed(){if(this.isDeleted)throw Hr.create("app-deleted",{appName:this._name})}}const Nr="9.6.10";function zi(Ze,Se={}){"object"!=typeof Se&&(Se={name:Se});const Je=Object.assign({name:Fn,automaticDataCollectionEnabled:!1},Se),ht=Je.name;if("string"!=typeof ht||!ht)throw Hr.create("bad-app-name",{appName:String(ht)});const Bt=gt.get(ht);if(Bt){if((0,ae.vZ)(Ze,Bt.options)&&(0,ae.vZ)(Je,Bt.config))return Bt;throw Hr.create("duplicate-app",{appName:ht})}const Lt=new Q.H0(ht);for(const B of cn.values())Lt.addComponent(B);const $=new Ws(Ze,Je,Lt);return gt.set(ht,$),$}function Pr(Ze=Fn){const Se=gt.get(Ze);if(!Se)throw Hr.create("no-app",{appName:Ze});return Se}function ms(){return Array.from(gt.values())}function Ki(Ze){return lt.apply(this,arguments)}function lt(){return(lt=(0,m.Z)(function*(Ze){const Se=Ze.name;gt.has(Se)&&(gt.delete(Se),yield Promise.all(Ze.container.getProviders().map(Je=>Je.delete())),Ze.isDeleted=!0)})).apply(this,arguments)}function $r(Ze,Se,Je){var ht;let Bt=null!==(ht=at[Ze])&&void 0!==ht?ht:Ze;Je&&(Bt+=`-${Je}`);const Lt=Bt.match(/\s|\//),$=Se.match(/\s|\//);if(Lt||$){const B=[`Unable to register library "${Bt}" with version "${Se}":`];return Lt&&B.push(`library name "${Bt}" contains illegal characters (whitespace or "/")`),Lt&&$&&B.push("and"),$&&B.push(`version name "${Se}" contains illegal characters (whitespace or "/")`),void le.warn(B.join(" "))}Xt(new Q.wA(`${Bt}-version`,()=>({library:Bt,version:Se}),"VERSION"))}function nr(Ze,Se){if(null!==Ze&&"function"!=typeof Ze)throw Hr.create("invalid-log-argument");(0,O.Am)(Ze,Se)}function Yn(Ze){(0,O.Ub)(Ze)}const vn="firebase-heartbeat-store";let rr=null;function _s(){return rr||(rr=(0,ae.X3)("firebase-heartbeat-database",1,(Ze,Se)=>{0===Se&&Ze.createObjectStore(vn)}).catch(Ze=>{throw Hr.create("storage-open",{originalErrorMessage:Ze.message})})),rr}function $t(){return($t=(0,m.Z)(function*(Ze){try{return(yield _s()).transaction(vn).objectStore(vn).get(lr(Ze))}catch(Se){throw Hr.create("storage-get",{originalErrorMessage:Se.message})}})).apply(this,arguments)}function it(Ze,Se){return Et.apply(this,arguments)}function Et(){return(Et=(0,m.Z)(function*(Ze,Se){try{const ht=(yield _s()).transaction(vn,"readwrite");return yield ht.objectStore(vn).put(Se,lr(Ze)),ht.complete}catch(Je){throw Hr.create("storage-set",{originalErrorMessage:Je.message})}})).apply(this,arguments)}function lr(Ze){return`${Ze.name}!${Ze.options.appId}`}class Mo{constructor(Se){this.container=Se,this._heartbeatsCache=null;const Je=this.container.getProvider("app").getImmediate();this._storage=new dt(Je),this._heartbeatsCachePromise=this._storage.read().then(ht=>(this._heartbeatsCache=ht,ht))}triggerHeartbeat(){var Se=this;return(0,m.Z)(function*(){const ht=Se.container.getProvider("platform-logger").getImmediate().getPlatformInfoString(),Bt=wr();if(null===Se._heartbeatsCache&&(Se._heartbeatsCache=yield Se._heartbeatsCachePromise),Se._heartbeatsCache.lastSentHeartbeatDate!==Bt&&!Se._heartbeatsCache.heartbeats.some(Lt=>Lt.date===Bt))return Se._heartbeatsCache.heartbeats.push({date:Bt,agent:ht}),Se._heartbeatsCache.heartbeats=Se._heartbeatsCache.heartbeats.filter(Lt=>{const $=new Date(Lt.date).valueOf();return Date.now()-$<=2592e6}),Se._storage.overwrite(Se._heartbeatsCache)})()}getHeartbeatsHeader(){var Se=this;return(0,m.Z)(function*(){if(null===Se._heartbeatsCache&&(yield Se._heartbeatsCachePromise),null===Se._heartbeatsCache||0===Se._heartbeatsCache.heartbeats.length)return"";const Je=wr(),{heartbeatsToSend:ht,unsentEntries:Bt}=function cr(Ze,Se=1024){const Je=[];let ht=Ze.slice();for(const Bt of Ze){const Lt=Je.find($=>$.agent===Bt.agent);if(Lt){if(Lt.dates.push(Bt.date),Er(Je)>Se){Lt.dates.pop();break}}else if(Je.push({agent:Bt.agent,dates:[Bt.date]}),Er(Je)>Se){Je.pop();break}ht=ht.slice(1)}return{heartbeatsToSend:Je,unsentEntries:ht}}(Se._heartbeatsCache.heartbeats),Lt=(0,ae.L)(JSON.stringify({version:2,heartbeats:ht}));return Se._heartbeatsCache.lastSentHeartbeatDate=Je,Bt.length>0?(Se._heartbeatsCache.heartbeats=Bt,yield Se._storage.overwrite(Se._heartbeatsCache)):(Se._heartbeatsCache.heartbeats=[],Se._storage.overwrite(Se._heartbeatsCache)),Lt})()}}function wr(){return(new Date).toISOString().substring(0,10)}class dt{constructor(Se){this.app=Se,this._canUseIndexedDBPromise=this.runIndexedDBEnvironmentCheck()}runIndexedDBEnvironmentCheck(){return(0,m.Z)(function*(){return!!(0,ae.hl)()&&(0,ae.eu)().then(()=>!0).catch(()=>!1)})()}read(){var Se=this;return(0,m.Z)(function*(){return(yield Se._canUseIndexedDBPromise)&&(yield function ha(Ze){return $t.apply(this,arguments)}(Se.app))||{heartbeats:[]}})()}overwrite(Se){var Je=this;return(0,m.Z)(function*(){var ht;if(yield Je._canUseIndexedDBPromise){const Lt=yield Je.read();return it(Je.app,{lastSentHeartbeatDate:null!==(ht=Se.lastSentHeartbeatDate)&&void 0!==ht?ht:Lt.lastSentHeartbeatDate,heartbeats:Se.heartbeats})}})()}add(Se){var Je=this;return(0,m.Z)(function*(){var ht;if(yield Je._canUseIndexedDBPromise){const Lt=yield Je.read();return it(Je.app,{lastSentHeartbeatDate:null!==(ht=Se.lastSentHeartbeatDate)&&void 0!==ht?ht:Lt.lastSentHeartbeatDate,heartbeats:[...Lt.heartbeats,...Se.heartbeats]})}})()}}function Er(Ze){return(0,ae.L)(JSON.stringify({version:2,heartbeats:Ze})).length}!function Ut(Ze){Xt(new Q.wA("platform-logger",Se=>new ee(Se),"PRIVATE")),Xt(new Q.wA("heartbeat",Se=>new Mo(Se),"PRIVATE")),$r(se,"0.7.20",Ze),$r(se,"0.7.20","esm2017"),$r("fire-js","")}("")},4859:(ot,De,F)=>{F.d(De,{H0:()=>he,wA:()=>O,zt:()=>ee});var m=F(5861),Q=F(2090);class O{constructor(W,G,X){this.name=W,this.instanceFactory=G,this.type=X,this.multipleInstances=!1,this.serviceProps={},this.instantiationMode="LAZY",this.onInstanceCreated=null}setInstantiationMode(W){return this.instantiationMode=W,this}setMultipleInstances(W){return this.multipleInstances=W,this}setServiceProps(W){return this.serviceProps=W,this}setInstanceCreatedCallback(W){return this.onInstanceCreated=W,this}}const ae="[DEFAULT]";class ee{constructor(W,G){this.name=W,this.container=G,this.component=null,this.instances=new Map,this.instancesDeferred=new Map,this.instancesOptions=new Map,this.onInitCallbacks=new Map}get(W){const G=this.normalizeInstanceIdentifier(W);if(!this.instancesDeferred.has(G)){const X=new Q.BH;if(this.instancesDeferred.set(G,X),this.isInitialized(G)||this.shouldAutoInitialize())try{const qe=this.getOrInitializeService({instanceIdentifier:G});qe&&X.resolve(qe)}catch(qe){}}return this.instancesDeferred.get(G).promise}getImmediate(W){var G;const X=this.normalizeInstanceIdentifier(null==W?void 0:W.identifier),qe=null!==(G=null==W?void 0:W.optional)&&void 0!==G&&G;if(!this.isInitialized(X)&&!this.shouldAutoInitialize()){if(qe)return null;throw Error(`Service ${this.name} is not available`)}try{return this.getOrInitializeService({instanceIdentifier:X})}catch(Ae){if(qe)return null;throw Ae}}getComponent(){return this.component}setComponent(W){if(W.name!==this.name)throw Error(`Mismatching Component ${W.name} for Provider ${this.name}.`);if(this.component)throw Error(`Component for ${this.name} has already been provided`);if(this.component=W,this.shouldAutoInitialize()){if(function se(le){return"EAGER"===le.instantiationMode}(W))try{this.getOrInitializeService({instanceIdentifier:ae})}catch(G){}for(const[G,X]of this.instancesDeferred.entries()){const qe=this.normalizeInstanceIdentifier(G);try{const Ae=this.getOrInitializeService({instanceIdentifier:qe});X.resolve(Ae)}catch(Ae){}}}}clearInstance(W=ae){this.instancesDeferred.delete(W),this.instancesOptions.delete(W),this.instances.delete(W)}delete(){var W=this;return(0,m.Z)(function*(){const G=Array.from(W.instances.values());yield Promise.all([...G.filter(X=>"INTERNAL"in X).map(X=>X.INTERNAL.delete()),...G.filter(X=>"_delete"in X).map(X=>X._delete())])})()}isComponentSet(){return null!=this.component}isInitialized(W=ae){return this.instances.has(W)}getOptions(W=ae){return this.instancesOptions.get(W)||{}}initialize(W={}){const{options:G={}}=W,X=this.normalizeInstanceIdentifier(W.instanceIdentifier);if(this.isInitialized(X))throw Error(`${this.name}(${X}) has already been initialized`);if(!this.isComponentSet())throw Error(`Component ${this.name} has not been registered yet`);const qe=this.getOrInitializeService({instanceIdentifier:X,options:G});for(const[Ae,Oe]of this.instancesDeferred.entries())X===this.normalizeInstanceIdentifier(Ae)&&Oe.resolve(qe);return qe}onInit(W,G){var X;const qe=this.normalizeInstanceIdentifier(G),Ae=null!==(X=this.onInitCallbacks.get(qe))&&void 0!==X?X:new Set;Ae.add(W),this.onInitCallbacks.set(qe,Ae);const Oe=this.instances.get(qe);return Oe&&W(Oe,qe),()=>{Ae.delete(W)}}invokeOnInitCallbacks(W,G){const X=this.onInitCallbacks.get(G);if(X)for(const qe of X)try{qe(W,G)}catch(Ae){}}getOrInitializeService({instanceIdentifier:W,options:G={}}){let X=this.instances.get(W);if(!X&&this.component&&(X=this.component.instanceFactory(this.container,{instanceIdentifier:(le=W,le===ae?void 0:le),options:G}),this.instances.set(W,X),this.instancesOptions.set(W,G),this.invokeOnInitCallbacks(X,W),this.component.onInstanceCreated))try{this.component.onInstanceCreated(this.container,W,X)}catch(qe){}var le;return X||null}normalizeInstanceIdentifier(W=ae){return this.component?this.component.multipleInstances?W:ae:W}shouldAutoInitialize(){return!!this.component&&"EXPLICIT"!==this.component.instantiationMode}}class he{constructor(W){this.name=W,this.providers=new Map}addComponent(W){const G=this.getProvider(W.name);if(G.isComponentSet())throw new Error(`Component ${W.name} has already been registered with ${this.name}`);G.setComponent(W)}addOrOverwriteComponent(W){this.getProvider(W.name).isComponentSet()&&this.providers.delete(W.name),this.addComponent(W)}getProvider(W){if(this.providers.has(W))return this.providers.get(W);const G=new ee(W,this);return this.providers.set(W,G),G}getProviders(){return Array.from(this.providers.values())}}},1877:(ot,De,F)=>{F.d(De,{Am:()=>le,Ub:()=>he,Yd:()=>se,in:()=>Q});const m=[];var Q=(()=>{return(W=Q||(Q={}))[W.DEBUG=0]="DEBUG",W[W.VERBOSE=1]="VERBOSE",W[W.INFO=2]="INFO",W[W.WARN=3]="WARN",W[W.ERROR=4]="ERROR",W[W.SILENT=5]="SILENT",Q;var W})();const O={debug:Q.DEBUG,verbose:Q.VERBOSE,info:Q.INFO,warn:Q.WARN,error:Q.ERROR,silent:Q.SILENT},ae=Q.INFO,ee={[Q.DEBUG]:"log",[Q.VERBOSE]:"log",[Q.INFO]:"info",[Q.WARN]:"warn",[Q.ERROR]:"error"},me=(W,G,...X)=>{if(G<W.logLevel)return;const qe=(new Date).toISOString(),Ae=ee[G];if(!Ae)throw new Error(`Attempted to log a message with an invalid logType (value: ${G})`);console[Ae](`[${qe}]  ${W.name}:`,...X)};class se{constructor(G){this.name=G,this._logLevel=ae,this._logHandler=me,this._userLogHandler=null,m.push(this)}get logLevel(){return this._logLevel}set logLevel(G){if(!(G in Q))throw new TypeError(`Invalid value "${G}" assigned to \`logLevel\``);this._logLevel=G}setLogLevel(G){this._logLevel="string"==typeof G?O[G]:G}get logHandler(){return this._logHandler}set logHandler(G){if("function"!=typeof G)throw new TypeError("Value assigned to `logHandler` must be a function");this._logHandler=G}get userLogHandler(){return this._userLogHandler}set userLogHandler(G){this._userLogHandler=G}debug(...G){this._userLogHandler&&this._userLogHandler(this,Q.DEBUG,...G),this._logHandler(this,Q.DEBUG,...G)}log(...G){this._userLogHandler&&this._userLogHandler(this,Q.VERBOSE,...G),this._logHandler(this,Q.VERBOSE,...G)}info(...G){this._userLogHandler&&this._userLogHandler(this,Q.INFO,...G),this._logHandler(this,Q.INFO,...G)}warn(...G){this._userLogHandler&&this._userLogHandler(this,Q.WARN,...G),this._logHandler(this,Q.WARN,...G)}error(...G){this._userLogHandler&&this._userLogHandler(this,Q.ERROR,...G),this._logHandler(this,Q.ERROR,...G)}}function he(W){m.forEach(G=>{G.setLogLevel(W)})}function le(W,G){for(const X of m){let qe=null;G&&G.level&&(qe=O[G.level]),X.userLogHandler=null===W?null:(Ae,Oe,...Ve)=>{const pe=Ve.map(Ce=>{if(null==Ce)return null;if("string"==typeof Ce)return Ce;if("number"==typeof Ce||"boolean"==typeof Ce)return Ce.toString();if(Ce instanceof Error)return Ce.message;try{return JSON.stringify(Ce)}catch(nt){return null}}).filter(Ce=>Ce).join(" ");Oe>=(null!=qe?qe:Ae.logLevel)&&W({level:Q[Oe].toLowerCase(),message:pe,args:Ve,type:Ae.name})}}}},5861:(ot,De,F)=>{function m(O,ae,ee,me,se,he,le){try{var W=O[he](le),G=W.value}catch(X){return void ee(X)}W.done?ae(G):Promise.resolve(G).then(me,se)}function Q(O){return function(){var ae=this,ee=arguments;return new Promise(function(me,se){var he=O.apply(ae,ee);function le(G){m(he,me,se,le,W,"next",G)}function W(G){m(he,me,se,le,W,"throw",G)}le(void 0)})}}F.d(De,{Z:()=>Q})}},ot=>{ot(ot.s=8705)}]);